<!DOCTYPE html><html><head><meta charSet="UTF-8"/><link rel="icon" href="https://indepth.dev/favicon.png"/><link rel="preconnect" href="https://fonts.gstatic.com"/><link rel="stylesheet" data-href="https://fonts.googleapis.com/css2?family=Inconsolata:wght@300;400;500;700&amp;display=swap" data-optimized-fonts="true"/><meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover"/><script async="" src="https://www.googletagmanager.com/gtag/js?id=G-Y4GJD1JV6C"></script><script>
            window.dataLayer = window.dataLayer || [];
            function gtag(){dataLayer.push(arguments);}
            gtag('js', new Date());
            gtag('config', 'G-Y4GJD1JV6C');
          </script><script defer="" data-domain="indepth.dev" src="https://plausible.io/js/plausible.js"></script><title>Exploring Angular DOM manipulation techniques using ViewContainerRef - Angular inDepth</title><link rel="canonical" href="https://indepth.dev/posts/1052/exploring-angular-dom-manipulation-techniques-using-viewcontainerref"/><meta name="description" content="The article explores common elements used for DOM manipulation in Angular with a particular focus on ViewContainerRef. Learn why they are needed, how they work and when you need to use which."/><meta property="og:site_name" content="inDepthDev"/><meta property="og:type" content="article"/><meta property="og:title" content="Exploring Angular DOM manipulation techniques using ViewContainerRef - Angular inDepth"/><meta property="og:description" content="The article explores common elements used for DOM manipulation in Angular with a particular focus on ViewContainerRef. Learn why they are needed, how they work and when you need to use which."/><meta property="og:url" content="https://indepth.dev/posts/1052/exploring-angular-dom-manipulation-techniques-using-viewcontainerref"/><meta name="twitter:title" content="Exploring Angular DOM manipulation techniques using ViewContainerRef - Angular inDepth"/><meta name="twitter:description" content="The article explores common elements used for DOM manipulation in Angular with a particular focus on ViewContainerRef. Learn why they are needed, how they work and when you need to use which."/><meta name="twitter:url" content="https://indepth.dev/posts/1052/exploring-angular-dom-manipulation-techniques-using-viewcontainerref"/><meta name="twitter:site" content="https://twitter.com/indepth_dev/"/><meta name="twitter:creator" content="@indepth_dev"/><meta name="twitter:card" content="summary_large_image"/><meta name="twitter:image" content="https://images.indepth.dev/images/2020/10/Exploring-Angular-DOM-manipulation-techniques-using-ViewContainerRef-white.png"/><meta property="og:image" content="https://images.indepth.dev/images/2020/10/Exploring-Angular-DOM-manipulation-techniques-using-ViewContainerRef-white.png"/><meta property="og:image:width" content="505"/><meta property="og:image:height" content="265"/><meta name="next-head-count" content="26"/><link rel="preload" href="/_next/static/css/66b4fe688253556e50ac.css" as="style"/><link rel="stylesheet" href="/_next/static/css/66b4fe688253556e50ac.css" data-n-g=""/><link rel="preload" href="/_next/static/css/35058bf3ee6acc8d808b.css" as="style"/><link rel="stylesheet" href="/_next/static/css/35058bf3ee6acc8d808b.css" data-n-p=""/><link rel="preload" href="/_next/static/css/f71ef6afc8c3cb3ec8c1.css" as="style"/><link rel="stylesheet" href="/_next/static/css/f71ef6afc8c3cb3ec8c1.css" data-n-p=""/><link rel="preload" href="/_next/static/css/f6003c9d372856452fa2.css" as="style"/><link rel="stylesheet" href="/_next/static/css/f6003c9d372856452fa2.css" data-n-p=""/><noscript data-n-css=""></noscript><link rel="preload" href="/_next/static/chunks/webpack-856b8207c163cd7c3d15.js" as="script"/><link rel="preload" href="/_next/static/chunks/framework.00682290c82ab9e4c725.js" as="script"/><link rel="preload" href="/_next/static/chunks/ef4fb35a947a2b84c70247a977ca030d982645e5.1375806317f992dcaef2.js" as="script"/><link rel="preload" href="/_next/static/chunks/125d3b0e21a6b73f1af8f05d67b65091080109e7.4b7c534621a41e0014c2.js" as="script"/><link rel="preload" href="/_next/static/chunks/main-7a564c67f808345d71b7.js" as="script"/><link rel="preload" href="/_next/static/chunks/3f4d35958c889996dc6a89adc8c568f525dcca2f.115d0c9540e8ad25778c.js" as="script"/><link rel="preload" href="/_next/static/chunks/33333ed7c72b7c5f0328d362594a8fde0748e556.89370d1dd1d64a48361e.js" as="script"/><link rel="preload" href="/_next/static/chunks/4a73902f4e5293a2a456800e2c90b2df21e61e8c.ac0ac1bdd37639b787e6.js" as="script"/><link rel="preload" href="/_next/static/chunks/0f33f4af056ca188bb25f0a8e46a6ba44ea51fea.ed4b442ed583ce4a22f6.js" as="script"/><link rel="preload" href="/_next/static/chunks/pages/_app-4865e99f5ffe990eafd1.js" as="script"/><link rel="preload" href="/_next/static/chunks/6016378542ccab9ace7b0f516bab1ccd305127a2.520c7969e4d84d13c175.js" as="script"/><link rel="preload" href="/_next/static/chunks/a97a4e334284941b676644ab50b32734694a25b1.db3bbb890d21262281bf.js" as="script"/><link rel="preload" href="/_next/static/chunks/7304e85ffd654966cc22fcd79fbd623a90f148ba.0ddc8b6da9ee9927d483.js" as="script"/><link rel="preload" href="/_next/static/chunks/d3ecd2998afccbe384f6be1144729524e058db15.9b443bac523215019128.js" as="script"/><link rel="preload" href="/_next/static/chunks/4f8a4dba8efb158c2c8775fe8e83bcf611fac19f.f8e0cca8325f75245df6.js" as="script"/><link rel="preload" href="/_next/static/chunks/b572927ff359f612463b475ced2612aa31c8a8e5.4bde6eb91ee3720724cc.js" as="script"/><link rel="preload" href="/_next/static/chunks/b572927ff359f612463b475ced2612aa31c8a8e5_CSS.6164c81b6ed04bb13dbd.js" as="script"/><link rel="preload" href="/_next/static/chunks/d1416cc233fae1398c68355baa71163a6c28c85d.178dcf1202156b893f85.js" as="script"/><link rel="preload" href="/_next/static/chunks/3ee32958cf711083ff89cd5c1c32184781f5f363.a6bfd25ef4e7a0da7256.js" as="script"/><link rel="preload" href="/_next/static/chunks/13fbcad85699d91d35c158198523365d1a43e10e.4d6822e657e8ab54c624.js" as="script"/><link rel="preload" href="/_next/static/chunks/8cd0266693d4ff21030fff806b8813080260b103.80667331b8607ac89cbf.js" as="script"/><link rel="preload" href="/_next/static/chunks/8cd0266693d4ff21030fff806b8813080260b103_CSS.8507eabb49fbf1273205.js" as="script"/><link rel="preload" href="/_next/static/chunks/pages/posts/%5Bid%5D/%5Bslug%5D-a0d573f8beed5f83aea7.js" as="script"/><style data-href="https://fonts.googleapis.com/css2?family=Inconsolata:wght@300;400;500;700&display=swap">@font-face{font-family:'Inconsolata';font-style:normal;font-weight:300;font-stretch:normal;font-display:swap;src:url(https://fonts.gstatic.com/s/inconsolata/v31/QldgNThLqRwH-OJ1UHjlKENVzkWGVkL3GZQmAwLYxYWI2qfdm7Lpp9s8aRk.woff) format('woff')}@font-face{font-family:'Inconsolata';font-style:normal;font-weight:400;font-stretch:normal;font-display:swap;src:url(https://fonts.gstatic.com/s/inconsolata/v31/QldgNThLqRwH-OJ1UHjlKENVzkWGVkL3GZQmAwLYxYWI2qfdm7Lpp4U8aRk.woff) format('woff')}@font-face{font-family:'Inconsolata';font-style:normal;font-weight:500;font-stretch:normal;font-display:swap;src:url(https://fonts.gstatic.com/s/inconsolata/v31/QldgNThLqRwH-OJ1UHjlKENVzkWGVkL3GZQmAwLYxYWI2qfdm7Lpp7c8aRk.woff) format('woff')}@font-face{font-family:'Inconsolata';font-style:normal;font-weight:700;font-stretch:normal;font-display:swap;src:url(https://fonts.gstatic.com/s/inconsolata/v31/QldgNThLqRwH-OJ1UHjlKENVzkWGVkL3GZQmAwLYxYWI2qfdm7Lpp2I7aRk.woff) format('woff')}@font-face{font-family:'Inconsolata';font-style:normal;font-weight:300;font-stretch:100%;font-display:swap;src:url(https://fonts.gstatic.com/s/inconsolata/v31/QlddNThLqRwH-OJ1UHjlKENVzkWGVkL3GZQmAwLyxq15IDhunJ_o.woff2) format('woff2');unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+1EA0-1EF9,U+20AB}@font-face{font-family:'Inconsolata';font-style:normal;font-weight:300;font-stretch:100%;font-display:swap;src:url(https://fonts.gstatic.com/s/inconsolata/v31/QlddNThLqRwH-OJ1UHjlKENVzkWGVkL3GZQmAwLyx615IDhunJ_o.woff2) format('woff2');unicode-range:U+0100-024F,U+0259,U+1E00-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:'Inconsolata';font-style:normal;font-weight:300;font-stretch:100%;font-display:swap;src:url(https://fonts.gstatic.com/s/inconsolata/v31/QlddNThLqRwH-OJ1UHjlKENVzkWGVkL3GZQmAwLyya15IDhunA.woff2) format('woff2');unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:'Inconsolata';font-style:normal;font-weight:400;font-stretch:100%;font-display:swap;src:url(https://fonts.gstatic.com/s/inconsolata/v31/QlddNThLqRwH-OJ1UHjlKENVzkWGVkL3GZQmAwLyxq15IDhunJ_o.woff2) format('woff2');unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+1EA0-1EF9,U+20AB}@font-face{font-family:'Inconsolata';font-style:normal;font-weight:400;font-stretch:100%;font-display:swap;src:url(https://fonts.gstatic.com/s/inconsolata/v31/QlddNThLqRwH-OJ1UHjlKENVzkWGVkL3GZQmAwLyx615IDhunJ_o.woff2) format('woff2');unicode-range:U+0100-024F,U+0259,U+1E00-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:'Inconsolata';font-style:normal;font-weight:400;font-stretch:100%;font-display:swap;src:url(https://fonts.gstatic.com/s/inconsolata/v31/QlddNThLqRwH-OJ1UHjlKENVzkWGVkL3GZQmAwLyya15IDhunA.woff2) format('woff2');unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:'Inconsolata';font-style:normal;font-weight:500;font-stretch:100%;font-display:swap;src:url(https://fonts.gstatic.com/s/inconsolata/v31/QlddNThLqRwH-OJ1UHjlKENVzkWGVkL3GZQmAwLyxq15IDhunJ_o.woff2) format('woff2');unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+1EA0-1EF9,U+20AB}@font-face{font-family:'Inconsolata';font-style:normal;font-weight:500;font-stretch:100%;font-display:swap;src:url(https://fonts.gstatic.com/s/inconsolata/v31/QlddNThLqRwH-OJ1UHjlKENVzkWGVkL3GZQmAwLyx615IDhunJ_o.woff2) format('woff2');unicode-range:U+0100-024F,U+0259,U+1E00-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:'Inconsolata';font-style:normal;font-weight:500;font-stretch:100%;font-display:swap;src:url(https://fonts.gstatic.com/s/inconsolata/v31/QlddNThLqRwH-OJ1UHjlKENVzkWGVkL3GZQmAwLyya15IDhunA.woff2) format('woff2');unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:'Inconsolata';font-style:normal;font-weight:700;font-stretch:100%;font-display:swap;src:url(https://fonts.gstatic.com/s/inconsolata/v31/QlddNThLqRwH-OJ1UHjlKENVzkWGVkL3GZQmAwLyxq15IDhunJ_o.woff2) format('woff2');unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+1EA0-1EF9,U+20AB}@font-face{font-family:'Inconsolata';font-style:normal;font-weight:700;font-stretch:100%;font-display:swap;src:url(https://fonts.gstatic.com/s/inconsolata/v31/QlddNThLqRwH-OJ1UHjlKENVzkWGVkL3GZQmAwLyx615IDhunJ_o.woff2) format('woff2');unicode-range:U+0100-024F,U+0259,U+1E00-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:'Inconsolata';font-style:normal;font-weight:700;font-stretch:100%;font-display:swap;src:url(https://fonts.gstatic.com/s/inconsolata/v31/QlddNThLqRwH-OJ1UHjlKENVzkWGVkL3GZQmAwLyya15IDhunA.woff2) format('woff2');unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}</style></head><body><div id="__next"><div class="_app_global_wrapper__2e43D"><header class="Header_header__3V_Bw"><div class="d-none d-lg-block Header_header_desktop__2JUnu"><div class="Header_header_desktop_section_top__yrjQ_"><div class="Header_header_desktop_logo__1Avfp"><a class="logo" href="/">Logo</a></div><ul class="Header_header_desktop_menu_top__2nwnb nav"><li class="Header_header_desktop_menu_top_dropDown__1pKSX d-flex align-items-center position-relative nav-item"><div class="Header_chevron_wrapper__2GH-M"><span class="Header_header_desktop_menu_item__9Tukl Header_header_desktop_menu_item_top__YSTdA">Learn</span><span class="Header_chevron_down__3_DVg"></span></div><div class="Header_header_desktop_menu_top_dropDown_wrapper__2JrzK"><div class="DropDown_wrapper__3Umpl DropDown_wrapper_open__31-I3 DropDown_theme__dark-blue__2XNIW DropDown_shadow__1BOms" style="top:53px;left:-5px"><ul class="nav"><li class="Header_header_desktop_menu_top_dropDown_item__McLmb nav-item"><a href="/">Articles</a></li><li class="Header_header_desktop_menu_top_dropDown_item__McLmb nav-item"><a href="/reference">Reference</a></li><li class="Header_header_desktop_menu_top_dropDown_item__McLmb nav-item"><a href="/tutorials">Tutorials</a></li></ul></div></div></li><li class="d-flex align-items-center position-relative Header_jobs__1Riru  nav-item"><span class="Header_new__143ap">New</span><a href="https://jobs.indepth.dev" class="Header_header_desktop_menu_item_top__YSTdA Header_external_link__1VFdO">Find Job</a></li><li class="Header_header_desktop_menu_top_dropDown__1pKSX d-flex align-items-center position-relative nav-item"><div class="Header_chevron_wrapper__2GH-M"><span class="Header_header_desktop_menu_item__9Tukl Header_header_desktop_menu_item_top__YSTdA">Stay connected</span><span class="Header_chevron_down__3_DVg"></span></div><div class="Header_header_desktop_menu_top_dropDown_wrapper__2JrzK"><div class="DropDown_wrapper__3Umpl DropDown_wrapper_open__31-I3 DropDown_theme__dark-blue__2XNIW DropDown_shadow__1BOms" style="top:53px;left:-5px"><ul class="nav"><li class="Header_header_desktop_menu_top_dropDown_item__McLmb nav-item"><a href="https://github.com/indepth-dev/content/discussions" target="_blank" rel="noopener noreferrer">Community</a></li><li class="Header_header_desktop_menu_top_dropDown_item__McLmb nav-item"><a href="/about">About Us</a></li></ul></div></div></li><li class="Header_contribute__1UfFF nav-item"><a class="Header_header_desktop_menu_item_top__YSTdA Header_header_desktop_menu_item_top_writer__2Dk0i" href="/contribute">Contribute</a></li></ul><div class="Header_header_desktop_profile__3joJv"><div class="ProfileHeader_wrapper__1tMnk"></div></div></div><div class="Header_header_desktop_section_bottom__jhpXq"><span class="Header_header_directory_title__1ioT8">articles</span><ul class="Header_header_desktop_menu_bottom__2WMHO nav"><li class="Header_improve_jobs__3m48h nav-item"><div><a style="text-decoration:none" href="https://bank.gov.ua/en/news/all/natsionalniy-bank-vidkriv-spetsrahunok-dlya-zboru-koshtiv-na-potrebi-armiyi" target="_blank" rel="noopener noreferrer"><div style="font-size:18px"><span>Help Ukraine withstand Russia&#x27;s attack.</span><span style="border-bottom:1px solid;margin-left:5px">Donate now</span><svg width="24" height="24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M3.893 13.11c2.508 2.527 5.032 5.044 7.548 7.564.39.39.736.39 1.125.003l3.75-3.753c1.287-1.287 2.577-2.565 3.852-3.855.345-.349.641-.716.885-1.099H2.97c.259.405.57.787.923 1.14z" fill="#F9ED2E"></path><path d="M21.758 7.485c-.387-1.706-1.448-2.94-2.997-3.716-1.96-.983-3.918-.975-5.816.199-.337.21-.63.483-.937.723-.334-.243-.668-.517-1.028-.746-1.297-.817-2.704-1.117-4.211-.772-1.639.378-2.895 1.316-3.795 2.722C2.23 7.058 1.93 8.34 2.13 9.713c.12.832.409 1.582.84 2.257h18.083c.847-1.324 1.076-2.831.705-4.485z" fill="#31BBED"></path></svg></div></a></div></li><li class="nav-item"><div class="HeaderSearch_wrapper__3AWhU"><svg width="20" height="21" fill="none" xmlns="http://www.w3.org/2000/svg" class="svg-aquamarine-hover" role="button" tabindex="0"><path d="M19 19.5l-4.35-4.35M17 9.5a8 8 0 11-16 0 8 8 0 0116 0z" stroke="#fff" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path></svg><input type="text" placeholder="Search on inDepthDev" name="query" class="HeaderSearch_input__3K1Y6 HeaderSearch_input__closed__1agvh"/></div><div class="HeaderSearch_mobile_search__35DMb"><input type="text" name="query"/><svg width="20" height="21" fill="none" xmlns="http://www.w3.org/2000/svg" class="svg-orange" role="button" tabindex="0"><path d="M19 19.5l-4.35-4.35M17 9.5a8 8 0 11-16 0 8 8 0 0116 0z" stroke="#fff" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path></svg></div></li><li class="nav-item"><a rel="noreferrer" class="Header_header_desktop_menu_item__9Tukl undefined" href="/angular"><svg width="30" height="30" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M15 4.533L4.697 8.207l1.571 13.624L15 26.667l8.732-4.836 1.571-13.624L15 4.533z" fill="#DD0031"></path><path d="M15 4.533V6.99v-.011V26.667l8.732-4.836 1.571-13.624L15 4.533z" fill="#C3002F"></path><path d="M15 6.979L8.56 21.421h2.4l1.295-3.231h5.467l1.295 3.231h2.402L15 6.98zm1.881 9.219H13.12L15 11.67l1.881 4.527z" fill="#fff"></path></svg><span>Angular</span></a></li><li class="nav-item"><a class="Header_header_desktop_menu_item__9Tukl undefined" href="/react"><svg width="30" height="30" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M15 17.32a2.344 2.344 0 100-4.688 2.344 2.344 0 000 4.687z" fill="#00D8FF"></path><path d="M15 20.35a26.612 26.612 0 01-8.325-1.126 10.594 10.594 0 01-3.428-1.835 3.321 3.321 0 01-1.372-2.414c0-1.55 1.703-3.068 4.554-4.062A26.957 26.957 0 0115 9.65c2.867-.04 5.723.378 8.458 1.24 1.2.383 2.323.976 3.317 1.75a3.179 3.179 0 011.35 2.335c0 1.611-1.903 3.243-4.969 4.258A27.001 27.001 0 0115 20.349zm0-9.58c-2.78-.036-5.55.37-8.202 1.203-2.625.916-3.802 2.168-3.802 3 0 .87 1.265 2.237 4.042 3.187A25.506 25.506 0 0015 19.228c2.64.047 5.272-.31 7.805-1.06C25.688 17.214 27 15.845 27 14.976a2.183 2.183 0 00-.947-1.474 9.557 9.557 0 00-2.963-1.55A25.746 25.746 0 0015 10.77z" fill="#00D8FF"></path><path d="M9.675 26.665c-.437.01-.87-.096-1.253-.307-1.342-.774-1.807-3.008-1.244-5.975a26.958 26.958 0 013.188-8.056 26.884 26.884 0 015.3-6.707 10.665 10.665 0 013.172-2 3.18 3.18 0 012.698 0c1.396.805 1.858 3.269 1.207 6.431a27.007 27.007 0 01-3.11 7.625 26.608 26.608 0 01-5.133 6.65 10.593 10.593 0 01-3.303 2.052 4.618 4.618 0 01-1.522.287zm1.662-13.78a26.2 26.2 0 00-3.056 7.705c-.519 2.732-.02 4.376.703 4.794.75.434 2.57.022 4.781-1.909a25.508 25.508 0 004.9-6.366 25.874 25.874 0 002.983-7.29c.613-2.976.083-4.799-.669-5.232a2.182 2.182 0 00-1.751.084 9.558 9.558 0 00-2.822 1.798 25.748 25.748 0 00-5.062 6.42l-.007-.005z" fill="#00D8FF"></path><path d="M20.322 26.677c-1.27 0-2.884-.768-4.564-2.213a26.957 26.957 0 01-5.387-6.785 26.883 26.883 0 01-3.164-7.941 10.665 10.665 0 01-.148-3.75 3.179 3.179 0 011.345-2.332c1.394-.807 3.759.023 6.173 2.166a26.999 26.999 0 015.053 6.5 26.61 26.61 0 013.197 7.77c.282 1.276.326 2.594.128 3.886a3.323 3.323 0 01-1.4 2.396 2.43 2.43 0 01-1.233.303zm-8.981-9.562a26.204 26.204 0 005.149 6.496c2.108 1.814 3.78 2.204 4.5 1.781.75-.436 1.303-2.215.733-5.094a25.511 25.511 0 00-3.067-7.417 25.876 25.876 0 00-4.823-6.225C11.56 4.64 9.717 4.188 8.966 4.623a2.182 2.182 0 00-.801 1.558 9.557 9.557 0 00.143 3.342 25.75 25.75 0 003.034 7.594l-.001-.002z" fill="#00D8FF"></path></svg><span>React</span></a></li><li class="nav-item"><a class="Header_header_desktop_menu_item__9Tukl undefined" href="/javascript"><svg width="30" height="30" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M5 5h20v20H5V5z" fill="#F7DF1E"></path><path d="M10.259 21.713l1.53-.926c.296.523.564.966 1.209.966.617 0 1.007-.241 1.007-1.18v-6.391h1.88v6.417c0 1.946-1.142 2.832-2.807 2.832-1.503 0-2.376-.778-2.82-1.718M16.905 21.512l1.53-.886c.403.658.927 1.141 1.853 1.141.779 0 1.276-.39 1.276-.926 0-.645-.51-.873-1.37-1.249l-.47-.201c-1.356-.577-2.255-1.302-2.255-2.833 0-1.41 1.074-2.484 2.752-2.484 1.195 0 2.054.417 2.672 1.504l-1.464.94c-.322-.578-.67-.806-1.208-.806-.55 0-.9.35-.9.806 0 .564.35.792 1.155 1.141l.47.201c1.598.685 2.497 1.383 2.497 2.954 0 1.692-1.329 2.618-3.115 2.618-1.745 0-2.873-.833-3.423-1.92" fill="#000"></path></svg><span>JavaScript</span></a></li></ul></div></div><div class="d-none d-md-block d-lg-none Header_header_tablet__qW685"><div class="Header_header_tablet_section_top__138Cg"><div class="Header_header_tablet_logo__2Y7l1"><a class="logo" href="/">Logo</a></div><ul class="Header_header_tablet_menu_top__OdLcN nav"><li class="d-flex align-items-center position-relative nav-item"><div class="ChevronDown_wrapper__2Jqci "><span class="Header_header_desktop_menu_item__9Tukl Header_header_desktop_menu_item_top__YSTdA ">Learn</span><span class="ChevronDown_chevron_down__15Cxv ChevronDown_wrapper__2Jqci "></span></div><div class="DropDown_wrapper__3Umpl  DropDown_theme__dark-blue__2XNIW DropDown_shadow__1BOms" style="top:53px;left:-5px"><ul class="nav"><li class="Header_header_desktop_menu_top_dropDown_item__McLmb nav-item"><a href="/">Articles</a></li><li class="Header_header_desktop_menu_top_dropDown_item__McLmb nav-item"><a href="/reference">Reference</a></li><li class="Header_header_desktop_menu_top_dropDown_item__McLmb nav-item"><a href="/tutorials">Tutorials</a></li></ul></div></li><li class="d-flex align-items-center position-relative Header_jobs__1Riru  nav-item"><span class="Header_new__143ap">New</span><a href="https://jobs.indepth.dev" class="Header_header_desktop_menu_item_top__YSTdA Header_external_link__1VFdO">Find Job</a></li><li class="d-flex align-items-center position-relative nav-item"><div class="ChevronDown_wrapper__2Jqci "><span class="Header_header_desktop_menu_item__9Tukl Header_header_desktop_menu_item_top__YSTdA ">Stay connected</span><span class="ChevronDown_chevron_down__15Cxv ChevronDown_wrapper__2Jqci "></span></div><div class="DropDown_wrapper__3Umpl  DropDown_theme__dark-blue__2XNIW DropDown_shadow__1BOms" style="top:53px;left:-5px"><ul class="nav"><li class="Header_header_desktop_menu_top_dropDown_item__McLmb nav-item"><a href="https://github.com/indepth-dev/content/discussions" target="_blank" rel="noopener noreferrer">Community</a></li><li class="Header_header_desktop_menu_top_dropDown_item__McLmb nav-item"><a href="/about">About Us</a></li></ul></div></li><li class="Header_contribute__1UfFF nav-item"><a class="Header_header_desktop_menu_item_top__YSTdA Header_header_desktop_menu_item_top_writer__2Dk0i" href="/contribute">Contribute</a></li></ul></div><div class="Header_header_tablet_section_bottom__3DXLB"><ul class="nav"><li class="nav-item"><div class="HeaderSearch_wrapper__3AWhU"><svg width="20" height="21" fill="none" xmlns="http://www.w3.org/2000/svg" class="svg-aquamarine-hover" role="button" tabindex="0"><path d="M19 19.5l-4.35-4.35M17 9.5a8 8 0 11-16 0 8 8 0 0116 0z" stroke="#fff" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path></svg><input type="text" placeholder="Search on inDepthDev" name="query" class="HeaderSearch_input__3K1Y6 HeaderSearch_input__closed__1agvh"/></div><div class="HeaderSearch_mobile_search__35DMb"><input type="text" name="query"/><svg width="20" height="21" fill="none" xmlns="http://www.w3.org/2000/svg" class="svg-orange" role="button" tabindex="0"><path d="M19 19.5l-4.35-4.35M17 9.5a8 8 0 11-16 0 8 8 0 0116 0z" stroke="#fff" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path></svg></div></li><li class="nav-item"><div class="Header_header_tablet_menu_item__1Au52"><svg width="20" height="15" fill="none" xmlns="http://www.w3.org/2000/svg" class="" role="button" tabindex="0"><path d="M1 7.5h18m-18-6h18m-18 12h18" stroke="#FFF" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path></svg></div></li></ul></div><div class="Header_header_tablet_account_wrapper__HirBb "><ul class="nav"><li class="nav-item"><a href="/profile/settings">Settings</a></li><li class="nav-item"><a href="/profile/analytics">Analytics</a></li><li class="nav-item"><span role="button" tabindex="0">Logout</span></li></ul></div><div class="Header_header_tablet_menu_wrapper__2rejR "><ul class="Header_header_tablet_menu_wrapper_list__W63kT nav"><li class="nav-item"><a class="Header_header_desktop_menu_item__9Tukl undefined" href="/angular"><svg width="30" height="30" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M15 4.533L4.697 8.207l1.571 13.624L15 26.667l8.732-4.836 1.571-13.624L15 4.533z" fill="#DD0031"></path><path d="M15 4.533V6.99v-.011V26.667l8.732-4.836 1.571-13.624L15 4.533z" fill="#C3002F"></path><path d="M15 6.979L8.56 21.421h2.4l1.295-3.231h5.467l1.295 3.231h2.402L15 6.98zm1.881 9.219H13.12L15 11.67l1.881 4.527z" fill="#fff"></path></svg><span>Angular</span></a></li><li class="nav-item"><a class="Header_header_desktop_menu_item__9Tukl undefined" href="/react"><svg width="30" height="30" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M15 17.32a2.344 2.344 0 100-4.688 2.344 2.344 0 000 4.687z" fill="#00D8FF"></path><path d="M15 20.35a26.612 26.612 0 01-8.325-1.126 10.594 10.594 0 01-3.428-1.835 3.321 3.321 0 01-1.372-2.414c0-1.55 1.703-3.068 4.554-4.062A26.957 26.957 0 0115 9.65c2.867-.04 5.723.378 8.458 1.24 1.2.383 2.323.976 3.317 1.75a3.179 3.179 0 011.35 2.335c0 1.611-1.903 3.243-4.969 4.258A27.001 27.001 0 0115 20.349zm0-9.58c-2.78-.036-5.55.37-8.202 1.203-2.625.916-3.802 2.168-3.802 3 0 .87 1.265 2.237 4.042 3.187A25.506 25.506 0 0015 19.228c2.64.047 5.272-.31 7.805-1.06C25.688 17.214 27 15.845 27 14.976a2.183 2.183 0 00-.947-1.474 9.557 9.557 0 00-2.963-1.55A25.746 25.746 0 0015 10.77z" fill="#00D8FF"></path><path d="M9.675 26.665c-.437.01-.87-.096-1.253-.307-1.342-.774-1.807-3.008-1.244-5.975a26.958 26.958 0 013.188-8.056 26.884 26.884 0 015.3-6.707 10.665 10.665 0 013.172-2 3.18 3.18 0 012.698 0c1.396.805 1.858 3.269 1.207 6.431a27.007 27.007 0 01-3.11 7.625 26.608 26.608 0 01-5.133 6.65 10.593 10.593 0 01-3.303 2.052 4.618 4.618 0 01-1.522.287zm1.662-13.78a26.2 26.2 0 00-3.056 7.705c-.519 2.732-.02 4.376.703 4.794.75.434 2.57.022 4.781-1.909a25.508 25.508 0 004.9-6.366 25.874 25.874 0 002.983-7.29c.613-2.976.083-4.799-.669-5.232a2.182 2.182 0 00-1.751.084 9.558 9.558 0 00-2.822 1.798 25.748 25.748 0 00-5.062 6.42l-.007-.005z" fill="#00D8FF"></path><path d="M20.322 26.677c-1.27 0-2.884-.768-4.564-2.213a26.957 26.957 0 01-5.387-6.785 26.883 26.883 0 01-3.164-7.941 10.665 10.665 0 01-.148-3.75 3.179 3.179 0 011.345-2.332c1.394-.807 3.759.023 6.173 2.166a26.999 26.999 0 015.053 6.5 26.61 26.61 0 013.197 7.77c.282 1.276.326 2.594.128 3.886a3.323 3.323 0 01-1.4 2.396 2.43 2.43 0 01-1.233.303zm-8.981-9.562a26.204 26.204 0 005.149 6.496c2.108 1.814 3.78 2.204 4.5 1.781.75-.436 1.303-2.215.733-5.094a25.511 25.511 0 00-3.067-7.417 25.876 25.876 0 00-4.823-6.225C11.56 4.64 9.717 4.188 8.966 4.623a2.182 2.182 0 00-.801 1.558 9.557 9.557 0 00.143 3.342 25.75 25.75 0 003.034 7.594l-.001-.002z" fill="#00D8FF"></path></svg><span>React</span></a></li><li class="nav-item"><a class="Header_header_desktop_menu_item__9Tukl undefined" href="/javascript"><svg width="30" height="30" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M5 5h20v20H5V5z" fill="#F7DF1E"></path><path d="M10.259 21.713l1.53-.926c.296.523.564.966 1.209.966.617 0 1.007-.241 1.007-1.18v-6.391h1.88v6.417c0 1.946-1.142 2.832-2.807 2.832-1.503 0-2.376-.778-2.82-1.718M16.905 21.512l1.53-.886c.403.658.927 1.141 1.853 1.141.779 0 1.276-.39 1.276-.926 0-.645-.51-.873-1.37-1.249l-.47-.201c-1.356-.577-2.255-1.302-2.255-2.833 0-1.41 1.074-2.484 2.752-2.484 1.195 0 2.054.417 2.672 1.504l-1.464.94c-.322-.578-.67-.806-1.208-.806-.55 0-.9.35-.9.806 0 .564.35.792 1.155 1.141l.47.201c1.598.685 2.497 1.383 2.497 2.954 0 1.692-1.329 2.618-3.115 2.618-1.745 0-2.873-.833-3.423-1.92" fill="#000"></path></svg><span>JavaScript</span></a></li></ul></div></div><div class="d-block d-md-none Header_header_mobile__2Rw6d"><div class="Header_header_mobile_container__KoaxU container"><div class="Header_header_mobile_row__pnHrC row"><div class="Header_header_mobile_hamb_wrapper__2vXd7 col-2"><svg width="20" height="15" fill="none" xmlns="http://www.w3.org/2000/svg" role="button" tabindex="0"><path d="M1 7.5h18m-18-6h18m-18 12h18" stroke="#FFF" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path></svg></div><div class="Header_header_mobile_logo_wrapper__3XxNg col-6"><a class="logo" href="/">Logo</a></div><div class="Header_header_mobile_search_wrapper__1_Cp8 col-4"><svg width="20" height="21" fill="none" xmlns="http://www.w3.org/2000/svg" role="button" tabindex="0"><path d="M19 19.5l-4.35-4.35M17 9.5a8 8 0 11-16 0 8 8 0 0116 0z" stroke="#fff" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path></svg></div></div></div><div class="Header_header_mobile_menu__32Hnc"><div class="position-relative container"><div class="Header_header_mobile_menu_search_wrapper__ddv4Z "><div class="row"><div class="col-12"><div class="HeaderSearch_wrapper__3AWhU"><svg width="20" height="21" fill="none" xmlns="http://www.w3.org/2000/svg" class="svg-aquamarine-hover" role="button" tabindex="0"><path d="M19 19.5l-4.35-4.35M17 9.5a8 8 0 11-16 0 8 8 0 0116 0z" stroke="#fff" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path></svg><input type="text" placeholder="Search on inDepthDev" name="query" class="HeaderSearch_input__3K1Y6 HeaderSearch_input__closed__1agvh"/></div><div class="HeaderSearch_mobile_search__35DMb"><input type="text" name="query"/><svg width="20" height="21" fill="none" xmlns="http://www.w3.org/2000/svg" class="svg-orange" role="button" tabindex="0"><path d="M19 19.5l-4.35-4.35M17 9.5a8 8 0 11-16 0 8 8 0 0116 0z" stroke="#fff" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path></svg></div></div></div></div><div class="Header_header_mobile_menu_wrapper__3zlIG "><div class="Header_header_mobile_menu_topics__ocPHt" role="button" tabindex="0">Topics<svg width="14" height="8" fill="none" xmlns="http://www.w3.org/2000/svg" class=""><path d="M1.857 1.429L7 6.572l5.143-5.143" stroke="#fff" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path></svg><div class="Header_header_mobile_menu_topics_submenu__2Udur "><a href="/angular">Angular</a><a href="/react">React</a><a href="/javascript">JavaScript</a></div></div><div class="Header_header_mobile_menu_topics__ocPHt" role="button" tabindex="0">Learn<svg width="14" height="8" fill="none" xmlns="http://www.w3.org/2000/svg" class=""><path d="M1.857 1.429L7 6.572l5.143-5.143" stroke="#fff" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path></svg><div class="Header_header_mobile_menu_topics_submenu__2Udur "><a href="/">Articles</a><a href="/reference">Reference</a><a href="/tutorials">Tutorials</a></div></div><div class="Header_header_mobile_menu_topics__ocPHt" role="button" tabindex="0">Stay connected<svg width="14" height="8" fill="none" xmlns="http://www.w3.org/2000/svg" class=""><path d="M1.857 1.429L7 6.572l5.143-5.143" stroke="#fff" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path></svg><div class="Header_header_mobile_menu_topics_submenu__2Udur "><a href="https://github.com/indepth-dev/content/discussions" target="_blank" rel="noopener noreferrer">Community</a><a href="/about">About Us</a></div></div><a href="/contribute">Contribute</a><a href="https://jobs.indepth.dev">Find Job</a></div></div></div></div></header><section class="DefaultLayout_content__2_Bci" id="content"><div class="_slug__wrapper__2eDsM"><article><div class="Post_top_banner__2nd9o"><div class="container"><a class="AgGridTop_wrapper__1zb6X" href="https://ag-grid.com/?utm_source=indepth.dev&amp;utm_medium=banner&amp;utm_campaign=sponsorship"><div class="row"><div class="d-flex justify-content-center align-items-center col-md-auto col-sm-12"><h3>Our content is free thanks to</h3></div><div class="AgGridTop_wrapper_logo__11fgb justify-content-center col-md-5 col-sm-12"><div class="AgGridTop_img__165RW"></div><p>Enterprise <!-- -->Angular<!-- --> <span>Data Grid</span></p></div></div></a></div></div><header><div class="d-none d-lg-block Post_top_desktop__3qV09"><div class="container"><div class="row"><div class="col-7"><h1 class="Post_title__u14ys">Exploring Angular DOM manipulation techniques using ViewContainerRef</h1><a href="https://admin.indepth.dev/ghost/#/editor/post/5dde5a6db2bc9211f8af6862" style="display:none">Post Editor</a><p>The article explores common elements used for DOM manipulation in Angular with a particular focus on ViewContainerRef. Learn why they are needed, how they work and when you need to use which.</p><div class="Post_top_desktop_tags__1XlGx"><div class="d-flex flex-wrap"><div class="PostTags_tags__vxPCy d-flex align-items-center" style="border-color:#FFF"><svg width="30" height="30" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M15 4.533L4.697 8.207l1.571 13.624L15 26.667l8.732-4.836 1.571-13.624L15 4.533z" fill="#DD0031"></path><path d="M15 4.533V6.99v-.011V26.667l8.732-4.836 1.571-13.624L15 4.533z" fill="#C3002F"></path><path d="M15 6.979L8.56 21.421h2.4l1.295-3.231h5.467l1.295 3.231h2.402L15 6.98zm1.881 9.219H13.12L15 11.67l1.881 4.527z" fill="#fff"></path></svg><span class="PostTags_tags_name__1ILDL" style="color:#FFF">Angular</span></div><div class="PostTags_tags__vxPCy d-flex align-items-center" style="border-color:#FFF"><span class="PostTags_tags_name__1ILDL" style="color:#FFF">dom-manipulation</span></div><div class="PostTags_tags__vxPCy d-flex align-items-center" style="border-color:#FFF"><span class="PostTags_tags_name__1ILDL" style="color:#FFF">view-container-ref</span></div></div></div><div class="Post_top_desktop_time__FReJB"><time>27 
        November 
        2019</time><span>9<!-- --> min read</span><div class="Post_top_desktop_comments__23u4L"><svg width="21" height="20" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M19.5 9.5a8.38 8.38 0 01-.9 3.8A8.5 8.5 0 0111 18a8.379 8.379 0 01-3.8-.9L1.5 19l1.9-5.7a8.38 8.38 0 01-.9-3.8 8.5 8.5 0 014.7-7.6A8.38 8.38 0 0111 1h.5a8.48 8.48 0 018 8v.5z" stroke="#fff" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path></svg><span>5<!-- --> comment<!-- -->s</span></div></div></div><div class="Post_top_desktop_image__3GK0e col-5"><img src="https://images.indepth.dev/images/2020/10/Exploring-Angular-DOM-manipulation-techniques-using-ViewContainerRef-white.png" alt="post"/></div></div></div></div><div class="d-block d-lg-none Post_top_mobile__327en"><div class="container"><div class="row"><div class="col-12"><h2 class="Post_title__u14ys">Exploring Angular DOM manipulation techniques using ViewContainerRef</h2><p>The article explores common elements used for DOM manipulation in Angular with a particular focus on ViewContainerRef. Learn why they are needed, how they work and when you need to use which.</p></div></div></div><div class="d-none d-md-block d-lg-none container"><div class="row"><div class="col-12"><img src="https://images.indepth.dev/images/2020/10/Exploring-Angular-DOM-manipulation-techniques-using-ViewContainerRef-white.png" alt="post" class="Post_background_mobile__1iW1H"/></div></div></div><img src="https://images.indepth.dev/images/2020/10/Exploring-Angular-DOM-manipulation-techniques-using-ViewContainerRef-white.png" alt="post" class="d-block d-md-none Post_background_mobile__1iW1H"/><div class="container"><div class="row"><div class="col"><div class="Post_author__2sGfl d-md-none"><a href="/authors/1001/maxkoretskyi"><img src="https://images.indepth.dev/images/2022/07/ava.jpg" alt="author"/><span class="Post_author_name__larTg" title="Max Koretskyi">Max Koretskyi</span></a></div><div class="Post_top_mobile_author__2_Ljc d-none d-md-flex justify-content-between"><div class="Post_author__2sGfl"><a href="/posts/1052/exploring-angular-dom-manipulation-techniques-using-viewcontainerref"><img src="https://images.indepth.dev/images/2022/07/ava.jpg" alt="author"/><span class="Post_author_name__larTg" title="Max Koretskyi">Max Koretskyi</span></a></div></div><div class="Post_top_mobile_tags__1aXgC"><div class="d-flex flex-wrap"><div class="PostTags_tags__vxPCy d-flex align-items-center" style="border-color:#FFF"><svg width="30" height="30" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M15 4.533L4.697 8.207l1.571 13.624L15 26.667l8.732-4.836 1.571-13.624L15 4.533z" fill="#DD0031"></path><path d="M15 4.533V6.99v-.011V26.667l8.732-4.836 1.571-13.624L15 4.533z" fill="#C3002F"></path><path d="M15 6.979L8.56 21.421h2.4l1.295-3.231h5.467l1.295 3.231h2.402L15 6.98zm1.881 9.219H13.12L15 11.67l1.881 4.527z" fill="#fff"></path></svg><span class="PostTags_tags_name__1ILDL" style="color:#FFF">Angular</span></div><div class="PostTags_tags__vxPCy d-flex align-items-center" style="border-color:#FFF"><span class="PostTags_tags_name__1ILDL" style="color:#FFF">dom-manipulation</span></div><div class="PostTags_tags__vxPCy d-flex align-items-center" style="border-color:#FFF"><span class="PostTags_tags_name__1ILDL" style="color:#FFF">view-container-ref</span></div></div></div><div class="Post_top_mobile_time__26TxQ"><time>27 
        November 
        2019</time><span>9<!-- --> min read</span><div class="Post_top_mobile_comments__EQBfB d-none d-md-flex"><svg width="21" height="20" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M19.5 9.5a8.38 8.38 0 01-.9 3.8A8.5 8.5 0 0111 18a8.379 8.379 0 01-3.8-.9L1.5 19l1.9-5.7a8.38 8.38 0 01-.9-3.8 8.5 8.5 0 014.7-7.6A8.38 8.38 0 0111 1h.5a8.48 8.48 0 018 8v.5z" stroke="#fff" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path></svg><span>5<!-- --> comment<!-- -->s</span></div></div><div class="Post_top_mobile_comments__EQBfB d-md-none"><svg width="21" height="20" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M19.5 9.5a8.38 8.38 0 01-.9 3.8A8.5 8.5 0 0111 18a8.379 8.379 0 01-3.8-.9L1.5 19l1.9-5.7a8.38 8.38 0 01-.9-3.8 8.5 8.5 0 014.7-7.6A8.38 8.38 0 0111 1h.5a8.48 8.48 0 018 8v.5z" stroke="#fff" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path></svg><span>5<!-- --> comment<!-- -->s</span></div></div></div></div></div></header><div class="Post_main__3Il9H"><div class="d-none d-lg-block Post_socials_desktop__1RYiO"><div class="Post_socials_desktop_sticky__3M59X"><a href="https://twitter.com/intent/tweet?text=%22Exploring%20Angular%20DOM%20manipulation%20techniques%20using%20ViewContainerRef%22%20by%20%40maxkoretskyi%20%23angular%20%23javascript%20%23webdev%0A%40indepth_dev%0Ahttps%3A%2F%2Findepth.dev%2Fposts%2F1052%2Fexploring-angular-dom-manipulation-techniques-using-viewcontainerref" class="Post_social__z0SiP Post_twitter__2YBjh" target="_blank" rel="noopener noreferrer"><svg width="28" height="28" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M25 5.01a10.886 10.886 0 01-3.14 1.535 4.467 4.467 0 00-7.087.425A4.504 4.504 0 0014 9.554v1.003A10.631 10.631 0 018.931 9.42 10.67 10.67 0 015 6.013s-4 9.028 5 13.041a11.613 11.613 0 01-7 2.006c9 5.016 20 0 20-11.536 0-.28-.028-.558-.08-.832A7.75 7.75 0 0025 5.01v0z" stroke="#fff" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path></svg></a><a href="https://www.facebook.com/sharer/sharer.php?u=https://indepth.dev/posts/1052/exploring-angular-dom-manipulation-techniques-using-viewcontainerref" class="Post_social__z0SiP Post_facebook__3Sz46" target="_blank" rel="noopener noreferrer"><svg width="28" height="28" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M19 4h-3a5 5 0 00-5 5v3H8v4h3v8h4v-8h3l1-4h-4V9a1 1 0 011-1h3V4z" stroke="#fff" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path></svg></a><a href="https://www.linkedin.com/sharing/share-offsite/?url=https://indepth.dev/posts/1052/exploring-angular-dom-manipulation-techniques-using-viewcontainerref" class="Post_social__z0SiP Post_linkedin__1ujBu" target="_blank" rel="noopener noreferrer"><svg width="28" height="28" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M18 10a6 6 0 016 6v7h-4v-7a2 2 0 00-4 0v7h-4v-7a6 6 0 016-6zM8 11H4v12h4V11zM6 8a2 2 0 100-4 2 2 0 000 4z" stroke="#fff" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path></svg></a></div></div><div class="container"><div class="row"><div class="col-lg-8 col-12 order-lg-1 order-1"><main id="main" class="content"><p>Whenever I read about working with DOM in Angular I always see one or few of these classes mentioned: <code>ElementRef</code>, <code>TemplateRef</code>, <code>ViewContainerRef</code> and others. Unfortunately, although some of them are covered in Angular docs or related articles, I’ve yet to found the description of the overall mental model and examples of how these work together. This article aims to describe such model.</p><blockquote>If you’re looking for more <strong><strong>in-depth</strong></strong> information on DOM manipulation in Angular using Renderer and View Containers check out <a href="https://www.youtube.com/watch?v=qWmqiYDrnDc&amp;list=PLVI0Ut22uwY4UC1v5fUvi2RIU4R4jPkba&amp;sns=tw" rel="noopener noreferrer" node="[object Object]" target="_blank">my talk at NgVikings</a>. Or read an in-depth article on dynamic DOM manipulation <a href="https://blog.angularindepth.com/working-with-dom-in-angular-unexpected-consequences-and-optimization-techniques-682ac09f6866" rel="noopener noreferrer" node="[object Object]" target="_blank">Working with DOM in Angular: unexpected consequences and optimization techniques</a></blockquote><p>If you come from <code>angular.js</code> world, you know that it was pretty easy to manipulate the DOM. Angular injected DOM <code>element</code> into <code>link</code> function and you could query any node within component’s template, add or remove child nodes, modify styles etc. However, this approach had one major shortcoming — it was tightly bound to a browser platform.</p><p>The new Angular version runs on different platforms — in a browser, on a mobile platform or inside a web worker. So a level of abstraction is required to stand between platform specific API and the framework interfaces. In angular these abstractions come in a form of the following reference types: <code>ElementRef</code>, <code>TemplateRef</code>, <code>ViewRef</code>, <code>ComponentRef</code> and <code>ViewContainerRef</code>. In this article we’ll take a look at each reference type in detail and show how they can be used to manipulate DOM.</p><h2 id="-viewchild" class="HeadingAnchor_wrapper__2MP6G  anchor-heading">@ViewChild<div class="HeadingAnchor_info__2qSek"><svg width="24" height="25" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M10.238 13.3a4.285 4.285 0 006.462.463l2.572-2.572a4.286 4.286 0 00-6.06-6.06l-1.474 1.466m1.928 4.989a4.285 4.285 0 00-6.463-.463l-2.571 2.571a4.286 4.286 0 006.06 6.06l1.466-1.465" stroke="#999" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="HeadingAnchor_copy__3A-L5">Link to this section</span></div></h2><p>Before we explore the DOM abstractions, let’s understand how we access these abstractions inside a component/directive class. Angular provides a mechanism called DOM queries. It comes in the form of <code>@ViewChild</code> and <code>@ViewChildren</code> decorators. They behave the same, only the former returns one reference, while the latter returns multiple references as a <a href="https://angular.io/docs/ts/latest/api/core/index/QueryList-class.html" rel="noopener noreferrer" node="[object Object]" target="_blank">QueryList</a> object. In the examples in this article I’ll be using mostly the  <code>ViewChild</code> decorator and will not be using the <code>@</code> symbol before it.</p><p>Usually, these decorators are paired with <a href="https://angular.io/docs/ts/latest/guide/template-syntax.html#!#ref-vars" rel="noopener noreferrer" node="[object Object]" target="_blank">template reference variables</a>. A <strong><strong>template reference variable</strong></strong> is simply a named reference to a DOM element within a template. You can view it as something similar to the <code>id</code> attribute of an <code>html</code> element. You mark a DOM element with a template reference and then query it inside a class using the <code>ViewChild</code> decorator. Here is the basic example:</p><pre class="language-ts CodeBlock_wrapper__20Yku " style="left:0"><div><span class="CodeBlock_extend__1hOFJ">&lt;&gt;</span><span class="CodeBlock_copy__1LH65">Copy</span></div><code class="language-ts"><span class="token decorator"><span class="token at operator">@</span><span class="token function">Component</span></span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    selector<span class="token operator">:</span> <span class="token string">&#x27;sample&#x27;</span><span class="token punctuation">,</span>
    template<span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">
        &lt;span #tref&gt;I am span&lt;/span&gt;
    </span><span class="token template-punctuation string">`</span></span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token keyword module">export</span> <span class="token keyword">class</span> <span class="token class-name"><span class="token maybe-class-name">SampleComponent</span></span> <span class="token keyword">implements</span> <span class="token class-name"><span class="token maybe-class-name">AfterViewInit</span></span> <span class="token punctuation">{</span>
    <span class="token decorator"><span class="token at operator">@</span><span class="token function">ViewChild</span></span><span class="token punctuation">(</span><span class="token string">&quot;tref&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>read<span class="token operator">:</span> <span class="token maybe-class-name">ElementRef</span><span class="token punctuation">}</span><span class="token punctuation">)</span> tref<span class="token operator">:</span> <span class="token maybe-class-name">ElementRef</span><span class="token punctuation">;</span>

    <span class="token function">ngAfterViewInit</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span> <span class="token punctuation">{</span>
        <span class="token comment">// outputs `I am span`</span>
        <span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">tref</span><span class="token punctuation">.</span><span class="token property-access">nativeElement</span><span class="token punctuation">.</span><span class="token property-access">textContent</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre><p>The basic syntax of the <code>ViewChild</code> decorator is:</p><pre class="language-ts CodeBlock_wrapper__20Yku " style="left:0"><div><span class="CodeBlock_extend__1hOFJ">&lt;&gt;</span><span class="CodeBlock_copy__1LH65">Copy</span></div><code class="language-ts"><span class="token decorator"><span class="token at operator">@</span><span class="token function">ViewChild</span></span><span class="token punctuation">(</span><span class="token punctuation">[</span>reference <span class="token keyword module">from</span> template<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>read<span class="token operator">:</span> <span class="token punctuation">[</span>reference type<span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>In this example you can see that I specified <code>tref</code> as a template reference name in the <code>html</code> and receive the <code>ElementRef</code> associated with this element. The second parameter <code>read</code> is not always required, since Angular can infer the reference type by the type of the DOM element. For example, if it’s a simple html element like <code>span</code>, Angular returns <code>ElementRef.</code> If it’s a <code>template</code> element, it returns <code>TemplateRef</code>. Some references, like <code>ViewContainerRef</code> cannot be inferred and have to be asked for specifically in the <code>read</code> parameter. Others, like <code>ViewRef</code> cannot be returned from the DOM and have to be constructed manually.</p><p>Okay, now that we know how to query for the references, let’s start exploring them.</p><h2 id="elementref" class="HeadingAnchor_wrapper__2MP6G  anchor-heading">ElementRef<div class="HeadingAnchor_info__2qSek"><svg width="24" height="25" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M10.238 13.3a4.285 4.285 0 006.462.463l2.572-2.572a4.286 4.286 0 00-6.06-6.06l-1.474 1.466m1.928 4.989a4.285 4.285 0 00-6.463-.463l-2.571 2.571a4.286 4.286 0 006.06 6.06l1.466-1.465" stroke="#999" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="HeadingAnchor_copy__3A-L5">Link to this section</span></div></h2><p>This is the most basic abstraction. If you observe its class structure, you’ll see that it only holds the native element it’s associated with. It’s useful for accessing native DOM element as we can see here:</p><pre class="language-ts CodeBlock_wrapper__20Yku " style="left:0"><div><span class="CodeBlock_extend__1hOFJ">&lt;&gt;</span><span class="CodeBlock_copy__1LH65">Copy</span></div><code class="language-ts"><span class="token comment">// outputs `I am span`</span>
<span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">tref</span><span class="token punctuation">.</span><span class="token property-access">nativeElement</span><span class="token punctuation">.</span><span class="token property-access">textContent</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>However, such usage <a href="https://angular.io/docs/ts/latest/api/core/index/ElementRef-class.html" rel="noopener noreferrer" node="[object Object]" target="_blank">is discouraged</a> by the Angular team. Not only does it pose a security risk, but it also tightly couples your application and rendering layers which makes is difficult to run an app on multiple platforms. I believe that it’s not the access to <code>nativeElement</code> that breaks the abstraction, but rather the usage of a specific DOM API like <code>textContent</code>. But as you’ll see later, the DOM manipulation mental model implemented in Angular hardly ever requires such lower level access.</p><p><code>ElementRef</code> can be returned for any DOM element using the <code>ViewChild</code> decorator. But since all components are hosted inside a custom DOM element and all directives are applied to DOM elements, component and directive classes can obtain an instance of <code>ElementRef</code> associated with their host element through <strong>Dependency Injection (DI)</strong>:</p><pre class="language-ts CodeBlock_wrapper__20Yku " style="left:0"><div><span class="CodeBlock_extend__1hOFJ">&lt;&gt;</span><span class="CodeBlock_copy__1LH65">Copy</span></div><code class="language-ts"><span class="token decorator"><span class="token at operator">@</span><span class="token function">Component</span></span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    selector<span class="token operator">:</span> <span class="token string">&#x27;sample&#x27;</span><span class="token punctuation">,</span>
    <span class="token spread operator">...</span>
<span class="token keyword module">export</span> <span class="token keyword">class</span> <span class="token class-name"><span class="token maybe-class-name">SampleComponent</span></span><span class="token punctuation">{</span>
    <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token keyword">private</span> hostElement<span class="token operator">:</span> <span class="token maybe-class-name">ElementRef</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">//outputs &lt;sample&gt;...&lt;/sample&gt;</span>
        <span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">hostElement</span><span class="token punctuation">.</span><span class="token property-access">nativeElement</span><span class="token punctuation">.</span><span class="token property-access">outerHTML</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span></code></pre><p>So while a component can get access to its host element through DI, the <code>ViewChild</code> decorator is used most often to get a reference to a DOM element in its view (template). But, it’s reversed for directives — they have no views and they usually work directly with the element they are attached to.</p><h2 id="templateref" class="HeadingAnchor_wrapper__2MP6G  anchor-heading">TemplateRef<div class="HeadingAnchor_info__2qSek"><svg width="24" height="25" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M10.238 13.3a4.285 4.285 0 006.462.463l2.572-2.572a4.286 4.286 0 00-6.06-6.06l-1.474 1.466m1.928 4.989a4.285 4.285 0 00-6.463-.463l-2.571 2.571a4.286 4.286 0 006.06 6.06l1.466-1.465" stroke="#999" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="HeadingAnchor_copy__3A-L5">Link to this section</span></div></h2><p>The notion of a <strong>template</strong> should be familiar for most web developers. It’s a group of DOM elements that are reused in views across the application. Before the HTML5 standard introduced the <a href="https://developer.mozilla.org/en/docs/Web/HTML/Element/template" rel="noopener noreferrer" node="[object Object]" target="_blank">template</a> tag, most templates arrived to the browser wrapped in a <code>script</code> tag with some variation of the <code>type</code> attribute:</p><pre class="language-html CodeBlock_wrapper__20Yku " style="left:0"><div><span class="CodeBlock_extend__1hOFJ">&lt;&gt;</span><span class="CodeBlock_copy__1LH65">Copy</span></div><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>tpl<span class="token punctuation">&quot;</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>text/template<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
  <span class="token operator">&lt;</span>span<span class="token operator">&gt;</span><span class="token constant">I</span> am span <span class="token keyword">in</span> template<span class="token operator">&lt;</span><span class="token operator">/</span>span<span class="token operator">&gt;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span></code></pre><p>This approach certainly had many drawbacks like the semantics and the necessity to manually create DOM models. With the <code>template</code> tag a browser parses <code>html</code> and creates a <code>DOM</code> tree but doesn&#x27;t render it. It can then be accessed through the <code>content</code> property:</p><pre class="language-ts CodeBlock_wrapper__20Yku " style="left:0"><div><span class="CodeBlock_extend__1hOFJ">&lt;&gt;</span><span class="CodeBlock_copy__1LH65">Copy</span></div><code class="language-ts"><span class="token operator">&lt;</span>script<span class="token operator">&gt;</span>
    <span class="token keyword">let</span> tpl <span class="token operator">=</span> <span class="token dom variable">document</span><span class="token punctuation">.</span><span class="token method function property-access">querySelector</span><span class="token punctuation">(</span><span class="token string">&#x27;#tpl&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">let</span> container <span class="token operator">=</span> <span class="token dom variable">document</span><span class="token punctuation">.</span><span class="token method function property-access">querySelector</span><span class="token punctuation">(</span><span class="token string">&#x27;.insert-after-me&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">insertAfter</span><span class="token punctuation">(</span>container<span class="token punctuation">,</span> tpl<span class="token punctuation">.</span><span class="token property-access">content</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;insert-after-me&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>ng<span class="token operator">-</span>template id<span class="token operator">=</span><span class="token string">&quot;tpl&quot;</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>span<span class="token operator">&gt;</span><span class="token constant">I</span> am span <span class="token keyword">in</span> template<span class="token operator">&lt;</span><span class="token operator">/</span>span<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>ng<span class="token operator">-</span>template<span class="token operator">&gt;</span></code></pre><p>Angular embraces this approach and implements <code>TemplateRef</code> class to work with a template. Here is how it can be used:</p><pre class="language-ts CodeBlock_wrapper__20Yku " style="left:0"><div><span class="CodeBlock_extend__1hOFJ">&lt;&gt;</span><span class="CodeBlock_copy__1LH65">Copy</span></div><code class="language-ts"><span class="token decorator"><span class="token at operator">@</span><span class="token function">Component</span></span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    selector<span class="token operator">:</span> <span class="token string">&#x27;sample&#x27;</span><span class="token punctuation">,</span>
    template<span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">
        &lt;ng-template #tpl&gt;
            &lt;span&gt;I am span in template&lt;/span&gt;
        &lt;/ng-template&gt;
    </span><span class="token template-punctuation string">`</span></span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token keyword module">export</span> <span class="token keyword">class</span> <span class="token class-name"><span class="token maybe-class-name">SampleComponent</span></span> <span class="token keyword">implements</span> <span class="token class-name"><span class="token maybe-class-name">AfterViewInit</span></span> <span class="token punctuation">{</span>
    <span class="token decorator"><span class="token at operator">@</span><span class="token function">ViewChild</span></span><span class="token punctuation">(</span><span class="token string">&quot;tpl&quot;</span><span class="token punctuation">)</span> tpl<span class="token operator">:</span> <span class="token maybe-class-name">TemplateRef</span><span class="token operator">&lt;</span><span class="token builtin">any</span><span class="token operator">&gt;</span><span class="token punctuation">;</span>

    <span class="token function">ngAfterViewInit</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">let</span> elementRef <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">tpl</span><span class="token punctuation">.</span><span class="token property-access">elementRef</span><span class="token punctuation">;</span>
        <span class="token comment">// outputs `template bindings={}`</span>
        <span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">log</span><span class="token punctuation">(</span>elementRef<span class="token punctuation">.</span><span class="token property-access">nativeElement</span><span class="token punctuation">.</span><span class="token property-access">textContent</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre><p>The framework removes the <code>template</code> element from the DOM and inserts a comment in its place. This is how it looks when rendered:</p><pre class="language-html CodeBlock_wrapper__20Yku " style="left:0"><div><span class="CodeBlock_extend__1hOFJ">&lt;&gt;</span><span class="CodeBlock_copy__1LH65">Copy</span></div><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>sample</span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!--template bindings={}--&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>sample</span><span class="token punctuation">&gt;</span></span></code></pre><p>By itself the <code>TemplateRef</code> class is a simple class. It holds a reference to its host element in the <code>elementRef</code> property and has one method: <code>createEmbeddedView</code>. However, this method is very useful since it allows us to create a view and return a reference to it as <code>ViewRef</code>.</p><h2 id="viewref" class="HeadingAnchor_wrapper__2MP6G  anchor-heading">ViewRef<div class="HeadingAnchor_info__2qSek"><svg width="24" height="25" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M10.238 13.3a4.285 4.285 0 006.462.463l2.572-2.572a4.286 4.286 0 00-6.06-6.06l-1.474 1.466m1.928 4.989a4.285 4.285 0 00-6.463-.463l-2.571 2.571a4.286 4.286 0 006.06 6.06l1.466-1.465" stroke="#999" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="HeadingAnchor_copy__3A-L5">Link to this section</span></div></h2><p>This type of abstraction represents an Angular View. In the Angular world a View is a fundamental building block of the application UI. It is the smallest grouping of elements which are created and destroyed together. Angular philosophy encourages developers to see the UI as a composition of Views, not as a tree of standalone HTML tags.</p><p>Angular supports two types of views:</p><ul><li><em><em>Embedded Views</em></em> which are linked to a <em><em>Template</em></em></li><li><em><em>Host Views</em></em> which are linked to a <em><em>Component</em></em></li></ul><h3 id="creating-an-embedded-view" class="HeadingAnchor_wrapper__2MP6G  anchor-heading">Creating an embedded view<div class="HeadingAnchor_info__2qSek"><svg width="24" height="25" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M10.238 13.3a4.285 4.285 0 006.462.463l2.572-2.572a4.286 4.286 0 00-6.06-6.06l-1.474 1.466m1.928 4.989a4.285 4.285 0 00-6.463-.463l-2.571 2.571a4.286 4.286 0 006.06 6.06l1.466-1.465" stroke="#999" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="HeadingAnchor_copy__3A-L5">Link to this section</span></div></h3><p>A template simply holds a blueprint for a view. A view can be instantiated from the template using the aforementioned <code>createEmbeddedView</code> method like this:</p><pre class="language-ts CodeBlock_wrapper__20Yku " style="left:0"><div><span class="CodeBlock_extend__1hOFJ">&lt;&gt;</span><span class="CodeBlock_copy__1LH65">Copy</span></div><code class="language-ts"><span class="token function">ngAfterViewInit</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> view <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">tpl</span><span class="token punctuation">.</span><span class="token method function property-access">createEmbeddedView</span><span class="token punctuation">(</span><span class="token keyword null nil">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre><h3 id="creating-a-host-view" class="HeadingAnchor_wrapper__2MP6G  anchor-heading">Creating a host view<div class="HeadingAnchor_info__2qSek"><svg width="24" height="25" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M10.238 13.3a4.285 4.285 0 006.462.463l2.572-2.572a4.286 4.286 0 00-6.06-6.06l-1.474 1.466m1.928 4.989a4.285 4.285 0 00-6.463-.463l-2.571 2.571a4.286 4.286 0 006.06 6.06l1.466-1.465" stroke="#999" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="HeadingAnchor_copy__3A-L5">Link to this section</span></div></h3><p>Host views are created when a component is dynamically instantiated. A component can be created dynamically using <code>ComponentFactoryResolver</code>:</p><pre class="language-ts CodeBlock_wrapper__20Yku " style="left:0"><div><span class="CodeBlock_extend__1hOFJ">&lt;&gt;</span><span class="CodeBlock_copy__1LH65">Copy</span></div><code class="language-ts"><span class="token function">constructor</span><span class="token punctuation">(</span><span class="token keyword">private</span> injector<span class="token operator">:</span> <span class="token maybe-class-name">Injector</span><span class="token punctuation">,</span>
            <span class="token keyword">private</span> r<span class="token operator">:</span> <span class="token maybe-class-name">ComponentFactoryResolver</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> factory <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">r</span><span class="token punctuation">.</span><span class="token method function property-access">resolveComponentFactory</span><span class="token punctuation">(</span><span class="token maybe-class-name">ColorComponent</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">let</span> componentRef <span class="token operator">=</span> factory<span class="token punctuation">.</span><span class="token method function property-access">create</span><span class="token punctuation">(</span>injector<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">let</span> view <span class="token operator">=</span> componentRef<span class="token punctuation">.</span><span class="token property-access">hostView</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre><p>In Angular, each component is bound to a particular instance of an injector, so we’re passing the current injector instance when creating the component. Also, don’t forget that components that are instantiated dynamically must be added to the <a href="https://angular.io/docs/ts/latest/cookbook/ngmodule-faq.html#!#q-entry-component-defined" rel="noopener noreferrer" node="[object Object]" target="_blank">EntryComponents</a> of a module or hosting component.</p><p>So, we’ve seen how both embedded and host views can be created. Once a view is created it can be inserted into the DOM using <code>ViewContainer</code>. The next section explores its functionality.</p><h2 id="viewcontainerref" class="HeadingAnchor_wrapper__2MP6G  anchor-heading">ViewContainerRef<div class="HeadingAnchor_info__2qSek"><svg width="24" height="25" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M10.238 13.3a4.285 4.285 0 006.462.463l2.572-2.572a4.286 4.286 0 00-6.06-6.06l-1.474 1.466m1.928 4.989a4.285 4.285 0 00-6.463-.463l-2.571 2.571a4.286 4.286 0 006.06 6.06l1.466-1.465" stroke="#999" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="HeadingAnchor_copy__3A-L5">Link to this section</span></div></h2><p><strong>ViewContainerRef</strong> represents a container where one or more views can be attached.</p><p>The first thing to mention here is that any DOM element can be used as a view container. What’s interesting is that Angular doesn’t insert views inside the element, but appends them after the element bound to <code>ViewContainer</code>. This is similar to how the <code>router-outlet</code> inserts components.</p><p>Usually, a good candidate to mark a place where a <code>ViewContainer</code> should be created is the <code>ng-container</code> element. It’s rendered as a comment and so it doesn’t introduce redundant HTML elements into the DOM. Here is the example of creating a <code>ViewContainer </code>at a specific place in a component template:</p><pre class="language-ts CodeBlock_wrapper__20Yku " style="left:0"><div><span class="CodeBlock_extend__1hOFJ">&lt;&gt;</span><span class="CodeBlock_copy__1LH65">Copy</span></div><code class="language-ts"><span class="token decorator"><span class="token at operator">@</span><span class="token function">Component</span></span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    selector<span class="token operator">:</span> <span class="token string">&#x27;sample&#x27;</span><span class="token punctuation">,</span>
    template<span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">
        &lt;span&gt;I am first span&lt;/span&gt;
        &lt;ng-container #vc&gt;&lt;/ng-container&gt;
        &lt;span&gt;I am last span&lt;/span&gt;
    </span><span class="token template-punctuation string">`</span></span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token keyword module">export</span> <span class="token keyword">class</span> <span class="token class-name"><span class="token maybe-class-name">SampleComponent</span></span> <span class="token keyword">implements</span> <span class="token class-name"><span class="token maybe-class-name">AfterViewInit</span></span> <span class="token punctuation">{</span>
    <span class="token decorator"><span class="token at operator">@</span><span class="token function">ViewChild</span></span><span class="token punctuation">(</span><span class="token string">&quot;vc&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>read<span class="token operator">:</span> <span class="token maybe-class-name">ViewContainerRef</span><span class="token punctuation">}</span><span class="token punctuation">)</span> vc<span class="token operator">:</span> <span class="token maybe-class-name">ViewContainerRef</span><span class="token punctuation">;</span>

    <span class="token function">ngAfterViewInit</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span> <span class="token punctuation">{</span>
        <span class="token comment">// outputs `template bindings={}`</span>
        <span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">vc</span><span class="token punctuation">.</span><span class="token property-access">element</span><span class="token punctuation">.</span><span class="token property-access">nativeElement</span><span class="token punctuation">.</span><span class="token property-access">textContent</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre><p>Just as with other DOM abstractions, <code>ViewContainer</code> is bound to a particular DOM element accessed through the <code>element</code> property. In the example above it’s bound to the <code>ng-container</code> element rendered as a comment, and so the output is <code>template bindings={}</code>.</p><h3 id="manipulating-views" class="HeadingAnchor_wrapper__2MP6G  anchor-heading">Manipulating views<div class="HeadingAnchor_info__2qSek"><svg width="24" height="25" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M10.238 13.3a4.285 4.285 0 006.462.463l2.572-2.572a4.286 4.286 0 00-6.06-6.06l-1.474 1.466m1.928 4.989a4.285 4.285 0 00-6.463-.463l-2.571 2.571a4.286 4.286 0 006.06 6.06l1.466-1.465" stroke="#999" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="HeadingAnchor_copy__3A-L5">Link to this section</span></div></h3><p><code>ViewContainer</code> provides a convenient API for manipulating views:</p><pre class="language-ts CodeBlock_wrapper__20Yku " style="left:0"><div><span class="CodeBlock_extend__1hOFJ">&lt;&gt;</span><span class="CodeBlock_copy__1LH65">Copy</span></div><code class="language-ts"><span class="token keyword">class</span> <span class="token class-name"><span class="token maybe-class-name">ViewContainerRef</span></span> <span class="token punctuation">{</span>
    <span class="token spread operator">...</span>
    <span class="token method function property-access">clear</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token keyword">void</span>
    <span class="token function">insert</span><span class="token punctuation">(</span>viewRef<span class="token operator">:</span> <span class="token maybe-class-name">ViewRef</span><span class="token punctuation">,</span> index<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token maybe-class-name">ViewRef</span>
    <span class="token function">get</span><span class="token punctuation">(</span>index<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token maybe-class-name">ViewRef</span>
    <span class="token function">indexOf</span><span class="token punctuation">(</span>viewRef<span class="token operator">:</span> <span class="token maybe-class-name">ViewRef</span><span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token builtin">number</span>
    <span class="token function">detach</span><span class="token punctuation">(</span>index<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token maybe-class-name">ViewRef</span>
    <span class="token function">move</span><span class="token punctuation">(</span>viewRef<span class="token operator">:</span> <span class="token maybe-class-name">ViewRef</span><span class="token punctuation">,</span> currentIndex<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token maybe-class-name">ViewRef</span>
<span class="token punctuation">}</span></code></pre><p>We’ve seen earlier how two types of views can be manually created from a template and a component. Once we have a view, we can insert it into a DOM using the <code>insert</code> method. Here is the example of creating an embedded view from a template and inserting it into a specific place marked by an <code>ng-container</code> element:</p><pre class="language-ts CodeBlock_wrapper__20Yku " style="left:0"><div><span class="CodeBlock_extend__1hOFJ">&lt;&gt;</span><span class="CodeBlock_copy__1LH65">Copy</span></div><code class="language-ts"><span class="token decorator"><span class="token at operator">@</span><span class="token function">Component</span></span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    selector<span class="token operator">:</span> <span class="token string">&#x27;sample&#x27;</span><span class="token punctuation">,</span>
    template<span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">
        &lt;span&gt;I am first span&lt;/span&gt;
        &lt;ng-container #vc&gt;&lt;/ng-container&gt;
        &lt;span&gt;I am last span&lt;/span&gt;
        &lt;ng-template #tpl&gt;
            &lt;span&gt;I am span in template&lt;/span&gt;
        &lt;/ng-template&gt;
    </span><span class="token template-punctuation string">`</span></span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token keyword module">export</span> <span class="token keyword">class</span> <span class="token class-name"><span class="token maybe-class-name">SampleComponent</span></span> <span class="token keyword">implements</span> <span class="token class-name"><span class="token maybe-class-name">AfterViewInit</span></span> <span class="token punctuation">{</span>
    <span class="token decorator"><span class="token at operator">@</span><span class="token function">ViewChild</span></span><span class="token punctuation">(</span><span class="token string">&quot;vc&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>read<span class="token operator">:</span> <span class="token maybe-class-name">ViewContainerRef</span><span class="token punctuation">}</span><span class="token punctuation">)</span> vc<span class="token operator">:</span> <span class="token maybe-class-name">ViewContainerRef</span><span class="token punctuation">;</span>
    <span class="token decorator"><span class="token at operator">@</span><span class="token function">ViewChild</span></span><span class="token punctuation">(</span><span class="token string">&quot;tpl&quot;</span><span class="token punctuation">)</span> tpl<span class="token operator">:</span> <span class="token maybe-class-name">TemplateRef</span><span class="token operator">&lt;</span><span class="token builtin">any</span><span class="token operator">&gt;</span><span class="token punctuation">;</span>

    <span class="token function">ngAfterViewInit</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">let</span> view <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">tpl</span><span class="token punctuation">.</span><span class="token method function property-access">createEmbeddedView</span><span class="token punctuation">(</span><span class="token keyword null nil">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">vc</span><span class="token punctuation">.</span><span class="token method function property-access">insert</span><span class="token punctuation">(</span>view<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre><p>With this implementation, the resulting <code>html</code> looks like this:</p><pre class="language-ts CodeBlock_wrapper__20Yku " style="left:0"><div><span class="CodeBlock_extend__1hOFJ">&lt;&gt;</span><span class="CodeBlock_copy__1LH65">Copy</span></div><code class="language-ts"><span class="token operator">&lt;</span>sample<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>span<span class="token operator">&gt;</span><span class="token constant">I</span> am first span<span class="token operator">&lt;</span><span class="token operator">/</span>span<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span>template bindings<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token operator">--</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>span<span class="token operator">&gt;</span><span class="token constant">I</span> am span <span class="token keyword">in</span> template<span class="token operator">&lt;</span><span class="token operator">/</span>span<span class="token operator">&gt;</span>

    <span class="token operator">&lt;</span>span<span class="token operator">&gt;</span><span class="token constant">I</span> am last span<span class="token operator">&lt;</span><span class="token operator">/</span>span<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span>template bindings<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token operator">--</span><span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>sample<span class="token operator">&gt;</span></code></pre><p>To remove a view from the DOM, we can use the <code>detach</code> method. All other methods are self explanatory and can be used to get a reference to a view by the index, move the view to another location, or remove all views from the container.</p><h3 id="creating-views" class="HeadingAnchor_wrapper__2MP6G  anchor-heading">Creating Views<div class="HeadingAnchor_info__2qSek"><svg width="24" height="25" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M10.238 13.3a4.285 4.285 0 006.462.463l2.572-2.572a4.286 4.286 0 00-6.06-6.06l-1.474 1.466m1.928 4.989a4.285 4.285 0 00-6.463-.463l-2.571 2.571a4.286 4.286 0 006.06 6.06l1.466-1.465" stroke="#999" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="HeadingAnchor_copy__3A-L5">Link to this section</span></div></h3><p><code>ViewContainer</code> also provides an API to create a view automatically:</p><pre class="language-ts CodeBlock_wrapper__20Yku " style="left:0"><div><span class="CodeBlock_extend__1hOFJ">&lt;&gt;</span><span class="CodeBlock_copy__1LH65">Copy</span></div><code class="language-ts"><span class="token keyword">class</span> <span class="token class-name"><span class="token maybe-class-name">ViewContainerRef</span></span> <span class="token punctuation">{</span>
    element<span class="token operator">:</span> <span class="token maybe-class-name">ElementRef</span>
    length<span class="token operator">:</span> <span class="token builtin">number</span>

    <span class="token function">createComponent</span><span class="token punctuation">(</span>componentFactory<span class="token spread operator">...</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token maybe-class-name">ComponentRef</span><span class="token operator">&lt;</span><span class="token constant">C</span><span class="token operator">&gt;</span>
    <span class="token function">createEmbeddedView</span><span class="token punctuation">(</span>templateRef<span class="token spread operator">...</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token maybe-class-name">EmbeddedViewRef</span><span class="token operator">&lt;</span><span class="token constant">C</span><span class="token operator">&gt;</span>
    <span class="token spread operator">...</span>
<span class="token punctuation">}</span></code></pre><p>These are simply convenient wrappers to what we’ve done manually above. They create a view from a template or component and insert it at the specified location.</p><h2 id="ngtemplateoutlet-and-ngcomponentoutlet" class="HeadingAnchor_wrapper__2MP6G  anchor-heading">ngTemplateOutlet and ngComponentOutlet<div class="HeadingAnchor_info__2qSek"><svg width="24" height="25" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M10.238 13.3a4.285 4.285 0 006.462.463l2.572-2.572a4.286 4.286 0 00-6.06-6.06l-1.474 1.466m1.928 4.989a4.285 4.285 0 00-6.463-.463l-2.571 2.571a4.286 4.286 0 006.06 6.06l1.466-1.465" stroke="#999" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="HeadingAnchor_copy__3A-L5">Link to this section</span></div></h2><p>While it’s always good to know how the underlying mechanisms work, it’s usually desirable to have some sort of a shortcut. This shortcut comes in the form of two directives: <code>ngTemplateOutlet</code> and <code>ngComponentOutlet</code>. At the time of this writing both are experimental and <code>ngComponentOutlet</code> will be available as of version 4. But if you’ve read everything above, it’ll be very easy to understand what they do.</p><h3 id="ngtemplateoutlet" class="HeadingAnchor_wrapper__2MP6G  anchor-heading">ngTemplateOutlet<div class="HeadingAnchor_info__2qSek"><svg width="24" height="25" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M10.238 13.3a4.285 4.285 0 006.462.463l2.572-2.572a4.286 4.286 0 00-6.06-6.06l-1.474 1.466m1.928 4.989a4.285 4.285 0 00-6.463-.463l-2.571 2.571a4.286 4.286 0 006.06 6.06l1.466-1.465" stroke="#999" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="HeadingAnchor_copy__3A-L5">Link to this section</span></div></h3><p>This one marks a DOM element as a <code>ViewContainer</code> and inserts an embedded view created by a template without the need to explicitly do this in a component class. This means that the example above where we created a view and inserted it into a <code>#vc</code> DOM element can be rewritten like this:</p><pre class="language-ts CodeBlock_wrapper__20Yku " style="left:0"><div><span class="CodeBlock_extend__1hOFJ">&lt;&gt;</span><span class="CodeBlock_copy__1LH65">Copy</span></div><code class="language-ts"><span class="token decorator"><span class="token at operator">@</span><span class="token function">Component</span></span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    selector<span class="token operator">:</span> <span class="token string">&#x27;sample&#x27;</span><span class="token punctuation">,</span>
    template<span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">
        &lt;span&gt;I am first span&lt;/span&gt;
        &lt;ng-container [ngTemplateOutlet]=&quot;tpl&quot;&gt;&lt;/ng-container&gt;
        &lt;span&gt;I am last span&lt;/span&gt;
        &lt;ng-template #tpl&gt;
            &lt;span&gt;I am span in template&lt;/span&gt;
        &lt;/ng-template&gt;
    </span><span class="token template-punctuation string">`</span></span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token keyword module">export</span> <span class="token keyword">class</span> <span class="token class-name"><span class="token maybe-class-name">SampleComponent</span></span> <span class="token punctuation">{</span><span class="token punctuation">}</span></code></pre><p>As you can see we don’t use any view instantiating code in the component class. Very handy!</p><h3 id="ngcomponentoutlet" class="HeadingAnchor_wrapper__2MP6G  anchor-heading">ngComponentOutlet<div class="HeadingAnchor_info__2qSek"><svg width="24" height="25" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M10.238 13.3a4.285 4.285 0 006.462.463l2.572-2.572a4.286 4.286 0 00-6.06-6.06l-1.474 1.466m1.928 4.989a4.285 4.285 0 00-6.463-.463l-2.571 2.571a4.286 4.286 0 006.06 6.06l1.466-1.465" stroke="#999" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="HeadingAnchor_copy__3A-L5">Link to this section</span></div></h3><p>This directive is analogous to <code>ngTemplateOutlet</code> with the difference being that it creates a <strong><strong>host view</strong></strong> (instantiates a component), and not an embedded view. You can use it like this:</p><pre class="language-html CodeBlock_wrapper__20Yku " style="left:0"><div><span class="CodeBlock_extend__1hOFJ">&lt;&gt;</span><span class="CodeBlock_copy__1LH65">Copy</span></div><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ng-container</span> <span class="token attr-name">*ngComponentOutlet</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ColorComponent<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ng-container</span><span class="token punctuation">&gt;</span></span></code></pre><h2 id="wrapping-up" class="HeadingAnchor_wrapper__2MP6G  anchor-heading">Wrapping up<div class="HeadingAnchor_info__2qSek"><svg width="24" height="25" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M10.238 13.3a4.285 4.285 0 006.462.463l2.572-2.572a4.286 4.286 0 00-6.06-6.06l-1.474 1.466m1.928 4.989a4.285 4.285 0 00-6.463-.463l-2.571 2.571a4.286 4.286 0 006.06 6.06l1.466-1.465" stroke="#999" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="HeadingAnchor_copy__3A-L5">Link to this section</span></div></h2><p>I realize that all this information may be a lot to digest. But actually it’s pretty coherent and lays out a clear mental model for manipulating the DOM via views. You get references to Angular DOM abstractions by using a <code>ViewChild</code> query along with template variable references. The simplest wrapper around a DOM element is <code>ElementRef</code>. For templates you have <code>TemplateRef</code> that allows you to create an embedded view. Host views can be accessed on <code>componentRef</code> created using <code>ComponentFactoryResolver</code>. The views can be manipulated with <code>ViewContainerRef</code>. There are two directives that make the manual process automatic: <code>ngTemplateOutlet </code>— for embedded views and <code>ngComponentOutlet</code> for host views (dynamic components).</p></main><div class="GitDiscussion_wrapper__18gvJ" id="discussion"><div class="row"><div class="col-12"><h4 class="GitDiscussion_header__sUbZ6">Comments (<!-- -->5<!-- -->)</h4></div><div class="col-12"><div class="GitDiscussion_comment__3e_V1"><div class="GitDiscussion_comment_top__2m0WF"><div class="GitDiscussion_comment_author__1zMZr"><img src="https://avatars.githubusercontent.com/u/6290194?v=4" alt="author"/><span>pardeepr08</span></div><div class="GitDiscussion_comment_created__28Ro_">12 
        June 
        2021</div></div><div class="content GitDiscussion_comment_content__bX8hH"><div><p>Awesome Maxim. I am really inspired after reading this article and a sense of inquisitiveness to know the angular internals has arisen.</p></div></div><div class="GitDiscussion_comment_bottom__1Iehu"><div class="GitDiscussion_comment_reply_btn__2uxK6"><a href="https://github.com/indepth-dev/community/discussions/71#discussioncomment-860773" target="_blank" rel="noopener noreferrer"><svg width="22" height="18" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M18.474 8.323C16.36 6.198 13.314 5.022 9.81 4.82V1.7c0-.474-.339-.9-.777-1.08a1.209 1.209 0 00-1.3.26L.535 8.18A1.168 1.168 0 00.53 9.82l7.18 7.299c.333.338.888.442 1.326.262.438-.18.775-.607.775-1.081v-3.156c2.336-.069 7.827.166 9.83 3.728a1.126 1.126 0 001.271.559c.512-.134.89-.597.893-1.127 0-.188-.002-4.637-3.33-7.98zM8.46 10.883c-.59.065-.985.565-.985 1.16v1.407L3.095 9l4.38-4.45v1.406c0 .645.47 1.168 1.114 1.168 6.285 0 8.946 3.009 10.073 5.582-4.121-2.458-9.89-1.858-10.202-1.823z" fill="#0F69AF"></path></svg><span>Reply</span></a></div></div></div></div><div class="col-12"><div class="GitDiscussion_comment__3e_V1"><div class="GitDiscussion_comment_top__2m0WF"><div class="GitDiscussion_comment_author__1zMZr"><img src="https://avatars.githubusercontent.com/u/24543466?v=4" alt="author"/><span>ABSTRACT123</span></div><div class="GitDiscussion_comment_created__28Ro_">27 
        June 
        2021</div></div><div class="content GitDiscussion_comment_content__bX8hH"><div><p>hello,</p>
<p>Thanks for the article. I was looking for a way to dynamically insert html elements into an element.</p>
<p>for example I have</p>
<p><code>&lt;ul #somelist&gt;&lt;/ul&gt;</code></p>
<p>I would like to programmatically insert li elements into the #somelist elementRef.</p>
<p>There are indeed easy ways to do that, like with ngFor. But it is just for the sake of learning/understanding Angular. I also could use JS to directly manipulate the document with createElement and appendChild... I also know how to dynamically insert components but was wondering if there was a way to just insert a template?</p>
<p>Thank you.</p></div></div><div class="GitDiscussion_comment_bottom__1Iehu"><div class="GitDiscussion_comment_reply_btn__2uxK6"><a href="https://github.com/indepth-dev/community/discussions/71#discussioncomment-927770" target="_blank" rel="noopener noreferrer"><svg width="22" height="18" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M18.474 8.323C16.36 6.198 13.314 5.022 9.81 4.82V1.7c0-.474-.339-.9-.777-1.08a1.209 1.209 0 00-1.3.26L.535 8.18A1.168 1.168 0 00.53 9.82l7.18 7.299c.333.338.888.442 1.326.262.438-.18.775-.607.775-1.081v-3.156c2.336-.069 7.827.166 9.83 3.728a1.126 1.126 0 001.271.559c.512-.134.89-.597.893-1.127 0-.188-.002-4.637-3.33-7.98zM8.46 10.883c-.59.065-.985.565-.985 1.16v1.407L3.095 9l4.38-4.45v1.406c0 .645.47 1.168 1.114 1.168 6.285 0 8.946 3.009 10.073 5.582-4.121-2.458-9.89-1.858-10.202-1.823z" fill="#0F69AF"></path></svg><span>Reply</span></a></div></div></div></div><div class="d-flex justify-content-end col-12"><div class="GitDiscussion_comment__3e_V1 GitDiscussion_reply__2M6QF"><div class="GitDiscussion_comment_top__2m0WF"><div class="GitDiscussion_comment_author__1zMZr"><img src="https://avatars.githubusercontent.com/u/6124091?u=786a99a4083f534061505244c44bcdb6708cfe96&amp;v=4" alt="author"/><span>maxkoretskyi</span></div><div class="GitDiscussion_comment_created__28Ro_">29 
        June 
        2021</div></div><div class="content GitDiscussion_comment_content__bX8hH"><div><p>It should be possible by querying the <code>#somelist</code> element as <code>@ViewChild(&#x27;somelist&#x27;, {read: ViewContainerRef) container</code> and your template as <code>@ViewChild(&#x27;mytpl&#x27;)</code>, then you can call <code>createEmbeddedView</code> on the container and pass the reference to the mytpl.</p></div></div></div></div><div class="GitDiscussion_more_replies__3Ea4y col-12"><a href="https://github.com/indepth-dev/community/discussions/71#discussioncomment-938064" target="_blank" rel="noopener noreferrer">More replies<svg width="26" height="28" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M8 11l6 6 6-6" stroke="#FF6928" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path></svg></a></div><div class="col-12"><div class="GitDiscussion_comment__3e_V1"><div class="GitDiscussion_comment_top__2m0WF"><div class="GitDiscussion_comment_author__1zMZr"><img src="https://avatars.githubusercontent.com/u/18269443?v=4" alt="author"/><span>PChristoph</span></div><div class="GitDiscussion_comment_created__28Ro_">8 
        April 
        2022</div></div><div class="content GitDiscussion_comment_content__bX8hH"><div><p>Very nice article, thank you!</p>
<p>One thing I stumbled accross: I didn&#x27;t quite understand the section about <strong>ngTemplateOutlet</strong>. Maybe some elaboration or the actual generated output could improve the article.</p>
<p>Could you please explain how it would be possible to create something recursively: attach a Component to a Component as a child, like in a TreeView? When using the componentfactory, we are getting back a ComponentRef - how can we go on with it?</p></div></div><div class="GitDiscussion_comment_bottom__1Iehu"><div class="GitDiscussion_comment_reply_btn__2uxK6"><a href="https://github.com/indepth-dev/community/discussions/71#discussioncomment-2533958" target="_blank" rel="noopener noreferrer"><svg width="22" height="18" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M18.474 8.323C16.36 6.198 13.314 5.022 9.81 4.82V1.7c0-.474-.339-.9-.777-1.08a1.209 1.209 0 00-1.3.26L.535 8.18A1.168 1.168 0 00.53 9.82l7.18 7.299c.333.338.888.442 1.326.262.438-.18.775-.607.775-1.081v-3.156c2.336-.069 7.827.166 9.83 3.728a1.126 1.126 0 001.271.559c.512-.134.89-.597.893-1.127 0-.188-.002-4.637-3.33-7.98zM8.46 10.883c-.59.065-.985.565-.985 1.16v1.407L3.095 9l4.38-4.45v1.406c0 .645.47 1.168 1.114 1.168 6.285 0 8.946 3.009 10.073 5.582-4.121-2.458-9.89-1.858-10.202-1.823z" fill="#0F69AF"></path></svg><span>Reply</span></a></div></div></div></div><div class="d-flex justify-content-end col-12"><div class="GitDiscussion_comment__3e_V1 GitDiscussion_reply__2M6QF"><div class="GitDiscussion_comment_top__2m0WF"><div class="GitDiscussion_comment_author__1zMZr"><img src="https://avatars.githubusercontent.com/u/6124091?u=786a99a4083f534061505244c44bcdb6708cfe96&amp;v=4" alt="author"/><span>maxkoretskyi</span></div><div class="GitDiscussion_comment_created__28Ro_">9 
        April 
        2022</div></div><div class="content GitDiscussion_comment_content__bX8hH"><div><p>Not sure I understand your question. A component can add other components only as attached to view container ref. Each component can have view container ref in its own template. So you can keep inserting components into components recursively :)</p></div></div></div></div><div class="col-12"><a href="https://github.com/indepth-dev/community/discussions/71" class="btn GitDiscussion_discuss_btn__z7oOQ" target="_blank" rel="noopener noreferrer">Join the discussion</a></div></div></div></div><div class="d-block d-lg-none Post_socials_mobile__3HNhp col-lg-12 col-12 order-lg-3 order-2"><p>Share</p><a href="https://twitter.com/intent/tweet?text=%22Exploring%20Angular%20DOM%20manipulation%20techniques%20using%20ViewContainerRef%22%20by%20%40maxkoretskyi%20%23angular%20%23javascript%20%23webdev%0A%40indepth_dev%0Ahttps%3A%2F%2Findepth.dev%2Fposts%2F1052%2Fexploring-angular-dom-manipulation-techniques-using-viewcontainerref" class="Post_social__z0SiP Post_twitter__2YBjh" target="_blank" rel="noopener noreferrer"><svg width="28" height="28" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M25 5.01a10.886 10.886 0 01-3.14 1.535 4.467 4.467 0 00-7.087.425A4.504 4.504 0 0014 9.554v1.003A10.631 10.631 0 018.931 9.42 10.67 10.67 0 015 6.013s-4 9.028 5 13.041a11.613 11.613 0 01-7 2.006c9 5.016 20 0 20-11.536 0-.28-.028-.558-.08-.832A7.75 7.75 0 0025 5.01v0z" stroke="#fff" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path></svg></a><a href="https://www.facebook.com/sharer/sharer.php?u=https://indepth.dev/posts/1052/exploring-angular-dom-manipulation-techniques-using-viewcontainerref" class="Post_social__z0SiP Post_facebook__3Sz46" target="_blank" rel="noopener noreferrer"><svg width="28" height="28" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M19 4h-3a5 5 0 00-5 5v3H8v4h3v8h4v-8h3l1-4h-4V9a1 1 0 011-1h3V4z" stroke="#fff" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path></svg></a><a href="https://www.linkedin.com/sharing/share-offsite/?url=https://indepth.dev/posts/1052/exploring-angular-dom-manipulation-techniques-using-viewcontainerref" class="Post_social__z0SiP Post_linkedin__1ujBu" target="_blank" rel="noopener noreferrer"><svg width="28" height="28" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M18 10a6 6 0 016 6v7h-4v-7a2 2 0 00-4 0v7h-4v-7a6 6 0 016-6zM8 11H4v12h4V11zM6 8a2 2 0 100-4 2 2 0 000 4z" stroke="#fff" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path></svg></a></div><div class="col-lg-4 col-12 order-lg-2 order-3"><div class="row"><div class="d-block d-md-none col-12"><div class="AuthorCardVertical_wrapper__2pLsD AuthorCardVertical_wrapper__shadow__RvhNV"><p class="AuthorCardVertical_title__1EoyZ">About the author</p><img src="https://images.indepth.dev/images/2022/07/ava.jpg" alt="author_image"/><div class="AuthorCardVertical_meta_wrapper__LfznE"><div><a href="/authors/1001/maxkoretskyi" title="Max Koretskyi" target="_blank" rel="noopener noreferrer"><h5>Max Koretskyi</h5></a></div><div class="AuthorCardVertical_links__3sjPR"><a href="https://twitter.com/@maxkoretskyi" target="_blank" rel="noopener noreferrer"><svg width="28" height="28" fill="none" xmlns="http://www.w3.org/2000/svg" class="svg-orange"><path d="M25 5.01a10.886 10.886 0 01-3.14 1.535 4.467 4.467 0 00-7.087.425A4.504 4.504 0 0014 9.554v1.003A10.631 10.631 0 018.931 9.42 10.67 10.67 0 015 6.013s-4 9.028 5 13.041a11.613 11.613 0 01-7 2.006c9 5.016 20 0 20-11.536 0-.28-.028-.558-.08-.832A7.75 7.75 0 0025 5.01v0z" stroke="#fff" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path></svg></a></div></div><p class="AuthorCardVertical_bio__3w2OT">Max is a self-taught software engineer that believes in fundamental knowledge and hardcore learning. He’s the founder of inDepth.dev community and one of the top users on StackOverflow (70k rep).</p></div></div><div class="d-none d-md-block d-lg-none col-12"><div class="AuthorCardHorizontal_wrapper__1s2T3 AuthorCardHorizontal_wrapper__shadow__UdRl3"><img src="https://images.indepth.dev/images/2022/07/ava.jpg" alt="author_image"/><div class="AuthorCardHorizontal_data__GR-zX"><p class="AuthorCardHorizontal_title__3GKjy">About the author</p><a title="Max Koretskyi" href="/authors/1001/maxkoretskyi"><h5>Max Koretskyi</h5></a><p class="AuthorCardHorizontal_bio__36cVn">Max is a self-taught software engineer that believes in fundamental knowledge and hardcore learning. He’s the founder of inDepth.dev community and one of the top users on StackOverflow (70k rep).</p><div class="AuthorCardHorizontal_meta__3adH8"><span class="AuthorCardHorizontal_links__3LMkY"><a href="https://twitter.com/@maxkoretskyi" target="_blank" rel="noopener noreferrer"><svg width="28" height="28" fill="none" xmlns="http://www.w3.org/2000/svg" class="svg-orange"><path d="M25 5.01a10.886 10.886 0 01-3.14 1.535 4.467 4.467 0 00-7.087.425A4.504 4.504 0 0014 9.554v1.003A10.631 10.631 0 018.931 9.42 10.67 10.67 0 015 6.013s-4 9.028 5 13.041a11.613 11.613 0 01-7 2.006c9 5.016 20 0 20-11.536 0-.28-.028-.558-.08-.832A7.75 7.75 0 0025 5.01v0z" stroke="#fff" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path></svg></a></span><span class="AuthorCardHorizontal_posts__J1fAo"><a href="/search?authors=Max%20Koretskyi">56<!-- --> stories</a></span></div></div></div></div><div class="d-none d-lg-block col-12"><div class="AuthorCardVertical_wrapper__2pLsD "><p class="AuthorCardVertical_title__1EoyZ">About the author</p><img src="https://images.indepth.dev/images/2022/07/ava.jpg" alt="author_image"/><div class="AuthorCardVertical_meta_wrapper__LfznE"><div><a href="/authors/1001/maxkoretskyi" title="Max Koretskyi" target="_blank" rel="noopener noreferrer"><h5>Max Koretskyi</h5></a></div><div class="AuthorCardVertical_links__3sjPR"><a href="https://twitter.com/@maxkoretskyi" target="_blank" rel="noopener noreferrer"><svg width="28" height="28" fill="none" xmlns="http://www.w3.org/2000/svg" class="svg-orange"><path d="M25 5.01a10.886 10.886 0 01-3.14 1.535 4.467 4.467 0 00-7.087.425A4.504 4.504 0 0014 9.554v1.003A10.631 10.631 0 018.931 9.42 10.67 10.67 0 015 6.013s-4 9.028 5 13.041a11.613 11.613 0 01-7 2.006c9 5.016 20 0 20-11.536 0-.28-.028-.558-.08-.832A7.75 7.75 0 0025 5.01v0z" stroke="#fff" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path></svg></a></div></div><p class="AuthorCardVertical_bio__3w2OT">Max is a self-taught software engineer that believes in fundamental knowledge and hardcore learning. He’s the founder of inDepth.dev community and one of the top users on StackOverflow (70k rep).</p></div></div><div class="d-lg-block col-12"><div class="PostJobsSugesstion_wrapper__2ieIy"><div class="PostJobsSugesstion_top__hsOiD"><h6>Looking for a JS job? <svg width="30" height="35" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M15 34.018c-.449 0-.904-.12-1.3-.348l-4.13-2.445c-.617-.348-.316-.468-.115-.535.824-.288.991-.349 1.869-.85.093-.054.214-.034.308.026l3.174 1.882a.388.388 0 00.382 0l12.368-7.139a.397.397 0 00.187-.335V9.998a.4.4 0 00-.194-.342L15.188 2.524a.388.388 0 00-.382 0L2.45 9.663a.39.39 0 00-.194.341v14.27a.37.37 0 00.194.329l3.388 1.955c1.842.917 2.967-.16 2.967-1.252v-14.09c0-.2.16-.354.361-.354h1.567c.195 0 .362.153.362.354v14.096c0 2.451-1.34 3.858-3.663 3.858-.716 0-1.279 0-2.846-.777l-3.241-1.869a2.604 2.604 0 01-1.3-2.256V9.998c0-.924.496-1.795 1.3-2.257L13.701.603c.783-.442 1.821-.442 2.598 0l12.368 7.145a2.604 2.604 0 011.3 2.256v14.27a2.62 2.62 0 01-1.3 2.257L16.3 33.67a2.605 2.605 0 01-1.299.348zm9.984-14.07c0-2.671-1.808-3.381-5.605-3.883-3.843-.51-4.232-.77-4.232-1.668 0-.743.328-1.734 3.174-1.734 2.538 0 3.476.549 3.864 2.263.034.161.181.281.349.281h1.607c.1 0 .194-.04.26-.113a.373.373 0 00.095-.275c-.248-2.953-2.21-4.326-6.175-4.326-3.529 0-5.631 1.487-5.631 3.985 0 2.705 2.096 3.455 5.477 3.79 4.052.395 4.366.99 4.366 1.788 0 1.38-1.111 1.968-3.716 1.968-3.275 0-3.991-.823-4.232-2.45a.355.355 0 00-.355-.302h-1.6c-.201 0-.355.16-.355.355 0 2.083 1.131 4.567 6.549 4.567 3.91-.007 6.16-1.553 6.16-4.245z" fill="#032E7A"></path></svg></h6></div><div class="PostJobsSugesstion_bottom__2Xrno"><div class="row"><div class="col-lg-12 col-md-6 col-12"><div class="PostJobsSugesstion_job__2Xxi5"><div class="PostJobsSugesstion_job_image__Ikfud"><a href="https://www.indeed.com/viewjob?cmp=Snowrelic-Inc&amp;t=Senior+Angular+Developer&amp;jk=a0e61409f29d553c&amp;q=Frontend&amp;vjs=3" target="_blank" rel="noopener noreferrer"><img src="https://fra1.digitaloceanspaces.com/images.indepth.dev/jobs/131929/1671227023349" alt="Job logo"/></a></div><div class="PostJobsSugesstion_job_desc__2WrwT"><a href="https://www.indeed.com/viewjob?cmp=Snowrelic-Inc&amp;t=Senior+Angular+Developer&amp;jk=a0e61409f29d553c&amp;q=Frontend&amp;vjs=3" class="PostJobsSugesstion_job_name__1BpwE" target="_blank" rel="noopener noreferrer"><h6>Sr. Angular Developer</h6></a><p class="PostJobsSugesstion_job_company__3b9aQ">Snowrelic INC</p><div><div class="PostJobsSugesstion_job_location__2GRPH"><span>Worldwide</span><br/><span>Remote</span></div><div class="PostJobsSugesstion_job_salary__3XLvK"><span>$<!-- -->70k - </span><span>$<!-- -->152k</span></div></div></div></div></div><div class="col-lg-12 col-md-6 col-12"><div class="PostJobsSugesstion_job__2Xxi5"><div class="PostJobsSugesstion_job_image__Ikfud"><a href="https://www.indeed.com/viewjob?cmp=Port-Technology-Services&amp;t=Full+Stack+Developer&amp;jk=0bb3966072b2b96a&amp;q=Frontend&amp;vjs=3" target="_blank" rel="noopener noreferrer"><img src="https://fra1.digitaloceanspaces.com/images.indepth.dev/jobs/131927/1671226800346" alt="Job logo"/></a></div><div class="PostJobsSugesstion_job_desc__2WrwT"><a href="https://www.indeed.com/viewjob?cmp=Port-Technology-Services&amp;t=Full+Stack+Developer&amp;jk=0bb3966072b2b96a&amp;q=Frontend&amp;vjs=3" class="PostJobsSugesstion_job_name__1BpwE" target="_blank" rel="noopener noreferrer"><h6>Full Stack Developer (Angular and .NET)</h6></a><p class="PostJobsSugesstion_job_company__3b9aQ">Port Technology Services</p><div><div class="PostJobsSugesstion_job_location__2GRPH"><span>Worldwide</span><br/><span>Remote</span></div><div class="PostJobsSugesstion_job_salary__3XLvK"><span>$<!-- -->93k - </span><span>$<!-- -->118k</span></div></div></div></div></div><div class="col-lg-12 col-md-6 col-12"><div class="PostJobsSugesstion_job__2Xxi5"><div class="PostJobsSugesstion_job_image__Ikfud"><a href="https://www.indeed.com/viewjob?cmp=Turing&amp;t=Senior+Full+Stack+Developer&amp;jk=899a2507a637e88a&amp;q=Frontend&amp;vjs=3" target="_blank" rel="noopener noreferrer"><img src="https://fra1.digitaloceanspaces.com/images.indepth.dev/jobs/131926/1671226687545" alt="Job logo"/></a></div><div class="PostJobsSugesstion_job_desc__2WrwT"><a href="https://www.indeed.com/viewjob?cmp=Turing&amp;t=Senior+Full+Stack+Developer&amp;jk=899a2507a637e88a&amp;q=Frontend&amp;vjs=3" class="PostJobsSugesstion_job_name__1BpwE" target="_blank" rel="noopener noreferrer"><h6>Remote Senior Full Stack Developer (Node.js and Angular)</h6></a><p class="PostJobsSugesstion_job_company__3b9aQ">Turing</p><div><div class="PostJobsSugesstion_job_location__2GRPH"><span>Worldwide</span><br/><span>Remote</span></div><div class="PostJobsSugesstion_job_salary__3XLvK"><span>$<!-- -->94k - </span><span>$<!-- -->119k</span></div></div></div></div></div><div class="col-lg-12 col-md-6 col-12"><div class="PostJobsSugesstion_job__2Xxi5"><div class="PostJobsSugesstion_job_image__Ikfud"><a href="https://www.indeed.com/viewjob?cmp=Launching-Point&amp;t=Senior+Angular+Developer&amp;jk=87bb13fc1e95d38b&amp;q=Frontend&amp;vjs=3" target="_blank" rel="noopener noreferrer"><img src="https://fra1.digitaloceanspaces.com/images.indepth.dev/jobs/131924/1671143038252" alt="Job logo"/></a></div><div class="PostJobsSugesstion_job_desc__2WrwT"><a href="https://www.indeed.com/viewjob?cmp=Launching-Point&amp;t=Senior+Angular+Developer&amp;jk=87bb13fc1e95d38b&amp;q=Frontend&amp;vjs=3" class="PostJobsSugesstion_job_name__1BpwE" target="_blank" rel="noopener noreferrer"><h6>Senior Angular Developer</h6></a><p class="PostJobsSugesstion_job_company__3b9aQ">Launching Point</p><div><div class="PostJobsSugesstion_job_location__2GRPH"><span>United States</span><br/><span>Remote</span></div><div class="PostJobsSugesstion_job_salary__3XLvK"><span>$<!-- -->130k - </span><span>$<!-- -->155k</span></div></div></div></div></div></div><a href="https://jobs.indepth.dev" class="PostJobsSugesstion_job_more__1gbM2" target="_blank" rel="noopener noreferrer"><span>More jobs</span><svg width="20" height="21" fill="none" xmlns="http://www.w3.org/2000/svg" class="PostJobsSugesstion_job_more_arrow__1Na_-"><path d="M4.166 10.5h11.667M10 4.667l5.833 5.833L10 16.333" stroke="#fff" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path></svg></a></div></div></div><div class="d-none d-lg-block col-12"><div class="PostSidebar_wrapper__1FAPv row"><div class="d-block d-lg-none col"><div class="NxBannerCliSidebar_wrapper__1uYjM"><p class="banner-free-content">THIS AD MAKES CONTENT FREE</p><a href="https://bit.ly/39cqbxa" target="_blank" rel="noopener noreferrer"><div class="row"><div class="d-block d-md-none col"><div class="NxBannerCliSidebar_image__dIIrJ"><img src="/img/banners/nx-angular-mobile.jpg" alt="NxAngularCli"/><svg width="40" height="40" fill="none" xmlns="http://www.w3.org/2000/svg" class="close-banner" role="button" tabindex="0"><path d="M28.572 11.429L11.429 28.572m0-17.143l17.143 17.143" stroke="#FFF" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path></svg></div></div><div class="d-none d-md-block d-lg-none col"><div class="NxBannerCliSidebar_image__dIIrJ"><img src="/img/banners/nx-angular-sidebar-tablet.jpg" alt="NxAngularCli"/><svg width="40" height="40" fill="none" xmlns="http://www.w3.org/2000/svg" class="close-banner" role="button" tabindex="0"><path d="M28.572 11.429L11.429 28.572m0-17.143l17.143 17.143" stroke="#FFF" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path></svg></div></div><div class="d-none d-lg-block col"><div class="NxBannerCliSidebar_image__dIIrJ"><img src="/img/banners/nx-angular-sidebar-desktop.jpg" alt="NxAngularCli"/><svg width="40" height="40" fill="none" xmlns="http://www.w3.org/2000/svg" class="close-banner" role="button" tabindex="0"><path d="M28.572 11.429L11.429 28.572m0-17.143l17.143 17.143" stroke="#FFF" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path></svg></div></div></div></a></div></div><div class="PostSidebar_sidebar_posts__216Qt col-lg-12 col-md-12 col-6"><div><article class="SidebarCardDesktopSmall_wrapper__2nmDx "><a title="Exploring how virtual DOM is implemented in React" href="/posts/1501/exploring-how-virtual-dom-is-implemented-in-react">Exploring how virtual DOM is implemented in React</a><div class="SidebarCardDesktopSmall_author__2a7AA"><a href="/authors/1024/andreigatej"><div><img src="https://images.indepth.dev/images/2022/12/me3.jpg" alt="author"/></div><span class="SidebarCardDesktopSmall_author_name__3qSbU" title="Andrei Gatej">Andrei Gatej</span></a></div><div class="SidebarCardDesktopSmall_dates__2jyPP"><p class="SidebarCardDesktopSmall_published_at__2DLkz">2 
        May 
        2022</p><p class="SidebarCardDesktopSmall_reading_time__2tyDl">12<!-- --> min read</p></div></article></div></div><div class="PostSidebar_sidebar_posts__216Qt col-lg-12 col-md-12 col-6"><div><article class="SidebarCardDesktopSmall_wrapper__2nmDx "><a title="Ukraine and In-Depth’s founder need your help" href="/posts/1500/ukraine-and-in-depths-founder-need-your-help">Ukraine and In-Depth’s founder need your help</a><div class="SidebarCardDesktopSmall_author__2a7AA"><a href="/authors/1001/maxkoretskyi"><div><img src="https://images.indepth.dev/images/2022/07/ava.jpg" alt="author"/></div><span class="SidebarCardDesktopSmall_author_name__3qSbU" title="Max Koretskyi">Max Koretskyi</span></a></div><div class="SidebarCardDesktopSmall_dates__2jyPP"><p class="SidebarCardDesktopSmall_published_at__2DLkz">10 
        April 
        2022</p><p class="SidebarCardDesktopSmall_reading_time__2tyDl">2<!-- --> min read</p></div></article></div></div><div class="d-none d-lg-block col"><div class="NxBannerCliSidebar_wrapper__1uYjM"><p class="banner-free-content">THIS AD MAKES CONTENT FREE</p><a href="https://bit.ly/39cqbxa" target="_blank" rel="noopener noreferrer"><div class="row"><div class="d-block d-md-none col"><div class="NxBannerCliSidebar_image__dIIrJ"><img src="/img/banners/nx-angular-mobile.jpg" alt="NxAngularCli"/><svg width="40" height="40" fill="none" xmlns="http://www.w3.org/2000/svg" class="close-banner" role="button" tabindex="0"><path d="M28.572 11.429L11.429 28.572m0-17.143l17.143 17.143" stroke="#FFF" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path></svg></div></div><div class="d-none d-md-block d-lg-none col"><div class="NxBannerCliSidebar_image__dIIrJ"><img src="/img/banners/nx-angular-sidebar-tablet.jpg" alt="NxAngularCli"/><svg width="40" height="40" fill="none" xmlns="http://www.w3.org/2000/svg" class="close-banner" role="button" tabindex="0"><path d="M28.572 11.429L11.429 28.572m0-17.143l17.143 17.143" stroke="#FFF" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path></svg></div></div><div class="d-none d-lg-block col"><div class="NxBannerCliSidebar_image__dIIrJ"><img src="/img/banners/nx-angular-sidebar-desktop.jpg" alt="NxAngularCli"/><svg width="40" height="40" fill="none" xmlns="http://www.w3.org/2000/svg" class="close-banner" role="button" tabindex="0"><path d="M28.572 11.429L11.429 28.572m0-17.143l17.143 17.143" stroke="#FFF" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path></svg></div></div></div></a></div></div></div></div><div class="d-block d-md-none col-12"><div class="NxBannerCliSidebar_wrapper__1uYjM"><p class="banner-free-content">THIS AD MAKES CONTENT FREE</p><a href="https://bit.ly/39cqbxa" target="_blank" rel="noopener noreferrer"><div class="row"><div class="d-block d-md-none col"><div class="NxBannerCliSidebar_image__dIIrJ"><img src="/img/banners/nx-angular-mobile.jpg" alt="NxAngularCli"/><svg width="40" height="40" fill="none" xmlns="http://www.w3.org/2000/svg" class="close-banner" role="button" tabindex="0"><path d="M28.572 11.429L11.429 28.572m0-17.143l17.143 17.143" stroke="#FFF" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path></svg></div></div><div class="d-none d-md-block d-lg-none col"><div class="NxBannerCliSidebar_image__dIIrJ"><img src="/img/banners/nx-angular-sidebar-tablet.jpg" alt="NxAngularCli"/><svg width="40" height="40" fill="none" xmlns="http://www.w3.org/2000/svg" class="close-banner" role="button" tabindex="0"><path d="M28.572 11.429L11.429 28.572m0-17.143l17.143 17.143" stroke="#FFF" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path></svg></div></div><div class="d-none d-lg-block col"><div class="NxBannerCliSidebar_image__dIIrJ"><img src="/img/banners/nx-angular-sidebar-desktop.jpg" alt="NxAngularCli"/><svg width="40" height="40" fill="none" xmlns="http://www.w3.org/2000/svg" class="close-banner" role="button" tabindex="0"><path d="M28.572 11.429L11.429 28.572m0-17.143l17.143 17.143" stroke="#FFF" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path></svg></div></div></div></a></div></div></div></div></div></div></div></article><div class="_slug__articles__gRd_c"><div class="container"><div class="row"><div class="col-12"><h4>Featured articles</h4></div><div class="_slug__article__1iheh col-lg-4 col-md-6 col-12"><div class="d-block d-md-none"><article class="ArticleCardMobile_wrapper__bLT8o ArticleCardMobile_wrapper__shadow__15_zb"><span class="ArticleCardMobile_tag__1j88i"><span class="ArticleCardTag_wrapper__3dniC ArticleCardTag_wrapper_angular__30djs">Angular</span></span><a class="ArticleCardMobile_image__3OHqh" href="/posts/1508/structure-initialization-logic-without-ngoninit-utilize-observables-and-ngonchanges"><img src="https://images.indepth.dev/images/2022/10/2022-10.jpg" alt="post"/></a><span class="ArticleCardMobile_main__2eocP"><div class="ArticleCardMobile_author__2JXXL"><a href="/authors/1132/maciej"><img src="https://images.indepth.dev/images/2021/02/download.png" alt="author"/><span class="ArticleCardMobile_author_name__27JVz" title="Maciej Wojcik">Maciej Wojcik</span></a></div><div class="ArticleCardMobile_dates__2X5SV"><span class="ArticleCardMobile_published_at__1z1bK">10 
        October 
        2022</span><span class="ArticleCardMobile_reading_time__WD4Ku">17<!-- --> min read</span></div><a class="ArticleCardMobile_title__1tga6 ArticleCardMobile_title__mb__15QKy" title="Component initialization without ngOnInit with async pipes for Observables and ngOnChanges" href="/posts/1508/structure-initialization-logic-without-ngoninit-utilize-observables-and-ngonchanges">Component initialization without ngOnInit with async pipes for Observables and ngOnChanges</a><div class="ArticleCardMobile_description__2Wg97"><p>Explore various techniques to improve initlialization code in components. We will replace the ngOnInit entirely and propose better alternatives. We will cover subscriptions management, and other life cycle hooks, such as ngOnChanges.</p></div></span></article></div><div class="d-none d-md-block d-lg-none"><article class="ArticleCardTablet_wrapper__3mcAG ArticleCardTablet_wrapper__shadow__3NuYM"><span class="ArticleCardTablet_tag__1NsTL"><span class="ArticleCardTag_wrapper__3dniC ArticleCardTag_wrapper_angular__30djs">Angular</span></span><a class="ArticleCardTablet_image__n4Vec" href="/posts/1508/structure-initialization-logic-without-ngoninit-utilize-observables-and-ngonchanges"><img src="https://images.indepth.dev/images/2022/10/2022-10.jpg" alt="post"/></a><span class="ArticleCardTablet_main__2QIN-"><div class="ArticleCardTablet_author__1SAVG"><a href="/authors/1132/maciej"><img src="https://images.indepth.dev/images/2021/02/download.png" alt="author"/><span class="ArticleCardTablet_author_name__1wf8Y" title="Maciej Wojcik">Maciej Wojcik</span></a></div><div class="ArticleCardTablet_dates__aCzF-"><span class="ArticleCardTablet_published_at__udh7h">10 
        October 
        2022</span><span class="ArticleCardTablet_reading_time__1Eo30 undefined">17<!-- --> min read</span></div><a class="ArticleCardTablet_title__3Xnjf undefined" title="Component initialization without ngOnInit with async pipes for Observables and ngOnChanges" href="/posts/1508/structure-initialization-logic-without-ngoninit-utilize-observables-and-ngonchanges">Component initialization without ngOnInit with async pipes for Observables and ngOnChanges</a><div class="ArticleCardTablet_description__26hiZ"><p>Explore various techniques to improve initlialization code in components. We will replace the ngOnInit entirely and propose better alternatives. We will cover subscriptions management, and other life cycle hooks, such as ngOnChanges.</p><a type="button" class="brn float-right" href="/posts/1508/structure-initialization-logic-without-ngoninit-utilize-observables-and-ngonchanges">Read more<i class="icon"></i></a></div></span></article></div><div class="d-none d-lg-block"><article class="ArticleCardDesktopDefault_wrapper__1Pykw ArticleCardDesktopDefault_wrapper__shadow__1DYL2 "><span class="ArticleCardDesktopDefault_tag__1Xg1F"><span class="ArticleCardTag_wrapper__3dniC ArticleCardTag_wrapper_angular__30djs">Angular</span></span><a class="ArticleCardDesktopDefault_image__iQAmu" href="/posts/1508/structure-initialization-logic-without-ngoninit-utilize-observables-and-ngonchanges"><img src="https://images.indepth.dev/images/2022/10/2022-10.jpg" alt="post"/></a><span class="ArticleCardDesktopDefault_main__1fPYm"><a title="Component initialization without ngOnInit with async pipes for Observables and ngOnChanges" href="/posts/1508/structure-initialization-logic-without-ngoninit-utilize-observables-and-ngonchanges">Component initialization without ngOnInit with async pipes for Observables and ngOnChanges</a><div class="ArticleCardDesktopDefault_meta__DCkEX ArticleCardDesktopDefault_meta_margin__eOLmJ"><div class="ArticleCardDesktopDefault_author__DcRQb"><a href="/authors/1132/maciej"><div><img src="https://images.indepth.dev/images/2021/02/download.png" alt="author"/></div><span class="ArticleCardDesktopDefault_author_name__2eROU" title="Maciej Wojcik">Maciej Wojcik</span></a></div><div class="ArticleCardDesktopDefault_dates__3b7vx"><p class="ArticleCardDesktopDefault_published_at__3PONI">10 
        October 
        2022</p><p class="ArticleCardDesktopDefault_reading_time__134Iv">17<!-- --> min read</p></div></div><div class="ArticleCardDesktopDefault_description__1phJb"><p>Explore various techniques to improve initlialization code in components. We will replace the ngOnInit entirely and propose better alternatives. We will cover subscriptions management, and other life cycle hooks, such as ngOnChanges.</p><a type="button" class="btn-read-more btn-read-more-orange float-right svg-orange-lite-hover svg-orange-lightest-active" href="/posts/1508/structure-initialization-logic-without-ngoninit-utilize-observables-and-ngonchanges">Read more<svg width="20" height="21" fill="none" xmlns="http://www.w3.org/2000/svg" class="svg-orange"><path d="M4.166 10.5h11.667M10 4.667l5.833 5.833L10 16.333" stroke="#fff" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path></svg></a></div></span></article></div></div><div class="d-none d-md-block d-lg-none col-md-6 col-12"><div class="PostSidebar_wrapper__1FAPv row"><div class="d-block d-lg-none col"><div class="NxBannerCliSidebar_wrapper__1uYjM"><p class="banner-free-content">THIS AD MAKES CONTENT FREE</p><a href="https://bit.ly/39cqbxa" target="_blank" rel="noopener noreferrer"><div class="row"><div class="d-block d-md-none col"><div class="NxBannerCliSidebar_image__dIIrJ"><img src="/img/banners/nx-angular-mobile.jpg" alt="NxAngularCli"/><svg width="40" height="40" fill="none" xmlns="http://www.w3.org/2000/svg" class="close-banner" role="button" tabindex="0"><path d="M28.572 11.429L11.429 28.572m0-17.143l17.143 17.143" stroke="#FFF" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path></svg></div></div><div class="d-none d-md-block d-lg-none col"><div class="NxBannerCliSidebar_image__dIIrJ"><img src="/img/banners/nx-angular-sidebar-tablet.jpg" alt="NxAngularCli"/><svg width="40" height="40" fill="none" xmlns="http://www.w3.org/2000/svg" class="close-banner" role="button" tabindex="0"><path d="M28.572 11.429L11.429 28.572m0-17.143l17.143 17.143" stroke="#FFF" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path></svg></div></div><div class="d-none d-lg-block col"><div class="NxBannerCliSidebar_image__dIIrJ"><img src="/img/banners/nx-angular-sidebar-desktop.jpg" alt="NxAngularCli"/><svg width="40" height="40" fill="none" xmlns="http://www.w3.org/2000/svg" class="close-banner" role="button" tabindex="0"><path d="M28.572 11.429L11.429 28.572m0-17.143l17.143 17.143" stroke="#FFF" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path></svg></div></div></div></a></div></div><div class="PostSidebar_sidebar_posts__216Qt col-lg-12 col-md-12 col-6"><div><article class="SidebarCardDesktopSmall_wrapper__2nmDx "><a title="Exploring how virtual DOM is implemented in React" href="/posts/1501/exploring-how-virtual-dom-is-implemented-in-react">Exploring how virtual DOM is implemented in React</a><div class="SidebarCardDesktopSmall_author__2a7AA"><a href="/authors/1024/andreigatej"><div><img src="https://images.indepth.dev/images/2022/12/me3.jpg" alt="author"/></div><span class="SidebarCardDesktopSmall_author_name__3qSbU" title="Andrei Gatej">Andrei Gatej</span></a></div><div class="SidebarCardDesktopSmall_dates__2jyPP"><p class="SidebarCardDesktopSmall_published_at__2DLkz">2 
        May 
        2022</p><p class="SidebarCardDesktopSmall_reading_time__2tyDl">12<!-- --> min read</p></div></article></div></div><div class="PostSidebar_sidebar_posts__216Qt col-lg-12 col-md-12 col-6"><div><article class="SidebarCardDesktopSmall_wrapper__2nmDx "><a title="Ukraine and In-Depth’s founder need your help" href="/posts/1500/ukraine-and-in-depths-founder-need-your-help">Ukraine and In-Depth’s founder need your help</a><div class="SidebarCardDesktopSmall_author__2a7AA"><a href="/authors/1001/maxkoretskyi"><div><img src="https://images.indepth.dev/images/2022/07/ava.jpg" alt="author"/></div><span class="SidebarCardDesktopSmall_author_name__3qSbU" title="Max Koretskyi">Max Koretskyi</span></a></div><div class="SidebarCardDesktopSmall_dates__2jyPP"><p class="SidebarCardDesktopSmall_published_at__2DLkz">10 
        April 
        2022</p><p class="SidebarCardDesktopSmall_reading_time__2tyDl">2<!-- --> min read</p></div></article></div></div><div class="d-none d-lg-block col"><div class="NxBannerCliSidebar_wrapper__1uYjM"><p class="banner-free-content">THIS AD MAKES CONTENT FREE</p><a href="https://bit.ly/39cqbxa" target="_blank" rel="noopener noreferrer"><div class="row"><div class="d-block d-md-none col"><div class="NxBannerCliSidebar_image__dIIrJ"><img src="/img/banners/nx-angular-mobile.jpg" alt="NxAngularCli"/><svg width="40" height="40" fill="none" xmlns="http://www.w3.org/2000/svg" class="close-banner" role="button" tabindex="0"><path d="M28.572 11.429L11.429 28.572m0-17.143l17.143 17.143" stroke="#FFF" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path></svg></div></div><div class="d-none d-md-block d-lg-none col"><div class="NxBannerCliSidebar_image__dIIrJ"><img src="/img/banners/nx-angular-sidebar-tablet.jpg" alt="NxAngularCli"/><svg width="40" height="40" fill="none" xmlns="http://www.w3.org/2000/svg" class="close-banner" role="button" tabindex="0"><path d="M28.572 11.429L11.429 28.572m0-17.143l17.143 17.143" stroke="#FFF" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path></svg></div></div><div class="d-none d-lg-block col"><div class="NxBannerCliSidebar_image__dIIrJ"><img src="/img/banners/nx-angular-sidebar-desktop.jpg" alt="NxAngularCli"/><svg width="40" height="40" fill="none" xmlns="http://www.w3.org/2000/svg" class="close-banner" role="button" tabindex="0"><path d="M28.572 11.429L11.429 28.572m0-17.143l17.143 17.143" stroke="#FFF" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path></svg></div></div></div></a></div></div></div></div><div class="_slug__article__1iheh col-lg-4 col-md-6 col-12"><div class="d-block d-md-none"><article class="ArticleCardMobile_wrapper__bLT8o ArticleCardMobile_wrapper__shadow__15_zb"><span class="ArticleCardMobile_tag__1j88i"><span class="ArticleCardTag_wrapper__3dniC undefined">blockchain</span></span><a class="ArticleCardMobile_image__3OHqh" href="/posts/1506/an-introduction-to-blockchain"><img src="https://images.indepth.dev/images/2022/07/An-Introduction-to-Blockchains.jpg" alt="post"/></a><span class="ArticleCardMobile_main__2eocP"><div class="ArticleCardMobile_author__2JXXL"><a href="/authors/1005/nate"><img src="https://images.indepth.dev/images/2022/07/1_xS2XJZStjrQ6yiToZXazoQ.jpeg" alt="author"/><span class="ArticleCardMobile_author_name__27JVz" title="Nate Lapinski">Nate Lapinski</span></a></div><div class="ArticleCardMobile_dates__2X5SV"><span class="ArticleCardMobile_published_at__1z1bK">19 
        July 
        2022</span><span class="ArticleCardMobile_reading_time__WD4Ku">12<!-- --> min read</span></div><a class="ArticleCardMobile_title__1tga6 ArticleCardMobile_title__mb__15QKy" title="An Introduction to Blockchain" href="/posts/1506/an-introduction-to-blockchain">An Introduction to Blockchain</a><div class="ArticleCardMobile_description__2Wg97"><p>Learn the fundamentals of a blockchain starting from first principles. We&#x27;ll cover hashing, mining, consensus and more. After reading this article, you&#x27;ll have a solid foundation upon which to explore platforms like Ethereum and Solana.</p></div></span></article></div><div class="d-none d-md-block d-lg-none"><article class="ArticleCardTablet_wrapper__3mcAG ArticleCardTablet_wrapper__shadow__3NuYM"><span class="ArticleCardTablet_tag__1NsTL"><span class="ArticleCardTag_wrapper__3dniC undefined">blockchain</span></span><a class="ArticleCardTablet_image__n4Vec" href="/posts/1506/an-introduction-to-blockchain"><img src="https://images.indepth.dev/images/2022/07/An-Introduction-to-Blockchains.jpg" alt="post"/></a><span class="ArticleCardTablet_main__2QIN-"><div class="ArticleCardTablet_author__1SAVG"><a href="/authors/1005/nate"><img src="https://images.indepth.dev/images/2022/07/1_xS2XJZStjrQ6yiToZXazoQ.jpeg" alt="author"/><span class="ArticleCardTablet_author_name__1wf8Y" title="Nate Lapinski">Nate Lapinski</span></a></div><div class="ArticleCardTablet_dates__aCzF-"><span class="ArticleCardTablet_published_at__udh7h">19 
        July 
        2022</span><span class="ArticleCardTablet_reading_time__1Eo30 undefined">12<!-- --> min read</span></div><a class="ArticleCardTablet_title__3Xnjf undefined" title="An Introduction to Blockchain" href="/posts/1506/an-introduction-to-blockchain">An Introduction to Blockchain</a><div class="ArticleCardTablet_description__26hiZ"><p>Learn the fundamentals of a blockchain starting from first principles. We&#x27;ll cover hashing, mining, consensus and more. After reading this article, you&#x27;ll have a solid foundation upon which to explore platforms like Ethereum and Solana.</p><a type="button" class="brn float-right" href="/posts/1506/an-introduction-to-blockchain">Read more<i class="icon"></i></a></div></span></article></div><div class="d-none d-lg-block"><article class="ArticleCardDesktopDefault_wrapper__1Pykw ArticleCardDesktopDefault_wrapper__shadow__1DYL2 "><span class="ArticleCardDesktopDefault_tag__1Xg1F"><span class="ArticleCardTag_wrapper__3dniC undefined">blockchain</span></span><a class="ArticleCardDesktopDefault_image__iQAmu" href="/posts/1506/an-introduction-to-blockchain"><img src="https://images.indepth.dev/images/2022/07/An-Introduction-to-Blockchains.jpg" alt="post"/></a><span class="ArticleCardDesktopDefault_main__1fPYm"><a title="An Introduction to Blockchain" href="/posts/1506/an-introduction-to-blockchain">An Introduction to Blockchain</a><div class="ArticleCardDesktopDefault_meta__DCkEX ArticleCardDesktopDefault_meta_margin__eOLmJ"><div class="ArticleCardDesktopDefault_author__DcRQb"><a href="/authors/1005/nate"><div><img src="https://images.indepth.dev/images/2022/07/1_xS2XJZStjrQ6yiToZXazoQ.jpeg" alt="author"/></div><span class="ArticleCardDesktopDefault_author_name__2eROU" title="Nate Lapinski">Nate Lapinski</span></a></div><div class="ArticleCardDesktopDefault_dates__3b7vx"><p class="ArticleCardDesktopDefault_published_at__3PONI">19 
        July 
        2022</p><p class="ArticleCardDesktopDefault_reading_time__134Iv">12<!-- --> min read</p></div></div><div class="ArticleCardDesktopDefault_description__1phJb"><p>Learn the fundamentals of a blockchain starting from first principles. We&#x27;ll cover hashing, mining, consensus and more. After reading this article, you&#x27;ll have a solid foundation upon which to explore platforms like Ethereum and Solana.</p><a type="button" class="btn-read-more btn-read-more-orange float-right svg-orange-lite-hover svg-orange-lightest-active" href="/posts/1506/an-introduction-to-blockchain">Read more<svg width="20" height="21" fill="none" xmlns="http://www.w3.org/2000/svg" class="svg-orange"><path d="M4.166 10.5h11.667M10 4.667l5.833 5.833L10 16.333" stroke="#fff" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path></svg></a></div></span></article></div></div><div class="_slug__article__1iheh col-lg-4 col-md-6 col-12"><div class="d-block d-md-none"><article class="ArticleCardMobile_wrapper__bLT8o ArticleCardMobile_wrapper__shadow__15_zb"><span class="ArticleCardMobile_tag__1j88i"><span class="ArticleCardTag_wrapper__3dniC ArticleCardTag_wrapper_angular__30djs">Angular</span></span><a class="ArticleCardMobile_image__3OHqh" href="/posts/1502/external-configurations-in-angular"><img src="https://images.indepth.dev/images/2022/05/External-Configurations-in-Angular-2.jpg" alt="post"/></a><span class="ArticleCardMobile_main__2eocP"><div class="ArticleCardMobile_author__2JXXL"><a href="/authors/1147/ayyash"><span class="ArticleCardMobile_author_default_img__eSLcy"></span><span class="ArticleCardMobile_author_name__27JVz" title="Amal Ayyash">Amal Ayyash</span></a></div><div class="ArticleCardMobile_dates__2X5SV"><span class="ArticleCardMobile_published_at__1z1bK">3 
        June 
        2022</span><span class="ArticleCardMobile_reading_time__WD4Ku">18<!-- --> min read</span></div><a class="ArticleCardMobile_title__1tga6 ArticleCardMobile_title__mb__15QKy" title="External Configurations in Angular" href="/posts/1502/external-configurations-in-angular">External Configurations in Angular</a><div class="ArticleCardMobile_description__2Wg97"><p>In this article, we will learn about external configurations in Angular.</p></div></span></article></div><div class="d-none d-md-block d-lg-none"><article class="ArticleCardTablet_wrapper__3mcAG ArticleCardTablet_wrapper__shadow__3NuYM"><span class="ArticleCardTablet_tag__1NsTL"><span class="ArticleCardTag_wrapper__3dniC ArticleCardTag_wrapper_angular__30djs">Angular</span></span><a class="ArticleCardTablet_image__n4Vec" href="/posts/1502/external-configurations-in-angular"><img src="https://images.indepth.dev/images/2022/05/External-Configurations-in-Angular-2.jpg" alt="post"/></a><span class="ArticleCardTablet_main__2QIN-"><div class="ArticleCardTablet_author__1SAVG"><a href="/authors/1147/ayyash"><span class="ArticleCardTablet_author_default_img__QHkZs"></span><span class="ArticleCardTablet_author_name__1wf8Y" title="Amal Ayyash">Amal Ayyash</span></a></div><div class="ArticleCardTablet_dates__aCzF-"><span class="ArticleCardTablet_published_at__udh7h">3 
        June 
        2022</span><span class="ArticleCardTablet_reading_time__1Eo30 undefined">18<!-- --> min read</span></div><a class="ArticleCardTablet_title__3Xnjf undefined" title="External Configurations in Angular" href="/posts/1502/external-configurations-in-angular">External Configurations in Angular</a><div class="ArticleCardTablet_description__26hiZ"><p>In this article, we will learn about external configurations in Angular.</p><a type="button" class="brn float-right" href="/posts/1502/external-configurations-in-angular">Read more<i class="icon"></i></a></div></span></article></div><div class="d-none d-lg-block"><article class="ArticleCardDesktopDefault_wrapper__1Pykw ArticleCardDesktopDefault_wrapper__shadow__1DYL2 "><span class="ArticleCardDesktopDefault_tag__1Xg1F"><span class="ArticleCardTag_wrapper__3dniC ArticleCardTag_wrapper_angular__30djs">Angular</span></span><a class="ArticleCardDesktopDefault_image__iQAmu" href="/posts/1502/external-configurations-in-angular"><img src="https://images.indepth.dev/images/2022/05/External-Configurations-in-Angular-2.jpg" alt="post"/></a><span class="ArticleCardDesktopDefault_main__1fPYm"><a title="External Configurations in Angular" href="/posts/1502/external-configurations-in-angular">External Configurations in Angular</a><div class="ArticleCardDesktopDefault_meta__DCkEX ArticleCardDesktopDefault_meta_margin__eOLmJ"><div class="ArticleCardDesktopDefault_author__DcRQb"><a href="/authors/1147/ayyash"><div><span class="ArticleCardDesktopDefault_author_default_img__2y0tp"></span></div><span class="ArticleCardDesktopDefault_author_name__2eROU" title="Amal Ayyash">Amal Ayyash</span></a></div><div class="ArticleCardDesktopDefault_dates__3b7vx"><p class="ArticleCardDesktopDefault_published_at__3PONI">3 
        June 
        2022</p><p class="ArticleCardDesktopDefault_reading_time__134Iv">18<!-- --> min read</p></div></div><div class="ArticleCardDesktopDefault_description__1phJb"><p>In this article, we will learn about external configurations in Angular.</p><a type="button" class="btn-read-more btn-read-more-orange float-right svg-orange-lite-hover svg-orange-lightest-active" href="/posts/1502/external-configurations-in-angular">Read more<svg width="20" height="21" fill="none" xmlns="http://www.w3.org/2000/svg" class="svg-orange"><path d="M4.166 10.5h11.667M10 4.667l5.833 5.833L10 16.333" stroke="#fff" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path></svg></a></div></span></article></div></div></div></div></div><div id="newsletter" class="Newsletter_newsletter__2Pk0O    
            "><div class="position-relative container"><div class="align-items-lg-center row"><div class="col-md-6 col-12"><p class="Newsletter_title__81pOL">Sign Up for Our top-notch Newsletter</p><p class="Newsletter_deep_dive__3WlF3">The Deep Dive</p><p class="Newsletter_description__3kMte">Get the latest coverage of <b>advanced</b> web development straight into your inbox. Twice a month.</p><a class="Newsletter_see_previous__1VF0r  btn-read-more btn-read-more-orange svg-orange-lite-hover svg-orange-lightest-active" href="https://indepth.dev/newsletter">See previous editions<svg width="20" height="21" fill="none" xmlns="http://www.w3.org/2000/svg" class="svg-orange"><path d="M4.166 10.5h11.667M10 4.667l5.833 5.833L10 16.333" stroke="#fff" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path></svg></a><div class="d-none d-md-block"><p class="Newsletter_follow_title__3HFAg">Follow us</p><div class="row"><div class="Newsletter_follow_links__2JYrh col-12"><a href="https://twitter.com/indepth_dev" target="_blank" rel="noopener noreferrer"><svg width="28" height="28" fill="none" xmlns="http://www.w3.org/2000/svg" class="svg-orange"><path d="M25 5.01a10.886 10.886 0 01-3.14 1.535 4.467 4.467 0 00-7.087.425A4.504 4.504 0 0014 9.554v1.003A10.631 10.631 0 018.931 9.42 10.67 10.67 0 015 6.013s-4 9.028 5 13.041a11.613 11.613 0 01-7 2.006c9 5.016 20 0 20-11.536 0-.28-.028-.558-.08-.832A7.75 7.75 0 0025 5.01v0z" stroke="#fff" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path></svg></a></div></div></div></div><div class="Newsletter_newsletter_form__3bYEK col-md-6 col-12"><form name="newsletter" class=""><div class="row"><div class="col-lg-6 col-12"><div class="Newsletter_newsletter_name__2up0V form-group"><label class="form-label" for="name">Name</label><input type="text" required="" placeholder="Enter Your name" value="" id="name" class="form-control"/></div></div><div class="col-lg-6 col-12"><div class="Newsletter_newsletter_email__1puYB form-group"><label class="form-label" for="email">E-mail</label><input type="email" required="" placeholder="Enter Your E-mail" value="" id="email" class="form-control"/></div></div><div class="col-12"><div class="Newsletter_newsletter_framework__1vP05 form-group"><label class="form-label" for="framework">What are you interested in?</label><input type="text" required="" value="" placeholder="E.g. JavaScript, Angular, React.." id="framework" class="form-control"/></div></div><div class="col-lg-6 col-12"><button type="submit" class="btn Newsletter_subscribe_btn__2sgR7">Subscribe</button></div></div></form></div><div class="d-block d-md-none col-12"><p class="Newsletter_follow_title__3HFAg">Follow us</p><div class="row"><div class="Newsletter_follow_links__2JYrh col-12"><a href="https://twitter.com/indepth_dev" target="_blank" rel="noopener noreferrer"><svg width="28" height="28" fill="none" xmlns="http://www.w3.org/2000/svg" class="svg-orange"><path d="M25 5.01a10.886 10.886 0 01-3.14 1.535 4.467 4.467 0 00-7.087.425A4.504 4.504 0 0014 9.554v1.003A10.631 10.631 0 018.931 9.42 10.67 10.67 0 015 6.013s-4 9.028 5 13.041a11.613 11.613 0 01-7 2.006c9 5.016 20 0 20-11.536 0-.28-.028-.558-.08-.832A7.75 7.75 0 0025 5.01v0z" stroke="#fff" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path></svg></a></div></div></div></div></div></div></div><div id="scroll-to-top" class="ScrollToTop_to_top__3UZOO " role="button" tabindex="0"></div><footer class="Footer_footer__a95ok"><div class="d-none d-lg-block Footer_footer_desktop__2EMZn"><div class="Footer_footer_desktop_content__3836Y"><div class="Footer_footer_desktop_logo__15pW2"><a class="logo" href="https://indepth.dev">Logo</a></div><div class="Footer_footer_desktop_links__aRbtL"><ul class="nav"><li class="nav-item"><a href="/about">About Us</a></li><li class="nav-item"><a href="https://github.com/indepth-dev/content/discussions" target="_blank" rel="noopener noreferrer">Community</a></li><li class="nav-item"><a href="/terms-and-conditions.html" target="_blank">Terms and conditions</a></li><li class="nav-item"><a href="/refund-policy.html" target="_blank">Refund policy</a></li></ul></div><div class="Footer_footer_desktop_rss_wrapper__2ldqi"><span class="Footer_footer_desktop_rss__RaO0s"></span><div class="Footer_footer_desktop_email__21O4Y"><svg width="20" height="20" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M17.143 5.714c0-.786-.643-1.428-1.429-1.428H4.286c-.786 0-1.43.643-1.43 1.428m14.287 0v8.572c0 .785-.643 1.428-1.429 1.428H4.286a1.433 1.433 0 01-1.43-1.428V5.714m14.287 0l-7.143 5-7.143-5" stroke="#fff" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path></svg><span>max@indepth.dev</span></div></div></div></div><div class="d-none d-md-block d-lg-none Footer_footer_tablet__35NZp"><div class="Footer_footer_tablet_logo__1_Q52"><a class="logo" href="https://indepth.dev">Logo</a></div><div class="Footer_footer_tablet_links__248Dl"><ul class="nav"><li class="nav-item"><a href="/about">About Us</a></li><li class="nav-item"><a href="https://github.com/indepth-dev/content/discussions" target="_blank" rel="noopener noreferrer">Community</a></li><li class="nav-item"><a href="/terms-and-conditions.html" target="_blank">Terms and conditions</a></li><li class="nav-item"><a href="/refund-policy.html" target="_blank">Refund policy</a></li></ul></div><div class="d-flex flex-column align-items-center"><div class="Footer_footer_tablet_email__q-0ai"><svg width="20" height="20" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M17.143 5.714c0-.786-.643-1.428-1.429-1.428H4.286c-.786 0-1.43.643-1.43 1.428m14.287 0v8.572c0 .785-.643 1.428-1.429 1.428H4.286a1.433 1.433 0 01-1.43-1.428V5.714m14.287 0l-7.143 5-7.143-5" stroke="#fff" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path></svg><span>max@indepth.dev</span></div></div><div class="Footer_footer_tablet_rss_wrapper__1sqhJ"><span class="Footer_footer_tablet_rss__23Jjs"></span></div></div><div class="d-block d-md-none Footer_footer_mobile__2BbkA"><div class="Footer_footer_mobile_logo__3RcyE"><a class="logo" href="https://indepth.dev">Logo</a></div><div class="Footer_footer_mobile_links__2EOVe"><div class="container"><div class="row"><div class="col-xl-12"><ul class="nav"><li class="nav-item"><a href="/about">About Us</a></li><li class="nav-item"><a href="https://github.com/indepth-dev/content/discussions" target="_blank" rel="noopener noreferrer">Community</a></li><li class="nav-item"><a href="/terms-and-conditions.html" target="_blank">Terms and conditions</a></li><li class="nav-item"><a href="/refund-policy.html" target="_blank">Refund policy</a></li></ul></div><div class="d-flex justify-content-between col"><div class="Footer_footer_mobile_rss_wrapper__IdQ99"><span class="Footer_footer_mobile_rss__1Es5W"></span></div></div></div></div></div></div></footer></section></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"headerConfig":{"title":"articles"},"post":{"id":"5dde5a6db2bc9211f8af6862","uuid":"9877e16e-de08-4233-9702-d28fc3f82c8e","title":"Exploring Angular DOM manipulation techniques using ViewContainerRef","slug":"exploring-angular-dom-manipulation-techniques-using-viewcontainerref","html":"\u003cp\u003eWhenever I read about working with DOM in Angular I always see one or few of these classes mentioned: \u003ccode\u003eElementRef\u003c/code\u003e, \u003ccode\u003eTemplateRef\u003c/code\u003e, \u003ccode\u003eViewContainerRef\u003c/code\u003e and others. Unfortunately, although some of them are covered in Angular docs or related articles, I’ve yet to found the description of the overall mental model and examples of how these work together. This article aims to describe such model.\u003c/p\u003e\u003cblockquote\u003eIf you’re looking for more \u003cstrong\u003e\u003cstrong\u003ein-depth\u003c/strong\u003e\u003c/strong\u003e information on DOM manipulation in Angular using Renderer and View Containers check out \u003ca href=\"https://www.youtube.com/watch?v=qWmqiYDrnDc\u0026amp;list=PLVI0Ut22uwY4UC1v5fUvi2RIU4R4jPkba\u0026amp;sns=tw\" rel=\"noopener nofollow\"\u003emy talk at NgVikings\u003c/a\u003e. Or read an in-depth article on dynamic DOM manipulation \u003ca href=\"https://blog.angularindepth.com/working-with-dom-in-angular-unexpected-consequences-and-optimization-techniques-682ac09f6866\" rel=\"noopener nofollow\"\u003eWorking with DOM in Angular: unexpected consequences and optimization techniques\u003c/a\u003e\u003c/blockquote\u003e\u003cp\u003eIf you come from \u003ccode\u003eangular.js\u003c/code\u003e world, you know that it was pretty easy to manipulate the DOM. Angular injected DOM \u003ccode\u003eelement\u003c/code\u003e into \u003ccode\u003elink\u003c/code\u003e function and you could query any node within component’s template, add or remove child nodes, modify styles etc. However, this approach had one major shortcoming — it was tightly bound to a browser platform.\u003c/p\u003e\u003cp\u003eThe new Angular version runs on different platforms — in a browser, on a mobile platform or inside a web worker. So a level of abstraction is required to stand between platform specific API and the framework interfaces. In angular these abstractions come in a form of the following reference types: \u003ccode\u003eElementRef\u003c/code\u003e, \u003ccode\u003eTemplateRef\u003c/code\u003e, \u003ccode\u003eViewRef\u003c/code\u003e, \u003ccode\u003eComponentRef\u003c/code\u003e and \u003ccode\u003eViewContainerRef\u003c/code\u003e. In this article we’ll take a look at each reference type in detail and show how they can be used to manipulate DOM.\u003c/p\u003e\u003ch2 id=\"-viewchild\"\u003e@ViewChild\u003c/h2\u003e\u003cp\u003eBefore we explore the DOM abstractions, let’s understand how we access these abstractions inside a component/directive class. Angular provides a mechanism called DOM queries. It comes in the form of \u003ccode\u003e@ViewChild\u003c/code\u003e and \u003ccode\u003e@ViewChildren\u003c/code\u003e decorators. They behave the same, only the former returns one reference, while the latter returns multiple references as a \u003ca href=\"https://angular.io/docs/ts/latest/api/core/index/QueryList-class.html\" rel=\"noopener nofollow\"\u003eQueryList\u003c/a\u003e object. In the examples in this article I’ll be using mostly the  \u003ccode\u003eViewChild\u003c/code\u003e decorator and will not be using the \u003ccode\u003e@\u003c/code\u003e symbol before it.\u003c/p\u003e\u003cp\u003eUsually, these decorators are paired with \u003ca href=\"https://angular.io/docs/ts/latest/guide/template-syntax.html#!#ref-vars\" rel=\"noopener nofollow\"\u003etemplate reference variables\u003c/a\u003e. A \u003cstrong\u003e\u003cstrong\u003etemplate reference variable\u003c/strong\u003e\u003c/strong\u003e is simply a named reference to a DOM element within a template. You can view it as something similar to the \u003ccode\u003eid\u003c/code\u003e attribute of an \u003ccode\u003ehtml\u003c/code\u003e element. You mark a DOM element with a template reference and then query it inside a class using the \u003ccode\u003eViewChild\u003c/code\u003e decorator. Here is the basic example:\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"language-ts\"\u003e@Component({\n    selector: 'sample',\n    template: `\n        \u0026lt;span #tref\u0026gt;I am span\u0026lt;/span\u0026gt;\n    `\n})\nexport class SampleComponent implements AfterViewInit {\n    @ViewChild(\"tref\", {read: ElementRef}) tref: ElementRef;\n\n    ngAfterViewInit(): void {\n        // outputs `I am span`\n        console.log(this.tref.nativeElement.textContent);\n    }\n}\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eThe basic syntax of the \u003ccode\u003eViewChild\u003c/code\u003e decorator is:\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"language-ts\"\u003e@ViewChild([reference from template], {read: [reference type]});\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eIn this example you can see that I specified \u003ccode\u003etref\u003c/code\u003e as a template reference name in the \u003ccode\u003ehtml\u003c/code\u003e and receive the \u003ccode\u003eElementRef\u003c/code\u003e associated with this element. The second parameter \u003ccode\u003eread\u003c/code\u003e is not always required, since Angular can infer the reference type by the type of the DOM element. For example, if it’s a simple html element like \u003ccode\u003espan\u003c/code\u003e, Angular returns \u003ccode\u003eElementRef.\u003c/code\u003e If it’s a \u003ccode\u003etemplate\u003c/code\u003e element, it returns \u003ccode\u003eTemplateRef\u003c/code\u003e. Some references, like \u003ccode\u003eViewContainerRef\u003c/code\u003e cannot be inferred and have to be asked for specifically in the \u003ccode\u003eread\u003c/code\u003e parameter. Others, like \u003ccode\u003eViewRef\u003c/code\u003e cannot be returned from the DOM and have to be constructed manually.\u003c/p\u003e\u003cp\u003eOkay, now that we know how to query for the references, let’s start exploring them.\u003c/p\u003e\u003ch2 id=\"elementref\"\u003eElementRef\u003c/h2\u003e\u003cp\u003eThis is the most basic abstraction. If you observe its class structure, you’ll see that it only holds the native element it’s associated with. It’s useful for accessing native DOM element as we can see here:\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"language-ts\"\u003e// outputs `I am span`\nconsole.log(this.tref.nativeElement.textContent);\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eHowever, such usage \u003ca href=\"https://angular.io/docs/ts/latest/api/core/index/ElementRef-class.html\" rel=\"noopener nofollow\"\u003eis discouraged\u003c/a\u003e by the Angular team. Not only does it pose a security risk, but it also tightly couples your application and rendering layers which makes is difficult to run an app on multiple platforms. I believe that it’s not the access to \u003ccode\u003enativeElement\u003c/code\u003e that breaks the abstraction, but rather the usage of a specific DOM API like \u003ccode\u003etextContent\u003c/code\u003e. But as you’ll see later, the DOM manipulation mental model implemented in Angular hardly ever requires such lower level access.\u003c/p\u003e\u003cp\u003e\u003ccode\u003eElementRef\u003c/code\u003e can be returned for any DOM element using the \u003ccode\u003eViewChild\u003c/code\u003e decorator. But since all components are hosted inside a custom DOM element and all directives are applied to DOM elements, component and directive classes can obtain an instance of \u003ccode\u003eElementRef\u003c/code\u003e associated with their host element through \u003cstrong\u003eDependency Injection (DI)\u003c/strong\u003e:\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"language-ts\"\u003e@Component({\n    selector: 'sample',\n    ...\nexport class SampleComponent{\n    constructor(private hostElement: ElementRef) {\n        //outputs \u0026lt;sample\u0026gt;...\u0026lt;/sample\u0026gt;\n        console.log(this.hostElement.nativeElement.outerHTML);\n    }\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eSo while a component can get access to its host element through DI, the \u003ccode\u003eViewChild\u003c/code\u003e decorator is used most often to get a reference to a DOM element in its view (template). But, it’s reversed for directives — they have no views and they usually work directly with the element they are attached to.\u003c/p\u003e\u003ch2 id=\"templateref\"\u003eTemplateRef\u003c/h2\u003e\u003cp\u003eThe notion of a \u003cstrong\u003etemplate\u003c/strong\u003e should be familiar for most web developers. It’s a group of DOM elements that are reused in views across the application. Before the HTML5 standard introduced the \u003ca href=\"https://developer.mozilla.org/en/docs/Web/HTML/Element/template\" rel=\"noopener nofollow\"\u003etemplate\u003c/a\u003e tag, most templates arrived to the browser wrapped in a \u003ccode\u003escript\u003c/code\u003e tag with some variation of the \u003ccode\u003etype\u003c/code\u003e attribute:\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"language-html\"\u003e\u0026lt;script id=\"tpl\" type=\"text/template\"\u0026gt;\n  \u0026lt;span\u0026gt;I am span in template\u0026lt;/span\u0026gt;\n\u0026lt;/script\u0026gt;\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eThis approach certainly had many drawbacks like the semantics and the necessity to manually create DOM models. With the \u003ccode\u003etemplate\u003c/code\u003e tag a browser parses \u003ccode\u003ehtml\u003c/code\u003e and creates a \u003ccode\u003eDOM\u003c/code\u003e tree but doesn't render it. It can then be accessed through the \u003ccode\u003econtent\u003c/code\u003e property:\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"language-ts\"\u003e\u0026lt;script\u0026gt;\n    let tpl = document.querySelector('#tpl');\n    let container = document.querySelector('.insert-after-me');\n    insertAfter(container, tpl.content);\n\u0026lt;/script\u0026gt;\n\u0026lt;div class=\"insert-after-me\"\u0026gt;\u0026lt;/div\u0026gt;\n\u0026lt;ng-template id=\"tpl\"\u0026gt;\n    \u0026lt;span\u0026gt;I am span in template\u0026lt;/span\u0026gt;\n\u0026lt;/ng-template\u0026gt;\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eAngular embraces this approach and implements \u003ccode\u003eTemplateRef\u003c/code\u003e class to work with a template. Here is how it can be used:\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"language-ts\"\u003e@Component({\n    selector: 'sample',\n    template: `\n        \u0026lt;ng-template #tpl\u0026gt;\n            \u0026lt;span\u0026gt;I am span in template\u0026lt;/span\u0026gt;\n        \u0026lt;/ng-template\u0026gt;\n    `\n})\nexport class SampleComponent implements AfterViewInit {\n    @ViewChild(\"tpl\") tpl: TemplateRef\u0026lt;any\u0026gt;;\n\n    ngAfterViewInit() {\n        let elementRef = this.tpl.elementRef;\n        // outputs `template bindings={}`\n        console.log(elementRef.nativeElement.textContent);\n    }\n}\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eThe framework removes the \u003ccode\u003etemplate\u003c/code\u003e element from the DOM and inserts a comment in its place. This is how it looks when rendered:\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"language-html\"\u003e\u0026lt;sample\u0026gt;\n    \u0026lt;!--template bindings={}--\u0026gt;\n\u0026lt;/sample\u0026gt;\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eBy itself the \u003ccode\u003eTemplateRef\u003c/code\u003e class is a simple class. It holds a reference to its host element in the \u003ccode\u003eelementRef\u003c/code\u003e property and has one method: \u003ccode\u003ecreateEmbeddedView\u003c/code\u003e. However, this method is very useful since it allows us to create a view and return a reference to it as \u003ccode\u003eViewRef\u003c/code\u003e.\u003c/p\u003e\u003ch2 id=\"viewref\"\u003eViewRef\u003c/h2\u003e\u003cp\u003eThis type of abstraction represents an Angular View. In the Angular world a View is a fundamental building block of the application UI. It is the smallest grouping of elements which are created and destroyed together. Angular philosophy encourages developers to see the UI as a composition of Views, not as a tree of standalone HTML tags.\u003c/p\u003e\u003cp\u003eAngular supports two types of views:\u003c/p\u003e\u003cul\u003e\u003cli\u003e\u003cem\u003e\u003cem\u003eEmbedded Views\u003c/em\u003e\u003c/em\u003e which are linked to a \u003cem\u003e\u003cem\u003eTemplate\u003c/em\u003e\u003c/em\u003e\u003c/li\u003e\u003cli\u003e\u003cem\u003e\u003cem\u003eHost Views\u003c/em\u003e\u003c/em\u003e which are linked to a \u003cem\u003e\u003cem\u003eComponent\u003c/em\u003e\u003c/em\u003e\u003c/li\u003e\u003c/ul\u003e\u003ch3 id=\"creating-an-embedded-view\"\u003eCreating an embedded view\u003c/h3\u003e\u003cp\u003eA template simply holds a blueprint for a view. A view can be instantiated from the template using the aforementioned \u003ccode\u003ecreateEmbeddedView\u003c/code\u003e method like this:\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"language-ts\"\u003engAfterViewInit() {\n    let view = this.tpl.createEmbeddedView(null);\n}\u003c/code\u003e\u003c/pre\u003e\u003ch3 id=\"creating-a-host-view\"\u003eCreating a host view\u003c/h3\u003e\u003cp\u003eHost views are created when a component is dynamically instantiated. A component can be created dynamically using \u003ccode\u003eComponentFactoryResolver\u003c/code\u003e:\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"language-ts\"\u003econstructor(private injector: Injector,\n            private r: ComponentFactoryResolver) {\n    let factory = this.r.resolveComponentFactory(ColorComponent);\n    let componentRef = factory.create(injector);\n    let view = componentRef.hostView;\n}\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eIn Angular, each component is bound to a particular instance of an injector, so we’re passing the current injector instance when creating the component. Also, don’t forget that components that are instantiated dynamically must be added to the \u003ca href=\"https://angular.io/docs/ts/latest/cookbook/ngmodule-faq.html#!#q-entry-component-defined\" rel=\"noopener nofollow\"\u003eEntryComponents\u003c/a\u003e of a module or hosting component.\u003c/p\u003e\u003cp\u003eSo, we’ve seen how both embedded and host views can be created. Once a view is created it can be inserted into the DOM using \u003ccode\u003eViewContainer\u003c/code\u003e. The next section explores its functionality.\u003c/p\u003e\u003ch2 id=\"viewcontainerref\"\u003eViewContainerRef\u003c/h2\u003e\u003cp\u003e\u003cstrong\u003eViewContainerRef\u003c/strong\u003e represents a container where one or more views can be attached.\u003c/p\u003e\u003cp\u003eThe first thing to mention here is that any DOM element can be used as a view container. What’s interesting is that Angular doesn’t insert views inside the element, but appends them after the element bound to \u003ccode\u003eViewContainer\u003c/code\u003e. This is similar to how the \u003ccode\u003erouter-outlet\u003c/code\u003e inserts components.\u003c/p\u003e\u003cp\u003eUsually, a good candidate to mark a place where a \u003ccode\u003eViewContainer\u003c/code\u003e should be created is the \u003ccode\u003eng-container\u003c/code\u003e element. It’s rendered as a comment and so it doesn’t introduce redundant HTML elements into the DOM. Here is the example of creating a \u003ccode\u003eViewContainer \u003c/code\u003eat a specific place in a component template:\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"language-ts\"\u003e@Component({\n    selector: 'sample',\n    template: `\n        \u0026lt;span\u0026gt;I am first span\u0026lt;/span\u0026gt;\n        \u0026lt;ng-container #vc\u0026gt;\u0026lt;/ng-container\u0026gt;\n        \u0026lt;span\u0026gt;I am last span\u0026lt;/span\u0026gt;\n    `\n})\nexport class SampleComponent implements AfterViewInit {\n    @ViewChild(\"vc\", {read: ViewContainerRef}) vc: ViewContainerRef;\n\n    ngAfterViewInit(): void {\n        // outputs `template bindings={}`\n        console.log(this.vc.element.nativeElement.textContent);\n    }\n}\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eJust as with other DOM abstractions, \u003ccode\u003eViewContainer\u003c/code\u003e is bound to a particular DOM element accessed through the \u003ccode\u003eelement\u003c/code\u003e property. In the example above it’s bound to the \u003ccode\u003eng-container\u003c/code\u003e element rendered as a comment, and so the output is \u003ccode\u003etemplate bindings={}\u003c/code\u003e.\u003c/p\u003e\u003ch3 id=\"manipulating-views\"\u003eManipulating views\u003c/h3\u003e\u003cp\u003e\u003ccode\u003eViewContainer\u003c/code\u003e provides a convenient API for manipulating views:\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"language-ts\"\u003eclass ViewContainerRef {\n    ...\n    clear() : void\n    insert(viewRef: ViewRef, index?: number) : ViewRef\n    get(index: number) : ViewRef\n    indexOf(viewRef: ViewRef) : number\n    detach(index?: number) : ViewRef\n    move(viewRef: ViewRef, currentIndex: number) : ViewRef\n}\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eWe’ve seen earlier how two types of views can be manually created from a template and a component. Once we have a view, we can insert it into a DOM using the \u003ccode\u003einsert\u003c/code\u003e method. Here is the example of creating an embedded view from a template and inserting it into a specific place marked by an \u003ccode\u003eng-container\u003c/code\u003e element:\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"language-ts\"\u003e@Component({\n    selector: 'sample',\n    template: `\n        \u0026lt;span\u0026gt;I am first span\u0026lt;/span\u0026gt;\n        \u0026lt;ng-container #vc\u0026gt;\u0026lt;/ng-container\u0026gt;\n        \u0026lt;span\u0026gt;I am last span\u0026lt;/span\u0026gt;\n        \u0026lt;ng-template #tpl\u0026gt;\n            \u0026lt;span\u0026gt;I am span in template\u0026lt;/span\u0026gt;\n        \u0026lt;/ng-template\u0026gt;\n    `\n})\nexport class SampleComponent implements AfterViewInit {\n    @ViewChild(\"vc\", {read: ViewContainerRef}) vc: ViewContainerRef;\n    @ViewChild(\"tpl\") tpl: TemplateRef\u0026lt;any\u0026gt;;\n\n    ngAfterViewInit() {\n        let view = this.tpl.createEmbeddedView(null);\n        this.vc.insert(view);\n    }\n}\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eWith this implementation, the resulting \u003ccode\u003ehtml\u003c/code\u003e looks like this:\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"language-ts\"\u003e\u0026lt;sample\u0026gt;\n    \u0026lt;span\u0026gt;I am first span\u0026lt;/span\u0026gt;\n    \u0026lt;!--template bindings={}--\u0026gt;\n    \u0026lt;span\u0026gt;I am span in template\u0026lt;/span\u0026gt;\n\n    \u0026lt;span\u0026gt;I am last span\u0026lt;/span\u0026gt;\n    \u0026lt;!--template bindings={}--\u0026gt;\n\u0026lt;/sample\u0026gt;\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eTo remove a view from the DOM, we can use the \u003ccode\u003edetach\u003c/code\u003e method. All other methods are self explanatory and can be used to get a reference to a view by the index, move the view to another location, or remove all views from the container.\u003c/p\u003e\u003ch3 id=\"creating-views\"\u003eCreating Views\u003c/h3\u003e\u003cp\u003e\u003ccode\u003eViewContainer\u003c/code\u003e also provides an API to create a view automatically:\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"language-ts\"\u003eclass ViewContainerRef {\n    element: ElementRef\n    length: number\n\n    createComponent(componentFactory...): ComponentRef\u0026lt;C\u0026gt;\n    createEmbeddedView(templateRef...): EmbeddedViewRef\u0026lt;C\u0026gt;\n    ...\n}\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eThese are simply convenient wrappers to what we’ve done manually above. They create a view from a template or component and insert it at the specified location.\u003c/p\u003e\u003ch2 id=\"ngtemplateoutlet-and-ngcomponentoutlet\"\u003engTemplateOutlet and ngComponentOutlet\u003c/h2\u003e\u003cp\u003eWhile it’s always good to know how the underlying mechanisms work, it’s usually desirable to have some sort of a shortcut. This shortcut comes in the form of two directives: \u003ccode\u003engTemplateOutlet\u003c/code\u003e and \u003ccode\u003engComponentOutlet\u003c/code\u003e. At the time of this writing both are experimental and \u003ccode\u003engComponentOutlet\u003c/code\u003e will be available as of version 4. But if you’ve read everything above, it’ll be very easy to understand what they do.\u003c/p\u003e\u003ch3 id=\"ngtemplateoutlet\"\u003engTemplateOutlet\u003c/h3\u003e\u003cp\u003eThis one marks a DOM element as a \u003ccode\u003eViewContainer\u003c/code\u003e and inserts an embedded view created by a template without the need to explicitly do this in a component class. This means that the example above where we created a view and inserted it into a \u003ccode\u003e#vc\u003c/code\u003e DOM element can be rewritten like this:\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"language-ts\"\u003e@Component({\n    selector: 'sample',\n    template: `\n        \u0026lt;span\u0026gt;I am first span\u0026lt;/span\u0026gt;\n        \u0026lt;ng-container [ngTemplateOutlet]=\"tpl\"\u0026gt;\u0026lt;/ng-container\u0026gt;\n        \u0026lt;span\u0026gt;I am last span\u0026lt;/span\u0026gt;\n        \u0026lt;ng-template #tpl\u0026gt;\n            \u0026lt;span\u0026gt;I am span in template\u0026lt;/span\u0026gt;\n        \u0026lt;/ng-template\u0026gt;\n    `\n})\nexport class SampleComponent {}\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eAs you can see we don’t use any view instantiating code in the component class. Very handy!\u003c/p\u003e\u003ch3 id=\"ngcomponentoutlet\"\u003engComponentOutlet\u003c/h3\u003e\u003cp\u003eThis directive is analogous to \u003ccode\u003engTemplateOutlet\u003c/code\u003e with the difference being that it creates a \u003cstrong\u003e\u003cstrong\u003ehost view\u003c/strong\u003e\u003c/strong\u003e (instantiates a component), and not an embedded view. You can use it like this:\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"language-html\"\u003e\u0026lt;ng-container *ngComponentOutlet=\"ColorComponent\"\u0026gt;\u0026lt;/ng-container\u0026gt;\u003c/code\u003e\u003c/pre\u003e\u003ch2 id=\"wrapping-up\"\u003eWrapping up\u003c/h2\u003e\u003cp\u003eI realize that all this information may be a lot to digest. But actually it’s pretty coherent and lays out a clear mental model for manipulating the DOM via views. You get references to Angular DOM abstractions by using a \u003ccode\u003eViewChild\u003c/code\u003e query along with template variable references. The simplest wrapper around a DOM element is \u003ccode\u003eElementRef\u003c/code\u003e. For templates you have \u003ccode\u003eTemplateRef\u003c/code\u003e that allows you to create an embedded view. Host views can be accessed on \u003ccode\u003ecomponentRef\u003c/code\u003e created using \u003ccode\u003eComponentFactoryResolver\u003c/code\u003e. The views can be manipulated with \u003ccode\u003eViewContainerRef\u003c/code\u003e. There are two directives that make the manual process automatic: \u003ccode\u003engTemplateOutlet \u003c/code\u003e— for embedded views and \u003ccode\u003engComponentOutlet\u003c/code\u003e for host views (dynamic components).\u003c/p\u003e","comment_id":"5dde5a6db2bc9211f8af6862","plaintext":"Whenever I read about working with DOM in Angular I always see one or few of\nthese classes mentioned: ElementRef, TemplateRef, ViewContainerRef and others.\nUnfortunately, although some of them are covered in Angular docs or related\narticles, I’ve yet to found the description of the overall mental model and\nexamples of how these work together. This article aims to describe such model.\n\n\u003e If you’re looking for more in-depth information on DOM manipulation in Angular\nusing Renderer and View Containers check out my talk at NgVikings\n[https://www.youtube.com/watch?v=qWmqiYDrnDc\u0026list=PLVI0Ut22uwY4UC1v5fUvi2RIU4R4jPkba\u0026sns=tw]\n. Or read an in-depth article on dynamic DOM manipulation Working with DOM in\nAngular: unexpected consequences and optimization techniques\n[https://blog.angularindepth.com/working-with-dom-in-angular-unexpected-consequences-and-optimization-techniques-682ac09f6866]\nIf you come from angular.js world, you know that it was pretty easy to\nmanipulate the DOM. Angular injected DOM element into link function and you\ncould query any node within component’s template, add or remove child nodes,\nmodify styles etc. However, this approach had one major shortcoming — it was\ntightly bound to a browser platform.\n\nThe new Angular version runs on different platforms — in a browser, on a mobile\nplatform or inside a web worker. So a level of abstraction is required to stand\nbetween platform specific API and the framework interfaces. In angular these\nabstractions come in a form of the following reference types: ElementRef, \nTemplateRef, ViewRef, ComponentRef and ViewContainerRef. In this article we’ll\ntake a look at each reference type in detail and show how they can be used to\nmanipulate DOM.\n\n@ViewChild\nBefore we explore the DOM abstractions, let’s understand how we access these\nabstractions inside a component/directive class. Angular provides a mechanism\ncalled DOM queries. It comes in the form of @ViewChild and @ViewChildren \ndecorators. They behave the same, only the former returns one reference, while\nthe latter returns multiple references as a QueryList\n[https://angular.io/docs/ts/latest/api/core/index/QueryList-class.html] object.\nIn the examples in this article I’ll be using mostly theViewChild decorator and\nwill not be using the @ symbol before it.\n\nUsually, these decorators are paired with template reference variables\n[https://angular.io/docs/ts/latest/guide/template-syntax.html#!#ref-vars]. A \ntemplate reference variable is simply a named reference to a DOM element within\na template. You can view it as something similar to the id attribute of an html \nelement. You mark a DOM element with a template reference and then query it\ninside a class using the ViewChild decorator. Here is the basic example:\n\n@Component({\n    selector: 'sample',\n    template: `\n        \u003cspan #tref\u003eI am span\u003c/span\u003e\n    `\n})\nexport class SampleComponent implements AfterViewInit {\n    @ViewChild(\"tref\", {read: ElementRef}) tref: ElementRef;\n\n    ngAfterViewInit(): void {\n        // outputs `I am span`\n        console.log(this.tref.nativeElement.textContent);\n    }\n}\n\nThe basic syntax of the ViewChild decorator is:\n\n@ViewChild([reference from template], {read: [reference type]});\n\nIn this example you can see that I specified tref as a template reference name\nin the html and receive the ElementRef associated with this element. The second\nparameter read is not always required, since Angular can infer the reference\ntype by the type of the DOM element. For example, if it’s a simple html element\nlike span, Angular returns ElementRef. If it’s a template element, it returns \nTemplateRef. Some references, like ViewContainerRef cannot be inferred and have\nto be asked for specifically in the read parameter. Others, like ViewRef cannot\nbe returned from the DOM and have to be constructed manually.\n\nOkay, now that we know how to query for the references, let’s start exploring\nthem.\n\nElementRef\nThis is the most basic abstraction. If you observe its class structure, you’ll\nsee that it only holds the native element it’s associated with. It’s useful for\naccessing native DOM element as we can see here:\n\n// outputs `I am span`\nconsole.log(this.tref.nativeElement.textContent);\n\nHowever, such usage is discouraged\n[https://angular.io/docs/ts/latest/api/core/index/ElementRef-class.html] by the\nAngular team. Not only does it pose a security risk, but it also tightly couples\nyour application and rendering layers which makes is difficult to run an app on\nmultiple platforms. I believe that it’s not the access to nativeElement that\nbreaks the abstraction, but rather the usage of a specific DOM API like \ntextContent. But as you’ll see later, the DOM manipulation mental model\nimplemented in Angular hardly ever requires such lower level access.\n\nElementRef can be returned for any DOM element using the ViewChild decorator.\nBut since all components are hosted inside a custom DOM element and all\ndirectives are applied to DOM elements, component and directive classes can\nobtain an instance of ElementRef associated with their host element through \nDependency Injection (DI):\n\n@Component({\n    selector: 'sample',\n    ...\nexport class SampleComponent{\n    constructor(private hostElement: ElementRef) {\n        //outputs \u003csample\u003e...\u003c/sample\u003e\n        console.log(this.hostElement.nativeElement.outerHTML);\n    }\n\nSo while a component can get access to its host element through DI, the \nViewChild decorator is used most often to get a reference to a DOM element in\nits view (template). But, it’s reversed for directives — they have no views and\nthey usually work directly with the element they are attached to.\n\nTemplateRef\nThe notion of a template should be familiar for most web developers. It’s a\ngroup of DOM elements that are reused in views across the application. Before\nthe HTML5 standard introduced the template\n[https://developer.mozilla.org/en/docs/Web/HTML/Element/template] tag, most\ntemplates arrived to the browser wrapped in a script tag with some variation of\nthe type attribute:\n\n\u003cscript id=\"tpl\" type=\"text/template\"\u003e\n  \u003cspan\u003eI am span in template\u003c/span\u003e\n\u003c/script\u003e\n\nThis approach certainly had many drawbacks like the semantics and the necessity\nto manually create DOM models. With the template tag a browser parses html and\ncreates a DOM tree but doesn't render it. It can then be accessed through the \ncontent property:\n\n\u003cscript\u003e\n    let tpl = document.querySelector('#tpl');\n    let container = document.querySelector('.insert-after-me');\n    insertAfter(container, tpl.content);\n\u003c/script\u003e\n\u003cdiv class=\"insert-after-me\"\u003e\u003c/div\u003e\n\u003cng-template id=\"tpl\"\u003e\n    \u003cspan\u003eI am span in template\u003c/span\u003e\n\u003c/ng-template\u003e\n\nAngular embraces this approach and implements TemplateRef class to work with a\ntemplate. Here is how it can be used:\n\n@Component({\n    selector: 'sample',\n    template: `\n        \u003cng-template #tpl\u003e\n            \u003cspan\u003eI am span in template\u003c/span\u003e\n        \u003c/ng-template\u003e\n    `\n})\nexport class SampleComponent implements AfterViewInit {\n    @ViewChild(\"tpl\") tpl: TemplateRef\u003cany\u003e;\n\n    ngAfterViewInit() {\n        let elementRef = this.tpl.elementRef;\n        // outputs `template bindings={}`\n        console.log(elementRef.nativeElement.textContent);\n    }\n}\n\nThe framework removes the template element from the DOM and inserts a comment in\nits place. This is how it looks when rendered:\n\n\u003csample\u003e\n    \u003c!--template bindings={}--\u003e\n\u003c/sample\u003e\n\nBy itself the TemplateRef class is a simple class. It holds a reference to its\nhost element in the elementRef property and has one method: createEmbeddedView.\nHowever, this method is very useful since it allows us to create a view and\nreturn a reference to it as ViewRef.\n\nViewRef\nThis type of abstraction represents an Angular View. In the Angular world a View\nis a fundamental building block of the application UI. It is the smallest\ngrouping of elements which are created and destroyed together. Angular\nphilosophy encourages developers to see the UI as a composition of Views, not as\na tree of standalone HTML tags.\n\nAngular supports two types of views:\n\n * Embedded Views which are linked to a Template\n * Host Views which are linked to a Component\n\nCreating an embedded view\nA template simply holds a blueprint for a view. A view can be instantiated from\nthe template using the aforementioned createEmbeddedView method like this:\n\nngAfterViewInit() {\n    let view = this.tpl.createEmbeddedView(null);\n}\n\nCreating a host view\nHost views are created when a component is dynamically instantiated. A component\ncan be created dynamically using ComponentFactoryResolver:\n\nconstructor(private injector: Injector,\n            private r: ComponentFactoryResolver) {\n    let factory = this.r.resolveComponentFactory(ColorComponent);\n    let componentRef = factory.create(injector);\n    let view = componentRef.hostView;\n}\n\nIn Angular, each component is bound to a particular instance of an injector, so\nwe’re passing the current injector instance when creating the component. Also,\ndon’t forget that components that are instantiated dynamically must be added to\nthe EntryComponents\n[https://angular.io/docs/ts/latest/cookbook/ngmodule-faq.html#!#q-entry-component-defined] \nof a module or hosting component.\n\nSo, we’ve seen how both embedded and host views can be created. Once a view is\ncreated it can be inserted into the DOM using ViewContainer. The next section\nexplores its functionality.\n\nViewContainerRef\nViewContainerRef represents a container where one or more views can be attached.\n\nThe first thing to mention here is that any DOM element can be used as a view\ncontainer. What’s interesting is that Angular doesn’t insert views inside the\nelement, but appends them after the element bound to ViewContainer. This is\nsimilar to how the router-outlet inserts components.\n\nUsually, a good candidate to mark a place where a ViewContainer should be\ncreated is the ng-container element. It’s rendered as a comment and so it\ndoesn’t introduce redundant HTML elements into the DOM. Here is the example of\ncreating a ViewContainer at a specific place in a component template:\n\n@Component({\n    selector: 'sample',\n    template: `\n        \u003cspan\u003eI am first span\u003c/span\u003e\n        \u003cng-container #vc\u003e\u003c/ng-container\u003e\n        \u003cspan\u003eI am last span\u003c/span\u003e\n    `\n})\nexport class SampleComponent implements AfterViewInit {\n    @ViewChild(\"vc\", {read: ViewContainerRef}) vc: ViewContainerRef;\n\n    ngAfterViewInit(): void {\n        // outputs `template bindings={}`\n        console.log(this.vc.element.nativeElement.textContent);\n    }\n}\n\nJust as with other DOM abstractions, ViewContainer is bound to a particular DOM\nelement accessed through the element property. In the example above it’s bound\nto the ng-container element rendered as a comment, and so the output is template\nbindings={}.\n\nManipulating views\nViewContainer provides a convenient API for manipulating views:\n\nclass ViewContainerRef {\n    ...\n    clear() : void\n    insert(viewRef: ViewRef, index?: number) : ViewRef\n    get(index: number) : ViewRef\n    indexOf(viewRef: ViewRef) : number\n    detach(index?: number) : ViewRef\n    move(viewRef: ViewRef, currentIndex: number) : ViewRef\n}\n\nWe’ve seen earlier how two types of views can be manually created from a\ntemplate and a component. Once we have a view, we can insert it into a DOM using\nthe insert method. Here is the example of creating an embedded view from a\ntemplate and inserting it into a specific place marked by an ng-container \nelement:\n\n@Component({\n    selector: 'sample',\n    template: `\n        \u003cspan\u003eI am first span\u003c/span\u003e\n        \u003cng-container #vc\u003e\u003c/ng-container\u003e\n        \u003cspan\u003eI am last span\u003c/span\u003e\n        \u003cng-template #tpl\u003e\n            \u003cspan\u003eI am span in template\u003c/span\u003e\n        \u003c/ng-template\u003e\n    `\n})\nexport class SampleComponent implements AfterViewInit {\n    @ViewChild(\"vc\", {read: ViewContainerRef}) vc: ViewContainerRef;\n    @ViewChild(\"tpl\") tpl: TemplateRef\u003cany\u003e;\n\n    ngAfterViewInit() {\n        let view = this.tpl.createEmbeddedView(null);\n        this.vc.insert(view);\n    }\n}\n\nWith this implementation, the resulting html looks like this:\n\n\u003csample\u003e\n    \u003cspan\u003eI am first span\u003c/span\u003e\n    \u003c!--template bindings={}--\u003e\n    \u003cspan\u003eI am span in template\u003c/span\u003e\n\n    \u003cspan\u003eI am last span\u003c/span\u003e\n    \u003c!--template bindings={}--\u003e\n\u003c/sample\u003e\n\nTo remove a view from the DOM, we can use the detach method. All other methods\nare self explanatory and can be used to get a reference to a view by the index,\nmove the view to another location, or remove all views from the container.\n\nCreating Views\nViewContainer also provides an API to create a view automatically:\n\nclass ViewContainerRef {\n    element: ElementRef\n    length: number\n\n    createComponent(componentFactory...): ComponentRef\u003cC\u003e\n    createEmbeddedView(templateRef...): EmbeddedViewRef\u003cC\u003e\n    ...\n}\n\nThese are simply convenient wrappers to what we’ve done manually above. They\ncreate a view from a template or component and insert it at the specified\nlocation.\n\nngTemplateOutlet and ngComponentOutlet\nWhile it’s always good to know how the underlying mechanisms work, it’s usually\ndesirable to have some sort of a shortcut. This shortcut comes in the form of\ntwo directives: ngTemplateOutlet and ngComponentOutlet. At the time of this\nwriting both are experimental and ngComponentOutlet will be available as of\nversion 4. But if you’ve read everything above, it’ll be very easy to understand\nwhat they do.\n\nngTemplateOutlet\nThis one marks a DOM element as a ViewContainer and inserts an embedded view\ncreated by a template without the need to explicitly do this in a component\nclass. This means that the example above where we created a view and inserted it\ninto a #vc DOM element can be rewritten like this:\n\n@Component({\n    selector: 'sample',\n    template: `\n        \u003cspan\u003eI am first span\u003c/span\u003e\n        \u003cng-container [ngTemplateOutlet]=\"tpl\"\u003e\u003c/ng-container\u003e\n        \u003cspan\u003eI am last span\u003c/span\u003e\n        \u003cng-template #tpl\u003e\n            \u003cspan\u003eI am span in template\u003c/span\u003e\n        \u003c/ng-template\u003e\n    `\n})\nexport class SampleComponent {}\n\nAs you can see we don’t use any view instantiating code in the component class.\nVery handy!\n\nngComponentOutlet\nThis directive is analogous to ngTemplateOutlet with the difference being that\nit creates a host view (instantiates a component), and not an embedded view. You\ncan use it like this:\n\n\u003cng-container *ngComponentOutlet=\"ColorComponent\"\u003e\u003c/ng-container\u003e\n\nWrapping up\nI realize that all this information may be a lot to digest. But actually it’s\npretty coherent and lays out a clear mental model for manipulating the DOM via\nviews. You get references to Angular DOM abstractions by using a ViewChild query\nalong with template variable references. The simplest wrapper around a DOM\nelement is ElementRef. For templates you have TemplateRef that allows you to\ncreate an embedded view. Host views can be accessed on componentRef created\nusing ComponentFactoryResolver. The views can be manipulated with \nViewContainerRef. There are two directives that make the manual process\nautomatic: ngTemplateOutlet — for embedded views and ngComponentOutlet for host\nviews (dynamic components).","feature_image":"https://images.indepth.dev/images/2020/10/Exploring-Angular-DOM-manipulation-techniques-using-ViewContainerRef-white.png","featured":false,"visibility":"public","created_at":"2019-11-27T13:13:49.000+02:00","updated_at":"2021-05-16T21:53:56.000+03:00","published_at":"2019-11-27T13:15:04.000+02:00","custom_excerpt":"The article explores common elements used for DOM manipulation in Angular with a particular focus on ViewContainerRef. Learn why they are needed, how they work and when you need to use which.","codeinjection_head":"{\n    \"community_link\": \"https://github.com/indepth-dev/content/discussions/71\"\n}","codeinjection_foot":null,"custom_template":null,"canonical_url":null,"email_recipient_filter":"none","authors":[{"id":"1","name":"Max Koretskyi","slug":"maxkoretskyi","profile_image":"https://images.indepth.dev/images/2022/07/ava.jpg","cover_image":"https://images.indepth.dev/images/2019/07/015100-634_Manta-Ray-2.jpg","bio":"Max is a self-taught software engineer that believes in fundamental knowledge and hardcore learning. He’s the founder of inDepth.dev community and one of the top users on StackOverflow (70k rep).","website":null,"location":"Ukraine","facebook":null,"twitter":"@maxkoretskyi","meta_title":null,"meta_description":null,"url":"https://admin.indepth.dev/author/maxkoretskyi/"}],"tags":[{"id":"5d403979679ce6202b744976","name":"angular","slug":"angular","description":"Questions about Angular (not to be confused with AngularJS), the web framework from Google. Use this tag for Angular questions which are not specific to an individual version. For the older AngularJS (1.x) web framework, use the angularjs tag.","feature_image":null,"visibility":"public","meta_title":null,"meta_description":null,"og_image":null,"og_title":null,"og_description":null,"twitter_image":null,"twitter_title":null,"twitter_description":null,"codeinjection_head":null,"codeinjection_foot":null,"canonical_url":null,"accent_color":null,"url":"https://admin.indepth.dev/tag/angular/"},{"id":"5e385247be143e7df0e29e1c","name":"dom-manipulation","slug":"dom-manipulation","description":null,"feature_image":null,"visibility":"public","meta_title":null,"meta_description":null,"og_image":null,"og_title":null,"og_description":null,"twitter_image":null,"twitter_title":null,"twitter_description":null,"codeinjection_head":null,"codeinjection_foot":null,"canonical_url":null,"accent_color":null,"url":"https://admin.indepth.dev/tag/dom-manipulation/"},{"id":"5e402865be143e7df0e2acb5","name":"view-container-ref","slug":"view-container-ref","description":null,"feature_image":null,"visibility":"public","meta_title":null,"meta_description":null,"og_image":null,"og_title":null,"og_description":null,"twitter_image":null,"twitter_title":null,"twitter_description":null,"codeinjection_head":null,"codeinjection_foot":null,"canonical_url":null,"accent_color":null,"url":"https://admin.indepth.dev/tag/view-container-ref/"}],"primary_author":{"id":"1","name":"Max Koretskyi","slug":"maxkoretskyi","profile_image":"https://images.indepth.dev/images/2022/07/ava.jpg","cover_image":"https://images.indepth.dev/images/2019/07/015100-634_Manta-Ray-2.jpg","bio":"Max is a self-taught software engineer that believes in fundamental knowledge and hardcore learning. He’s the founder of inDepth.dev community and one of the top users on StackOverflow (70k rep).","website":null,"location":"Ukraine","facebook":null,"twitter":"@maxkoretskyi","meta_title":null,"meta_description":null,"url":"https://admin.indepth.dev/author/maxkoretskyi/","_id":1001},"primary_tag":{"id":"5d403979679ce6202b744976","name":"angular","slug":"angular","description":"Questions about Angular (not to be confused with AngularJS), the web framework from Google. Use this tag for Angular questions which are not specific to an individual version. For the older AngularJS (1.x) web framework, use the angularjs tag.","feature_image":null,"visibility":"public","meta_title":null,"meta_description":null,"og_image":null,"og_title":null,"og_description":null,"twitter_image":null,"twitter_title":null,"twitter_description":null,"codeinjection_head":null,"codeinjection_foot":null,"canonical_url":null,"accent_color":null,"url":"https://admin.indepth.dev/tag/angular/"},"url":"https://admin.indepth.dev/exploring-angular-dom-manipulation-techniques-using-viewcontainerref/","excerpt":"The article explores common elements used for DOM manipulation in Angular with a particular focus on ViewContainerRef. Learn why they are needed, how they work and when you need to use which.","reading_time":9,"access":true,"send_email_when_published":false,"og_image":null,"og_title":null,"og_description":null,"twitter_image":null,"twitter_title":null,"twitter_description":null,"meta_title":null,"meta_description":null,"email_subject":null,"frontmatter":null,"_id":1052},"suggestedPosts":[{"id":"634400a5fe5d131807857fbc","uuid":"1ce709c6-d7d7-4ee2-824a-36f7c5d054cd","title":"Component initialization without ngOnInit with async pipes for Observables and ngOnChanges","slug":"structure-initialization-logic-without-ngoninit-utilize-observables-and-ngonchanges","html":"\u003cp\u003e\u003cbr\u003eThe \u003ccode\u003engOnInit\u003c/code\u003e hook has always been a part of the component’s generate script when using Angular CLI. Right now we are not so sure if it still will be included by default in the next versions of Angular. Recently in the Angular community, there are mentions of removing this hook declaration from the default Angular CLI generator. I've led to this \u003ca href=\"https://twitter.com/angular/status/1575019452445339648\"\u003epoll\u003c/a\u003e, created by Angular, which at the moment, shows an almost 50:50 split regarding whether component generation should include \u003ccode\u003engOnInit\u003c/code\u003e hook or not! \u003c/p\u003e\u003cp\u003eThe whole idea of removing the \u003ccode\u003engOnInit\u003c/code\u003e which we are all familiar with may seem strange at first, but there’s definitely more to it. In this article, I will present to you why the \u003ccode\u003engOnInit\u003c/code\u003e is not needed in many cases, how we can refactor our existing code and why in many enterprise applications this hook is used very rarely. \u003c/p\u003e\u003cp\u003e\u003cbr\u003e\u003cstrong\u003eI will make my best to convince you that:\u003c/strong\u003e\u003c/p\u003e\u003cul\u003e\u003cli\u003eyou don’t need the \u003ccode\u003engOnInit\u003c/code\u003e when dealing with Observables\u003c/li\u003e\u003cli\u003emost of the time, \u003ccode\u003engOnChanges\u003c/code\u003e is a better alternative for \u003ccode\u003engOnInit\u003c/code\u003e\u003c/li\u003e\u003c/ul\u003e\u003cp\u003eWe will also learn what is the difference between the \u003ccode\u003engOnInit\u003c/code\u003e and the \u003ccode\u003econstructor\u003c/code\u003e.\u003c/p\u003e\u003ch2 id=\"the-ngoninit\"\u003e\u003cbr\u003eThe ngOnInit\u003c/h2\u003e\u003cp\u003eWe got used to the idea that \u003ccode\u003engOnInit\u003c/code\u003e is always available for us, ready to be filled with tons of lines of code to make the component work. This led to a bunch of misunderstandings, misused features, and the spreading of anti-patterns in the codebase. \u003c/p\u003e\u003cp\u003eAngular docs define the \u003ccode\u003eOnInit\u003c/code\u003e hook as:\u003c/p\u003e\u003cblockquote\u003eA lifecycle hook that is called after Angular has initialized all data-bound properties of a directive. Define an \u003ccode\u003engOnInit()\u003c/code\u003e method to handle any additional initialization tasks. \u003c/blockquote\u003e\u003cp\u003eThis doesn’t mean all initialization tasks should be put there. We may think, that there are a lot of tasks that we don’t want to put in the constructor due to some complex or heavy logic. However quite often if we use other hooks correctly, take advantage of Observables or even get some help from the NgRx, our logic will be simplified and handled in better places than \u003ccode\u003engOnInit\u003c/code\u003e.\u003c/p\u003e\u003cp\u003eFinally, it’s essential to realize that often \u003ccode\u003engOnInit\u003c/code\u003e is overloaded with function calls, subscriptions, the code blends template, and class responsibilities resulting in complex and unreadable setup code. \u003c/p\u003e\u003cp\u003eThe component’s code should be all about simplicity and readability. We can break components into smaller ones when needed, we can take advantage of pipes, directives, various lifecycle hooks, and Observables so we are blessed with various techniques to implement clean code in Angular.\u003c/p\u003e\u003cp\u003eIn the following sections, I will present to you, some use cases of using \u003ccode\u003engOnInit\u003c/code\u003e when there is really no need for that, and propose other ways to solve the problems. \u003c/p\u003e\u003ch3 id=\"why-couldn%E2%80%99t-we-use-a-constructor-instead\"\u003eWhy couldn’t we use a constructor instead?\u003c/h3\u003e\u003cp\u003eIt may look like, we could move everything from \u003ccode\u003engOnInit\u003c/code\u003e to the \u003ccode\u003econstructor\u003c/code\u003e block, and call it a day. Well, it’s not that simple. \u003c/p\u003e\u003cp\u003eThere is a big difference between the \u003ccode\u003econstructor\u003c/code\u003e and the \u003ccode\u003engOnInit\u003c/code\u003e. Max wrote a great article about this, which you may find \u003ca href=\"https://indepth.dev/posts/1119/the-essential-difference-between-constructor-and-ngoninit-in-angular\"\u003ehere\u003c/a\u003e. For us, the most important thing is, the constructor is called when Angular constructs the components tree, while \u003ccode\u003engOnInit\u003c/code\u003e is run after the change detection when all bindings are updated. Construction time is when the dependency injection takes place because at this point Angular has already configured the root module injector and all of the parent injectors. This is not the time when DOM is ready and we can access input properties, elements, and child components. Properties such as input properties, static children will be accessible in the \u003ccode\u003engOnInit\u003c/code\u003e. Other non-static elements will be available in \u003ccode\u003eonAfterViewInit\u003c/code\u003e hook.\u003c/p\u003e\u003cp\u003eThat’s why we can’t put any initialization logic which relies on DOM, elements, input data, bindings, etc in the \u003ccode\u003econstructor\u003c/code\u003e — because they are not yet available. For most cases setup logic in construction, time is limited to dependency injection things and routing.  \u003c/p\u003e\u003ch2 id=\"subscriptions\"\u003eSubscriptions\u003c/h2\u003e\u003cp\u003eComponents are often using some kind of asynchronous way to get the data it then uses to display. This happens because many things in Angular use Observables, like for instance the \u003ccode\u003eHttpClient\u003c/code\u003e. What we can do with the data delivered asynchronously? We can treat them as they are delivered, so as Observables, subscribe to them, and get the value. The other option could be to convert them to Promises and resolve the value by awaiting it. \u003c/p\u003e\u003cp\u003eIf your reason to use \u003ccode\u003engOnInit\u003c/code\u003e is only for subscriptions, then consider this approach which might be a better option.\u003c/p\u003e\u003cp\u003eWhile many people use the Observables they don’t take full advantage of going this way. The Observable is being subscribed as soon as possible, and the retrieved data is assigned to the component’s property. This process usually takes place in the \u003ccode\u003engOnInit\u003c/code\u003e method. I’ve seen snippets as below many times during the code reviews:\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"language-typescript\"\u003edata: MyData;\n\nconstructor(private readonly dataService: DataService) { }\n\nngOnInit() {\n  this.dataService.getData().subscribe(\n    data =\u0026gt; this.data = data,\n  );\n}\u003c/code\u003e\u003c/pre\u003e\u003cp\u003e\u003cbr\u003eAlthough this technique works and the \u003ccode\u003edata\u003c/code\u003e property can be used in the template to render the result, it has some pitfalls on the way.\u003c/p\u003e\u003cp\u003e\u003c/p\u003e\u003cp\u003eThe data property is indeed not typed correctly - during the time between component creation, and data being emitted by the Observable, the actual value is \u003ccode\u003eundefined\u003c/code\u003e. So the correct typing should be: \u003c/p\u003e\u003cpre\u003e\u003ccode class=\"language-typescript\"\u003edata: MyData | undefined;\n// or\ndata?: MyData;\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eThis is a bit misleading, we don’t want this property to be undefined, but we don’t know when it will have the value, so in fact, it is an optional property.     \u003c/p\u003e\u003cp\u003eYou may also specify directly the default value that will be typed correctly:    \u003c/p\u003e\u003cpre\u003e\u003ccode class=\"language-typescript\"\u003edata: MyData | null = null\n// or\ndata: MyData = InitialMyData; // some object with init state\u003c/code\u003e\u003c/pre\u003e\u003cp\u003e\u003c/p\u003e\u003cp\u003eSubscriptions – each time we subscribe within directives we should remember to unsubscribe from them to avoid possible memory leaks. This makes code much bigger and populated with boilerplate:\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"language-typescript\"\u003edata: MyData;\n\nprivate readonly onDestroy = new Subject();\n\nngOnInit() {\n  this.dataService.getData()\n    .pipe(\n      takeUntil(this.onDestroy)\n    ).subscribe(\n      data =\u0026gt; this.data = data,\n    );\n}\n\nngOnDestroy() {\n  this.onDestroy.next();\n  this.onDestroy.complete();\n}\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003e\u003c/p\u003e\u003cp\u003eWe have no idea when the value of the \u003ccode\u003edata\u003c/code\u003e will be delivered. This leads to some serious troubles when we need to use the value in the component’s class. Imagine some of the component’s methods actually use \u003ccode\u003ethis.data\u003c/code\u003e to process something — and we can’t guarantee the value will be present at this point! \u003cbr\u003eAnother problem is the assumption that values are delivered synchornously, which maybe true in some specific cases, it may work, but usually it won’t work, and it will cause a lot of bugs. Below is an example snippet, I’ve seen a lot during the code reviews:\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"language-typescript\"\u003edata: MyData;\nsomeValue: string;\n\nngOnInit() {\n  this.dataService.getData().subscribe(\n    data =\u0026gt; this.data = data,\n  );\n\n  // this.data will be most likely undefined at this point \n  // and will throw an Error\n  this.someValue = this.data.value; \n}\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eWe can move the line with \u003ccode\u003esomeValue\u003c/code\u003e assignment to the subscribe block, but it only resolves this single issue, it won’t save us from possible future mistakes like this.\u003c/p\u003e\u003ch3 id=\"refactor-of-the-subscriptions\"\u003eRefactor of the subscriptions!\u003c/h3\u003e\u003cp\u003eIn Angular we are not limited to use  only plain static values in the templates. We can use the Observables directly in the template. In other words, it’s rarely a need to subscribe to the Observable in the component’s class. \u003c/p\u003e\u003cp\u003eAt first glance, it may seem tricky and we may struggle with understanding the “stream” way of handling and processing the values, but once you understand that, it will become very straightforward to use. \u003c/p\u003e\u003cp\u003eWe should subscribe when we actually need the value. Do we need it in the component’s class? \u003c/p\u003e\u003cp\u003eThe answer is - not really! We actually need the value in the template so we should subscribe there. Angular provides us, with an incredibly useful pipe — the \u003ccode\u003eAsyncPipe\u003c/code\u003e, which subscribes to the Observable and returns emitting values, it also takes care of unsubscribing on component’s destroy. Please note, this is not better in case of performance in any way, than a simple subscribe call or other techniques — but in our case, it makes the component far more readable and makes \u003ccode\u003engOnInit\u003c/code\u003e redundant.\u003c/p\u003e\u003cp\u003eTake a look at the following component’s class:\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"language-typescript\"\u003e@Component({...})\nexport class Component {\n  \n  readonly data$ = this.dataService.getData();\n\t\n  constructor(private readonly dataService: DataService) { }\n\t\t\n}\u003c/code\u003e\u003c/pre\u003e\u003cp\u003e\u003cbr\u003eIt does not have the \u003ccode\u003engOnInit\u003c/code\u003e hook implemented! \u003cbr\u003eWhile this reduces the lines of code, it has other, much greater advantages than the subscribe technique from the example before.\u003c/p\u003e\u003col\u003e\u003cli\u003ecomponent’s property \u003ccode\u003edata$\u003c/code\u003e has a value from the start, the Observable is assigned at constructor time. The property is no longer optional.\u003c/li\u003e\u003cli\u003ebecause the property is assigned during the component’s creation, the property can be made \u003ccode\u003ereadonly\u003c/code\u003e — which will guarantee, that nothing will replace its value.\u003c/li\u003e\u003cli\u003ethere is no subscription (in the component’s class), so no need to unsubscribe, and the \u003ccode\u003engOnDestroy\u003c/code\u003e hook\u003c/li\u003e\u003cli\u003ewe don’t have any enigmatic properties in the component, about which we have no idea when they will be assigned, and when they can be used for processing or any other logic.\u003c/li\u003e\u003c/ol\u003e\u003cp\u003eThe actual usage (subscription) is implemented in the template — where we actually need the data. Take a look at the following template snippet:\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"language-HTML\"\u003e\u0026lt;p\u0026gt; {{ (data$ | async).someValue }} \u0026lt;/p\u0026gt;\u003c/code\u003e\u003c/pre\u003e\u003cp\u003e\u003cbr\u003eThe content of the paragraph will be rendered with the value of the emitted event from the `data$` Observable.  \u003cbr\u003eYou have to admit this way of handling Observables is much more readable, and it has far fewer moments where we can make a mistake and misunderstand the asynchronous code. \u003c/p\u003e\u003ch3 id=\"shouldn%E2%80%99t-the-constructor-only-be-used-for-di\"\u003eShouldn’t the constructor only be used for DI?\u003c/h3\u003e\u003cp\u003eYeah, but please note, that when we assign the Observable to the component’s property, we don’t actually do anything with it (no logic there), we will not receive and process any values, as long as we don’t subscribe to it! \u003c/p\u003e\u003cp\u003eWe are subscribing in the template (via \u003ccode\u003eAsyncPipe\u003c/code\u003e), not in the constructor — so none of our (possibly complex) logic will be run at the component’s creation. \u003c/p\u003e\u003ch2 id=\"data-processing-and-nested-subscriptions\"\u003eData processing and nested subscriptions\u003c/h2\u003e\u003cp\u003eYou may say, that although the technique from above works pretty cool, it won’t work when we need to process the data, or combine data from various sources together, or maybe even that although it works, it is quite inconvenient to put \u003ccode\u003e| async\u003c/code\u003e everywhere in the template, where we need the value. \u003cbr\u003eLuckily, there are answers for these more advanced usages. We will tackle them one by one!\u003c/p\u003e\u003ch3 id=\"data-processing\"\u003eData processing\u003c/h3\u003e\u003cp\u003eLet us start with an example for processing the data. We may end up in the situation the API returns a large object, while we only care about some specific fragment, and we need this fragment to be in a slightly different shape than provided by the API. For instance, assume, the API delivers an object of such structure:\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"language-typescript\"\u003einterface MyDTO {\n  data: {\n    name: string;\n    time: string;\n  }[]\n}\u003c/code\u003e\u003c/pre\u003e\u003cp\u003e\u003cbr\u003eSo it’s an object, with an array of objects which includes \u003ccode\u003ename\u003c/code\u003e and \u003ccode\u003etime\u003c/code\u003e values. Assume, that for some reason, we only care about the first item in the array, and additionally, we need to convert the \u003ccode\u003etime\u003c/code\u003e from a \u003ccode\u003estring\u003c/code\u003e into a proper \u003ccode\u003eDate\u003c/code\u003e object.\u003c/p\u003e\u003cp\u003eThe following snippet presents how this can be tackled in “\u003cem\u003esubscription\u003c/em\u003e” world. \u003c/p\u003e\u003cpre\u003e\u003ccode class=\"language-typescript\"\u003edata?: { name: string, time: Date };\n\nconstructor(private readonly dataService: DataService) { }\n\nngOnInit() {\n  this.dataService.getData().subscribe(\n    response =\u0026gt; {\n      const first = response.data[0];\n      \n      this.data = {\n        name: first.name,\n        time: new Date(first.time)\n      }\n    }\n  );\n}\u003c/code\u003e\u003c/pre\u003e\u003cp\u003e\u003cbr\u003eIt does not contain the unsubscribe logic for readability, but you get the idea. \u003cbr\u003eWe subscribe for the data, and once it's emitted we create an object, with two properties which we are creating based on the emitted event called \u003ccode\u003eresponse\u003c/code\u003e.\u003c/p\u003e\u003ch3 id=\"refactor-of-the-data-processing\"\u003eRefactor of the data processing!\u003c/h3\u003e\u003cp\u003eHow we can refactor this, so we use composition techniques, similar to functional programming and streams processing? The strategy for such problems is quite simple — we have to stop thinking about operating on the actually resolved values, but rather transform a stream of data, creating rules which will be triggered once the data will be emitted — so available for processing.\u003c/p\u003e\u003cp\u003eAs you know, In RxJs we are using functions called pipeable operators, which are wrapped in the \u003ccode\u003epipe\u003c/code\u003e, and make it possible to transform the stream of values into another stream. Each pipeable operator gets the Observable, applies some logic, and returns a new Observable, which is handled by the operator next, in the pipe.\u003c/p\u003e\u003cp\u003eOne of these operators is called \u003ccode\u003emap\u003c/code\u003e, allowing us to transform values emitted by the source Observable using the provided function. You can read more about the \u003ccode\u003emap\u003c/code\u003e operator \u003ca href=\"https://indepth.dev/reference/rxjs/operators/map\"\u003ehere\u003c/a\u003e — and we are jumping straight to the implementation.\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"language-typescript\"\u003ereadonly data$ = this.dataService.getData().pipe(\n  map((response) =\u0026gt; {\n    const first = response.data[0];\n    \n    return {\n      name: response.name,\n      time: new Date(response.time)\n    }\n  }),\n);\n\nconstructor(private readonly dataService: DataService) { }\u003c/code\u003e\u003c/pre\u003e\u003cp\u003e\u003cbr\u003eWe have added the \u003ccode\u003epipe\u003c/code\u003e function which includes the pipeable operators — in our case the \u003ccode\u003emap\u003c/code\u003e operator. This operator contains a function that defines how we want to transform the stream. Here the transform function is identical to one in the “\u003cem\u003esubscription\u003c/em\u003e” way:\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"language-typescript\"\u003eresponse =\u0026gt; {\n  const first = response.data[0];\n  \n  return {\n    name: response.name,\n    time: new Date(response.time)\n  }\n}\u003c/code\u003e\u003c/pre\u003e\u003cp\u003e\u003cbr\u003eWe transform the response, into an object made from the first item in the array, and take its properties.\u003c/p\u003e\u003cp\u003eIt’s quite easy to use it in the template:\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"language-HTML\"\u003e\u0026lt;p\u0026gt; {{ (data$ | async).name }} \u0026lt;/p\u0026gt;\u003c/code\u003e\u003c/pre\u003e\u003ch2 id=\"nested-observablesnested-subscriptions\"\u003e\u003cbr\u003eNested Observables - nested subscriptions?\u003c/h2\u003e\u003cp\u003eAnother common situation is when our call to API relies on the data from the routing — for instance, an ID of something. Imagine such a route, where \u003ccode\u003e1257623\u003c/code\u003e is an ID of a hero:\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"language-text\"\u003elocalhost:4200/hero/1257623\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eWe have to get the ID from the routing, and then call the API for the hero data. The snippet below presents how this can be implemented using the subscription:\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"language-typescript\"\u003ehero?: { name: string };\n\nconstructor(\n  private readonly route: ActivatedRoute,\n  private readonly heroService: HeroService,\n) { }\n\nngOnInit() {\n  const id = this.route.snapshot.params.id;\n\n  this.heroService.getHero(id).subscribe(\n    response =\u0026gt; this.hero = response\n  );\n}\u003c/code\u003e\u003c/pre\u003e\u003cp\u003e\u003cbr\u003eWhat could go wrong with such implementation? When we update the app URL with a new ID, the component will still display the old hero, and it won’t call API to get data for a new ID. Why does it work that way? The component gets id from the \u003ccode\u003eroute\u003c/code\u003e \u003ccode\u003esnapshot\u003c/code\u003e on init — and it will not care about any other values in the future. \u003ccode\u003eHeroService\u003c/code\u003e won’t be called again, the \u003ccode\u003engOnInit\u003c/code\u003e will not be called again — the component is already displayed and \u003ccode\u003engOnInit\u003c/code\u003e happens only once. \u003c/p\u003e\u003cp\u003eThis mechanism design may be hard to understand at first glance, so if you are interested in this, \u003ca href=\"https://indepth.dev/tutorials/angular/indepth-guide-to-passing-parameters-via-routing#receiving-parameters\"\u003ehere\u003c/a\u003e you may find more details about this.\u003c/p\u003e\u003cp\u003eWe could improve our solution to work with params changes — via getting params as Observable:\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"language-typescript\"\u003ehero?: { name: string };\n\nconstructor(\n  private readonly route: ActivatedRoute,\n  private readonly heroService: HeroService,\n) { }\n\nngOnInit() {\n  this.route.params.subscribe(\n    (params) = \u0026gt; {\n      const id = params.id;\n\n      this.heroService.getHero(id).subscribe(\n        response =\u0026gt; this.hero = response\n      );\n    }\n  )\t\n}\u003c/code\u003e\u003c/pre\u003e\u003cp\u003e\u003cbr\u003eThe code grows rapidly, and due to nesting, it becomes harder to understand (and we still didn’t include unsubscribe logic here!). \u003c/p\u003e\u003ch3 id=\"refactor-of-the-nested-streams\"\u003eRefactor of the nested streams!\u003c/h3\u003e\u003cp\u003eThe situation may look different from the example about data processing — but in a way, it is really the same problem. We need to transform the Observable. Before we had to transform the actual response, here we need to combine two Observables. \u003c/p\u003e\u003cp\u003eWe have to use the same flatteting technique with pipeable operators — this time though, we need to use a different operator. The one that we will use is called \u003ccode\u003eswitchMap\u003c/code\u003e and it allows us to map a value from a higher order Observable to a different Observable. You can read more about \u003ccode\u003eswitchMap\u003c/code\u003e \u003ca href=\"https://indepth.dev/reference/rxjs/operators/switch-map\"\u003ehere\u003c/a\u003e. In our case the implementation can look as follows:\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"language-typescript\"\u003ereadonly hero$ = this.route.params.pipe(\n  switchMap(params =\u0026gt; this.heroService.getHero(params.id))\n);\n\nconstructor(\n  private readonly route: ActivatedRoute,\n  private readonly heroService: HeroService,\n) { }\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eI’m pretty sure that the template code is obvious at this point:\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"language-HTML\"\u003e\u0026lt;p\u0026gt; {{ (hero$ | async).name }} \u0026lt;/p\u0026gt;\u003c/code\u003e\u003c/pre\u003e\u003ch2 id=\"view-model-%E2%80%94-vm\"\u003eView Model  — vm$\u003c/h2\u003e\u003cp\u003eThe last problem in this section refers to too many \u003ccode\u003e| async\u003c/code\u003e calls in the template which can obfuscate the template or even result in some performance issues.\u003cbr\u003eThis problem can happen for two reasons:\u003c/p\u003e\u003cp\u003eWe use a single Observable in many elements, for instance:   \u003c/p\u003e\u003cpre\u003e\u003ccode class=\"language-HTML\"\u003e\u0026lt;p\u0026gt; {{ (hero$ | async).name }} \u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt; {{ (hero$ | async).surname }} \u0026lt;/p\u0026gt;\n\u0026lt;p\u0026gt; {{ (hero$ | async).city }} \u0026lt;/p\u0026gt;\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eWe have many Observables in the component, for instance:\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"language-typescript\"\u003ereadonly hero$ = this.route.params.pipe(\n  switchMap(params =\u0026gt; this.heroService.getHero(params.id))\n);\n\nreadonly pet$ = this.route.params.pipe(\n  switchMap(params =\u0026gt; this.heroService.getPet(params.id))\n);\n\nreadonly cities$ = this.heroService.getCities();\n\nconstructor(\n  private readonly route: ActivatedRoute,\n  private readonly heroService: HeroService,\n) { }\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eTo tackle that we have to dive into the \u003ccode\u003eNgIf\u003c/code\u003e directive — provided by Angular. We usually use the \u003ccode\u003engIf\u003c/code\u003e in the template to show/hide some elements depending on some condition. \u003ccode\u003eNgIf\u003c/code\u003e allows us to persist the result of the condition in a local template variable using the \u003ccode\u003eas\u003c/code\u003e keyword. The following snippet presents the syntax:\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"language-HTML\"\u003e\u0026lt;p *ngIf=\"hero.isAlive as alive\"\u0026gt; {{ alive }} \u0026lt;/p\u0026gt; \u003c/code\u003e\u003c/pre\u003e\u003cp\u003e\u003cbr\u003eIn the paragraph content, we were able to use the variable value, instead of the whole \u003ccode\u003ehero.isAlive\u003c/code\u003e syntax. \u003c/p\u003e\u003cp\u003eWe can use this technique to persist the value resolved from the `AsyncPIpe` and use it in many elements while subscribing only once. \u003cbr\u003eRefactor for the first snippet can result in such code:\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"language-HTML\"\u003e\u0026lt;ng-container *ngIf=\"hero$ | async as hero\"\u0026gt;\n  \u0026lt;p\u0026gt; {{ hero.name }} \u0026lt;/p\u0026gt;\n  \u0026lt;p\u0026gt; {{ hero.surname }} \u0026lt;/p\u0026gt;\n  \u0026lt;p\u0026gt; {{ hero.city }} \u0026lt;/p\u0026gt;\n\u0026lt;/ng-container\u0026gt;\u003c/code\u003e\u003c/pre\u003e\u003cp\u003e\u003cbr\u003eWe are using \u003ccode\u003eng-container\u003c/code\u003e element here, so to not populate DOM with any unnecessary elements like \u003ccode\u003e\u0026lt;div\u0026gt;\u003c/code\u003e elements (which could be tempting to use). \u003c/p\u003e\u003cp\u003eWhat about the other case, when we have a bunch of observables? We can combine them into a single Observable. This pattern is called View Model - since it is creating a model for use in the template. A common abbreviation for this is \u003ccode\u003evm\u003c/code\u003e, and that is often how we name the component’s property. For more information about the View Model pattern, I encourage you to read this \u003ca href=\"https://indepth.dev/posts/1478/designing-angular-architecture-container-presentation-pattern#stage-2-model\"\u003einDepth article\u003c/a\u003e.\u003c/p\u003e\u003cp\u003eCombining Observables can be implemented using another type of RxJs operator. Pipeable operators are used to transforming Observable into another Observable, while Creation operators create new Observable and work as standalone functions.\u003c/p\u003e\u003cp\u003eWe will use an operator called \u003ccode\u003ecombineLatest\u003c/code\u003e which merges several Observables and returns the result Observable, where each emitted value is an array of latest values from each source Observable. You can read more about this operator \u003ca href=\"https://indepth.dev/reference/rxjs/operators/combine-latest\"\u003ehere\u003c/a\u003e. \u003cbr\u003eBecause the result Observable value will be an array, we will use the \u003ccode\u003emap\u003c/code\u003e operator as well — to map the array into an object, so it will be more readable when using it in the template. Below is the fully implemented View Model for our case:\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"language-typescript\"\u003ereadonly vm$ = combineLatest([\n  this.route.params.pipe(\n    switchMap(params =\u0026gt; this.heroService.getHero(params.id))\n  ),\n  this.route.params.pipe(\n    switchMap(params =\u0026gt; this.heroService.getPet(params.id))\n  ),\n  this.heroService.getCities(),\n]).pipe(\n  map(([hero, pet, cities]) =\u0026gt; {\n    return {\n      hero,\n      pet,\n      cities\n    }\n  })\n);\n\n\nconstructor(\n  private readonly route: ActivatedRoute,\n  private readonly heroService: HeroService,\n) { }\u003c/code\u003e\u003c/pre\u003e\u003cp\u003e\u003cbr\u003eIt may look complex at glance, so let’s split this into two blocks:\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"language-typescript\"\u003ereadonly vm$ = combineLatest([\n  this.route.params.pipe(\n    switchMap(params =\u0026gt; this.heroService.getHero(params.id))\n  ),\n  this.route.params.pipe(\n    switchMap(params =\u0026gt; this.heroService.getPet(params.id))\n  ),\n  this.heroService.getCities(),\n])\u003c/code\u003e\u003c/pre\u003e\u003cp\u003e\u003cbr\u003eWhich is the core, it uses the \u003ccode\u003ecombineLatest\u003c/code\u003e operator to create a \u003ccode\u003evm$\u003c/code\u003e Observable from three source Observables — hero, pet, and the cities. \u003c/p\u003e\u003cp\u003eThe second block of code:\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"language-typescript\"\u003e.pipe(\n  map(([hero, pet, cities]) =\u0026gt; {\n    return {\n      hero,\n      pet,\n      cities\n    }\n  })\n);\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eIs just about mapping the array into an object with readable property names.\u003c/p\u003e\u003cp\u003eNow let’s take a look at the template usage:\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"language-HTML\"\u003e\u0026lt;ng-container *ngIf=\"vm$ | async as vm\"\u0026gt;\n  \u0026lt;p\u0026gt; {{ vm.hero.name }} \u0026lt;/p\u0026gt;\n  \u0026lt;p\u0026gt; {{ vm.hero.surname }} \u0026lt;/p\u0026gt;\n  \u0026lt;p\u0026gt; {{ vm.hero.city }} \u0026lt;/p\u0026gt;\n  \n  \u0026lt;p\u0026gt; {{ vm.pet.name }} \u0026lt;/p\u0026gt;\n  \n  \u0026lt;ul\u0026gt;\n    \u0026lt;li *ngFor=\"let city of vm.cities\"\u0026gt; {{ city }} \u0026lt;/li\u0026gt;\n  \u0026lt;/ul\u0026gt;\n\u0026lt;/ng-container\u0026gt;\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eEverything is wrapped in the \u003ccode\u003evm$\u003c/code\u003e Observable, so once resolved via the \u003ccode\u003e| async\u003c/code\u003e pipe our syntax becomes very simple — it simply operates on a regular object called \u003ccode\u003evm\u003c/code\u003e! \u003c/p\u003e\u003ch2 id=\"initializtion-that-depends-on-the-input-values\"\u003eInitializtion that depends on the input values\u003c/h2\u003e\u003cp\u003eLeaving the Observables and subscriptions behind for a moment, there are other cases when we use the \u003ccode\u003engOnInit\u003c/code\u003e hook when we actually should use other hooks.\u003c/p\u003e\u003cp\u003eComponents, especially the presentation ones are using input properties to get the state from the container/parent components. The components should react to the input data and display the result accordingly. Often when we start implementing a new component we tend to think about the input as a kind of setup information, which we use on components initialization and forget. \u003c/p\u003e\u003cp\u003eIt can be the case, but often in the future when a component is used with input data that changes in time (for instance according to route params changes) it stops working correctly. If a component needs to run some computation using the input parameters, it’s often better to propose a code solution that will work every time, not only at the start. \u003c/p\u003e\u003cp\u003eBelow is the example of a component’s code that although will work at the start, won’t update the data once input changes:\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"language-typescript\"\u003e@Component({\n  template: `\u0026lt;p\u0026gt; {{ fullName }} \u0026lt;/p\u0026gt;`,\n})\nexport class NameComponent implements OnInit {\n  @Input() name: string;\n  @Input() surname: string;\n\n  fullName: string;\n\n  ngOnInit() {\n    this.fullName = `${this.name} ${this.surname}`;\n  }\n}\u003c/code\u003e\u003c/pre\u003e\u003cp\u003e\u003cbr\u003eProperty \u003ccode\u003efullname\u003c/code\u003e will be initialized once with the first set of \u003ccode\u003ename\u003c/code\u003e + \u003ccode\u003esurname\u003c/code\u003e, and later if the \u003ccode\u003ename\u003c/code\u003e or \u003ccode\u003esurname\u003c/code\u003e changes, the \u003ccode\u003efullname\u003c/code\u003e will stay the same.\u003c/p\u003e\u003cp\u003eIn such cases, we should process input data every time it changes. How we can do this? There are two options:\u003c/p\u003e\u003col\u003e\u003cli\u003eusing a proper hook for that — so the `ngOnChanges`\u003c/li\u003e\u003cli\u003eusing a setters technique\u003c/li\u003e\u003c/ol\u003e\u003ch3 id=\"the-ngonchanges\"\u003e\u003cbr\u003eThe ngOnChanges\u003c/h3\u003e\u003cp\u003eThe \u003ccode\u003engOnChanges\u003c/code\u003e runs on every input change, so we can use this hook to update our internal state according to the input data. It will work the same way as with the \u003ccode\u003engOnInit\u003c/code\u003e, except it will also be triggered for any other changes in the future. The snippet below presents the idea:\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"language-typescript\"\u003e@Component({\n  template: `\u0026lt;p\u0026gt; {{ fullName }} \u0026lt;/p\u0026gt;`,\n})\nexport class NameComponent implements OnChanges {\n  @Input() name: string;\n  @Input() surname: string;\n\n  fullName: string;\n\n  ngOnChanges() {\n    this.fullName = `${this.name} ${this.surname}`;\n  }\n}\u003c/code\u003e\u003c/pre\u003e\u003ch3 id=\"ngoninit-vs-ngonchanges\"\u003engOnInit vs ngOnChanges\u003c/h3\u003e\u003cp\u003eThe \u003ccode\u003engOnInit\u003c/code\u003e hook is being called just after the calling \u003ccode\u003engOnChanges\u003c/code\u003e for the first time. So they are really similar, except that we can use \u003ccode\u003engOnChanges\u003c/code\u003e to trigger any further updates. \u003cbr\u003eThe \u003ccode\u003engOnChanges\u003c/code\u003e additionally gives us information about the current and previous state of the inputs via the \u003ccode\u003eSimpleChange\u003c/code\u003e object. \u003c/p\u003e\u003cp\u003eWe can say that although the \u003ccode\u003engOnInit\u003c/code\u003e seems good for the initial setup, it is rarely useful because when the component gets updated input we quite often need to destroy the old instances and recreate them — which is why using the \u003ccode\u003engOnChanges\u003c/code\u003e makes more sense.\u003c/p\u003e\u003ch3 id=\"getters\"\u003e\u003cbr\u003eGetters\u003c/h3\u003e\u003cp\u003eThe example from above is actually very simple, and most likely we will deal with far more advanced logic. Although if your case is as simple as creating a variable for a derived state, like joining two input arguments, then most likely you don’t even need to use the \u003ccode\u003engOnChanges\u003c/code\u003e hook.\u003c/p\u003e\u003cp\u003eFor such simple cases, you can use getters to provide the value when needed. Please make sure you are using \u003ccode\u003eChangeDetection.OnPush\u003c/code\u003e for that, to not get any performance issues if your getter runs some complicated logic behind.\u003c/p\u003e\u003cp\u003eThe getters implementation looks as follows:\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"language-typescript\"\u003e@Component({\n  template: `\u0026lt;p\u0026gt; {{ fullName }} \u0026lt;/p\u0026gt;`,\n  changeDetection: ChangeDetectionStrategy.OnPush,\n})\nexport class NameComponent {\n  @Input() name: string;\n  @Input() surname: string;\n\n  get fullName(): string {\n    return `${this.name} ${this.surname}`\n  }\n}\u003c/code\u003e\u003c/pre\u003e\u003ch3 id=\"setters\"\u003e\u003cbr\u003eSetters\u003c/h3\u003e\u003cp\u003eThe third technique relies on the power of setters in TypeScript. There is no obligation that the Input decorator must be set on the property, and not the setter. That’s why we can use the setters, and put some light setup logic in there. Let me show you an example. Imagine we are receiving some data via input, which we need to somehow process. In our case, it will be again about taking the first element from the array and changing the string containing a date to a proper \u003ccode\u003eDate\u003c/code\u003e object.\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"language-typescript\"\u003einterface MyDTO {\n  data: {\n    name: string;\n    time: string;\n  }[]\n}\n\n@Component({\n  template: `\u0026lt;p\u0026gt; {{ time }} \u0026lt;/p\u0026gt;`,\n})\nexport class TimeComponent {\n  @Input() \n  set vm(value: MyDTO) {\n    const first = value.data[0];\n   \n    this.time = new Date(first.time);\n  }\n\n  time: Date;\n}\u003c/code\u003e\u003c/pre\u003e\u003cp\u003e\u003cbr\u003eUsing this trick we no longer need any lifecycle hooks used to set up components with proper data. We simply do the setup on data input. One of the advantages of this approach is, that we are limited to changes on a single property, while the \u003ccode\u003engOnChanges\u003c/code\u003e is triggered each time any Input property is changed, even if we don’t want to do any setup on a particular property change. \u003c/p\u003e\u003cp\u003ePlease note, that this technique works well when your result doesn’t depend on more than one input property. Using \u003ccode\u003engOnChanges\u003c/code\u003e gives you the advantage of knowing that the change detection check has been completed and you can operate on the whole new state, while the setters can be run in the middle of the actual check. \u003c/p\u003e\u003ch2 id=\"summary\"\u003eSummary\u003c/h2\u003e\u003cp\u003eThis was an extensive article, but I hope it presents clearly some refactor ideas that could help make the component’s code more concise, and easier to understand and maintain. \u003c/p\u003e\u003cp\u003eIn our components, we will deal with asynchronously loaded data quite often and we need to learn how to handle that so it is good in case of performance, contains no bugs, and is easier to read. Based on your preferences you may be a fan of the Promise approach or using Observables. If you use Observables, please remember that often there is no need for the subscriptions, nesting subscribes — and the only thing you need is a bit of knowledge about RxJs operators.\u003c/p\u003e\u003cp\u003eSo what shouldn’t be a part of the \u003ccode\u003engOnInit\u003c/code\u003e block? \u003c/p\u003e\u003cul\u003e\u003cli\u003esubscriptions when we can use the observables straightaway and subscribe in the templates\u003c/li\u003e\u003cli\u003eany setup code that needs to be invoked on every input property change, not only at the component’s initial cycle\u003c/li\u003e\u003c/ul\u003e\u003cp\u003e\u003c/p\u003e\u003cp\u003eFinally when it probably makes the most sense to use the \u003ccode\u003engOnInit\u003c/code\u003e?\u003c/p\u003e\u003cul\u003e\u003cli\u003ewhen we need to setup third-party components and libraries. They often need to provide them with HTML elements which we gather through static \u003ccode\u003eViewChild\u003c/code\u003e declarations\u003c/li\u003e\u003cli\u003ewhen we need any additional logic to be done on component initialization, which cannot be done via Observables resolved in the template\u003c/li\u003e\u003cli\u003ewhen we want to use Promise API\u003c/li\u003e\u003c/ul\u003e\u003cp\u003eAlthough, to be honest, most of the time \u003ccode\u003engOnChanges\u003c/code\u003e is probably a better alternative for \u003ccode\u003engOnInit\u003c/code\u003e. It solves problems with reacting to changes while also giving the possibility to run some things only on the first call — same as \u003ccode\u003engOnInit\u003c/code\u003e. It also gives us more flexibility, for instance when we want to destroy some third-party instances and recreate them with an updated state.\u003c/p\u003e\u003cp\u003eThe special case occurs when the component has no inputs at all — in this situation, there is no point for \u003ccode\u003engOnChanges\u003c/code\u003e and \u003ccode\u003engOnInit\u003c/code\u003e is for sure the best hook to be used. \u003c/p\u003e\u003cp\u003eThere is one more extra case that we need to consider when we use \u003ccode\u003engOnChanges\u003c/code\u003e. Changing the component’s properties after change detection has been completed we will often end up with an \u003cstrong\u003e\u003cem\u003eExpression has changed after it was checked\u003c/em\u003e\u003c/strong\u003e error. For that, we may need to schedule the work for the time after change detection finishes. We can schedule it by using \u003ccode\u003erequestAnimationFrame\u003c/code\u003e, \u003ccode\u003esetTimeout\u003c/code\u003e, or even a \u003ccode\u003ePromise\u003c/code\u003e, to put the task on the macro or micro queue. \u003c/p\u003e\u003chr\u003e\u003cp\u003eIt seems, we really can live without auto-generated \u003ccode\u003engOnInit\u003c/code\u003e in the default component generation in Angular CLI.\u003c/p\u003e","comment_id":"634400a5fe5d131807857fbc","feature_image":"https://images.indepth.dev/images/2022/10/2022-10.jpg","featured":false,"visibility":"public","created_at":"2022-10-10T14:23:17.000+03:00","updated_at":"2022-10-10T20:28:46.000+03:00","published_at":"2022-10-10T20:28:46.000+03:00","custom_excerpt":"Explore various techniques to improve initlialization code in components. We will replace the ngOnInit entirely and propose better alternatives. We will cover subscriptions management, and other life cycle hooks, such as ngOnChanges.","codeinjection_head":"{\"community_link\":\"https://github.com/indepth-dev/community/discussions/289\"}","codeinjection_foot":null,"custom_template":null,"canonical_url":null,"email_recipient_filter":"none","authors":[{"id":"60355465bd521af3716ad114","name":"Maciej Wojcik","slug":"maciej","profile_image":"https://images.indepth.dev/images/2021/02/download.png","cover_image":null,"bio":"Hey, I'm a frontend developer, passionate about good design for both the code and UX/UI side of things. I am mainly involved in Angular, rxjs, typescript subjects. ","website":null,"location":"Poznan, Poland","facebook":null,"twitter":"@maciej_wwojcik","meta_title":null,"meta_description":null,"url":"https://admin.indepth.dev/author/maciej/"}],"tags":[{"id":"5d403979679ce6202b744976","name":"angular","slug":"angular","description":"Questions about Angular (not to be confused with AngularJS), the web framework from Google. Use this tag for Angular questions which are not specific to an individual version. For the older AngularJS (1.x) web framework, use the angularjs tag.","feature_image":null,"visibility":"public","meta_title":null,"meta_description":null,"og_image":null,"og_title":null,"og_description":null,"twitter_image":null,"twitter_title":null,"twitter_description":null,"codeinjection_head":null,"codeinjection_foot":null,"canonical_url":null,"accent_color":null,"url":"https://admin.indepth.dev/tag/angular/"},{"id":"5e73249fd724c36e46b22ccb","name":"observables","slug":"observables","description":null,"feature_image":null,"visibility":"public","meta_title":null,"meta_description":null,"og_image":null,"og_title":null,"og_description":null,"twitter_image":null,"twitter_title":null,"twitter_description":null,"codeinjection_head":null,"codeinjection_foot":null,"canonical_url":null,"accent_color":null,"url":"https://admin.indepth.dev/tag/observables/"},{"id":"5e3d7b9abe143e7df0e2a8a4","name":"angular-cli","slug":"angular-cli","description":null,"feature_image":null,"visibility":"public","meta_title":null,"meta_description":null,"og_image":null,"og_title":null,"og_description":null,"twitter_image":null,"twitter_title":null,"twitter_description":null,"codeinjection_head":null,"codeinjection_foot":null,"canonical_url":null,"accent_color":null,"url":"https://admin.indepth.dev/tag/angular-cli/"}],"primary_author":{"id":"60355465bd521af3716ad114","name":"Maciej Wojcik","slug":"maciej","profile_image":"https://images.indepth.dev/images/2021/02/download.png","cover_image":null,"bio":"Hey, I'm a frontend developer, passionate about good design for both the code and UX/UI side of things. I am mainly involved in Angular, rxjs, typescript subjects. ","website":null,"location":"Poznan, Poland","facebook":null,"twitter":"@maciej_wwojcik","meta_title":null,"meta_description":null,"url":"https://admin.indepth.dev/author/maciej/","_id":1132},"primary_tag":{"id":"5d403979679ce6202b744976","name":"angular","slug":"angular","description":"Questions about Angular (not to be confused with AngularJS), the web framework from Google. Use this tag for Angular questions which are not specific to an individual version. For the older AngularJS (1.x) web framework, use the angularjs tag.","feature_image":null,"visibility":"public","meta_title":null,"meta_description":null,"og_image":null,"og_title":null,"og_description":null,"twitter_image":null,"twitter_title":null,"twitter_description":null,"codeinjection_head":null,"codeinjection_foot":null,"canonical_url":null,"accent_color":null,"url":"https://admin.indepth.dev/tag/angular/"},"url":"https://admin.indepth.dev/structure-initialization-logic-without-ngoninit-utilize-observables-and-ngonchanges/","excerpt":"Explore various techniques to improve initlialization code in components. We will replace the ngOnInit entirely and propose better alternatives. We will cover subscriptions management, and other life cycle hooks, such as ngOnChanges.","reading_time":17,"access":true,"send_email_when_published":false,"og_image":null,"og_title":null,"og_description":null,"twitter_image":"https://images.indepth.dev/images/2022/10/2022-10_2.jpg","twitter_title":null,"twitter_description":null,"meta_title":null,"meta_description":null,"email_subject":null,"frontmatter":null,"_id":1508},{"id":"62d01c6da0d748ad0c8b8a18","uuid":"7d9c2d10-20ec-4d7c-9663-b586c712b0a5","title":"An Introduction to Blockchain","slug":"an-introduction-to-blockchain","html":"\u003cp\u003eWeb3 has been hailed by some as the next age of the Internet. While still in its infancy, Web3 promises to provide a more decentralized way of computing. Love it or hate it, as engineers and scientists, we should understand the technical foundations of Web3. In order to understand Web3, it is essential to understand the fundamentals of blockchains. This is because blockchains form the backbone of systems like Bitcoin and Ethereum by providing a cryptographically secure and immutable data layer.\u003cbr\u003e\u003cbr\u003eMy goal in this primer is to give you an intuitive understanding of blockchains with some tools and examples so that you can better understand future articles on more sophisticated Web3 technologies, like Ethereum. In this guide, we will focus on Bitcoin’s blockchain, since it is one of the simplest to understand. It will provide you with a set of fundamentals from which to build upon.\u003c/p\u003e\u003cp\u003eBlockchains have a fairly steep learning curve because they combine topics from multiple fields, such as computer science, cryptography, distributed systems, and economics. Part of the reason is also because this concept has received so much hype and misinformation that people have a hard time grokking it, probably because they have mistaken it for some kind of magic. This need not be the case. As we’ll soon see, blockchains, while clever, can be understood at a fundamentals level by proceeding step-by-step. \u003c/p\u003e\u003cp\u003e\u003cstrong\u003eA useful resource:\u003c/strong\u003e Visualization is key in understanding these concepts. Anders Brownworth has created a \u003ca href=\"https://andersbrownworth.com/blockchain/blockchain\"\u003every nice, interactive tool\u003c/a\u003e for tinkering with blockchains. I will reference it throughout this document, and recommend experimenting with it.\u003c/p\u003e\u003c!--kg-card-begin: markdown--\u003e\u003ch3 id=\"background\"\u003eBackground\u003c/h3\u003e\n\u003c!--kg-card-end: markdown--\u003e\u003cp\u003eBitcoin was designed to be a \"peer-to-peer version of electronic cash...requiring no trusted third party to prevent double spending\". \u003c/p\u003e\u003cp\u003eLoosely speaking, \u003cstrong\u003eDouble Spending \u003c/strong\u003eis when someone tries to give the same coin to two people at the same time.\u003c/p\u003e\u003cp\u003eYou can read the \u003ca href=\"https://bitcoin.org/bitcoin.pdf\"\u003efull abstract\u003c/a\u003e from the original Bitcoin whitepaper. It does a pretty great job of introducing and motivating the technology. You'll notice two things about the abstract:\u003c/p\u003e\u003col\u003e\u003cli\u003eBitcoin’s main goal was to prevent \"double-spending\" \u003cstrong\u003ewithout using a trusted 3rd party\u003c/strong\u003e.\u003c/li\u003e\u003cli\u003eThe word “blockchain” doesn’t appear anywhere.\u003c/li\u003e\u003c/ol\u003e\u003cp\u003eBitcoin is designed to be an electronic currency that can process payment transactions in a way which does not require a trusted 3rd party. Users use public key cryptography to sign transactions. This is a theme that is common across blockchain technologies.\u003c/p\u003e\u003cfigure class=\"kg-card kg-image-card kg-card-hascaption\"\u003e\u003cimg src=\"https://images.indepth.dev/images/2022/07/Screen-Shot-2022-07-16-at-23.07.58.png\" class=\"kg-image\" alt loading=\"lazy\" width=\"1292\" height=\"718\"\u003e\u003cfigcaption\u003eSigned transactions, from the Bitcoin whitepaper\u003c/figcaption\u003e\u003c/figure\u003e\u003c!--kg-card-begin: markdown--\u003e\u003ch3 id=\"technical-concepts\"\u003eTechnical Concepts\u003c/h3\u003e\n\u003c!--kg-card-end: markdown--\u003e\u003cp\u003eHere’s a quick overview of the technical concepts covered in this article. These are what enable blockchains like Bitcoin to function:\u003c/p\u003e\u003cul\u003e\u003cli\u003e\u003cstrong\u003eCryptographic hash functions\u003c/strong\u003e, like SHA256. Used for generating blockchain account addresses, and for public/private key pairs used for digitally signing transactions.\u003c/li\u003e\u003cli\u003e\u003cstrong\u003eTransactions\u003c/strong\u003e containing data which update the state of the blockchain. For example, Alice sends Bob 10 bitcoin. Such transactions use digital signatures (via private key) to show that Alice really did send Bob 10 bitcoin. Otherwise, Bob could just fake the transaction.\u003c/li\u003e\u003cli\u003e\u003cstrong\u003eBlocks\u003c/strong\u003e, which group transactions. This grouping is done to increase the efficiency of the network by processing multiple transactions at once.\u003c/li\u003e\u003cli\u003e\u003cstrong\u003eBlockchain\u003c/strong\u003e, A data structure containing blocks of transactions which are securely linked together. Think of it like a singly-linked list with some hash functions sprinkled in. It’s a simple, yet surprisingly useful mental model.\u003c/li\u003e\u003cli\u003eA \u003cstrong\u003epeer-to-peer network\u003c/strong\u003e consisting of nodes. These nodes propagate transactions and blocks on the network to one another in order to reach consensus and make updates to the blockchain.\u003c/li\u003e\u003cli\u003eA \u003cstrong\u003edistributed consensus mechanism\u003c/strong\u003e for deciding how new blocks should be added to the blockchain. The consensus mechanism is of vital importance, since it is what decentralizes control over the blockchain by forcing nodes participating in the network to cooperate in the enforcement of a set of consensus rules. This makes it difficult for bad actors to add fake blocks or try to attack the network.\u003c/li\u003e\u003cli\u003e\u003cstrong\u003eCryptoeconomics\u003c/strong\u003e. A game-theoretic way to incentivize nodes in the network to spend the energy and computing resources required to process transactions in an honest way. This is usually done in the form of rewards paid using a native cryptocurrency, like bitcoin.\u003c/li\u003e\u003cli\u003eAn \u003cstrong\u003eopen-source software client\u003c/strong\u003e which implements all of the above, making it easy for individuals to download and become a node participating in the network.\u003c/li\u003e\u003c/ul\u003e\u003cp\u003eBefore diving into the technical details, it's worth taking a moment to understand some of the motivations behind decentralization.\u003c/p\u003e\u003c!--kg-card-begin: markdown--\u003e\u003ch3 id=\"decentralization\"\u003eDecentralization\u003c/h3\u003e\n\u003c!--kg-card-end: markdown--\u003e\u003cp\u003eIn a \u003cstrong\u003ecentralized\u003c/strong\u003e world, a trusted authority controls reads and writes to a store of data. For example, your bank is the only entity which can update your account balance in their database, and you \u003cstrong\u003etrust\u003c/strong\u003e them to do so. If you received news that your bank had decided to make their database publicly available for anyone to download and update, you would probably panic.\u003cbr\u003e\u003cbr\u003eAnd yet, that’s what Bitcoin does. Bitcoin is \u003cstrong\u003edecentralized\u003c/strong\u003e and\u003cstrong\u003e trustless\u003c/strong\u003e, meaning there is no trusted authority which controls updates. Bitcoin forms a distributed, peer-to-peer network of computers called \"nodes\" which run Bitcoin’s software. This software contains a copy of Bitcoin’s blockchain, along with the ability to write updates to it, and communicate with other nodes on the network. Any person can download a copy of the software freely, and become a node.\u003cbr\u003e\u003cbr\u003eIf Bitcoin were using a traditional database, this would be chaos. If any node could make updates to the database at any time, there would be conflicts, fake transactions, inconsistencies between different node’s copies of the database - it would be completely useless. This could be solved by permitting only certain nodes to have write access, but this would require the network to \u003cstrong\u003etrust\u003c/strong\u003e those special nodes, and Bitcoin is designed to be \u003cstrong\u003etrustless\u003c/strong\u003e. Too much trust, and you’re back at centralization.\u003cbr\u003e\u003cbr\u003eBecause of this, Bitcoin does not use a conventional database, but instead uses both a blockchain to store data, and a consensus mechanism called Proof-of-Work which controls updates to the blockchain. In any distributed network, it’s possible for there to be multiple, competing versions of the blockchain at any time. Nodes in the network are configured to always accept the longest chain as being valid, as that is the chain that has the largest amount of “proof-of-work” in it. We’ll see why this is shortly.\u003cbr\u003e\u003cbr\u003eIt’s worth noting that having a blockchain ledger containing transactions is nothing special. \u003cstrong\u003eThe difficult part is getting a network to agree on the state of the ledger when it’s updated\u003c/strong\u003e. This has been a topic of interest in distributed systems research for decades. You'll often hear the term \u003cstrong\u003e\u003ca href=\"https://academy.binance.com/en/articles/byzantine-fault-tolerance-explained\"\u003eByzantine Fault Tolerant\u003c/a\u003e\u003c/strong\u003e (BFT) thrown around. BFT refers to a class of consensus mechanisms that work when participants in the network can't trust each other to behave well. Imagine that Alice broadcasts a transaction into the network saying that she pays Bob 10 bitcoin. How can Alice and Bob be sure that other nodes on the network have added this transaction to their ledger? How can nodes on the network be sure that this is a legitimate transaction? Maybe Alice already spent her 10 bitcoin somewhere else (Double Spend). \u003c/p\u003e\u003cp\u003eThis was the innovation of Bitcoin - finding a straightforward way for a distributed network to reach consensus on the state of the ledger without involving any trusted parties. This is proof-of-work, also known as the Nakamoto Consensus Algorithm. Briefly, it says that of all the different copies of the blockchain that exist in the network at any given time, the true blockchain is always the longest one, \u003cstrong\u003ebecause it is the one that has the most computational work invested into it by the network\u003c/strong\u003e. Assuming that at least 51% of the computing power in the network is controlled by honest nodes, then the longest blockchain must be the real one. If this were not the case, and say Alice and Bob combined controlled more than 50% of the computing power, they could potentially double spend their coins \u003ca href=\"https://www.investopedia.com/terms/1/51-attack.asp\"\u003ein a 51% attack\u003c/a\u003e.\u003cbr\u003e\u003cbr\u003eIn the next sections, we’ll look into the technical details of how this consensus is achieved.\u003c/p\u003e\u003c!--kg-card-begin: markdown--\u003e\u003ch3 id=\"cryptographic-hashing\"\u003eCryptographic Hashing\u003c/h3\u003e\n\u003c!--kg-card-end: markdown--\u003e\u003cp\u003eAn essential concept in blockchains is hashing. Bitcoin uses a SHA256 cryptographic hash function. Cryptographic hash functions have two properties worth noting:\u003c/p\u003e\u003col\u003e\u003cli\u003eTheir inputs cannot be guessed from their outputs. They are non-reversible.\u003c/li\u003e\u003cli\u003eTwo similar inputs should produce greatly different outputs. This is similar to point (1). You should not be able to find any patterns in the output that would help you guess the input. \u003c/li\u003e\u003c/ol\u003e\u003cp\u003eFor a visualization of this, notice in the example below that each time the data changes, the hash value changes to a new value. Let’s try hashing a simple transaction, like {from: “alice”, to: “bob”, value: 10}. Notice how the hash changes whenever we change part of the data, such as the value.\u003c/p\u003e\u003cfigure class=\"kg-card kg-image-card kg-card-hascaption\"\u003e\u003cimg src=\"https://lh5.googleusercontent.com/Rb1-ch8oE-BaMtPHf-fAWQhwrFDCBp3m61rKAffWxWk5pC4r_tdqC8BNBsA1aqgPAdJVRgn9T2IMWTgZeW0UEVY2deJkctf5BvelOQ5npzbnmkGuB_Q8l-j-wO_leEQ3f5fbtoXpp03nrgY5LA\" class=\"kg-image\" alt loading=\"lazy\"\u003e\u003cfigcaption\u003eChanging the data changes the hash\u003c/figcaption\u003e\u003c/figure\u003e\u003c!--kg-card-begin: markdown--\u003e\u003ch3 id=\"blocks\"\u003eBlocks\u003c/h3\u003e\n\u003c!--kg-card-end: markdown--\u003e\u003cp\u003eTransaction data is grouped together and stored in blocks. Adding blocks to the blockchain takes time, so it more performant to group multiple transactions into a single block. In addition to transaction data, a block has a header which stores some metadata about the block. For now, we’ll focus on two pieces of metadata, the \u003cstrong\u003enonce\u003c/strong\u003e and the \u003cstrong\u003ehash\u003c/strong\u003e.\u003cbr\u003e\u003cbr\u003eWe’ve already seen that the hash changes based on the data. When adding a block to the blockchain, there is a special challenge that must be solved; \u003cstrong\u003ewe need to guess a value for the nonce such that the SHA256 hash of the nonce and the serialized data fields produces a hash with a certain number of leading zeros. \u003c/strong\u003eThis \"leading number of zeros\" is referred to as the block’s \u003cstrong\u003edifficulty level\u003c/strong\u003e, the observation being that the larger the required number of leading zeros, the longer it takes to guess a nonce that produces a hash with that many leading zeros. Why is this?\u003cbr\u003e\u003cbr\u003eThink of it like this; a SHA256 hash is 256 bits, which is 64 hexadecimal characters (each hex character requires 4 bits to encode. 4 * 64 = 256). Each hex character can be one of 16 possible values, and we have 64 of them, so there are 16^64 possible SHA256 hashes. Let’s say we want to find a hash with 20 leading zeros. That means 20 of our 64 characters are known, so there are only 16^(64 - 20) or 16^44 such hashes. \u003c/p\u003e\u003cfigure class=\"kg-card kg-image-card\"\u003e\u003cimg src=\"https://images.indepth.dev/images/2022/07/Screen-Shot-2022-07-16-at-9.16.05.png\" class=\"kg-image\" alt loading=\"lazy\" width=\"170\" height=\"86\"\u003e\u003c/figure\u003e\u003cp\u003eOur odds of finding such a hash randomly are quite small, so a block difficulty of 20 means that it will take a very long time to mine the block (i.e. find a nonce that hashes with the block’s contents to produce a hash with 20 leading zeros). In the example below, we are only searching for hashes with 4 leading zeros, so it is much easier to find a suitable nonce.\u003c/p\u003e\u003cfigure class=\"kg-card kg-image-card kg-card-hascaption\"\u003e\u003cimg src=\"https://lh6.googleusercontent.com/pw4btnwjK24dI12rTQ2ko_TaaKwUDXEkKcMF0hmozDI2Z1zkUCCjU8meTUokjhhQgSJ3mtfmWoWbZGG_MyojItG_GmUPfJfB1vklSmTx0Bcyft50oZR0MRlcg1YxuWPA9Z2LYKkWAh9YkojpkA\" class=\"kg-image\" alt loading=\"lazy\"\u003e\u003cfigcaption\u003eEven slight changes to data will change the hash and invalidate the block\u003c/figcaption\u003e\u003c/figure\u003e\u003cp\u003eOnce the “Mine” button is clicked, we start guessing nonces, the block eventually turns green, indicating that the hash has four leading zeros. \u003cstrong\u003eAs you may have guessed, this process of finding the correct nonce value for a set of data is called “mining”\u003c/strong\u003e, like a prospector mining for gold in the wild west.\u003cbr\u003e\u003cbr\u003eThe computational “work” in \"proof-of-work\" is the act of guessing a nonce until the correct hash is produced. Note that in this example, we need to produce a hash with only four leading zeros, but real Bitcoin hashes currently need to have 17 leading zeros. You can see this in action by looking at a \u003ca href=\"https://blockchain.coinmarketcap.com/chain/bitcoin\"\u003eblock explorer\u003c/a\u003e for Bitcoin’s main network. Notice how all the Hash IDs start with leading zeros. \u003cstrong\u003eAs mentioned previously, the more leading zeros, the more time consuming the mining process is.\u003c/strong\u003e\u003c/p\u003e\u003cp\u003eWhy would Bitcoin want to make the process of mining so time consuming? The answer can be found when we start to link the blocks together into a chain. It has to do with making it very difficult for an attacker to produce a fake version of the blockchain.\u003c/p\u003e\u003c!--kg-card-begin: markdown--\u003e\u003ch3 id=\"blockchains\"\u003eBlockchains\u003c/h3\u003e\n\u003c!--kg-card-end: markdown--\u003e\u003cp\u003eIn addition to the nonce and hash fields, a block header also contains the hash of the block that came before it in the chain. That previous block also contains the hash of the block that came before it, and so on until a chain of blocks is formed. Hence the term, “blockchain”. \u003cbr\u003e\u003c/p\u003e\u003cfigure class=\"kg-card kg-image-card kg-card-hascaption\"\u003e\u003cimg src=\"https://lh5.googleusercontent.com/QQYq70iRhYzqXP9zuxiir4BOKhjOk7m3-rAERPwVNQwj9bWb2FHvV1PuBAXaIOU7mCR6cBgXg0Jr69RYIWxNB6oAnOL69p2BXRf-rmVVkq6xmmK0huTwpWTXvd58bNzXJryDi7QlyUOG5NJeOg\" class=\"kg-image\" alt loading=\"lazy\"\u003e\u003cfigcaption\u003eBlockchain diagram from the Bitcoin whitepaper\u003c/figcaption\u003e\u003c/figure\u003e\u003cp\u003eIn the example below, notice that the five blocks in the chain start out green, each with hashes with four leading zeros. These are all valid “mined’ blocks.\u003c/p\u003e\u003cfigure class=\"kg-card kg-image-card kg-card-hascaption\"\u003e\u003cimg src=\"https://lh4.googleusercontent.com/QwVQbRcvcljMEP64RD0-Q23hBT9yV8S_bpNzWUePI0Yp1i8hUweRHkG1gWs_Ez8gXsmC8hEg-v4rFB0tyBnXuEmC-6K0OqtGftBOLULTGYa-usbb-MUcFs0jjW2EMkjbqVWf_j-E4ZwcjU2RMg\" class=\"kg-image\" alt loading=\"lazy\"\u003e\u003cfigcaption\u003eIn this toy example, all hashes must have 4 leading zeros. The block difficulty is thus \"4\"\u003c/figcaption\u003e\u003c/figure\u003e\u003cp\u003eNow, suppose an attacker wanted to change the data in block 2. In this case, assume Alice has only 10 bitcoin, and she wants to double spend that 10 bitcoin to pay both Bob and George. As soon as she changes the data in block 2 of her local copy of the blockchain, the hash of block 2 changes. Because block 3 contains the hash of block 2 (which has just changed), the hash of block 3 will now be invalidated, and so on up the chain. Every block starting at block 2 is now red (invalid), because the change has rippled and invalidated the chain.\u003c/p\u003e\u003cfigure class=\"kg-card kg-image-card kg-card-hascaption\"\u003e\u003cimg src=\"https://lh3.googleusercontent.com/i5B3imy6Q9u0_21mwkfk0KmKA7ZUM2u8dKe6TaH4eIJ-_cLVeheFsM3qmhkxRggpDiaTvU6O8NJEweEhhiLStPBv00cYPK0qdKtbE6bXqxyzhLEGkkDwRu79ncuj5ZhgVKsJf07eIV-Qys4XgQ\" class=\"kg-image\" alt loading=\"lazy\"\u003e\u003cfigcaption\u003eA change to block 2 invalidates blocks 2,3,4 and 5\u003c/figcaption\u003e\u003c/figure\u003e\u003cp\u003eIf Alice tried to submit this chain to the network, it would immediately be rejected as invalid, because the hashes don’t have four leading zeros. Put another way, there is no “proof of work” to say that these blocks are valid, and the network always accepts the chain with the largest amount of \u003cem\u003everifiable\u003cstrong\u003e \u003c/strong\u003e(or provable) work\u003c/em\u003e. Alice would have to re-mine every block starting from block 2 to validate them, and then send this chain into the network for consensus.\u003cbr\u003eBut we saw in the previous step that mining a block is computationally intensive and takes time.\u003c/p\u003e\u003cfigure class=\"kg-card kg-image-card kg-card-hascaption\"\u003e\u003cimg src=\"https://lh4.googleusercontent.com/EJzR6xeR3p2ay2QlsfxnI2IGzEOx_ElxtDbc8RhcLic0V2malPeUs_h3GA0Glclp4nwdNk0tam7jlm6JkSOrfwhtzzzqiJdXiyoX4odBYvy4EPqNrDJKcmT-nWRG1lIwgfBMgowyNsCcNrB35Q\" class=\"kg-image\" alt loading=\"lazy\"\u003e\u003cfigcaption\u003eTurning blocks from red to green takes time\u003c/figcaption\u003e\u003c/figure\u003e\u003cp\u003eIn the time it takes for Alice to re-mine each of these blocks, a new block will have been added to the legitimate blockchain by the rest of the network. Unless Alice controls at least 51% of the computational power in the network, it can be shown that the probability of her catching up with the main chain and successfully completing her attack drops off exponentially with each additional block. Remember, the nodes on the network will always accept the longest mined chain as the valid one, because this is the chain that has the most computational proof of work invested into it, and we assume that the majority of the computing resources on the network are controlled by honest nodes. \u003cstrong\u003eThis is how Bitcoin’s blockchain maintains its security in a public, decentralized, trustless network.\u003c/strong\u003e\u003cbr\u003e\u003cbr\u003eIt’s worth noting that Proof-of-Work is one consensus mechanism for blockchains. It has its limitations, such as being slow and requiring large amounts of computation. It also assumes that most nodes will be honest. Other consensus mechanisms, such as Proof-of-Stake, also exist. They are the topic of a future article.\u003c/p\u003e\u003c!--kg-card-begin: markdown--\u003e\u003ch3 id=\"incentives-and-cryptoeconomics\"\u003eIncentives and Cryptoeconomics\u003c/h3\u003e\n\u003c!--kg-card-end: markdown--\u003e\u003cp\u003eWe’ve yet to answer an important question; if mining is so resource intensive, why would anyone volunteer to do it? All that electricity and specialized hardware costs money - to say nothing of the \u003ca href=\"https://www.investopedia.com/tech/whats-environmental-impact-cryptocurrency/\"\u003eenvironmental impact\u003c/a\u003e. This brings us to game theory and an emerging field known as cryptoeconomics, which answers the question \"how to incentivize honest participation in the network?\".\u003cbr\u003e\u003cbr\u003eHere's a fun fact; in Bitcoin, mining is the only process by which bitcoin can be created. Each time a miner successfully adds a block to the chain, they are allowed to include a transaction giving themselves some bitcoin as a reward for their work (currently 6.25 bitcoin as of this writing in 2022. This number halves every few years). This is called a \u003cstrong\u003eminer reward\u003c/strong\u003e, and it is the primary economic incentive - along with transaction fees - for miners to pay for the specialized hardware and energy required to mine. Ethereum provides its miners with a reward in its native currency (ether) as well. Note that it makes sense to use a currency native to the blockchain to reward miners. \u003cstrong\u003eIf rewards were to instead use fiat currencies like USD or JPY, we’d be back to trusting a central, off-chain authority, \u003c/strong\u003ewhich is what Bitcoin set out to avoid in the first place. Note also that the miner reward is calculated to be large enough to incentivize nodes to behave honestly, instead of using their resources to try to attack the network. If you had enough resources to attack the network, you'd probably be better off just mining a bunch of blocks instead.\u003c/p\u003e\u003c!--kg-card-begin: markdown--\u003e\u003ch3 id=\"conclusion\"\u003eConclusion\u003c/h3\u003e\n\u003c!--kg-card-end: markdown--\u003e\u003cp\u003eIf you’ve made it this far, here are some additional resources for learning about blockchains. Keep in mind that by understanding how Bitcoin works in terms of its blockchain and consensus mechanism, you will be in very good shape to understand how Ethereum works, and how you can develop Web3 programs on top of it. Even if you despise the idea of Web3, this is still a great way to learn some fundamentals of computer science and economics. Thanks for reading, and see you next time.\u003c/p\u003e\u003ch3 id=\"article-resources\"\u003eArticle Resources\u003c/h3\u003e\u003cul\u003e\u003cli\u003e\u003ca href=\"https://bitcoin.org/bitcoin.pdf\"\u003eBitcoin Whitepaper\u003c/a\u003e\u003c/li\u003e\u003cli\u003e\u003ca href=\"https://github.com/bitcoinbook/bitcoinbook\"\u003eMastering Bitcoin book\u003c/a\u003e\u003c/li\u003e\u003cli\u003e\u003ca href=\"https://www.youtube.com/watch?v=bBC-nXj3Ng4\"\u003e3blue1brown video on Bitcoin\u003c/a\u003e\u003c/li\u003e\u003c/ul\u003e","comment_id":"62d01c6da0d748ad0c8b8a18","feature_image":"https://images.indepth.dev/images/2022/07/An-Introduction-to-Blockchains.jpg","featured":false,"visibility":"public","created_at":"2022-07-14T16:38:53.000+03:00","updated_at":"2022-07-20T08:07:16.000+03:00","published_at":"2022-07-19T09:25:33.000+03:00","custom_excerpt":"Learn the fundamentals of a blockchain starting from first principles. We'll cover hashing, mining, consensus and more. After reading this article, you'll have a solid foundation upon which to explore platforms like Ethereum and Solana.","codeinjection_head":"{\"community_link\": \"https://github.com/indepth-dev/community/discussions/278\" }","codeinjection_foot":null,"custom_template":null,"canonical_url":null,"email_recipient_filter":"none","authors":[{"id":"5d4958c8f500122f6e3e8e97","name":"Nate Lapinski","slug":"nate","profile_image":"https://images.indepth.dev/images/2022/07/1_xS2XJZStjrQ6yiToZXazoQ.jpeg","cover_image":null,"bio":"Fullstack Developer. Love digging into the internals of stuff. Always trying to reach the next level.","website":null,"location":null,"facebook":null,"twitter":"@nate_lapinski","meta_title":null,"meta_description":null,"url":"https://admin.indepth.dev/author/nate/"}],"tags":[{"id":"62d78d7efe5d131807857eb1","name":"blockchain","slug":"blockchain","description":null,"feature_image":null,"visibility":"public","meta_title":null,"meta_description":null,"og_image":null,"og_title":null,"og_description":null,"twitter_image":null,"twitter_title":null,"twitter_description":null,"codeinjection_head":null,"codeinjection_foot":null,"canonical_url":null,"accent_color":null,"url":"https://admin.indepth.dev/tag/blockchain/"},{"id":"62d78d7efe5d131807857eb2","name":"crypto","slug":"crypto","description":null,"feature_image":null,"visibility":"public","meta_title":null,"meta_description":null,"og_image":null,"og_title":null,"og_description":null,"twitter_image":null,"twitter_title":null,"twitter_description":null,"codeinjection_head":null,"codeinjection_foot":null,"canonical_url":null,"accent_color":null,"url":"https://admin.indepth.dev/tag/crypto/"}],"primary_author":{"id":"5d4958c8f500122f6e3e8e97","name":"Nate Lapinski","slug":"nate","profile_image":"https://images.indepth.dev/images/2022/07/1_xS2XJZStjrQ6yiToZXazoQ.jpeg","cover_image":null,"bio":"Fullstack Developer. Love digging into the internals of stuff. Always trying to reach the next level.","website":null,"location":null,"facebook":null,"twitter":"@nate_lapinski","meta_title":null,"meta_description":null,"url":"https://admin.indepth.dev/author/nate/","_id":1005},"primary_tag":{"id":"62d78d7efe5d131807857eb1","name":"blockchain","slug":"blockchain","description":null,"feature_image":null,"visibility":"public","meta_title":null,"meta_description":null,"og_image":null,"og_title":null,"og_description":null,"twitter_image":null,"twitter_title":null,"twitter_description":null,"codeinjection_head":null,"codeinjection_foot":null,"canonical_url":null,"accent_color":null,"url":"https://admin.indepth.dev/tag/blockchain/"},"url":"https://admin.indepth.dev/an-introduction-to-blockchain/","excerpt":"Learn the fundamentals of a blockchain starting from first principles. We'll cover hashing, mining, consensus and more. After reading this article, you'll have a solid foundation upon which to explore platforms like Ethereum and Solana.","reading_time":12,"access":true,"send_email_when_published":false,"og_image":null,"og_title":null,"og_description":null,"twitter_image":"https://images.indepth.dev/images/2022/07/An-Introduction-to-Blockchains2.jpg","twitter_title":null,"twitter_description":null,"meta_title":null,"meta_description":null,"email_subject":null,"frontmatter":null,"_id":1506},{"id":"62877d6aa0d748ad0c8b8671","uuid":"d0a6b950-ec85-4823-9a5e-fdec06746974","title":"External Configurations in Angular","slug":"external-configurations-in-angular","html":"\u003cp\u003eEnvironment variables pollute the compiled source code, which does not allow for multiple server deployments. External configuration, allows multiple custom configuration for the same source code.\u003c/p\u003e\u003cp\u003eConsider the following server layout:\u003c/p\u003e\u003cfigure class=\"kg-card kg-image-card\"\u003e\u003cimg src=\"https://lh6.googleusercontent.com/DPrcJ7T-HTtIadSVT9eja-Pe8abVupMOY9uTo2gCVv3v01Y1yKco-IRdiWL0wQFkB9n05zkzwIjd5_it45vZUgA05V6vB0BY6YI7Xk_qetB-XhyCJ5iSPSdZRuMqekiyncsUke-gBWusrEt3\" class=\"kg-image\" alt loading=\"lazy\"\u003e\u003c/figure\u003e\u003cp\u003e\u003cbr\u003e\u003c/p\u003e\u003cp\u003eThe classical way to add configurations from an environment file. So if we have two environments, we will need to make two builds. Having an external configuration allows us to make one build, and rely on the host server to feed the missing configuration file, reducing time and resources needed.\u003c/p\u003e\u003cp\u003eThe environment then only needs to decide the location of the configuration file.\u003c/p\u003e\u003cp\u003eFurthermore, on the host, we can serve different configuration files based on a route, and deploy once. This is most common in multilingual or multinational sites, where for example, the app prefixed with \u003ccode\u003e/en-us/\u003c/code\u003e would be slightly different from that of \u003ccode\u003e/en-au/\u003c/code\u003e.\u003c/p\u003e\u003cp\u003eTaking it even further, we can deploy on multiple servers, excluding the configuration file, and let every remote server handle its own configuration file. A bit extreme, it is an option nevertheless. This is common in deploying custom software per client.\u003c/p\u003e\u003cp\u003eThe downside is as you can guess, \u003cstrong\u003emanual maintenance is needed\u003c/strong\u003e.\u003c/p\u003e\u003cp\u003eHere in this article, we will investigate a couple of ways to load external configuration, the pitfalls, and possible solutions.\u003c/p\u003e\u003ch1 id=\"part-i\"\u003e\u003cstrong\u003ePart I\u003c/strong\u003e\u003c/h1\u003e\u003ch2 id=\"via-http-and-appinitializer-token\"\u003e\u003cstrong\u003eVia Http and APP_INITIALIZER token\u003c/strong\u003e\u003c/h2\u003e\u003cp\u003eLet's begin by creating the config json file with some keys:\u003c/p\u003e\u003cblockquote\u003eThe full project is on \u003ca href=\"https://stackblitz.com/edit/token-test\"\u003eStackBlitz\u003c/a\u003e\u003c/blockquote\u003e\u003cpre\u003e\u003ccode class=\"language-json\"\u003e{\n  \"API\": {\n   \"apiRoot\": \"\u0026lt;http://localhost:8888/.netlify/functions\u0026gt;\"\n  },\n  \"MyKey\": \"MyValue\"\n}\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eThe end result is to be able to get the configuration as a property of a service, or as a static member, for example:\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"language-ts\"\u003econstructor(private configService: ConfigService) {\n}\nngOnInit(): void {\n    const myValue = this.configService.Config.MyKey;\n    // or\n    const myStaticValue  = ConfigService.Config.MyKey;\n}\u003c/code\u003e\u003c/pre\u003e\u003ch3 id=\"appinitialzer-token\"\u003eAPP_INITIALZER token\u003c/h3\u003e\u003cp\u003eUsing the APP_INITIALIZER token in \u003cstrong\u003eAppModule,\u003c/strong\u003e we can use HttpClient to request the json file. So we start in AppModule: (refer to \u003ca href=\"https://garage.sekrab.com/posts/the-mystic-three-tokens-of-angular-app_bootstrap_listener-app_initializer-platform_initializer\"\u003eAngular Initialization Tokens\u003c/a\u003e article)\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"language-ts\"\u003e@NgModule({\n  imports: [BrowserModule, HttpClientModule, CommonModule],\n  declarations: [AppComponent, HelloComponent],\n  bootstrap: [AppComponent],\n  providers: [\n    {\n      // TODO: create ConfigService and configFactory\n      provide: APP_INITIALIZER,\n      useFactory: configFactory,\n      multi: true,\n      deps: [ConfigService]\n    },\n  ],\n})\nexport class AppModule {}\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eIn a service file for \u003ccode\u003eConfigService\u003c/code\u003e, let’s add the http call to get the configuration file, and find out what we can do with the result.\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"language-ts\"\u003eexport const configFactory = (config: ConfigService): (() =\u0026gt; Observable\u0026lt;boolean\u0026gt;) =\u0026gt; {\n  return () =\u0026gt; config.loadAppConfig();\n};\n\n@Injectable({\n  providedIn: 'root',\n})\nexport class ConfigService {\n  constructor(private http: HttpClient) {\n\n  }\n  // return observable, right now just http.get\n  loadAppConfig(): Observable\u0026lt;boolean\u0026gt; {\n    return this.http.get(environment.configUrl).pipe(\n      map((response) =\u0026gt; {\n        // do something to reflect into local model\n        this.CreateConfig(response);\n        return true;\n      }),\n      catchError((error) =\u0026gt; {\n        // if in error, set default fall back from environment\n         this.CreateConfig(defaultConfig);\n        return of(false);\n      })\n    );\n  }\n}\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eThe \u003ccode\u003eevironment.configUrl\u003c/code\u003e in development would be the local file relative URL. Later will elaborate more on the strategy of how to handle the config file and its location.\u003c/p\u003e\u003cp\u003eThe \u003ccode\u003eIConfig\u003c/code\u003e model looks like this:\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"language-ts\"\u003eexport interface IConfig {\n  API: {\n    apiRoot: string;\n  };\n  MyKey: string;\n}\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eThe private method to cast configuration, should also return default configuration in case of failure. The extra configuration though does not have to match \u003ccode\u003eIConfig\u003c/code\u003e.\u003c/p\u003e\u003cp\u003eThe default fallback config looks as follows (in \u003ccode\u003eapp/config.ts\u003c/code\u003e file):\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"language-ts\"\u003eimport { environment } from '../environments/dev.env';\n\nexport const Config = {\n  API: {\n    apiRoot: environment.apiRoot,\n  },\n  MyKey: 'default value',\n  ExtraKeys: 'wont harm',\n};\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eBack to the service, the \u003ccode\u003eCreateConfig\u003c/code\u003e should only try to cast, then set to a public property. \u003cstrong\u003eThis, later, is going to fail. But let's go on\u003c/strong\u003e.\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"language-ts\"\u003eexport class ConfigService {\n  constructor(private http: HttpClient) {}\n\n  private _createConfig(config: any): IConfig {\n    // cast all keys as are\n    const _config = { ...(\u0026lt;IConfig\u0026gt;config) };\n    return _config;\n  }\n  // public property\n  public Config: IConfig;\n\n  loadAppConfig(): Observable\u0026lt;boolean\u0026gt; {\n    return this.http.get(environment.configUrl).pipe(\n      map((response) =\u0026gt; {\n        // set to public property\n        this.Config = this._createConfig(response);\n        return true;\n      }),\n      catchError((error) =\u0026gt; {\n        // if in error, return fall back from Config\n        this.Config = Config;\n        return of(false);\n      })\n    );\n  }\n}\u003c/code\u003e\u003c/pre\u003e\u003ch3 id=\"the-curious-case-of-router-initialization\"\u003eThe curious case of Router Initialization\u003c/h3\u003e\u003cp\u003eThe Router Module uses \u003ccode\u003eAPP_INITIALIZER\u003c/code\u003e as \u003ca href=\"https://github.com/angular/angular/blob/master/packages/router/src/router_module.ts#L631\"\u003ereferenced in master branch of Angular 13\u003c/a\u003e, and initialization functions are \u003cstrong\u003erun in parallel\u003c/strong\u003e according to \u003ca href=\"https://github.com/angular/angular/blob/master/packages/core/src/application_init.ts#L138\"\u003esource code\u003c/a\u003e. Without digging deeper into navigation options, it is already \u003cstrong\u003ean open wound\u003c/strong\u003e that needs to be patched. The \u003cstrong\u003esequence of events cannot be guaranteed\u003c/strong\u003e in a module that uses both configuration and Route modules. One is going to happen before the other.\u003c/p\u003e\u003cp\u003eRoute guards and resolves are examples of routing happening sooner than initialization response. The extreme case I reached after multiple trials:\u003c/p\u003e\u003cul\u003e\u003cli\u003eThe external configuration is remote, thus a bit slower than local\u003c/li\u003e\u003cli\u003eRouting option \u003ccode\u003eInitialNavigation\u003c/code\u003e is set to \u003ccode\u003eenabledBlocking\u003c/code\u003e, according to Angular docs, this is required for SSR.\u003c/li\u003e\u003c/ul\u003e\u003cp\u003eA word of caution, leaving the \u003ccode\u003eInitialNavigation\u003c/code\u003e set to its default \u003ccode\u003eenabledNonBlocking\u003c/code\u003e will produce unexpected results in the resolve service. Filtering out unready configuration to avoid \"fallback\" values, the benefit of \"non blocking\" is nullified. Read the code comments as you go along.\u003c/p\u003e\u003cp\u003eLet's create an app routing module and add a router resolve with these extreme conditions.\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"language-ts\"\u003e// the routing module\nconst routes: Routes = [\n  {\n    path: 'project',\n    component: ProjectComponent,\n    resolve: {\n      // add a project resolve\n      ready: ProjectResolve,\n    },\n  },\n // ...\n];\n\n@NgModule({\n  imports: [\n    RouterModule.forRoot(routes, {\n      // enabledBlocking for SSR, but also enabledNonBlocking is not as good as it sounds in this setup\n      initialNavigation: 'enabledBlocking',\n    }),\n  ],\n  exports: [RouterModule],\n})\nexport class AppRoutingModule {}\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eImport the \u003ccode\u003eAppRoutingModule\u003c/code\u003e into root \u003ccode\u003eAppModule\u003c/code\u003e, add a project component, and let's create the project resolver that returns an \u003ccode\u003eObservable\u003c/code\u003e of \u003ccode\u003eBoolean\u003c/code\u003e.\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"language-ts\"\u003e@Injectable({ providedIn: 'root' })\nexport class ProjectResolve implements Resolve\u0026lt;boolean\u0026gt; {\n  // inject the service\n  constructor(private configService: ConfigService) {}\n  resolve(route: ActivatedRouteSnapshot, state: RouterStateSnapshot): Observable\u0026lt;boolean\u0026gt; {\n    // log the value of the configuration here\n    // if this is too soon, the result is undefined\n    console.log('on resolve', this.configService.Config);\n\n    return of(true);\n  }\n}\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eWe can run above code on \u003ca href=\"https://stackblitz.com/edit/token-test\"\u003eStackblitz\u003c/a\u003e and go to route \u003ccode\u003e/project\u003c/code\u003e, Console will log \"\u003cstrong\u003eundefined\u003c/strong\u003e.\" Which means, \u003cstrong\u003ethe initial Route Resolver was faster than fetching config via Http\u003c/strong\u003e. The solution to that, if we see it backwards, should be like this:\u003c/p\u003e\u003cp\u003e“wait till this.configService.Config is ready”\u003c/p\u003e\u003cp\u003eThat translates to \u003cstrong\u003eRxJS observable\u003c/strong\u003e. So let me head to \u003ccode\u003eConfigService\u003c/code\u003e and create an \u003cem\u003eobservable of an internal subject\u003c/em\u003e.\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"language-ts\"\u003e// config service\nexport class ConfigService {\n  constructor(private http: HttpClient) {}\n\n  // keep track of config, initialize with fall back Config\n  private config = new BehaviorSubject\u0026lt;IConfig\u0026gt;(Config as IConfig);\n  config$: Observable\u0026lt;IConfig\u0026gt; = this.config.asObservable();\n\n  private _createConfig(config: any): IConfig {\n    // cast all keys as are\n    const _config = { ...(\u0026lt;IConfig\u0026gt;config) };\n    return _config;\n  }\n\n  loadAppConfig(): Observable\u0026lt;boolean\u0026gt; {\n    return this.http.get(environment.configUrl).pipe(\n      map((response) =\u0026gt; {\n        const config = this._createConfig(response);\n\n        // here next\n        this.config.next(config);\n        return true;\n      }),\n      catchError((error) =\u0026gt; {\n        // if in error, return fall back from Config\n        this.config.next(Config);\n        console.log(error);\n        return of(false);\n      })\n    );\n  }\n}\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eIn the resolve service, watching updates is not good enough, we need to signal end of stream, to return and move on. RxJS \u003ccode\u003etake(1)\u003c/code\u003e is usually recommended, but before we take 1, \u003cstrong\u003ewe need to filter out configuration that is not ready yet\u003c/strong\u003e, otherwise, that \"1\" would be the fallback one. This is why \u003ccode\u003eenabledNonBlocking\u003c/code\u003e is useless in this setup, because the resolve service is blocking anyway.\u003c/p\u003e\u003cp\u003eBelow are three attempts for the resolver, the initial attempt is to \u003ccode\u003etake(1)\u003c/code\u003e, the second attempt is to \u003ccode\u003efilter\u003c/code\u003e before taking, and the last is a combination of both with \u003ccode\u003efirst\u003c/code\u003e RxJS operator.\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"language-ts\"\u003e// in resolver, need to take 1 and return\n// This is the first attempt\n return this.configService.config$.pipe(\n  take(1),\n  map(n =\u0026gt; {\n      if (n.MyKey === 'default') {\n        // the first one will actually be the fallback\n          return false;\n      }\n      return true;\n  }));\n\n// attempt two: filter before you take\nreturn this.configService.config$.pipe(\n  filter(n =\u0026gt; n['somevalue to distinguish remote config'])\n  take(1),\n  map(n =\u0026gt; {\n      if (n.MyKey === 'default') {\n          return false;\n      }\n      // it will be true for sure\n      return true;\n  }));\n\n// last attempt, two in one:\nreturn this.configService.config$.pipe(\n  first(n =\u0026gt; n['somevalue to distinguish remote config']\n  map(n =\u0026gt; {\n      // it will be true for sure\n      return true;\n  }));\u003c/code\u003e\u003c/pre\u003e\u003cp\u003e\u003cstrong\u003eisServed\u003c/strong\u003e is my new configuration property to \"distinguish remote configuration\" from fallback one. It's just a Boolean set to true in remote config.\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"language-json\"\u003e// config json\n{\n  \"isServed\": true,\n  \"API\": {\n    \"apiRoot\": \"\u0026lt;http://localhost:8888/server/app\u0026gt;\"\n  },\n  \"MyKey\": \"MyValue\"\n}\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eAdd it to the \u003ccode\u003eIConfig\u003c/code\u003e model, and to the default \u003ccode\u003eConfig\u003c/code\u003e.\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"language-ts\"\u003e// config model:\nexport interface IConfig {\n  isServed: boolean;\n  API: {\n    apiRoot: string;\n  };\n  MyKey: string;\n}\n\n// the default Config with isServed: false\nexport const Config = {\n  isServed: false,\n  API: {\n    apiRoot: environment.apiRoot,\n  },\n  MyKey: 'default value',\n  ExtraKeys: 'wont harm',\n};\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eThe project resolve service is ready\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"language-ts\"\u003e@Injectable({ providedIn: 'root' })\nexport class ProjectResolve implements Resolve\u0026lt;boolean\u0026gt; {\n\n  constructor(private configService: ConfigService) {}\n\n  resolve(\n    route: ActivatedRouteSnapshot,\n    state: RouterStateSnapshot\n  ): Observable\u0026lt;boolean\u0026gt; {\n\n    // watch it until it's served\n    return this.configService.config$.pipe(\n      first((n) =\u0026gt; n.isServed),\n      map((n) =\u0026gt; true)\n    );\n  }\n}\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eThe observable in the current setup shall produce two values, the first is \u003ccode\u003eisServed\u003c/code\u003e set to false. To read the configuration in a component:\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"language-ts\"\u003e@Component({\n  template: `Project page with resolve\n  \u0026lt;p\u0026gt;\n  {{ config$ | async | json}}\n  \u0026lt;/p\u0026gt;`\n})\nexport class ProjectComponent implements OnInit {\n  config$: Observable\u0026lt;IConfig\u0026gt;;\n\n  constructor(private configService: ConfigService) {\n  }\n\n  ngOnInit(): void {\n       this.config$ = this.configService.config$;\n  }\n}\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eA final touch to garnish, for off the track usage, we add a static getter, that returns the value of the configuration:\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"language-ts\"\u003e// config service\n\n// make a static member\nprivate static _config: IConfig;\n\n// and a static getter with fallback\nstatic get Config(): IConfig {\n  return this._config || Config;\n}\n\nprivate _createConfig(config: any): IConfig {\n  const _config = { ...(\u0026lt;IConfig\u0026gt;config) };\n  // set static member\n  ConfigService._config = _config;\n  return _config;\n}\n\n// ...\n\n// This can be used directly, for example in a template\n// {{ ConfigService.Config.isServed }}\u003c/code\u003e\u003c/pre\u003e\u003ch3 id=\"pitfalls\"\u003ePitfalls\u003c/h3\u003e\u003col\u003e\u003cli\u003eIf the remote configuration does not have all keys expected, they will be overwritten to \"null\". To overcome, extend the configuration, via shallow cloning.\u003c/li\u003e\u003c/ol\u003e\u003cpre\u003e\u003ccode class=\"language-ts\"\u003eprivate _createConfig(config: any): IConfig {\n\t// shallow extension of fallback\n    const _config = {...Config, ...(config) };\n    ConfigService._config = _config;\n    return _config;\n}\u003c/code\u003e\u003c/pre\u003e\u003cp\u003e2. The default \u003cstrong\u003eConfig\u003c/strong\u003e may be mistaken for \u003cstrong\u003eConfigService.Config\u003c/strong\u003e, if ever used, the default fallback value is in place. To fix that, a separation between the general Config, and remote Config fallback may be needed, or a little bit of attention. You can also make it a habit to use ConfigService, or make the default Config a private elemen\u003cstrong\u003et\u003c/strong\u003e. Treat it per project needs.\u003c/p\u003e\u003cp\u003e3. If the config file needed in Route Resolve or Guard fails to be served, we're blocked. Placing the config file on the same server, or a combination of RxJS operators, are possible solutions. A second property that identifies failure in Config is also a solution. We will use this method later.\u003c/p\u003e\u003cp\u003e4. The URL of the config file, cannot be part of the configuration keys!\u003c/p\u003e\u003cp\u003e5. Remember to filter out the URL of your config file in your HTTP interceptor, if you prefix URLs with a value fed by configuration.\u003c/p\u003e\u003ch3 id=\"where-to-place-the-config-file\"\u003eWhere to place the config file\u003c/h3\u003e\u003cp\u003eThe benefit aspired for is to have production-specific configurations for every deployed version, ready to be adjusted for whatever prompt reason. As much as you would like to believe that touching production is taboo, there shall be times when the kitchen is on fire.\u003c/p\u003e\u003cp\u003eThe question is, where to place configuration during development.\u003c/p\u003e\u003col\u003e\u003cli\u003eRemote server. Can be an inhouse local server, or a staging server.\u003c/li\u003e\u003cli\u003eMock server, a nodejs local server that you run before starting Angular.\u003c/li\u003e\u003cli\u003eOn a root folder, e.g. \"configs\", served via \u003ccode\u003eangular.json assets\u003c/code\u003e This will also copy the file into production, and used with the same URL, but if that is not your intention, remove this entry from production assets in \u003ccode\u003eangular.json\u003c/code\u003e.\u003c/li\u003e\u003c/ol\u003e\u003cpre\u003e\u003ccode class=\"language-json\"\u003e// add this to assets in angular.json\n \"assets\": [\n  {\n    \"glob\": \"*.json\",\n    \"input\": \"configs\",\n    \"output\": \"/localdata\"\n  }\n]\n// now, every ./configs/*.json will be accessed as /localdata/*.json\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eWherever you decide to place your configuration, remember to update respective environments.\u003c/p\u003e\u003ch1 id=\"part-ii\"\u003e\u003cstrong\u003ePart II\u003c/strong\u003e\u003c/h1\u003e\u003ch2 id=\"external-configurations-in-angular-universal\"\u003e\u003cstrong\u003eExternal configurations in Angular Universal\u003c/strong\u003e\u003c/h2\u003e\u003cp\u003eLet’s test some setups for SSR, to see what other things we need to fix.\u003c/p\u003e\u003ch3 id=\"external-remote-configuration\"\u003eExternal Remote Configuration\u003c/h3\u003e\u003cp\u003eExpanding on \u003ca href=\"https://stackblitz.com/edit/token-test?file=src%2Fapp%2Fservices%2Fconfig.service.ts\"\u003eStackBlitz Token Test Project\u003c/a\u003e, where the URL of the configuration had to be set to remote HTTP, building locally and testing for server, produced identical results. The \u003ccode\u003eproject resolve\u003c/code\u003e worked as expected. The only issue was: failure of remote URL meant blocking of app. This is one of the pitfalls of having a remote config. One way to fix that, is as follows:\u003c/p\u003e\u003ch3 id=\"slight-fix-to-configuration\"\u003eSlight fix to configuration\u003c/h3\u003e\u003cp\u003eWe want to distinguish \u003ccode\u003eserved\u003c/code\u003e configurations, but we do not want to block the UI in case of failure. The \u003ccode\u003eproject resolve\u003c/code\u003e for example, should decide what to do with error:\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"language-ts\"\u003ereturn this.configService.config$.pipe(\n      first((n) =\u0026gt; n.isServed),\n      map((n) =\u0026gt; {\n        // if served with error, reroute or notify user, but do not block user\n        console.log(n.withError); // let's introduce this property\n        return true;\n      })\n    );\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eIn \u003ccode\u003eConfigService\u003c/code\u003e I will stop making a distinction between success and failure, they both are \u003ccode\u003eserved\u003c/code\u003e. Then by introducing \u003ccode\u003ewithError\u003c/code\u003e property, we will set it to true when failing.\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"language-ts\"\u003e// after defining withError property in IConfig...\nprivate _createConfig(config: any, withError: boolean): void {\n    // cast all keys as are\n    const _config = { ...Config, ...(\u0026lt;IConfig\u0026gt;config) };\n\n    // is served, always\n    _config.isServed = true;\n\n    // with error\n    _config.withError = withError;\n\n    // set static member\n    ConfigService._config = _config;\n\n    // next, always next the subject\n    this.config.next(config);\n  }\n\n  loadAppConfig(): Observable\u0026lt;boolean\u0026gt; {\n    return this.http.get(environment.configUrl).pipe(\n      map((response) =\u0026gt; {\n        // create with no errors\n        this._createConfig(response, false);\n        return true;\n      }),\n      catchError((error) =\u0026gt; {\n        // if in error, return fall back from environment\n        // and create with errors\n        this._createConfig(Config, true);\n        return of(false);\n      })\n    );\n  }\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eThis works as expected, however, if the HTTP request fails on server, Angular will attempt to reconnect after rehydration, on client.\u003c/p\u003e\u003ch3 id=\"external-local-configuration\"\u003eExternal Local Configuration\u003c/h3\u003e\u003cp\u003eMoving the files to \u003ccode\u003elocaldata\u003c/code\u003e folder using \u003ccode\u003eangular.json\u003c/code\u003e assets:\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"language-json\"\u003e\"assets\": [\n  {\n    \"glob\": \"*.json\",\n    \"input\": \"configs\",\n    \"output\": \"/localdata\"\n  }\n]\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eThe config URL now looks like this \u003ccode\u003elocaldata/config.json\u003c/code\u003e. It is relative.\u003c/p\u003e\u003cp\u003eAccording to \u003ca href=\"https://angular.io/guide/universal#using-absolute-urls-for-http-data-requests-on-the-server\"\u003eAngular Docs\u003c/a\u003e:\u003c/p\u003e\u003cblockquote\u003e“If you are using one of the \u003ccode\u003e@nguniversal/*-engine\u003c/code\u003e packages (such as \u003ccode\u003e@nguniversal/express-engine\u003c/code\u003e), this is taken care of for you automatically. You don't need to do anything to make relative URLs work on the server.”\u003c/blockquote\u003e\u003cp\u003eWell, I get:\u003c/p\u003e\u003cp\u003e\u003ccode\u003eGET localdata/config.prod.json NetworkError\u003c/code\u003e\u003c/p\u003e\u003cp\u003eI guess what they mean is that, if you go their way of rendering, you are covered. That is, if you use this:\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"language-js\"\u003eserver.get('*', (req, res) =\u0026gt; {\n  res.render(indexHtml, { \n      req, \n      providers: [{ provide: APP_BASE_HREF, useValue: req.baseUrl }] \n  });\n});\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eBut I don't. And I will tell you why, and how. Then I will go through the solution for the relative URLs.\u003c/p\u003e\u003ch2 id=\"isolating-the-server\"\u003e\u003cstrong\u003eIsolating the server\u003c/strong\u003e\u003c/h2\u003e\u003cp\u003eIf we follow the documentation \u003ca href=\"https://angular.io/guide/universal\"\u003eServer-side rendering (SSR) with Angular Universal\u003c/a\u003e it walks you through building the server in \u003ccode\u003esrc\u003c/code\u003e folder, and generating the server in a build process. I find that too obtrusive. Coming from old school, I cannot sleep well while my server is in my development source code. If something on the server goes wrong, I have to build and test? Every time? Not cool.\u003c/p\u003e\u003cp\u003eOne good scenario, is \u003cstrong\u003eserving a multilingual Angular app, using the same build\u003c/strong\u003e.\u003c/p\u003e\u003cp\u003eLet's first reduce the size of the \u003ccode\u003eserver.ts\u003c/code\u003e suggested by Angular Docs, to have only the \u003ccode\u003engExpressEngine\u003c/code\u003e, export it, and create a separate express app.\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"language-ts\"\u003e// server.ts\n// export the ngExpressEngine\nexport const AppEngine = ngExpressEngine({\n  bootstrap: AppServerModule\n});\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eBuilding the ssr uses the following \u003ccode\u003eangular.json\u003c/code\u003e settings\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"language-json\"\u003e// ... angular.json\n\"architect\": {\n     // ...\n    \"server\": {\n        \"builder\": \"@angular-devkit/build-angular:server\",\n        \"options\": {\n            // choose the output path where the main.js will end up\n            \"outputPath\": \"./host/server\",\n            \"main\": \"server.ts\",\n            \"tsConfig\": \"tsconfig.server.json\"\n        },\n        \"configurations\": {\n            \"production\": {\n                // don't delete because there will be other files\n                \"deleteOutputPath\": false\n                // ...\n            }\n        }\n    }\n}\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eThe \u003ccode\u003emain.js\u003c/code\u003e generated will end up in \u003ccode\u003eoutputPath\u003c/code\u003e, let's create a server there, and use the exported \u003ccode\u003eAppEngine\u003c/code\u003e.\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"language-js\"\u003e// host/server.js\nconst express = require('express');\n\n// express app\nconst app = express();\n\n// setup express\nrequire('./server/express')(app);\n\n// setup routes\nrequire('./server/routes')(app);\n\n// other stuff is up to you\n\n// listen\nconst port = process.env.PORT || 1212;\napp.listen(port, function (err) {\n  console.log('started to listen to port: ' + port);\n  if (err) {\n      console.log(err);\n      return;\n  }\n});\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eThe express module is basic, you can have a look at it on \u003ca href=\"https://stackblitz.com/edit/angular-express-server?file=host/server/express.js\"\u003eStackBlitz\u003c/a\u003e. The \u003ccode\u003eroutes.js\u003c/code\u003e is where the cooking happens:\u003c/p\u003e\u003cp\u003e\u003cem\u003eNote: I cannot test on StackBlitz, you may want to use \u003ccode\u003e__dirname\u003c/code\u003e to get accurate paths\u003c/em\u003e\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"language-js\"\u003econst express = require('express');\n\n// ngExpressEngine from compiled main.js\nconst ssr = require('./main');\n\n// setup the routes\nmodule.exports = function (app) {\n  // set engine, we called it AppEngine in server.ts\n  app.engine('html', ssr.AppEngine);\n\n  // set view engine\n  app.set('view engine', 'html');\n\n  // set views directory, the clientside build output\n  app.set('views', '../client');\n\n  // expose the configs path as localdata (or whatever you choose to name it)\n  app.use('/localdata', express.static('../localdata', { fallthrough: false }));\n\n  // expose client folder \n  app.use(express.static('../client'));\n\n  // now THIS\n  app.get('/*', (req, res) =\u0026gt; {\n    // point to your index.html\n    res.render(`../client/index.html`, {\n      req, // pass request\n      res, // pass response\n      // here, we can provide things for ssr\n    });\n  });\n};\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eIn \u003ccode\u003eres.render\u003c/code\u003e, I passed back \u003ccode\u003eresponse\u003c/code\u003e and \u003ccode\u003erequest\u003c/code\u003e just in case I want to use them in Angular. (It's rare, but it happens). So that's the why, and how.\u003c/p\u003e\u003ch3 id=\"provide-absolute-urls-for-local-requests\"\u003eProvide absolute URLs for local requests\u003c/h3\u003e\u003cp\u003eA local request is like our \u003ccode\u003elocaldata/config.prod.json\u003c/code\u003e. To fix it, it must be prepended by the server URL. Our final result in \u003ccode\u003eConfigService\u003c/code\u003e should look like this:\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"language-ts\"\u003e loadAppConfig(): Observable\u0026lt;boolean\u0026gt; {\n    // fix url first if its on server\n    let url = environment.configUrl;\n    if (serverUrlExsits) {\n      url = serverUrl + url;\n    }\n    return this.http.get(url).pipe(\n     // ... etc\n    );\n  }\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eThe URL on the server is constructed using the \u003ccode\u003eREQUEST\u003c/code\u003e injection token, as \u003ca href=\"https://www.npmjs.com/package/@nguniversal/express-engine\"\u003edocumented on NPM packages\u003c/a\u003e.\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"language-ts\"\u003e// change ConfigService\n// for this line to work, install @types/express\nimport { Request } from 'express';\nimport { REQUEST } from '@nguniversal/express-engine/tokens';\n\n@Injectable()\nexport class ConfigService {\n  // make it Optional to work on browser platform as well\n  constructor(@Optional() @Inject(REQUEST) private request: Request) {}\n\n loadAppConfig(): Observable\u0026lt;boolean\u0026gt; {\n    // fix url first if its on server\n    let url= environment.configUrl;\n    if (this.request) {\n      // on ssr get a full url of current server\n      url = `${this.request.protocol}://${this.request.get('host')}/${url}`;\n    }\n // ... etc\n  }\n}\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eSince we already provided \u003ccode\u003ereq\u003c/code\u003e in the \u003ccode\u003eres.render\u003c/code\u003e call, this is sufficient. \u003cstrong\u003eBut it looks ugly.\u003c/strong\u003e We can create an HTTP interceptor for \u003ccode\u003elocaldata\u003c/code\u003e to make use of any other \u003ccode\u003elocaldata\u003c/code\u003e. But first:\u003c/p\u003e\u003ch3 id=\"the-curious-case-of-reverse-proxy\"\u003eThe curious case of reverse proxy\u003c/h3\u003e\u003cp\u003eWithout digressing beyond the scope of this article, reverse proxy and load balancing on production servers usually proxy \u003ccode\u003ehttps\u003c/code\u003e into \u003ccode\u003ehttp\u003c/code\u003e, and \u003ccode\u003ereal.host.com\u003c/code\u003e into \u003ccode\u003elocalhost\u003c/code\u003e. The latter, we fixed by using \u003ccode\u003ereq.get('host')\u003c/code\u003e which accesses the \u003ccode\u003eheader\u003c/code\u003e. And to fix the protocol, we access another header value: \u003ccode\u003ex-forwarded-proto\u003c/code\u003e.\u003c/p\u003e\u003cp\u003eHere is an azure website example I set up, notice how the values in the header, are different than plain ones, because of cloud hosting setup:\u003c/p\u003e\u003cp\u003e\u003ca href=\"https://aumet.azurewebsites.net/webinfo\"\u003eaumet.azurewebsites.net/webinfo\u003c/a\u003e\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"language-json\"\u003e{\n    \"request\": {\n        \"headers\": {\n            \"host\": \"aumet.azurewebsites.net\",\n            \"disguised-host\": \"aumet.azurewebsites.net\",\n            \"x-original-url\": \"/webinfo\",\n            \"x-forwarded-for\": \"client-ip-address-here\",\n            \"x-forwarded-proto\": \"https\"\n        },\n       // on other servers this could be localhost\n        \"hostname\": \"aumet.azurewebsites.net\",\n        \"path\": \"/webinfo\",\n        // don't read this value\n        \"protocol\": \"http\",\n   }\n}\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eBut before I add that to my Angular App, back to being obsessive about \u003cstrong\u003eseparation of concerns\u003c/strong\u003e, this is \u003cem\u003enot\u003c/em\u003e an Angular issue, thus it shall not belong to the app. I would rather set up the right URL, and provide it. Like this:\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"language-js\"\u003e// in host/server/routes.js\n// change the final get\n  app.get('/*', (req, res) =\u0026gt; {\n\n    // fix and provide actual url\n    let proto = req.protocol;\n    if (req.headers \u0026amp;\u0026amp; req.headers['x-forwarded-proto']) {\n        // use this instead\n        proto = req.headers['x-forwarded-proto'].toString();\n    }\n    // also, always use req.get('host')\n    const url= `${proto}://${req.get('host')}`;\n\n    res.render(`../client/index.html`, {\n      req,\n      res,\n      // here, provide it\n      providers: [\n        {\n          provide: 'serverUrl',\n          useValue: url,\n        },\n      ],\n    });\n  });\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eBack to our Angular App, let's create a proper HTTP interceptor, to intercept \u003ccode\u003elocaldata\u003c/code\u003e calls:\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"language-ts\"\u003e// Angular interceptor\n@Injectable()\nexport class LocalInterceptor implements HttpInterceptor {\n  constructor(\n    // inject our serverUrl\n    @Optional() @Inject('serverUrl') private serverUrl: string\n  ) {}\n  intercept(req: HttpRequest\u0026lt;any\u0026gt;,next: HttpHandler): Observable\u0026lt;HttpEvent\u0026lt;any\u0026gt;\u0026gt; {\n    // if request does not have 'localdata' ignore\n    if (req.url.indexOf('localdata') \u0026lt; 0) {\n      return next.handle(req);\n    }\n\n    let url= req.url;\n    if (this.serverUrl) {\n      // use the serverUrl if it exists\n      url= `${this.serverUrl}/${req.url}`;\n    }\n\n    const adjustedReq = req.clone({ url: url});\n    return next.handle(adjustedReq);\n  }\n}\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eProvide the \u003ccode\u003eHttpInterceptor\u003c/code\u003e in \u003ccode\u003eAppModule\u003c/code\u003e\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"language-ts\"\u003e// app.module.ts\nproviders: [\n    {\n      provide: APP_INITIALIZER,\n      useFactory: configFactory,\n      multi: true,\n      deps: [ConfigService],\n    },\n    // provide http interceptor here\n    {\n      provide: HTTP_INTERCEPTORS,\n      useClass: LocalInterceptor,\n      multi: true,\n    },\n  ],\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eAnd clean up \u003ccode\u003eConfigService\u003c/code\u003e from any reference to our server. Building, testing, works.\u003c/p\u003e\u003cp\u003eWe can change the server \u003ccode\u003econfig.prod.json\u003c/code\u003e \u003cstrong\u003ewithout restarting the server, nor worry about polluting other environments\u003c/strong\u003e, and servers. \u003cem\u003eNow I can sleep better\u003c/em\u003e.\u003c/p\u003e\u003ch3 id=\"providing-the-config-on-server\"\u003eProviding the config on server\u003c/h3\u003e\u003cp\u003eNow that we have a separate server, and the configuration file is not remote, why not provide the config and inject it in the \u003ccode\u003eConfigService\u003c/code\u003e?\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"language-js\"\u003e// host/server/routes.js\n// require the json file sitting in localdata\nconst localConfig = require('../localdata/config.prod.json');\n\n// setup the routes\nmodule.exports = function (app) {\n   // ...\n   res.render(`../client/index.html`, {\n      req,\n      res,\n      // also provide the localConfig\n      providers: [\n        {\n          provide: 'localConfig',\n          useValue: localConfig\n        }\n        // though don't lose the serverUrl, it's quite handy\n      ]\n    });\n  });\n};\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eIn \u003ccode\u003eConfigService\u003c/code\u003e\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"language-ts\"\u003econstructor(\n    private http: HttpClient,\n    // optional injector for localConfig\n    @Optional() @Inject('localConfig') private localConfig: IConfig\n  ) {}\n\n    loadAppConfig(): Observable\u0026lt;boolean\u0026gt; {\n    // if on server, grab config without HTTP call\n    if (this.localConfig) {\n      this._createConfig(this.localConfig, true);\n      return of(true);\n    }\n\n    return this.http.get(environment.configUrl).pipe(\n     // ...\n    );\n  }\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eThis is the fastest and least error prone method for the server to get configuration. But it might be an overkill for some. \u003cstrong\u003eMay the force be with you\u003c/strong\u003e.\u003c/p\u003e\u003ch1 id=\"part-iii\"\u003e\u003cstrong\u003ePart III\u003c/strong\u003e\u003c/h1\u003e\u003cp\u003ePreviously we made use of the APP_INITLIZER token to \u003ca href=\"https://elmota.com/loading-external-configurations-via-http-using-appinitializer\"\u003eload external configurations via HTTP\u003c/a\u003e. Today I am going to bring the configuration closer, ditching the HTTP request. But \u003cstrong\u003ehow do we inject json into HTML\u003c/strong\u003e, in an Angular application?\u003c/p\u003e\u003cp\u003eThe implementation needs to meet two targets:\u003c/p\u003e\u003cul\u003e\u003cli\u003eThe configuration cannot be included in the compiled source, thus it \u003cstrong\u003ecannot be imported\u003c/strong\u003e directly, or indirectly in typescript. \u003cbr\u003eThis rules out the local import: \u003cbr\u003e\u003ccode\u003eimport * as WebConfig from '/localdata/config.json';\u003c/code\u003e\u003cbr\u003eOr the module script \u003cbr\u003e\u003ccode\u003e\u0026lt;script type=\"module\" src=\"/localdata/config.js\"\u0026gt;\u003c/code\u003e\u003cbr\u003eOr dynamic module loading\u003c/li\u003e\u003c/ul\u003e\u003cpre\u003e\u003ccode class=\"language-js\"\u003eimport('./localdata/config.js')\n.then((config) =\u0026gt; {\n  // do something with config\n});\u003c/code\u003e\u003c/pre\u003e\u003cul\u003e\u003cli\u003eWe want to maintain typing, so \u003ccode\u003eConfig\u003c/code\u003e cannot be used before it is casted.\u003c/li\u003e\u003c/ul\u003e\u003cp\u003eSince JSON cannot be injected in HTML due to security precautions, let me create the configuration script:\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"language-ts\"\u003e// configs/config.js file, named it \"WebConfig\" to avoid confusion\nconst WebConfig = {\n  isServed: true,\n  API: {\n    apiRoot: 'url/server/app',\n  },\n  MyKey: 'MyValue',\n};\u003c/code\u003e\u003c/pre\u003e\u003ch2 id=\"injecting-a-script\"\u003e\u003cstrong\u003eInjecting a script\u003c/strong\u003e\u003c/h2\u003e\u003cp\u003eThe only location to import a JavaScript config without including it in the build, is \u003cstrong\u003edirectly in HTML header\u003c/strong\u003e. It's the only place that does not get checked at design time, and throws a silent 404 at runtime.\u003c/p\u003e\u003cp\u003eThis is how it's done.\u003c/p\u003e\u003cp\u003e\u003ccode\u003e\u0026lt;script src=\"localdata/config.js\"\u0026gt;\u0026lt;/script\u0026gt;\u003c/code\u003e\u003c/p\u003e\u003cp\u003eTo make this path work, an adjustment in angular.json assets is needed:\u003c/p\u003e\u003cp\u003e\u003cem\u003eI make it a habit to name output differently just to remember that the rule exists.\u003c/em\u003e\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"language-json\"\u003e{ //... angular.json\n\"assets\": [\n  {\n    \"glob\": \"*\",\n    \"input\": \"configs\",\n    \"output\": \"/localdata\"\n  }\n\u003c/code\u003e\u003c/pre\u003e\u003ch2 id=\"implementing-appinitializer\"\u003e\u003cstrong\u003eImplementing APP_INITIALIZER\u003c/strong\u003e\u003c/h2\u003e\u003cp\u003eLet's build an \u003ccode\u003eAPP_INITIALIZER\u003c/code\u003e with minimum response: \u003ccode\u003evoid\u003c/code\u003e. Here is the \u003ccode\u003eConfigService\u003c/code\u003e\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"language-ts\"\u003e// declare WebConfig\ndeclare const WebConfig: any;\n\nexport const configFactory = (config: ConfigService): (() =\u0026gt; void) =\u0026gt; {\n    return () =\u0026gt; config.loadAppConfig();\n};\n\n@Injectable({\n  providedIn: 'root',\n})\nexport class ConfigService {\n  constructor() {}\n\n // set a static member for easier handling\n private static _config: IConfig;\n\n static get Config(): IConfig {\n    return this._config || Config;\n  }\n\n  private _createConfig(config: any): IConfig {\n    // cast all keys as are, extend local Config\n    const _config = { ...Config, ...(\u0026lt;IConfig\u0026gt;config) };\n    // set static member\n    ConfigService._config = _config;\n    return _config;\n  }\n\n  loadAppConfig(): void {\n    // here is the JavaScript variable... is it ready?\n    if (WebConfig?.isServed) {\n      this._createConfig(WebConfig);\n    } else {\n      // not loaded? fall back\n      console.log('error');\n      this._createConfig(Config);\n    }\n  }\n}\u003c/code\u003e\u003c/pre\u003e\u003ch3 id=\"issues\"\u003eIssues:\u003c/h3\u003e\u003cp\u003eFirst issue to fix is the type of \u003ccode\u003eWebConfig\u003c/code\u003e, declare a const in the same service file:\u003c/p\u003e\u003cp\u003e\u003ccode\u003edeclare const WebConfig: any;\u003c/code\u003e\u003c/p\u003e\u003cp\u003eThe other issue is the extreme case of slow configuration. If the script has a \u003ccode\u003edefer\u003c/code\u003e property it should not be blocking, and if it is from \u003ccode\u003elocaldata\u003c/code\u003e served from the same server, it should be fast enough. On \u003ca href=\"https://stackblitz.com/edit/local-config\"\u003eStackBlitz\u003c/a\u003e however, it is too slow. I am not going down that track though, because if we had to take care of \"waiting for remote config to load locally\", then we are better off with the HTTP method.\u003c/p\u003e\u003cp\u003e\u003cstrong\u003eTo tighten the loose ends though, the extreme case is produced locally with the following conditions:\u003c/strong\u003e\u003c/p\u003e\u003cul\u003e\u003cli\u003eLoad the config from a remote server\u003c/li\u003e\u003cli\u003eadd \u003ccode\u003easync\u003c/code\u003e attribute\u003c/li\u003e\u003cli\u003eand probably, place the script before end of body\u003c/li\u003e\u003c/ul\u003e\u003cp\u003e\u003ccode\u003e\u0026lt;script src=\"https://saphire.sekrab.com/localdata/config.js\" async\u0026gt;\u0026lt;/script\u0026gt;\u003c/code\u003e\u003c/p\u003e\u003cp\u003eRunning... The \u003ccode\u003eWebConfig\u003c/code\u003e has no value initially, so it throws an \"undefined\" error. To fix that, a patch in \u003ccode\u003eindex.html\u003c/code\u003e or in any JavaScript added to code.\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"language-html\"\u003e\u0026lt;script\u0026gt;\n  window.WebConfig = {\n    isServed: false\n  };\n\u0026lt;/script\u0026gt;\u003c/code\u003e\u003c/pre\u003e\u003ch2 id=\"implementing-platforminitializer\"\u003e\u003cstrong\u003eImplementing PLATFORM_INITIALIZER\u003c/strong\u003e\u003c/h2\u003e\u003cp\u003eSince the return of the token is not important, we might be able to load it earlier, in Platform Initializer. Though you must be careful, use \u003ccode\u003edefer\u003c/code\u003e and stay local. (PS. cannot use this method on StackBlitz.)\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"language-ts\"\u003eexport const platformFactory = (): (() =\u0026gt; void)  =\u0026gt; {\n    ConfigService.loadAppConfig(); // static element\n    return () =\u0026gt; null;\n};\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eIn \u003ccode\u003emain.ts\u003c/code\u003e\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"language-ts\"\u003eplatformBrowserDynamic([\n    {\n          provide: PLATFORM_INITIALIZER,\n          useFactory: platformFactory,\n          multi: true,\n     }\n ]).bootstrapModule(AppBrowserModule)\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eThis token does not use dependencies, so the \u003ccode\u003eConfigService\u003c/code\u003e ends up being a group of static elements, so no need to provide it anywhere. Let me rewrite and test.\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"language-ts\"\u003e// notice it no longer needs to be injected\nexport class ConfigService {\n  private static _config: IConfig;\n\n  static get Config(): IConfig {\n    return this._config || Config;\n  }\n\n  private static _createConfig(config: any): IConfig {\n    // cast all keys as are\n    const _config = { ...Config, ...(\u0026lt;IConfig\u0026gt;config) };\n    // set static member\n    ConfigService._config = _config;\n    return _config;\n  }\n\n  static loadAppConfig(): void {\n    if (WebConfig?.isServed) {\n      this._createConfig(WebConfig);\n    } else {\n     // error\n     this._createConfig(Config);\n    }\n  }\n}\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eLet us also make it local:\u003c/p\u003e\u003cp\u003e\u003ccode\u003e\u0026lt;script src=\"localdata/config.js\" defer\u0026gt;\u0026lt;/script\u0026gt;\u003c/code\u003e\u003c/p\u003e\u003cp\u003eUsing it is as simple as referencing the static element anywhere.\u003c/p\u003e\u003cp\u003e\u003ccode\u003eConfigService.Config.isServed\u003c/code\u003e\u003c/p\u003e\u003cp\u003eThe router resolve also withstood the test, since \u003ccode\u003edefer\u003c/code\u003e attribute loads the JavaScript after parsing, but before \u003ccode\u003eDOMContentLoaded\u003c/code\u003e. On browser platform, it all works. Now on to server platform.\u003c/p\u003e\u003ch3 id=\"server-platform\"\u003eServer Platform\u003c/h3\u003e\u003cp\u003eIf we use \u003ccode\u003eAPP_INITIALIZER\u003c/code\u003e (with static methods), the token is still provided in \u003ccode\u003eAppModule\u003c/code\u003e, which is shared for both platforms. If we use \u003ccode\u003ePLATFORM_INITIALIZER\u003c/code\u003e, it has been injected in \u003ccode\u003eplatformBrowserDynamic\u003c/code\u003e which only runs browser platform. For SSR, it needs to be injected in server platform.\u003c/p\u003e\u003cp\u003eIn \u003ccode\u003eserver.ts\u003c/code\u003e, bootstrapping \u003ccode\u003eAppServerModule\u003c/code\u003e occurs as an option for \u003ca href=\"https://github.com/angular/universal/tree/master/modules/express-engine\"\u003engExpressEngine\u003c/a\u003e, which takes another option: \u003ccode\u003eproviders array\u003c/code\u003e, and that is where the token is provided:\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"language-ts\"\u003e// in server.ts, or where you create the ngExpressEngine\nexport const AppEngine = ngExpressEngine({\n    bootstrap: AppServerModule,\n    // pass provider here\n    providers:[\n        {\n            provide: PLATFORM_INITIALIZER,\n            useFactory: platformFactory,\n            multi: true,\n        }\n    ]\n});\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eThat is not enough. Now the \u003ccode\u003eWebConfig\u003c/code\u003e on the server side is \u003cstrong\u003eundefined\u003c/strong\u003e.\u003c/p\u003e\u003cp\u003eIn the server output folder \u003cem\u003eafter build\u003c/em\u003e, \u003ca href=\"https://stackblitz.com/edit/local-config?file=host%2Fserver.js\"\u003ewhere the express app is defined\u003c/a\u003e, the \u003ccode\u003eWebConfig\u003c/code\u003e variable must be set in global context. In \u003ccode\u003eNodeJs\u003c/code\u003e (are we not all using it?) it is as simple as \u003ccode\u003eglobal.WebConfig\u003c/code\u003e\u003c/p\u003e\u003cp\u003e\u003ccode\u003eglobal.WebConfig = require('./localdata/config.js');\u003c/code\u003e\u003c/p\u003e\u003cp\u003eThe \u003ccode\u003elocaldata\u003c/code\u003e in this case is a server folder, that contains the server config.js file.\u003c/p\u003e\u003cp\u003eBut wait the config.js file must have an exports statement for that line to work. Also, it cannot have the \u003ccode\u003eexports\u003c/code\u003e statement to run in browser after hydration!\u003c/p\u003e\u003cp\u003eSolution? check for a property that is null on one platform, and not null on the other. The easiest property is \u003ccode\u003ewindow\u003c/code\u003e. (You can create one, but it takes 5 times more lines of code to cater for it).\u003c/p\u003e\u003cp\u003eFirst, in your express server file, set \u003ccode\u003eglobal.window = undefined\u003c/code\u003e.\u003c/p\u003e\u003cp\u003eThen, in the host config file \u003ccode\u003eserver/localdata/config.js\u003c/code\u003e:\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"language-js\"\u003e// in config.js add the following lines\nif (!window) {\n    module.exports = WebConfig;\n}\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eThere. Now the config file shall work on both browser and server platforms.\u003c/p\u003e\u003ch2 id=\"challenges\"\u003e\u003cstrong\u003eChallenges\u003c/strong\u003e\u003c/h2\u003e\u003cul\u003e\u003cli\u003e\u003cstrong\u003eIt must be in HTML\u003c/strong\u003e, thus, if you choose to differentiate \u003ccode\u003econfig.js\u003c/code\u003e from \u003ccode\u003econfig.prod.js\u003c/code\u003e you will end up with \u003ccode\u003eindex.dev.html\u003c/code\u003e and \u003ccode\u003eindex.html\u003c/code\u003e for production.\u003c/li\u003e\u003cli\u003e\u003cstrong\u003eIt cannot be a json file\u003c/strong\u003e, but a JS with a const.\u003c/li\u003e\u003cli\u003e\u003cstrong\u003eIt must be local\u003c/strong\u003e, remote is too slow and does not work on server platform.\u003c/li\u003e\u003cli\u003e\u003cstrong\u003eTo serve SSR, you need the extra baggage\u003c/strong\u003e\u003cbr\u003e\u003c/li\u003e\u003c/ul\u003e\u003cp\u003eThank you for reading this far, let me know in the comments below if we stepped on a rotten tomato.\u003c/p\u003e","comment_id":"62877d6aa0d748ad0c8b8671","feature_image":"https://images.indepth.dev/images/2022/05/External-Configurations-in-Angular-2.jpg","featured":false,"visibility":"public","created_at":"2022-05-20T14:37:14.000+03:00","updated_at":"2022-06-03T16:56:59.000+03:00","published_at":"2022-06-03T16:56:59.000+03:00","custom_excerpt":"In this article, we will learn about external configurations in Angular.","codeinjection_head":null,"codeinjection_foot":null,"custom_template":null,"canonical_url":null,"email_recipient_filter":"none","authors":[{"id":"62877d2fa0d748ad0c8b866e","name":"Amal Ayyash","slug":"ayyash","profile_image":null,"cover_image":null,"bio":"Been in web development business for 20 years, long enough to be lost in titles","website":"https://garage.sekrab.com","location":null,"facebook":null,"twitter":"@SekrabBin","meta_title":null,"meta_description":null,"url":"https://admin.indepth.dev/author/ayyash/"}],"tags":[{"id":"5d403979679ce6202b744976","name":"angular","slug":"angular","description":"Questions about Angular (not to be confused with AngularJS), the web framework from Google. Use this tag for Angular questions which are not specific to an individual version. For the older AngularJS (1.x) web framework, use the angularjs tag.","feature_image":null,"visibility":"public","meta_title":null,"meta_description":null,"og_image":null,"og_title":null,"og_description":null,"twitter_image":null,"twitter_title":null,"twitter_description":null,"codeinjection_head":null,"codeinjection_foot":null,"canonical_url":null,"accent_color":null,"url":"https://admin.indepth.dev/tag/angular/"},{"id":"5e58bac6be143e7df0e2c850","name":"configuration","slug":"configuration","description":null,"feature_image":null,"visibility":"public","meta_title":null,"meta_description":null,"og_image":null,"og_title":null,"og_description":null,"twitter_image":null,"twitter_title":null,"twitter_description":null,"codeinjection_head":null,"codeinjection_foot":null,"canonical_url":null,"accent_color":null,"url":"https://admin.indepth.dev/tag/configuration/"}],"primary_author":{"id":"62877d2fa0d748ad0c8b866e","name":"Amal Ayyash","slug":"ayyash","profile_image":null,"cover_image":null,"bio":"Been in web development business for 20 years, long enough to be lost in titles","website":"https://garage.sekrab.com","location":null,"facebook":null,"twitter":"@SekrabBin","meta_title":null,"meta_description":null,"url":"https://admin.indepth.dev/author/ayyash/","_id":1147},"primary_tag":{"id":"5d403979679ce6202b744976","name":"angular","slug":"angular","description":"Questions about Angular (not to be confused with AngularJS), the web framework from Google. Use this tag for Angular questions which are not specific to an individual version. For the older AngularJS (1.x) web framework, use the angularjs tag.","feature_image":null,"visibility":"public","meta_title":null,"meta_description":null,"og_image":null,"og_title":null,"og_description":null,"twitter_image":null,"twitter_title":null,"twitter_description":null,"codeinjection_head":null,"codeinjection_foot":null,"canonical_url":null,"accent_color":null,"url":"https://admin.indepth.dev/tag/angular/"},"url":"https://admin.indepth.dev/external-configurations-in-angular/","excerpt":"In this article, we will learn about external configurations in Angular.","reading_time":18,"access":true,"send_email_when_published":false,"og_image":null,"og_title":null,"og_description":null,"twitter_image":"https://images.indepth.dev/images/2022/05/External-Configurations-in-Angular2-1.jpg","twitter_title":null,"twitter_description":null,"meta_title":null,"meta_description":null,"email_subject":null,"frontmatter":null,"_id":1502},{"id":"6266bec4a0d748ad0c8b860b","uuid":"8738f83d-7d19-495d-86d4-7bc8a1479fb3","title":"Exploring how virtual DOM is implemented in React","slug":"exploring-how-virtual-dom-is-implemented-in-react","html":"\u003ch2 id=\"introduction\"\u003eIntroduction\u003c/h2\u003e\u003cp\u003eIt is almost inevitable to stumble across the term \u003cem\u003evirtual DOM\u003c/em\u003e in your React learning journey(which I doubt it will ever end). This article aims to clarify how the \u003cem\u003evirtual DOM\u003c/em\u003e is actually implemented in React and set the stage for future writings that will expand on different \u003cem\u003evirtual DOM\u003c/em\u003e features and behaviours, such as: deleting elements, updating state and props, working with lists and more.\u003c/p\u003e\u003cp\u003eBefore we get the ball rolling, I’d kindly suggest to ponder this question a bit: \u003cem\u003eHow do you think the virtual DOM is implemented in React?\u003c/em\u003e You might have already read a pile of materials that cover this topic, therefore thinking about the actual implementation based on the knowledge acquired so far might help you get the most out of this article.\u003c/p\u003e\u003cp\u003eSome prerequisites would be some familiarity with React and a decent understanding of JavaScript. Let’s get started!\u003c/p\u003e\u003chr\u003e\u003ch2 id=\"about-the-virtual-dom\"\u003eAbout the virtual DOM\u003c/h2\u003e\u003cp\u003eAs we know, the DOM is a tree-like structure that is used to represent a web page. It provides an interface through which developers can perform certain operations on that page, such as fetching information and altering the content/structure. However, operating \u003cstrong\u003edirectly\u003c/strong\u003e on the DOM is something that shouldn’t be done more often than actually required because it is a \u003cstrong\u003eslow process\u003c/strong\u003e. Even \u003ca href=\"https://gist.github.com/paulirish/5d52fb081b3570c81e3a\"\u003eaccessing some element’s properties\u003c/a\u003e, such as \u003ccode\u003eoffsetHeight\u003c/code\u003e, would result in a browser reflow, which is \u003cstrong\u003ecan be computationally expensive\u003c/strong\u003e.\u003c/p\u003e\u003cp\u003eSo, operations on the DOM should be done when needed and efficiently. \u003cstrong\u003eThis is where the \u003cem\u003evirtual DOM\u003c/em\u003e comes into play.\u003c/strong\u003e The \u003cem\u003evirtual DOM\u003c/em\u003e is also tree-like structure, kept in memory, that stores the elements of a page, but it comes with the benefit that performing any work on is cheaper and faster, compared to its counterpart. It is the \u003cem\u003evirtual DOM\u003c/em\u003e that takes on the responsibility of determining what has changed in terms of content/structure and then all the modifications are committed on the \u003cstrong\u003eactual DOM\u003c/strong\u003e at once.\u003c/p\u003e\u003cp\u003eAt its core, the \u003cem\u003evirtual DOM\u003c/em\u003e is just a \u003cstrong\u003etree of so-called \u003ccode\u003eFiberNode\u003c/code\u003es\u003c/strong\u003e(we will refer to it as \u003ccode\u003eFiberTree\u003c/code\u003e). As we will see, these nodes are just \u003cstrong\u003eJavaScript objects\u003c/strong\u003e with some properties that are very cleverly leveraged.\u003c/p\u003e\u003cp\u003eIn the next section, as another small introductory step, we will see what a \u003ccode\u003eFiberNode\u003c/code\u003e is about.\u003c/p\u003e\u003chr\u003e\u003ch2 id=\"becoming-familiar-with-what-a-fibernode-is\"\u003eBecoming familiar with what a FiberNode is\u003c/h2\u003e\u003cp\u003eSince the \u003ccode\u003eFiberTree\u003c/code\u003e is built from the compiled JSX, we could say that there is a \u003ccode\u003eFiberNode\u003c/code\u003e for each \u003ca href=\"https://reactjs.org/blog/2015/12/18/react-components-elements-and-instances.html#elements-describe-the-tree\"\u003eReact element\u003c/a\u003e. Although this is not always true(e.g. certain elements can lead to more \u003ccode\u003eFiberNodes\u003c/code\u003e being created), we will stick to this principle for now because it won’t impede our understanding process.\u003c/p\u003e\u003cp\u003eSo, from the following JSX snippet:\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"language-jsx\"\u003efunction App () {\n  return (\n    \u0026lt;article\u0026gt;\n      \u0026lt;h2\u0026gt;Title\u0026lt;/h2\u0026gt;\n\n      \u0026lt;p\u0026gt;Some content\u0026lt;/p\u0026gt;\n    \u0026lt;/article\u0026gt;\n  )\n}\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003ewe’d end up with 4 \u003ccode\u003eFiberNode\u003c/code\u003es, one for each of the following: the \u003ccode\u003eApp\u003c/code\u003e function component, the \u003ccode\u003e\u0026lt;article\u0026gt;\u003c/code\u003e tag, the \u003ccode\u003e\u0026lt;h2\u0026gt;\u003c/code\u003e tag and the \u003ccode\u003e\u0026lt;p\u0026gt;\u003c/code\u003e tag. There is also a \u003cstrong\u003eroot\u003c/strong\u003e \u003ccode\u003eFiberNode\u003c/code\u003e, but it is not relevant now.\u003c/p\u003e\u003cp\u003eThe relationships between the React elements persist when it comes to \u003ccode\u003eFiberNode\u003c/code\u003es. For instance, we could intuitively say that the \u003ccode\u003eApp\u003c/code\u003e's \u003ccode\u003eFiberNode\u003c/code\u003e will be the parent of the \u003ccode\u003e\u0026lt;article\u0026gt;\u003c/code\u003e's \u003ccode\u003eFiberNode\u003c/code\u003e. As far as the \u003ccode\u003e\u0026lt;h2\u0026gt;\u003c/code\u003e and \u003ccode\u003e\u0026lt;p\u0026gt;\u003c/code\u003e tags are concerned, there is no parent-child relationship, but a \u003cstrong\u003esibling relationship\u003c/strong\u003e.\u003c/p\u003e\u003cp\u003eIn the above paragraph we’ve already listed some of the most important \u003ccode\u003eFiberNode\u003c/code\u003e's properties:\u003c/p\u003e\u003cul\u003e\u003cli\u003e\u003ccode\u003echild\u003c/code\u003e: \u003ccode\u003eAppFiberNode.child === ArticleFiberNode\u003c/code\u003e\u003c/li\u003e\u003cli\u003e\u003ccode\u003esibling\u003c/code\u003e:  \u003ccode\u003eH2FiberNode.sibling === PFiberNode\u003c/code\u003e\u003c/li\u003e\u003cli\u003e\u003ccode\u003ereturn\u003c/code\u003e: arguably, this might be the least intuitive, but it can be thought of as the \u003cstrong\u003eparent\u003c/strong\u003e \u003ccode\u003eFiberNode\u003c/code\u003e - \u003ccode\u003eH2FiberNode.return === ArticleFiberNode\u003c/code\u003e and also \u003ccode\u003ePFiberNode.return === ArticleFiberNode\u003c/code\u003e(so, all the siblings have a reference to their parent \u003ccode\u003eFiberNode\u003c/code\u003e); an explanation as to why it is called \u003ccode\u003ereturn\u003c/code\u003e instead of \u003ccode\u003eparent\u003c/code\u003e can be found in \u003ca href=\"https://github.com/acdlite/react-fiber-architecture#return\"\u003ethis document\u003c/a\u003e written by \u003ca href=\"https://github.com/acdlite\"\u003eAndrew Clark\u003c/a\u003e; for the rest of the article, we will use \u003ccode\u003ereturn\u003c/code\u003e and \u003ccode\u003eparent\u003c/code\u003e interchangeably\u003c/li\u003e\u003c/ul\u003e\u003cp\u003eThis would be a plain visualization of the above \u003ccode\u003eFiberTree\u003c/code\u003e:\u003c/p\u003e\u003cfigure class=\"kg-card kg-image-card\"\u003e\u003cimg src=\"https://images.indepth.dev/images/2022/04/simple-fiber-tree-2.png\" class=\"kg-image\" alt loading=\"lazy\" width=\"550\" height=\"543\"\u003e\u003c/figure\u003e\u003cp\u003e\u003cem\u003eThe link for the above diagram can be found \u003ca href=\"https://excalidraw.com/#json=1FroN8EyyXg-r0g7OzdOO,gFKVP94j1Wvl4vtRhqkd4A\"\u003ehere\u003c/a\u003e.\u003c/em\u003e\u003c/p\u003e\u003cp\u003eHowever, recall that the \u003cem\u003evirtual DOM\u003c/em\u003e is responsible for \u003cstrong\u003edetermining what’s changed\u003c/strong\u003e and also for \u003cstrong\u003ecollecting the changes\u003c/strong\u003e so that they can be \u003cstrong\u003ecommitted all at once\u003c/strong\u003e so that the browser can render the new content. For now, all we have is a way to organize the React elements based on the relationships between them. But we need more than that, we also need a way to tell whether changes(of any kind) have occurred or not within a \u003ccode\u003eFiberNode\u003c/code\u003e. Therefore, we will have to \u003cstrong\u003eintroduce another powerful property\u003c/strong\u003e of the \u003ccode\u003eFiberNode\u003c/code\u003e, which is vital for the \u003cstrong\u003e\u003ca href=\"https://reactjs.org/blog/2018/09/10/introducing-the-react-profiler.html#browsing-commits\"\u003erender phase\u003c/a\u003e\u003c/strong\u003e: \u003ccode\u003ealternate\u003c/code\u003e.\u003c/p\u003e\u003cp\u003eFirstly, let’s state once again the problem that is to be solved: \u003cem\u003ehow to determine the changes that have been made in a \u003ccode\u003eFiberNode\u003c/code\u003e?\u003c/em\u003e Suppose there is a React element that displays a counter’s value:\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"language-jsx\"\u003e\u0026lt;p\u0026gt;{counter}\u0026lt;/p\u0026gt;\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003ewe need to find a way to not miss any updates on the \u003ccode\u003ecounter\u003c/code\u003e value. Keep in mind that, in order to find any modifications, we will have to \u003cstrong\u003etraverse the \u003ccode\u003eFiberTree\u003c/code\u003e\u003c/strong\u003e. Imagine the \u003ccode\u003eFiberNode\u003c/code\u003e of the above element is now being visited, how would one be able to tell that something has changed?\u003c/p\u003e\u003cp\u003eWe need \u003cstrong\u003esomething to compare against\u003c/strong\u003e and this is where the \u003ccode\u003ealternate\u003c/code\u003e property plays an important role. In this case, where we want to discover any updates, \u003ccode\u003ealternate\u003c/code\u003e will refer to the previous state of a \u003ccode\u003eFiberNode\u003c/code\u003e. Yes, an \u003ccode\u003ealternate\u003c/code\u003e property of a \u003ccode\u003eFiberNode\u003c/code\u003e will also point to a \u003ccode\u003eFiberNode\u003c/code\u003e! It’s like having \u003cstrong\u003e2 copies\u003c/strong\u003e of the same \u003ccode\u003eFiberNode\u003c/code\u003e, one which stores the value that is, \u003cstrong\u003eat this moment\u003c/strong\u003e, \u003cstrong\u003evisible in the browser,\u003c/strong\u003e while the other stores the \u003cstrong\u003enew changes\u003c/strong\u003e that \u003cstrong\u003ehave to be reflected in the browser\u003c/strong\u003e. So, we can determine whether there is something to commit later on if the \u003cem\u003estate\u003c/em\u003e of the \u003cstrong\u003eprevious\u003c/strong\u003e \u003ccode\u003eFiberNode\u003c/code\u003e differs from the state of the \u003cstrong\u003enewly updated\u003c/strong\u003e \u003ccode\u003eFiberNode\u003c/code\u003e.\u003c/p\u003e\u003cp\u003eThere is a \u003cem\u003eformal\u003c/em\u003e way to define the \u003ccode\u003ealternate\u003c/code\u003e property’s usefulness and we will do this in the next section, by going into detail about the two possible states of a \u003ccode\u003eFiberNode\u003c/code\u003e: \u003ccode\u003ecurrent\u003c/code\u003e(the state that \u003cstrong\u003eis now reflected in the browser\u003c/strong\u003e) and \u003ccode\u003eworkInProgress\u003c/code\u003e(the state that \u003cstrong\u003eis to be reflected in the browser\u003c/strong\u003e).\u003c/p\u003e\u003chr\u003e\u003ch2 id=\"the-current-and-workinprogress-states-of-a-fibernode\"\u003eThe current and workInProgress states of a FiberNode\u003c/h2\u003e\u003cp\u003eLet’s restate the \u003cstrong\u003epurpose\u003c/strong\u003e of these 2 \u003cem\u003estates\u003c/em\u003e of a single \u003ccode\u003eFiberNode\u003c/code\u003e: we need to \u003cstrong\u003efind and collect\u003c/strong\u003e all the \u003cstrong\u003echanges\u003c/strong\u003e that have occurred in the tree so that all the necessary updates will be incurred by the real DOM at once/in a single batch. The way to find a change in the \u003ccode\u003eFiberTree\u003c/code\u003e is by \u003cstrong\u003ecomparing\u003c/strong\u003e what’s currently being shown on the screen(i.e. the \u003ccode\u003ecurrent\u003c/code\u003e \u003ccode\u003eFiberNode\u003c/code\u003e) with what will be shown on the screen(i.e. the \u003ccode\u003eworkInProgress\u003c/code\u003e \u003ccode\u003eFiberNode\u003c/code\u003e).\u003c/p\u003e\u003cp\u003eIn the diagrams that will follow we will include both the \u003ccode\u003ecurrent\u003c/code\u003e and the \u003ccode\u003eworkInProgress\u003c/code\u003e \u003ccode\u003eFiberNodes\u003c/code\u003e for a single React element. For instance, this is how an \u003ccode\u003e\u0026lt;article\u0026gt;\u003c/code\u003e tag will be illustrated:\u003c/p\u003e\u003cfigure class=\"kg-card kg-image-card\"\u003e\u003cimg src=\"https://images.indepth.dev/images/2022/04/single-fiber-node-in-tree.png\" class=\"kg-image\" alt loading=\"lazy\" width=\"760\" height=\"323\"\u003e\u003c/figure\u003e\u003cp\u003eIn the image above, there are 2 \u003ccode\u003eFiberNode\u003c/code\u003es that correspond to an \u003ccode\u003earticle\u003c/code\u003e element: \u003ccode\u003ecurrent\u003c/code\u003e and \u003ccode\u003eworkInProgress\u003c/code\u003e(abbreviated as \u003cem\u003eWIP\u003c/em\u003e). One can access its counterpart via the \u003ccode\u003ealternate\u003c/code\u003e property:\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"language-jsx\"\u003e// `workInProgress === current.alternate` // true\n// `workInProgress.alternate === current` // true\ncurrent === current.alternate.alternate // true\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eBefore moving on, let’s find a possible answer to another interesting question: \u003cem\u003ewhy is this property called \u003ccode\u003ealternate\u003c/code\u003e?\u003c/em\u003e My take on this is that these 2 \u003ccode\u003eFiberNode\u003c/code\u003es, \u003ccode\u003ecurrent\u003c/code\u003e and \u003ccode\u003eworkInProgress\u003c/code\u003e, continuously \u003cem\u003ealternate\u003c/em\u003e across browser renderings. Suppose there is a \u003ccode\u003eCounter\u003c/code\u003e component rendered in the browser with the value \u003ccode\u003e10\u003c/code\u003e. If the \u003ccode\u003eIncrement\u003c/code\u003e button is clicked, then the 2 \u003ccode\u003eFiberNode\u003c/code\u003es associated with the \u003ccode\u003eCounter\u003c/code\u003e component will look like this:\u003c/p\u003e\u003cul\u003e\u003cli\u003e\u003ccode\u003ecurrent\u003c/code\u003e - has the value of \u003ccode\u003e10\u003c/code\u003e, because it is what’s currently being shown in the browser\u003c/li\u003e\u003cli\u003e\u003ccode\u003eworkInProgress\u003c/code\u003e - has the value of \u003ccode\u003e11\u003c/code\u003e, because it contains the change that has to be performed\u003c/li\u003e\u003c/ul\u003e\u003cp\u003eAfter \u003cstrong\u003ecomparing\u003c/strong\u003e \u003ccode\u003ecurrent\u003c/code\u003e's state with \u003ccode\u003eworkInProgress\u003c/code\u003e' state, a modification has been discovered(going from \u003ccode\u003e10\u003c/code\u003e to \u003ccode\u003e11\u003c/code\u003e) and it will eventually be \u003cstrong\u003ereflected in the browser\u003c/strong\u003e. \u003cstrong\u003eAfter this happens\u003c/strong\u003e, it is expected for the \u003cstrong\u003ebarely resolved\u003c/strong\u003e \u003ccode\u003eworkInProgress\u003c/code\u003e to \u003cstrong\u003ebecome\u003c/strong\u003e \u003ccode\u003ecurrent\u003c/code\u003e. That’s because if the user clicks on the \u003ccode\u003eIncrement\u003c/code\u003e button once again, then the same logic will be applied and \u003ccode\u003ecurrent\u003c/code\u003e will have the value of \u003ccode\u003e11\u003c/code\u003e(the value of the \u003cstrong\u003eold\u003c/strong\u003e \u003ccode\u003eworkInProgress\u003c/code\u003e), whereas the \u003cstrong\u003enew\u003c/strong\u003e value of \u003ccode\u003eworkInProgress\u003c/code\u003e will be \u003ccode\u003e12\u003c/code\u003e. As you can probably anticipate, the alternation goes on and on: when some work has to be done on the \u003ccode\u003eFiberTree\u003c/code\u003e, \u003ccode\u003ecurrent\u003c/code\u003e reflects the current state visible in the browser, then, after the changes have been applied to the DOM,  \u003ccode\u003eworkInProgress\u003c/code\u003e becomes \u003ccode\u003ecurrent\u003c/code\u003e.\u003c/p\u003e\u003cp\u003eThe next section is meant to clarify these concepts even further with the help of some diagrams.\u003c/p\u003e\u003chr\u003e\u003ch2 id=\"a-hands-on-example-to-grasp-the-fibertree\"\u003eA hands-on example to grasp the FiberTree\u003c/h2\u003e\u003cp\u003e\u003cem\u003eAll the diagrams used in this section can be found in this \u003ca href=\"https://excalidraw.com/#json=sVh5iAmG_QQrJGZI91STQ,MA7J2M1WJf-CTRenCvTINg\"\u003eExcalidraw workspace\u003c/a\u003e.\u003c/em\u003e\u003c/p\u003e\u003cp\u003eThis section aims at illustrating how the \u003cem\u003evirtual DOM\u003c/em\u003e(and thus the \u003ccode\u003eFiberTree\u003c/code\u003e) works, with the help of a simple application and some comprehensive diagrams.\u003c/p\u003e\u003cp\u003e\u003ca href=\"https://stackblitz.com/edit/react-ts-ye87vy?file=index.tsx\"\u003eThis the demo application\u003c/a\u003e that we will follow:\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"language-jsx\"\u003e// index.tsx\nfunction App() {\n  return (\n    \u0026lt;div\u0026gt;\n      \u0026lt;h2\u0026gt;\u0026lt;i\u0026gt;Welcome world!\u0026lt;/i\u0026gt;\u0026lt;/h2\u0026gt;\n      \n      \u0026lt;Counter /\u0026gt;\n    \u0026lt;/div\u0026gt;\n  );\n}\n\n// Counter.tsx\nexport default function Counter() {\n  const [count, setCount] = useState(0);\n\n  return (\n    \u0026lt;div className=\"counter\"\u0026gt;\n      \u0026lt;button onClick={() =\u0026gt; setCount(count + 1)}\u0026gt;Increment\u0026lt;/button\u0026gt;\n\n      \u0026lt;p\u0026gt;The value is: {count}\u0026lt;/p\u0026gt;\n    \u0026lt;/div\u0026gt;\n  );\n}\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eAssuming the \u003ccode\u003ecount\u003c/code\u003e's value is \u003ccode\u003e7\u003c/code\u003e, this is what the \u003ccode\u003eFiberTree\u003c/code\u003e would look like:\u003c/p\u003e\u003cfigure class=\"kg-card kg-image-card kg-width-wide\"\u003e\u003cimg src=\"https://images.indepth.dev/images/2022/04/fiber-tree-initial.png\" class=\"kg-image\" alt=\"fiber-tree-initial.png\" loading=\"lazy\" width=\"2800\" height=\"2900\"\u003e\u003c/figure\u003e\u003cp\u003eIt is implied that the relationships indicated by the arrows(e.g. \u003cem\u003echild, parent, sibling\u003c/em\u003e) apply on \u003ccode\u003eFiberNode\u003c/code\u003es of the same type(i.e. a \u003ccode\u003ecurrent\u003c/code\u003e \u003ccode\u003eFiberNode\u003c/code\u003e is a child of another \u003ccode\u003ecurrent\u003c/code\u003e \u003ccode\u003eFiberNode\u003c/code\u003e, \u003cstrong\u003enot\u003c/strong\u003e \u003ccode\u003eworkInProgress\u003c/code\u003e).\u003c/p\u003e\u003cp\u003eNotice the \u003cstrong\u003eold\u003c/strong\u003e \u003ccode\u003eworkInProgress\u003c/code\u003e \u003ccode\u003eFiberNode\u003c/code\u003es(highlighted in grey and abbreviated as \u003cem\u003eOLD WIP\u003c/em\u003e) - what it is saying is that, prior to what’s currently being shown in the browser, the \u003ccode\u003ecount\u003c/code\u003e’s value was \u003ccode\u003e6\u003c/code\u003e and the \u003cstrong\u003enew\u003c/strong\u003e \u003ccode\u003eworkInProgress\u003c/code\u003e came with the value of \u003ccode\u003e7\u003c/code\u003e. Then, \u003ccode\u003eworkInProgress\u003c/code\u003e became the current \u003ccode\u003ecurrent\u003c/code\u003e. As a result, in the situation depicted by the above diagram, \u003ccode\u003ecurrent === OLD_WIP\u003c/code\u003e is \u003ccode\u003etrue\u003c/code\u003e. \u003cem\u003eOLD WIP\u003c/em\u003e doesn’t do anything per se, it’s just a placeholder for a potential \u003ccode\u003eworkInProgress\u003c/code\u003e \u003ccode\u003eFiberNode\u003c/code\u003e that may come with a new value.\u003c/p\u003e\u003cp\u003eNow, let’s see what happens if the \u003ccode\u003eIncrement\u003c/code\u003e button is clicked. Firstly, an event will be triggered as a result of pressing the button and then the \u003ccode\u003euseState\u003c/code\u003e's \u003cem\u003edispatcher\u003c/em\u003e(i.e. the \u003ccode\u003esetCount()\u003c/code\u003e function) will be invoked. This event signals that \u003cem\u003e\u003cstrong\u003esome synchronization work\u003c/strong\u003e\u003c/em\u003e needs to be done on the \u003ccode\u003eFiberTree\u003c/code\u003e. It is called \u003cem\u003esynchronization\u003c/em\u003e because the \u003ccode\u003ecurrent\u003c/code\u003e tree needs to take in the changes carried by the \u003ccode\u003eworkInProgress\u003c/code\u003e tree, so that in the end the results are visible in the browser.\u003c/p\u003e\u003cfigure class=\"kg-card kg-image-card kg-width-wide\"\u003e\u003cimg src=\"https://images.indepth.dev/images/2022/04/fiber-tree-set-count.png\" class=\"kg-image\" alt=\"fiber-tree-set-count.png\" loading=\"lazy\" width=\"2800\" height=\"2899\"\u003e\u003c/figure\u003e\u003cp\u003eThe \u003ccode\u003eCounter\u003c/code\u003e has been highlighted in red because it’s where the \u003ccode\u003euseState\u003c/code\u003e hook has been used. It’s also the topmost node that would be affected by a state change(since it holds the state), so any updates could affect only the state of its children elements(e.g. the \u003ccode\u003ep\u003c/code\u003e element which displays the \u003ccode\u003ecount\u003c/code\u003e's value). Put differently, by invoking \u003ccode\u003esetCount()\u003c/code\u003e, the \u003ccode\u003eCounter\u003c/code\u003e component becomes the cause of a re-render of the \u003ccode\u003eFiberTree\u003c/code\u003e.\u003c/p\u003e\u003cp\u003eWhat happens next is that the \u003cstrong\u003ebranch\u003c/strong\u003e/\u003cstrong\u003esubtree\u003c/strong\u003e of nodes which starts from the root and includes the \u003ccode\u003eCounter\u003c/code\u003e's \u003ccode\u003eFiberNode\u003c/code\u003es is marked as \u003cem\u003edirty\u003c/em\u003e(marked with red hachures)\u003cem\u003e:\u003c/em\u003e\u003c/p\u003e\u003cfigure class=\"kg-card kg-image-card kg-width-wide\"\u003e\u003cimg src=\"https://images.indepth.dev/images/2022/04/fiber-tree-marked-as-dirty.png\" class=\"kg-image\" alt=\"fiber-tree-marked-as-dirty.png\" loading=\"lazy\" width=\"2800\" height=\"2900\"\u003e\u003c/figure\u003e\u003cp\u003eMarking those ancestor nodes as \u003cem\u003edirty\u003c/em\u003e indicates that \u003cstrong\u003esomething has changed\u003c/strong\u003e somewhere down in the tree. This has further implications - by setting apart a subtree that contains modifications, we can \u003cstrong\u003eavoid\u003c/strong\u003e doing redundant work on branches that are not affected at all. For example, the \u003ccode\u003eFiberNode\u003c/code\u003es associated with the \u003ccode\u003e\u0026lt;i\u0026gt;\u003c/code\u003e tag will not be influenced by the \u003ccode\u003eCounter\u003c/code\u003e's state. Let’s see the next diagram, which underlines the presence of \u003ccode\u003eworkInProgress\u003c/code\u003e nodes:\u003c/p\u003e\u003cfigure class=\"kg-card kg-image-card kg-width-wide\"\u003e\u003cimg src=\"https://images.indepth.dev/images/2022/04/fiber-tree-wip.png\" class=\"kg-image\" alt=\"fiber-tree-wip.png\" loading=\"lazy\" width=\"3682\" height=\"2901\"\u003e\u003c/figure\u003e\u003cp\u003eNotice how the \u003ccode\u003eFiberNode\u003c/code\u003e corresponding to the \u003ccode\u003e\u0026lt;i\u0026gt;\u003c/code\u003e tag is \u003cem\u003eskipped,\u003c/em\u003e because the changes that occurred have no effect on it. If such \u003ccode\u003eFiberNode\u003c/code\u003e had had any children, the entire subtree would’ve been skipped. As you can see, a \u003ccode\u003eworkInProgress\u003c/code\u003e node has been set for \u003cstrong\u003eeach node in the entire \u003cem\u003emodified\u003c/em\u003e subtree\u003c/strong\u003e(including \u003ccode\u003eCounter\u003c/code\u003e's descendants - so modifications can be discovered). Although not every \u003ccode\u003eworkInProgress\u003c/code\u003e node may bring new updates, it’s necessary to be able to identify the subtree which brought modifications. This comes handy especially during the \u003cstrong\u003ecommit phase\u003c/strong\u003e, where all the changes will be applied to the real DOM.\u003c/p\u003e\u003cp\u003eAlso, take note of the fact that the \u003ccode\u003ep\u003c/code\u003e's \u003ccode\u003eworkInProgress\u003c/code\u003e node contains the most recent value of the \u003ccode\u003ecounter\u003c/code\u003e, which is \u003ccode\u003e8\u003c/code\u003e.\u003c/p\u003e\u003cp\u003eNow, you might be wondering why a \u003ccode\u003eworkInProgress\u003c/code\u003e node has been set for \u003ccode\u003eh2\u003c/code\u003e as well(which clearly isn’t affected at all by the \u003ccode\u003eCounter\u003c/code\u003e's state) - the reason is that its parent, the \u003ccode\u003ediv\u003c/code\u003e's \u003ccode\u003eFiberNode\u003c/code\u003e, is part of the subtree which contains a changes and, when this happens, a parent \u003ccode\u003eFiberNode\u003c/code\u003e will set \u003ccode\u003eworkInProgress\u003c/code\u003e nodes for all its children. Concretely, the \u003ccode\u003ediv\u003c/code\u003e's \u003ccode\u003eFiberNode\u003c/code\u003e has created a \u003ccode\u003eworkInProgress\u003c/code\u003e node for each of \u003ccode\u003eh2\u003c/code\u003e and \u003ccode\u003eCounter\u003c/code\u003e. Another way to think about this is because \u003ccode\u003ediv\u003c/code\u003e's \u003ccode\u003eFiberNode\u003c/code\u003e is marked as dirty, it means that, somewhere among its descendants, a modification has occurred. Since it can’t know beforehand where exactly it took place, all the \u003ccode\u003ediv'\u003c/code\u003es direct descendants will get a new \u003ccode\u003eworkInProgress\u003c/code\u003e \u003ccode\u003eFiberNode\u003c/code\u003e. This doesn’t seem to provoke any issues, since the subtree which has \u003ccode\u003eh2\u003c/code\u003e as root will be skipped either way.\u003c/p\u003e\u003cp\u003eHowever, if a \u003ccode\u003eworkInProgress\u003c/code\u003e node has been created, it doesn’t necessarily have to bring updates. It \u003cstrong\u003emay be just part of a branch\u003c/strong\u003e/\u003cstrong\u003esubtree\u003c/strong\u003e in which updates have been made. This can be observed in the following diagram:\u003c/p\u003e\u003cfigure class=\"kg-card kg-image-card kg-width-wide\"\u003e\u003cimg src=\"https://images.indepth.dev/images/2022/04/fiber-tree-updates.png\" class=\"kg-image\" alt=\"fiber-tree-updates.png\" loading=\"lazy\" width=\"3080\" height=\"2901\"\u003e\u003c/figure\u003e\u003cp\u003e\u003cem\u003eWhat is shown above is the moment after the changes have been committed to the real DOM.\u003c/em\u003e\u003c/p\u003e\u003cp\u003eLet’s now go step by step and understand why each of the nodes coloured in blue brought changes:\u003c/p\u003e\u003cul\u003e\u003cli\u003e\u003ccode\u003ep\u003c/code\u003e - it displays the \u003ccode\u003ecount\u003c/code\u003e's value, so obviously its content has been changed\u003c/li\u003e\u003cli\u003e\u003ccode\u003ebutton\u003c/code\u003e - it has been used like this in our component: \u003ccode\u003e\u0026lt;button onClick={() =\u0026gt; setCount(count + 1)}\u0026gt;...\u0026lt;/button\u0026gt;\u003c/code\u003e. This means that a new function will be created each time the \u003ccode\u003eCounter\u003c/code\u003e component renders. And since a change in the state occurred, we know for sure the component re-rendered and therefore the \u003ccode\u003ebutton\u003c/code\u003e element has received a \u003cstrong\u003enew prop\u003c/strong\u003e\u003c/li\u003e\u003cli\u003e\u003ccode\u003ediv.counter\u003c/code\u003e - its parent node(i.e. \u003ccode\u003eCounter\u003c/code\u003e) re-rendered and its children are different(i.e. its \u003ccode\u003ep\u003c/code\u003e child previously displayed \u003ccode\u003e7\u003c/code\u003e and now it displays \u003ccode\u003e8\u003c/code\u003e); \u003ca href=\"https://github.com/indepth-dev/community/discussions/264#discussioncomment-4089979\"\u003ehere\u003c/a\u003e is a discussion that might clear up some possible confusions regarding this aspect\u003c/li\u003e\u003cli\u003e\u003ccode\u003eCounter\u003c/code\u003e - its state(from \u003ccode\u003euseState\u003c/code\u003e) changed\u003c/li\u003e\u003c/ul\u003e\u003cblockquote\u003eAs a side note, if there was a static element inside the \u003ccode\u003eCounter\u003c/code\u003e component, like \u003ccode\u003e\u0026lt;h3\u0026gt;hello\u0026lt;/h3\u0026gt;\u003c/code\u003e, it would’ve been different across re-renders of \u003ccode\u003eCounter\u003c/code\u003e. That’s because React elements are essentially objects resulted from calling \u003ccode\u003e\u003ca href=\"https://github.com/facebook/react/blob/v18.0.0/packages/react/src/ReactElement.js#L362\"\u003ecreateElement()\u003c/a\u003e\u003c/code\u003e. So, re-rendering \u003ccode\u003eCounter\u003c/code\u003e involves re-calling that \u003ccode\u003ecreateElement\u003c/code\u003e and hence a new object will be returned every time.\u003c/blockquote\u003e\u003cp\u003eAnd now, since all the changes have been committed, the \u003ccode\u003eFiberTree\u003c/code\u003e is back to its \u003cem\u003estable\u003c/em\u003e state:\u003c/p\u003e\u003cfigure class=\"kg-card kg-image-card kg-width-wide\"\u003e\u003cimg src=\"https://images.indepth.dev/images/2022/04/fiber-tree-final.png\" class=\"kg-image\" alt=\"fiber-tree-final.png\" loading=\"lazy\" width=\"2800\" height=\"2900\"\u003e\u003c/figure\u003e\u003cp\u003e\u003cem\u003eNotice how the \u003ccode\u003ecount\u003c/code\u003e's value is now \u003ccode\u003e8\u003c/code\u003e.\u003c/em\u003e\u003c/p\u003e\u003cp\u003eAs a side note, another interesting facet of the \u003ccode\u003ealternate\u003c/code\u003e property is that is allows React to keep track of 2 separate trees simultaneously. You can distinguish the \u003ccode\u003ecurrent\u003c/code\u003e tree by following the green rectangles and the \u003ccode\u003eworkInProgress\u003c/code\u003e tree by following the orange ones. What’s also worth mentioning is that these aforementioned trees don’t have to be symmetrical - one can have more or less nodes compared to the other(e.g. when elements are added/removed). We will explore such cases in upcoming articles.\u003c/p\u003e\u003chr\u003e\u003ch2 id=\"conclusion\"\u003eConclusion\u003c/h2\u003e\u003cp\u003eIt would be unfair to say this article was just the tip of the iceberg, because I believe we actually covered many fundamental aspects of the React’s \u003cem\u003evirtual DOM.\u003c/em\u003e Of course, some details have been omitted for the sake of simplicity, but I hope the bits of knowledge acquired from this writing will make you more aware of what’s going on under the hood and, why not, give you enough confidence to start exploring the source code on your own.\u003c/p\u003e\u003cp\u003e\u003cstrong\u003eTo do a quick recap\u003c/strong\u003e: the main unit of React’s \u003cem\u003evirtual DOM\u003c/em\u003e is the \u003ccode\u003eFiberNode\u003c/code\u003e. With the help of its \u003ccode\u003ealternate\u003c/code\u003e property, React can discover what changes have been made inside the application. It does that by \u003cstrong\u003ecomparing\u003c/strong\u003e the \u003cstrong\u003ecurrent state\u003c/strong\u003e(what’s visible at this moment in the browser - stored in the \u003ccode\u003ecurrent\u003c/code\u003e tree) and the \u003cstrong\u003enewly updated state\u003c/strong\u003e(what’s to be shown in the browser - stored in the \u003ccode\u003eworkInProgress\u003c/code\u003e tree). One \u003ccode\u003ecurrent\u003c/code\u003e \u003ccode\u003eFiberNode\u003c/code\u003e can access its counterpart \u003ccode\u003eworkInProgress\u003c/code\u003e \u003ccode\u003eFiberNode\u003c/code\u003e(and vice versa) via the \u003ccode\u003ealternate\u003c/code\u003e property. Once all changes have been discovered, they are all committed at once on the real DOM and, after that, the outcomes can be seen in the browser.\u003c/p\u003e\u003cp\u003e\u003cstrong\u003eThanks for reading!\u003c/strong\u003e\u003c/p\u003e","comment_id":"6266bec4a0d748ad0c8b860b","feature_image":"https://images.indepth.dev/images/2022/04/Exploring-how-virtual-DOM-is-implemented-in-React.jpg","featured":false,"visibility":"public","created_at":"2022-04-25T18:31:16.000+03:00","updated_at":"2022-11-10T20:14:26.000+02:00","published_at":"2022-05-03T00:31:13.000+03:00","custom_excerpt":"This article aims to clarify how the virtual DOM is actually implemented in React and set the stage for future writings that will expand on different virtual DOM features and behaviours.","codeinjection_head":"{\"community_link\":\"https://github.com/indepth-dev/community/discussions/264\"}","codeinjection_foot":null,"custom_template":null,"canonical_url":null,"email_recipient_filter":"none","authors":[{"id":"5e260ca7b2bc9211f8af8e08","name":"Andrei Gatej","slug":"andreigatej","profile_image":"https://images.indepth.dev/images/2022/12/me3.jpg","cover_image":null,"bio":"A curious software developer with a passion for solving problems and learning new things.","website":"https://andreigatej.dev/","location":"Romania","facebook":null,"twitter":"@anduser96","meta_title":null,"meta_description":null,"url":"https://admin.indepth.dev/author/andreigatej/"}],"tags":[{"id":"5d403a5b679ce6202b744977","name":"react","slug":"react","description":"React (also known as React.js or ReactJS) is a JavaScript library for building user interfaces. It uses a declarative paradigm and aims to be both efficient and flexible.","feature_image":null,"visibility":"public","meta_title":null,"meta_description":null,"og_image":null,"og_title":null,"og_description":null,"twitter_image":null,"twitter_title":null,"twitter_description":null,"codeinjection_head":null,"codeinjection_foot":null,"canonical_url":null,"accent_color":null,"url":"https://admin.indepth.dev/tag/react/"},{"id":"613cd51f17e466f35de2c859","name":"DOM","slug":"dom","description":null,"feature_image":null,"visibility":"public","meta_title":null,"meta_description":null,"og_image":null,"og_title":null,"og_description":null,"twitter_image":null,"twitter_title":null,"twitter_description":null,"codeinjection_head":null,"codeinjection_foot":null,"canonical_url":null,"accent_color":null,"url":"https://admin.indepth.dev/tag/dom/"},{"id":"5d403b854528ce234fe57209","name":"javascript","slug":"javascript","description":"JavaScript (not to be confused with Java) is a high-level, dynamic, multi-paradigm, object-oriented, prototype-based, weakly-typed, and interpreted language used for both client-side and server-side scripting. Its primary use is in rendering and manipulating of web pages. Use this tag for questions regarding ECMAScript and its various dialects/implementations (excluding ActionScript and Google-Apps-Script).","feature_image":null,"visibility":"public","meta_title":null,"meta_description":null,"og_image":null,"og_title":null,"og_description":null,"twitter_image":null,"twitter_title":null,"twitter_description":null,"codeinjection_head":null,"codeinjection_foot":null,"canonical_url":null,"accent_color":null,"url":"https://admin.indepth.dev/tag/javascript/"}],"primary_author":{"id":"5e260ca7b2bc9211f8af8e08","name":"Andrei Gatej","slug":"andreigatej","profile_image":"https://images.indepth.dev/images/2022/12/me3.jpg","cover_image":null,"bio":"A curious software developer with a passion for solving problems and learning new things.","website":"https://andreigatej.dev/","location":"Romania","facebook":null,"twitter":"@anduser96","meta_title":null,"meta_description":null,"url":"https://admin.indepth.dev/author/andreigatej/","_id":1024},"primary_tag":{"id":"5d403a5b679ce6202b744977","name":"react","slug":"react","description":"React (also known as React.js or ReactJS) is a JavaScript library for building user interfaces. It uses a declarative paradigm and aims to be both efficient and flexible.","feature_image":null,"visibility":"public","meta_title":null,"meta_description":null,"og_image":null,"og_title":null,"og_description":null,"twitter_image":null,"twitter_title":null,"twitter_description":null,"codeinjection_head":null,"codeinjection_foot":null,"canonical_url":null,"accent_color":null,"url":"https://admin.indepth.dev/tag/react/"},"url":"https://admin.indepth.dev/exploring-how-virtual-dom-is-implemented-in-react/","excerpt":"This article aims to clarify how the virtual DOM is actually implemented in React and set the stage for future writings that will expand on different virtual DOM features and behaviours.","reading_time":12,"access":true,"send_email_when_published":false,"og_image":null,"og_title":null,"og_description":null,"twitter_image":"https://images.indepth.dev/images/2022/04/Exploring-how-virtual-DOM-is-implemented-in-React2.jpg","twitter_title":null,"twitter_description":null,"meta_title":null,"meta_description":null,"email_subject":null,"frontmatter":null,"_id":1501},{"id":"6252ab229c34bf7c9fd817c7","uuid":"fc430f0a-87fa-498d-aca2-e85f42fe4d42","title":"Ukraine and In-Depth’s founder need your help","slug":"ukraine-and-in-depths-founder-need-your-help","html":"\u003cp\u003eI started \u003ca href=\"https://indepth.dev/\" rel=\"noopener ugc nofollow\"\u003einDepth.dev\u003c/a\u003e (previously \u003ca href=\"https://medium.com/angular-in-depth\" rel=\"noopener\"\u003eAngularInDepth\u003c/a\u003e ) with the goal to make in-depth knowledge accessible to people for free. Over the course of the last 3 years it helped more than 20 millions people to get insights into internals of frameworks and libraries and grow as a developer. \u003ca href=\"https://indepth.dev/posts/1154/connecting-the-dots-where-hard-work-and-dreams-can-lead-you\" rel=\"noopener ugc nofollow\"\u003eIt wasn’t easy\u003c/a\u003e to get the publication off ground and lead it to the current size, but together with your help we’ve won that battle.\u003c/p\u003e\u003cp\u003e\u003cstrong\u003e\u003cstrong\u003eToday I’m and my country — Ukraine — is fighting a much bigger battle. It’s the battle for our mere existence. The battle against evil and terrorists in the form of russian army and those who command them.\u003c/strong\u003e \u003c/strong\u003e\u003c/p\u003e\u003cp\u003e\u003cstrong\u003e\u003ca href=\"https://u24.gov.ua/\"\u003eFind out more at United24\u003c/a\u003e\u003c/strong\u003e\u003c/p\u003e\u003cp\u003eIt’s been more than a month since russia invaded Ukraine. The enemy wants to erase our history, language, and cultural identity. They brutally kill everyone who disagrees. We must fight, otherwise we’re to witness all those horrors from our WWII history\u003cstrong\u003e\u003cstrong\u003e \u003c/strong\u003e\u003c/strong\u003e— mass murders, massacre, imprisoned, tortured and killed activists, Holodomor. \u003cstrong\u003e\u003cstrong\u003eThere’s no doubt about that\u003c/strong\u003e\u003c/strong\u003e as we already seeing this on territories temporarily occupied by russia. Just a couple of days ago more than 30 people were killed and more than 100 were injured \u003ca href=\"https://twitter.com/DmytroKuleba/status/1512371986210689024\" rel=\"noopener ugc nofollow\"\u003ein a rocket attack by the occupiers on \u003cstrong\u003e\u003cstrong\u003eKramatorsk\u003c/strong\u003e\u003c/strong\u003e railway station \u003c/a\u003e— at that time there were thousands of \u003cstrong\u003e\u003cstrong\u003epeople trying to evacuate\u003c/strong\u003e\u003c/strong\u003e.\u003c/p\u003e\u003cp\u003eUkraine stands for freedom and democratic values. The world will never be a safe place if Ukraine fails.\u003c/p\u003e\u003cp\u003e\u003cstrong\u003e\u003cstrong\u003eI’m with my friends in Ukraine collecting funds and buying so desperately needed equipment for Ukrainian army. We’re grateful to all people abroad who help us with deliveries.\u003c/strong\u003e\u003c/strong\u003e\u003c/p\u003e\u003cp\u003eA very generous donation from \u003ca href=\"https://medium.com/u/b1e720e3de5f?source=post_page-----763a5290c333-----------------------------------\" rel=\"noopener\"\u003eNiall Crosby\u003c/a\u003e and \u003ca href=\"https://medium.com/u/fab4d75de41f?source=post_page-----763a5290c333-----------------------------------\" rel=\"noopener\"\u003eSid Sijbrandij\u003c/a\u003e allowed us to buy sleeping bags, protection gear and IFAKs for the army of Ukraine.\u003c/p\u003e\u003cfigure class=\"kg-card kg-image-card\"\u003e\u003cimg src=\"https://images.indepth.dev/images/2022/04/image.png\" class=\"kg-image\" alt loading=\"lazy\" width=\"1600\" height=\"1200\"\u003e\u003c/figure\u003e\u003cp\u003eWe also got help from folks at \u003ca href=\"https://medium.com/u/2817fb68583?source=post_page-----763a5290c333-----------------------------------\" rel=\"noopener\"\u003eNrwl.io\u003c/a\u003e and \u003ca href=\"https://medium.com/u/10de58a04efd?source=post_page-----763a5290c333-----------------------------------\" rel=\"noopener\"\u003eMichael Prentice\u003c/a\u003e and spent more than $10k of our own savings on the equipment.\u003c/p\u003e\u003cp\u003e\u003cstrong\u003e\u003cstrong\u003eYet it’s not enough. \u003c/strong\u003e\u003c/strong\u003eAs russians plan to start another heavy assault on Ukraine in Donbass region in the coming weeks, we’re in great need for more.\u003c/p\u003e\u003cblockquote\u003eBattle of Donbas will be similar to World War II. “This will not be a local operation based on what we see from Russia’s preparations,” Dmytro Kuleba said, adding that he expects large-scale operations involving thousands of tanks, armored vehicles, aircraft.\u003c/blockquote\u003e\u003cp\u003eOver the years \u003ca href=\"https://indepth.dev/\"\u003einDepth.dev\u003c/a\u003e has helped millions of people — \u003cstrong\u003e\u003cstrong\u003eYOU CAN HELP\u003c/strong\u003e\u003c/strong\u003e us now! Every dollar counts.\u003c/p\u003e\u003cp\u003eYou can donate to me directly using Wise or PayPal — find me there by email m.koretskyi@gmail.com.  Alternatively you can donate through \u003ca href=\"https://u24.gov.ua/\"\u003eUnited 24\u003c/a\u003e - the initiative of the President of Ukraine. However, if you prefer NGOs, there are two big Ukrainian funds that do an amazing job of helping our armed forces. You can donate there as well:\u003c/p\u003e\u003cul\u003e\u003cli\u003e\u003ca href=\"https://www.comebackalive.in.ua/donate\" rel=\"noopener ugc nofollow\"\u003ehttps://www.comebackalive.in.ua\u003c/a\u003e\u003c/li\u003e\u003cli\u003e\u003ca href=\"https://www.koloua.com/en\" rel=\"noopener ugc nofollow\"\u003ehttps://www.koloua.com/en\u003c/a\u003e\u003c/li\u003e\u003c/ul\u003e\u003cp\u003e\u003cstrong\u003e\u003cstrong\u003eYou can find more ways to help Ukraine \u003c/strong\u003e\u003c/strong\u003e\u003ca href=\"https://www.supportukraine.co/\" rel=\"noopener ugc nofollow\"\u003e\u003cstrong\u003e\u003cstrong\u003ehere\u003c/strong\u003e\u003c/strong\u003e\u003c/a\u003e\u003cstrong\u003e\u003cstrong\u003e. Thank you!\u003c/strong\u003e\u003c/strong\u003e\u003c/p\u003e\u003cfigure class=\"kg-card kg-image-card\"\u003e\u003cimg src=\"https://images.indepth.dev/images/2022/04/image-1.png\" class=\"kg-image\" alt loading=\"lazy\" width=\"967\" height=\"211\"\u003e\u003c/figure\u003e","comment_id":"6252ab229c34bf7c9fd817c7","feature_image":"https://images.indepth.dev/images/2022/04/0_hYQqs0fHayvfnP5H.jpg","featured":false,"visibility":"public","created_at":"2022-04-10T13:02:10.000+03:00","updated_at":"2022-05-15T15:28:24.000+03:00","published_at":"2022-04-10T13:06:26.000+03:00","custom_excerpt":"Over the years inDepth.dev has helped millions of people — YOU CAN HELP us now! Every dollar counts.","codeinjection_head":null,"codeinjection_foot":null,"custom_template":null,"canonical_url":null,"email_recipient_filter":"none","authors":[{"id":"1","name":"Max Koretskyi","slug":"maxkoretskyi","profile_image":"https://images.indepth.dev/images/2022/07/ava.jpg","cover_image":"https://images.indepth.dev/images/2019/07/015100-634_Manta-Ray-2.jpg","bio":"Max is a self-taught software engineer that believes in fundamental knowledge and hardcore learning. He’s the founder of inDepth.dev community and one of the top users on StackOverflow (70k rep).","website":null,"location":"Ukraine","facebook":null,"twitter":"@maxkoretskyi","meta_title":null,"meta_description":null,"url":"https://admin.indepth.dev/author/maxkoretskyi/"}],"tags":[],"primary_author":{"id":"1","name":"Max Koretskyi","slug":"maxkoretskyi","profile_image":"https://images.indepth.dev/images/2022/07/ava.jpg","cover_image":"https://images.indepth.dev/images/2019/07/015100-634_Manta-Ray-2.jpg","bio":"Max is a self-taught software engineer that believes in fundamental knowledge and hardcore learning. He’s the founder of inDepth.dev community and one of the top users on StackOverflow (70k rep).","website":null,"location":"Ukraine","facebook":null,"twitter":"@maxkoretskyi","meta_title":null,"meta_description":null,"url":"https://admin.indepth.dev/author/maxkoretskyi/","_id":1001},"primary_tag":null,"url":"https://admin.indepth.dev/ukraine-and-in-depths-founder-need-your-help/","excerpt":"Over the years inDepth.dev has helped millions of people — YOU CAN HELP us now! Every dollar counts.","reading_time":2,"access":true,"send_email_when_published":false,"og_image":null,"og_title":null,"og_description":null,"twitter_image":null,"twitter_title":null,"twitter_description":null,"meta_title":null,"meta_description":null,"email_subject":null,"frontmatter":null,"_id":1500},{"id":"624ab8d69c34bf7c9fd81797","uuid":"68a70d1d-9de8-432d-a23f-fa614bab1a5c","title":"Why component identifiers must be capitalized in React","slug":"why-component-identifiers-must-be-capitalized-in-react","html":"\u003cp\u003eIn this short article, I’d like to share some findings as to why a component must be used as \u003ccode\u003e\u0026lt;Foo /\u0026gt;\u003c/code\u003e(capitalized), as opposed to \u003ccode\u003e\u0026lt;foo /\u0026gt;\u003c/code\u003e. It may not occur very often(may not even be recommended), but if you import a component like \u003ccode\u003eimport foo from './Foo'\u003c/code\u003e and use it as \u003ccode\u003e\u0026lt;foo /\u0026gt;\u003c/code\u003e, React will not be happy with that:\u003c/p\u003e\u003cfigure class=\"kg-card kg-image-card kg-width-wide\"\u003e\u003cimg src=\"https://images.indepth.dev/images/2022/04/Untitled-1.png\" class=\"kg-image\" alt loading=\"lazy\" width=\"1146\" height=\"123\"\u003e\u003c/figure\u003e\u003cp\u003e\u003cem\u003eYou can quickly see this in action in \u003ca href=\"https://codesandbox.io/s/busy-proskuriakova-npp9gj?file=/src/App.js\"\u003ethis CodeSandbox app\u003c/a\u003e.\u003c/em\u003e\u003c/p\u003e\u003cp\u003eIn other words, \u003ccode\u003e\u0026lt;foo /\u0026gt;\u003c/code\u003e is considered a DOM element and the \u003ccode\u003efoo\u003c/code\u003e DOM element does not actually exist, hence the error. Although the fix is straightforward, another thing sparked my interest: \u003cem\u003ehow exactly is decided that \u003ccode\u003e\u0026lt;Foo /\u0026gt;\u003c/code\u003e should be a component and \u003ccode\u003e\u0026lt;foo /\u0026gt;\u003c/code\u003e a DOM element?\u003c/em\u003e\u003c/p\u003e\u003cp\u003eIn the rest of the article we will briefly talk about the Babel and then we will reveal the answer to that question.\u003c/p\u003e\u003chr\u003e\u003ch2 id=\"how-babel-works-at-a-high-level\"\u003eHow Babel works at a high level\u003c/h2\u003e\u003cp\u003eAs you might know, Babel is the tool responsible, among other things, for converting JSX into syntax which is comprehensible for the browser. It does that through a number of plugins, but the one of interest for now is \u003ccode\u003e[@babel/plugin-transform-react-jsx](https://github.com/babel/babel/tree/main/packages/babel-plugin-transform-react-jsx)\u003c/code\u003e.\u003c/p\u003e\u003cp\u003eHere is a diagram that partially covers the Babel’s compiling process:\u003c/p\u003e\u003cfigure class=\"kg-card kg-image-card\"\u003e\u003cimg src=\"https://images.indepth.dev/images/2022/04/Untitled-1-1.png\" class=\"kg-image\" alt=\"Untitled\" loading=\"lazy\" width=\"382\" height=\"1103\"\u003e\u003c/figure\u003e\u003cp\u003e\u003cem\u003eThe corresponding link for the above diagram can be found \u003ca href=\"https://excalidraw.com/#json=n0ipIimqsZJ1gtZVNiB--,mfHwERMjPGsFDvAbdjVuXw\"\u003ehere\u003c/a\u003e.\u003c/em\u003e\u003c/p\u003e\u003cp\u003eSo, Babel will take the initial source code as a raw string and then it will build the corresponding AST which all sorts of plugins will be applied on. For example, here we can see the plugin we mentioned earlier, \u003ccode\u003etransform-react-jsx\u003c/code\u003e:\u003c/p\u003e\u003cfigure class=\"kg-card kg-image-card kg-width-wide\"\u003e\u003cimg src=\"https://images.indepth.dev/images/2022/04/Untitled-2.png\" class=\"kg-image\" alt=\"Untitled\" loading=\"lazy\" width=\"1866\" height=\"1057\"\u003e\u003c/figure\u003e\u003cp\u003eIn the image above, the \u003ccode\u003etransformFile\u003c/code\u003e function refers to the \u003cstrong\u003esecond phase\u003c/strong\u003e of the previous diagram - it’s where all the selected plugins are applied on the \u003cem\u003eraw\u003c/em\u003e AST.\u003c/p\u003e\u003cp\u003eThe way the \u003ccode\u003etransform-react-jsx\u003c/code\u003e plugin works is that it comes with some \u003cstrong\u003efunctions\u003c/strong\u003e to be invoked when \u003cstrong\u003ecertain AST nodes are visited\u003c/strong\u003e. For example, here is what happens when a \u003ccode\u003eJSXElement\u003c/code\u003e node has been visited:\u003c/p\u003e\u003cfigure class=\"kg-card kg-image-card kg-width-wide\"\u003e\u003cimg src=\"https://images.indepth.dev/images/2022/04/Untitled-3.png\" class=\"kg-image\" alt=\"Untitled\" loading=\"lazy\" width=\"1386\" height=\"978\"\u003e\u003c/figure\u003e\u003cblockquote\u003eThe \u003ccode\u003eexit\u003c/code\u003e function can be thought of as a \u003cem\u003evisiting hook.\u003c/em\u003e Its complement is the \u003ccode\u003eenter\u003c/code\u003e function, which is called when a node is about to be visited. After \u003ccode\u003eenter\u003c/code\u003e, the current AST node’s children are visited and, after that, the \u003ccode\u003eexit\u003c/code\u003e function is called for that node. To put it another way: \u003ccode\u003eNode.enter()\u003c/code\u003e → visited children → \u003ccode\u003eNode.exit()\u003c/code\u003e.\u003c/blockquote\u003e\u003cp\u003eIn the image above, we are at the \u003ccode\u003e\u0026lt;Foo /\u0026gt;\u003c/code\u003e part. As you can notice, the \u003ccode\u003eJSXElement\u003c/code\u003e has an \u003ccode\u003eJSXOpeningElement\u003c/code\u003e which, for its part, has a name(i.e. \u003ccode\u003eJSXIdentifier\u003c/code\u003e). What also happens \u003cstrong\u003eat this step\u003c/strong\u003e is to decide what really \u003ccode\u003eFoo\u003c/code\u003e refers to - \u003cem\u003edoes it refer to a \u003cstrong\u003ecomponent\u003c/strong\u003e or just another \u003cstrong\u003eDOM element\u003c/strong\u003e?\u003c/em\u003e This decision has to be made because in JSX we can write \u003ccode\u003e\u0026lt;div\u0026gt;\u0026lt;/div\u0026gt;\u003c/code\u003e, as well \u003ccode\u003e\u0026lt;CustomComponent\u0026gt;\u0026lt;/CustomComponent\u0026gt;\u003c/code\u003e - at some point, Babel has to choose what actually a \u003ccode\u003eJSXElement\u003c/code\u003e is and, later on, React will \u003cem\u003ereact\u003c/em\u003e accordingly.\u003c/p\u003e\u003cp\u003eCalling \u003ccode\u003eJSXElement.exit()\u003c/code\u003e will eventually lead to calling the \u003ccode\u003egetTag\u003c/code\u003e function, which is the place where the question stated at the beginning finds its answer:\u003c/p\u003e\u003cfigure class=\"kg-card kg-image-card kg-width-wide\"\u003e\u003cimg src=\"https://images.indepth.dev/images/2022/04/Untitled-4.png\" class=\"kg-image\" alt=\"Untitled\" loading=\"lazy\" width=\"1866\" height=\"1057\"\u003e\u003c/figure\u003e\u003cp\u003eThe \u003ccode\u003egetTag\u003c/code\u003e function will return a \u003cstrong\u003estring literal\u003c/strong\u003e(e.g. \u003ccode\u003e“div”\u003c/code\u003e, \u003ccode\u003e“foo”\u003c/code\u003e if used as \u003ccode\u003e\u0026lt;foo /\u0026gt;\u003c/code\u003e) if the \u003ccode\u003etagName\u003c/code\u003e starts with a lowercase letter(i.e. \u003ccode\u003e/^[a-z]/\u003c/code\u003e). So, if \u003ccode\u003e\u0026lt;Foo /\u0026gt;\u003c/code\u003e is used, the result will be:\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"language-jsx\"\u003e{\n  type: \"Identifier\",\n  start: 165,\n  end: 168,\n  name: \"Foo\",\n  /* ... */\n}\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eand, on the other hand, if \u003ccode\u003e\u0026lt;foo /\u0026gt;\u003c/code\u003e is used:\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"language-jsx\"\u003e{\n\ttype: \"StringLiteral\",\n\tvalue: 'foo',\n}\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eThe fundamental difference between an \u003ccode\u003eIdentifier\u003c/code\u003e and a \u003ccode\u003eStringLiteral\u003c/code\u003e is that the former will end up in \u003ccode\u003ecreateElement(componentName)\u003c/code\u003e and the latter in \u003ccode\u003ecreateElement('componentName')\u003c/code\u003e(take note of the quotes). React will then choose different paths \u003cstrong\u003edepending on the element’s type.\u003c/strong\u003e\u003c/p\u003e\u003chr\u003e\u003ch2 id=\"conclusion\"\u003eConclusion\u003c/h2\u003e\u003cp\u003eBefore starting to explore some of the things that Babel does under the hood, I had expected that there must be a check somewhere that indicates whether \u003ccode\u003eJSXElement\u003c/code\u003e actually refers to a component identifier or not, but I had not idea where that check was located.\u003c/p\u003e\u003cp\u003eIn the end, the answer to my question turned out to be the \u003ccode\u003eisCompatTag\u003c/code\u003e function. Even if I had known this beforehand, I would’ve needed some more context about that function - so, exploring a bit how Babel works not only made things more clearer to me, but also exposed me to other interesting aspects of the entire compiling process(which I will hopefully write about in the future).\u003c/p\u003e\u003cp\u003e\u003cstrong\u003eThanks for reading!\u003c/strong\u003e\u003c/p\u003e","comment_id":"624ab8d69c34bf7c9fd81797","feature_image":"https://images.indepth.dev/images/2022/04/Why-component-identifiers-must-be-capitalized-in-React.jpg","featured":false,"visibility":"public","created_at":"2022-04-04T12:22:30.000+03:00","updated_at":"2022-04-07T12:28:50.000+03:00","published_at":"2022-04-07T12:12:05.000+03:00","custom_excerpt":"In this article, we will investigate why component identifiers must be capitalized in React","codeinjection_head":"{\"community_link\":\"https://github.com/indepth-dev/community/discussions/262\"}","codeinjection_foot":null,"custom_template":null,"canonical_url":null,"email_recipient_filter":"none","authors":[{"id":"5e260ca7b2bc9211f8af8e08","name":"Andrei Gatej","slug":"andreigatej","profile_image":"https://images.indepth.dev/images/2022/12/me3.jpg","cover_image":null,"bio":"A curious software developer with a passion for solving problems and learning new things.","website":"https://andreigatej.dev/","location":"Romania","facebook":null,"twitter":"@anduser96","meta_title":null,"meta_description":null,"url":"https://admin.indepth.dev/author/andreigatej/"}],"tags":[{"id":"5d403a5b679ce6202b744977","name":"react","slug":"react","description":"React (also known as React.js or ReactJS) is a JavaScript library for building user interfaces. It uses a declarative paradigm and aims to be both efficient and flexible.","feature_image":null,"visibility":"public","meta_title":null,"meta_description":null,"og_image":null,"og_title":null,"og_description":null,"twitter_image":null,"twitter_title":null,"twitter_description":null,"codeinjection_head":null,"codeinjection_foot":null,"canonical_url":null,"accent_color":null,"url":"https://admin.indepth.dev/tag/react/"},{"id":"613cd51f17e466f35de2c859","name":"DOM","slug":"dom","description":null,"feature_image":null,"visibility":"public","meta_title":null,"meta_description":null,"og_image":null,"og_title":null,"og_description":null,"twitter_image":null,"twitter_title":null,"twitter_description":null,"codeinjection_head":null,"codeinjection_foot":null,"canonical_url":null,"accent_color":null,"url":"https://admin.indepth.dev/tag/dom/"},{"id":"622f73459c34bf7c9fd81786","name":"HTML","slug":"html","description":null,"feature_image":null,"visibility":"public","meta_title":null,"meta_description":null,"og_image":null,"og_title":null,"og_description":null,"twitter_image":null,"twitter_title":null,"twitter_description":null,"codeinjection_head":null,"codeinjection_foot":null,"canonical_url":null,"accent_color":null,"url":"https://admin.indepth.dev/tag/html/"}],"primary_author":{"id":"5e260ca7b2bc9211f8af8e08","name":"Andrei Gatej","slug":"andreigatej","profile_image":"https://images.indepth.dev/images/2022/12/me3.jpg","cover_image":null,"bio":"A curious software developer with a passion for solving problems and learning new things.","website":"https://andreigatej.dev/","location":"Romania","facebook":null,"twitter":"@anduser96","meta_title":null,"meta_description":null,"url":"https://admin.indepth.dev/author/andreigatej/","_id":1024},"primary_tag":{"id":"5d403a5b679ce6202b744977","name":"react","slug":"react","description":"React (also known as React.js or ReactJS) is a JavaScript library for building user interfaces. It uses a declarative paradigm and aims to be both efficient and flexible.","feature_image":null,"visibility":"public","meta_title":null,"meta_description":null,"og_image":null,"og_title":null,"og_description":null,"twitter_image":null,"twitter_title":null,"twitter_description":null,"codeinjection_head":null,"codeinjection_foot":null,"canonical_url":null,"accent_color":null,"url":"https://admin.indepth.dev/tag/react/"},"url":"https://admin.indepth.dev/why-component-identifiers-must-be-capitalized-in-react/","excerpt":"In this article, we will investigate why component identifiers must be capitalized in React","reading_time":4,"access":true,"send_email_when_published":false,"og_image":null,"og_title":null,"og_description":null,"twitter_image":"https://images.indepth.dev/images/2022/04/Why-component-identifiers-must-be-capitalized-in-React2.jpg","twitter_title":null,"twitter_description":null,"meta_title":null,"meta_description":null,"email_subject":null,"frontmatter":null,"_id":1499},{"id":"621ec75c9c34bf7c9fd816e7","uuid":"c86a9c03-8ec9-4f7a-a11a-775f1a1bd58c","title":"101 Javascript Critical Rendering Path","slug":"101-javascript-critical-rendering-path","html":"\u003cblockquote\u003eBy definition, \u003cstrong\u003eCritical Rendering Path \u003c/strong\u003eis nothing but a collection of steps that make a path between the time your browser gets an HTML page and starts building the webpage for users to visualize. During this process, you need to optimize the steps your browser does. \u003cbr\u003e\u003c/blockquote\u003e\u003ch3 id=\"the-document-object-model\"\u003e\u003cstrong\u003eThe Document Object Model\u003c/strong\u003e\u003c/h3\u003e\u003cp\u003eFirst things first, every webpage has a \u003cstrong\u003eDocument Object Model\u003c/strong\u003e or a DOM. This is an object-based representation of the entire HTML page, which is in the parsed state. Once the HTML is parsed, a DOM tree is built. The DOM Tree contains objects. \u003cbr\u003eLet’s begin our discussion with a simple piece of HTML Code. The code below has three parts: a header, main section, and a footer. This could be the simplest piece of HTML you can render in your browser. The stylesheet: \u003cem\u003e“style.css”\u003c/em\u003e is an external file loaded for formatting the HTML page.\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"language-typescript\"\u003e\u0026lt;html\u0026gt;\n  \u0026lt;head\u0026gt;\n  \u0026lt;link rel=\"stylesheet\" href=\"style.css\"\u0026gt;\n  \u0026lt;title\u0026gt;101 Javascript Critical Rendering Path\u0026lt;/title\u0026gt;\n  \u0026lt;body\u0026gt;\n    \u0026lt;header\u0026gt;\n      \u0026lt;h1\u0026gt;The Rendering Path\u0026lt;/h1\u0026gt;\n      \u0026lt;p\u0026gt;Every step during the rendering of a HTML page, forms the path.\u0026lt;/p\u0026gt;\n    \u0026lt;/header\u0026gt;\n    \u0026lt;main\u0026gt;\n         \u0026lt;h1\u0026gt;You need a dom tree\u0026lt;/h1\u0026gt;\n         \u0026lt;p\u0026gt;Have you ever come across the concepts behind a DOM Tree?\u0026lt;/p\u0026gt;\n    \u0026lt;/main\u0026gt;\n    \u0026lt;footer\u0026gt;\n         \u0026lt;small\u0026gt;Thank you for reading!\u0026lt;/small\u0026gt;\n    \u0026lt;/footer\u0026gt;\n  \u0026lt;/body\u0026gt; \n  \u0026lt;/head\u0026gt;\n\u0026lt;/html\u0026gt;\u003c/code\u003e\u003c/pre\u003e\u003cp\u003e\u003cbr\u003eWhen the above HTML code is parsed by the browser into a DOM Tree Structure, it would appear like this.\u003c/p\u003e\u003cfigure class=\"kg-card kg-image-card\"\u003e\u003cimg src=\"https://images.indepth.dev/images/2022/03/Screenshot-2022-03-02-at-7.11.11-AM.png\" class=\"kg-image\" alt loading=\"lazy\" width=\"1649\" height=\"815\"\u003e\u003c/figure\u003e\u003cp\u003eEvery browser takes some time to parse the above HTML. Clean semantic markup helps in reducing the time required for the browser to parse the HTML. \u003c/p\u003e\u003ch3 id=\"cssom-tree\"\u003e\u003cstrong\u003eCSSOM Tree\u003c/strong\u003e\u003c/h3\u003e\u003cp\u003eNext would be the CSSOM tree. This is nothing but the \u003cstrong\u003eCSS Object Model.\u003c/strong\u003e Once again, the CSS Object Model is an object-based tree. It takes care of the styles which are present in association with the DOM tree. In general, CSS Styles can be inherited or declared explicitly. \u003c/p\u003e\u003cpre\u003e\u003ccode class=\"language-typescript\"\u003eheader{\n   background-color: white;\n   color: black;\n}\np{\n   font-weight:400;\n}\nh1{\n   font-size:72px;\n}\nsmall{\n   text-align:left\n}\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eFor the above CSS declaration, your CSSOM tree will appear as follows.\u003c/p\u003e\u003cfigure class=\"kg-card kg-image-card\"\u003e\u003cimg src=\"https://images.indepth.dev/images/2022/03/Screenshot-2022-03-02-at-7.11.25-AM.png\" class=\"kg-image\" alt loading=\"lazy\" width=\"1635\" height=\"838\"\u003e\u003c/figure\u003e\u003cp\u003eOn a general note, the CSS is considered as a render-blocking resource. \u003cbr\u003e\u003cstrong\u003eWhat is Render-Blocking?\u003c/strong\u003e Rendering Blocking resource is a component that would not allow the browser to render the entire DOM tree until the given resource is completely loaded. CSS is a rendering blocking resource because you cannot render the tree until the CSS is loaded fully. In the beginning, CSS was served from a single source. Now, developers have come up with different techniques where the CSS files are split and only critical styles are served at an early stage of rendering. \u003c/p\u003e\u003ch3 id=\"executing-javascript\"\u003eExecuting JavaScript\u003c/h3\u003e\u003cp\u003eMoving on, JavaScript is a language used to manipulate the Document Object Model. We may think about different use cases, such as a popup, or a carousel that interacts with the DOM. The problem is when these interactions start to take time and reduce the overall loading time of your website. That is why JavaScript code is known as the “\u003cstrong\u003eParser Blocking\u003c/strong\u003e” Resource. \u003c/p\u003e\u003cp\u003e\u003cstrong\u003eWhat is Parser Blocking?\u003c/strong\u003e The browser pauses execution and the construction of the DOM tree when JavaScript code needs to be downloaded, and executed. The moment the JavaScript code is executed, the construction of the DOM tree continues. \u003c/p\u003e\u003cp\u003e\u003cstrong\u003e“This is why JavaScript is an expensive resource”\u003c/strong\u003e\u003c/p\u003e\u003ch3 id=\"let%E2%80%99s-work-on-some-real-time-examples\"\u003e\u003cstrong\u003eLet’s work on some real-time examples\u003c/strong\u003e\u003cbr\u003e\u003c/h3\u003e\u003cp\u003eHere is the demo of a simple piece of HTML code, which displays some text and an image. As you can see, the entire page took only around 40ms to be displayed. Even with an image, the time taken for the page to be displayed was less. This is because images are not treated as critical resources, when it comes to making the first paint. Remember, the critical rendering path is all about HTML, CSS and Javascript. Even though we must try and get the images displayed as quickly as possible, they are not going to block the initial rendering. \u003c/p\u003e\u003cfigure class=\"kg-card kg-image-card\"\u003e\u003cimg src=\"https://images.indepth.dev/images/2022/03/Screenshot-2022-03-02-at-7.11.38-AM.png\" class=\"kg-image\" alt loading=\"lazy\" width=\"1721\" height=\"631\"\u003e\u003c/figure\u003e\u003cp\u003eNow, let’s add css to the piece of code.\u003cbr\u003eAs you can see, an extra request is being fired. Even though the time taken for the html file to load is less, the overall time for processing and displaying the page has increased by nearly 10 times. Why?\u003c/p\u003e\u003col\u003e\u003cli\u003ePlain HTML doesn’t involve much fetching and parsing. But, with a CSS file, a CSSOM (as given above) has to be constructed. Both the HTML DOM and the CSS CSSOM have to be built. This is definitely a time consuming process.\u003c/li\u003e\u003cli\u003eAlso, if the script contains JavaScript, the domContentLoaded event will not be fired. Mainly because there is a good chance that the JavaScript would query the CSSOM. This means, the CSS file has to be completely downloaded and parsed, before the execution of any JavaScript. \u003c/li\u003e\u003c/ol\u003e\u003cp\u003e\u003cstrong\u003eNote: domContentLoaded\u003c/strong\u003e is fired when a HTML DOM is completely parsed, and loaded. The event does not wait for images, subframes or even stylesheets to be completely loaded. The only target is for the Document to be loaded. It is possible to add events in the window interface, to see if the DOM is parsed, and loaded or not. Your event listener will be as follows:\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"language-typescript\"\u003ewindow.addEventListener('DOMContentLoaded', (event) =\u0026gt; {\n    console.log('DOM Content Loaded Event');\n});\u003c/code\u003e\u003c/pre\u003e\u003col\u003e\u003cli\u003eEven if you choose to replace the external JavaScript file with an inline script, performance would not change drastically. Mainly because the CSSOM needs to be constructed. If you are considering external scripts, we have a proposed solution. That would be to add \u003cstrong\u003e“async”. \u003c/strong\u003eThis will unblock the parser. More details about async are given later.\u003c/li\u003e\u003c/ol\u003e\u003cfigure class=\"kg-card kg-image-card\"\u003e\u003cimg src=\"https://lh4.googleusercontent.com/E19Xr2JHTrAwEfY-ntkf0x_Z6aGPcquWjRJVIS1ARxOr3svStVqIRzSb3z-ubBCrtrj4pZXEZZQix1RKq1P2c2HMkSNdTRQA0Dq6CpCnMPgFmK_JYOanLd5cGO4Z1qhrhxn7-mCh\" class=\"kg-image\" alt loading=\"lazy\"\u003e\u003c/figure\u003e\u003ch3 id=\"let%E2%80%99s-get-the-terms-right\"\u003e\u003cstrong\u003eLet’s get the Terms Right!\u003c/strong\u003e\u003c/h3\u003e\u003cp\u003eBefore we solve the issue, let’s learn the right terms for describing the Critical Rendering Path.\u003c/p\u003e\u003col\u003e\u003cli\u003e\u003cstrong\u003eCritical Resource\u003c/strong\u003e: All resources which can block the rendering of the page.\u003c/li\u003e\u003cli\u003e\u003cstrong\u003eCritical Path Length\u003c/strong\u003e: Total number of round trips, required to fetch all the critical resources required for building the page.\u003c/li\u003e\u003cli\u003e\u003cstrong\u003eCritical Bytes\u003c/strong\u003e: Total number of bytes transferred as a part of completing and building the page. \u003c/li\u003e\u003c/ol\u003e\u003cp\u003eIn our first example, with a plain HTML script, the above fields would be:\u003c/p\u003e\u003cul\u003e\u003cli\u003e1 Critical Resource\u003c/li\u003e\u003cli\u003e1 Round Trip\u003c/li\u003e\u003cli\u003e192 Bytes of data\u003c/li\u003e\u003c/ul\u003e\u003cp\u003eIn our second example, a plain HTML and external CSS script, the values would be:\u003c/p\u003e\u003cul\u003e\u003cli\u003e2 Critical Resources\u003c/li\u003e\u003cli\u003e2 Round Trip\u003c/li\u003e\u003cli\u003e400 Bytes of data.\u003c/li\u003e\u003c/ul\u003e\u003cp\u003eIf you wish to optimize the Critical Rendering Path in any framework, or plain HTML+CSS+Javascript code, you need to work on the above metrics  and improve them. \u003c/p\u003e\u003cul\u003e\u003cli\u003eIt is crucial to have as few critical resources as possible. This will impose less work on the CPU, and browser.\u003c/li\u003e\u003cli\u003eNext, the dependency between the time taken to download, and the size of the resource is unbreakable. If the resource is big, the critical path length will increase. There will be a bigger number of roundtrips to fetch the resource.\u003c/li\u003e\u003cli\u003eLast but certainly not the least, the critical bytes have to be lessor. If possible the bytes to be downloaded has to be converted to a non-critical resource or completely omitted. But, if the bytes should be downloaded as a part of the critical, blocking resource - you need to optimize the transfer by compressing. \u003c/li\u003e\u003c/ul\u003e\u003ch3 id=\"how-to-cut-down-on-render-blocking-resources-css\"\u003e\u003cstrong\u003eHow to Cut Down on Render-Blocking Resources CSS?\u003c/strong\u003e\u003cbr\u003e\u003c/h3\u003e\u003cp\u003eIn any webpage, there will be content before the initial scroll point (fold) and after the scroll point. Content that comes before the fold should be carefully mapped. Make sure that the styles of any content before the fold are loaded. These are critical styles. The rest of the styles can load later on. By doing so, you can boost the speed of your web page. Also, you can get rid of unnecessary render-blocking styles. \u003c/p\u003e\u003cp\u003eLet’s understand Render-Blocking Resources, with a real time example. And, how small changes can make your code much better.\u003c/p\u003e\u003ch3 id=\"how-to-cut-down-on-parser-blocking-resources\"\u003e\u003cstrong\u003eHow to Cut Down on Parser Blocking Resources?\u003c/strong\u003e\u003c/h3\u003e\u003ch3 id=\"lazy-loading\"\u003e\u003cstrong\u003eLazy Loading\u003c/strong\u003e\u003c/h3\u003e\u003cp\u003eThe key to loading would be “Lazy Loading”. Websites like Amazon and Facebook have so much content. How do they load? As you scroll, the content gets loaded and it does not feel sluggish. This is because they make use of a concept called Lazy Loading. Any media, CSS, JavaScript, Images, and even HTML can be loaded lazily. The amount of content loaded into the page, at a time will be limited. This will improve your Critical Rendering Path Score.\u003c/p\u003e\u003col\u003e\u003cli\u003eImagine you have an overlay on your page.\u003c/li\u003e\u003cli\u003eDon’t load the CSS, JavaScript, and HTML of this overlay while loading the page.\u003c/li\u003e\u003cli\u003eInstead, add an event listener to a button, and load the script only when the user clicks the button.\u003c/li\u003e\u003cli\u003eUse a Webpack to accomplish this feature.\u003c/li\u003e\u003c/ol\u003e\u003cp\u003eHere are a few techniques for implementing Lazy Loading, in Pure JavaScript.\u003c/p\u003e\u003cp\u003eLet’s begin with images, and iFrames. How would you lazy load images which are non-critical? Or, how would you load images that need to be shown only after a user interaction? In these cases, we can make use of the default \u003cstrong\u003eloading \u003c/strong\u003eattribute that comes with the \u0026lt;img\u0026gt; and \u0026lt;iframe\u0026gt; tag. When the browser sees this tag, it defers the loading of the iframe, and image. Your syntax for achieving this behavior is as follows:\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"language-typescript\"\u003e\u0026lt;img src=\"image.png\" loading=\"lazy\"\u0026gt;\n\u0026lt;iframe src=\"tutorial.html\" loading=\"lazy\"\u0026gt;\u0026lt;/iframe\u0026gt;\u003c/code\u003e\u003c/pre\u003e\u003cp\u003e\u003cstrong\u003eNote: \u003c/strong\u003eLazy loading with \u003cstrong\u003eloading=lazy\u003c/strong\u003e should not be used on images within the first visible viewport. It must be applied only to images after the fold. \u003c/p\u003e\u003cp\u003eIn browsers where you cannot leverage loading=lazy, you can use \u003cstrong\u003eIntersectionObserver\u003c/strong\u003e. This is an interface which allows you to make use of the Intersection Observer API. This API sets a root, and configures ratios for every element’s visibility from the root. When an element is visible in the viewport, it gets loaded. Below is a simple code snippet to help you understand this API.\u003c/p\u003e\u003col\u003e\u003cli\u003eWe observe all elements which have the class “.lazy”.\u003c/li\u003e\u003cli\u003eWhen elements with class “.lazy” are on the viewport, the intersection ratio drops above zero. If the Intersection Ratio is zero or below zero, the target is not within view. And, nothing needs to be done.\u003c/li\u003e\u003cli\u003eNow, a predefined set of operations will be carried out on these elements. \u003c/li\u003e\u003c/ol\u003e\u003cpre\u003e\u003ccode class=\"language-typescript\"\u003evar intersectionObserver = new IntersectionObserver(function(entries) {\n  if (entries[0].intersectionRatio \u0026lt;= 0) return;\n\n  //intersection ratio is above zero\n  console.log('Loading Lazy Items');\n});\n// start observing\nintersectionObserver.observe(document.querySelector('.lazy));\u003c/code\u003e\u003c/pre\u003e\u003cp\u003e\u003cstrong\u003eAsync, Defer, Preload\u003c/strong\u003e\u003cbr\u003e\u003cstrong\u003eNote\u003c/strong\u003e: Async, and Defer are attributes to be used on external scripts. \u003c/p\u003e\u003cp\u003eWhen you use \u003cstrong\u003eAsync\u003c/strong\u003e, you will be allowing the browser to do something else, while a JavaScript resource gets downloaded. The downloaded JavaScript resource will be executed, as soon as the download is completed.\u003c/p\u003e\u003col\u003e\u003cli\u003eJavaScript is asynchronously downloaded.\u003c/li\u003e\u003cli\u003eExecution of All Other scripts will be paused.\u003c/li\u003e\u003cli\u003eDOM rendering will happen simultaneously.\u003c/li\u003e\u003cli\u003eDOM rendering will pause only when the script is executed.\u003c/li\u003e\u003cli\u003eRender blocking JavaScript issues can be solved using the \u003cstrong\u003easync\u003c/strong\u003e attribute.\u003c/li\u003e\u003c/ol\u003e\u003cp\u003e\u003cstrong\u003e“If a resource is not important, don’t even use async, omit it completely”\u003c/strong\u003e\u003c/p\u003e\u003cfigure class=\"kg-card kg-image-card\"\u003e\u003cimg src=\"https://images.indepth.dev/images/2022/03/Screenshot-2022-03-02-at-7.11.54-AM.png\" class=\"kg-image\" alt loading=\"lazy\" width=\"1221\" height=\"238\"\u003e\u003c/figure\u003e\u003cp\u003eExample:\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"language-typescript\"\u003e\u0026lt;p\u0026gt;...content before scripts...\u0026lt;/p\u0026gt;\n\n\u0026lt;script\u0026gt;\n  document.addEventListener('DOMContentLoaded', () =\u0026gt; alert(\"DOM ready!\"));\n\u0026lt;/script\u0026gt;\n\n\u0026lt;script async src=\"\"\u0026gt;\u0026lt;/script\u0026gt;\n\n\u0026lt;!-- will be visible after the above script is completely executed –\u0026gt;\n\u0026lt;p\u0026gt;...content after scripts...\u0026lt;/p\u0026gt;\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eWhen you use \u003cstrong\u003eDefer, \u003c/strong\u003ethe JavaScript resource will be downloaded while the HTML rendering happens. However, the execution would not happen as soon as the script is downloaded. Instead, it waits for the HTML file to be completely rendered.\u003c/p\u003e\u003col\u003e\u003cli\u003eDefer goes a step beyond async\u003c/li\u003e\u003cli\u003eExecution of script happens only after rendering is done.\u003c/li\u003e\u003cli\u003eDefer can make your JavaScript resource absolutely non-render-blocking\u003c/li\u003e\u003c/ol\u003e\u003cfigure class=\"kg-card kg-image-card\"\u003e\u003cimg src=\"https://images.indepth.dev/images/2022/03/Screenshot-2022-03-02-at-7.12.08-AM.png\" class=\"kg-image\" alt loading=\"lazy\" width=\"1240\" height=\"225\"\u003e\u003c/figure\u003e\u003cp\u003eExample:\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"language-typescript\"\u003e\u0026lt;p\u0026gt;...content before script...\u0026lt;/p\u0026gt;\n\n\u0026lt;script defer src=\"\"\u0026gt;\u0026lt;/script\u0026gt;\n\n\u0026lt;!-- this content will be visible immediately --\u0026gt;\n\u0026lt;p\u0026gt;...content after script...\u0026lt;/p\u0026gt;\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eWhen you use \u003cstrong\u003ePreload\u003c/strong\u003e, it is used on files that are not found in the HTML file, but while rendering or parsing a JavaScript or CSS file. With Preload, the browser would download the resource and execution will happen the moment the resource is available.\u003c/p\u003e\u003cul\u003e\u003cli\u003eUse Preload wisely. The browser will download the files, even if it is unnecessary on your page.\u003c/li\u003e\u003cli\u003eToo many preloads will bring down the speed of your page.\u003c/li\u003e\u003cli\u003eThe inherent priority of using Preload will be affected when there are too many preloaded files.\u003c/li\u003e\u003cli\u003eOnly Preload files that are required above the fold contents. This will boost your Google PageSpeed Insight Score.\u003c/li\u003e\u003cli\u003eOnly Preload files would be discovered when another file is rendered. For example, you add a link to a font face inside a CSS file. The need for the new font face would not be known until the CSS file is parsed. If the font face was downloaded before, it will boost your site speed.\u003c/li\u003e\u003cli\u003ePreload is used only with the \u0026lt;Link\u0026gt; tag.\u003c/li\u003e\u003c/ul\u003e\u003cpre\u003e\u003ccode class=\"language-typescript\"\u003eExamples of Preload\n\u0026lt;link rel=\"preload\" href=\"style.css\" as=\"style\"\u0026gt;\n\u0026lt;link rel=\"preload\" href=\"main.js\" as=\"script\"\u0026gt;\u003c/code\u003e\u003c/pre\u003e\u003cp\u003e\u003cstrong\u003eWrite Vanilla JS, avoid 3rd party scripts\u003c/strong\u003e\u003cbr\u003eVanilla JS translates to Performance and Accessibility. For a given use case, you don’t need to do everything a 3rd party solution does. The libraries often solve a bunch of problems. Relying on heavy libraries to solve simple problems will cause a performance dent in your code. \u003cbr\u003eA survey done by the WebAIM team figured that nearly a million top websites have frameworks with serious accessibility issues. If you care about your users, go ahead and write in Vanilla JS.\u003c/p\u003e\u003cp\u003e\u003cstrong\u003eThe ask is not to avoid frameworks and write 100% fresh code. The ask is to use helper functions and small-sized plugins.\u003c/strong\u003e\u003c/p\u003e\u003ch2 id=\"caching-and-expiring-content\"\u003eCaching, and Expiring Content\u003c/h2\u003e\u003cp\u003e\u003cbr\u003eIf assets are used over and over again on your page, it would kill to load them all the time. It is similar to loading the site every time. Caching will help in preventing this cycle. Give expiry data to the content in their headers. Clear the cache and load again, only when they expire. \u003c/p\u003e\u003cp\u003eIn order to achieve caching in any piece of Frontend Code, the browser looks for four important header attributes in the HTTP Response:\u003c/p\u003e\u003col\u003e\u003cli\u003eETag\u003c/li\u003e\u003cli\u003eCache-Control\u003c/li\u003e\u003cli\u003eLast-Modified\u003c/li\u003e\u003cli\u003eExpires\u003c/li\u003e\u003c/ol\u003e\u003cp\u003e\u003cstrong\u003eEtag \u003c/strong\u003eis also known as the Entity Tag. This is nothing but a string which validates the cache token. This token can be used by the browser to decide if the request can be satisfied with a copy in the cache or not. If the resource has not changed, the server will return the same hash token. And, the body will be empty. This is when you see the Response Code \u003cstrong\u003e304. \u003c/strong\u003eIn case the resource has expired, the body will be populated with the most recent data.\u003c/p\u003e\u003cp\u003e\u003cstrong\u003eCache Control \u003c/strong\u003eallows your application to decide the browser’s caching policy for a given Request. You can choose from four different options: \u003cstrong\u003eno-cache, no-store, private or public. \u003c/strong\u003e\u003c/p\u003e\u003cp\u003e\u003cstrong\u003eLast Modified \u003c/strong\u003eis quite similar to ETag, but it depends on the Last-Modified Header of the request. The date, and time of modification helps the client decide if a new request needs to be raised or not.\u003c/p\u003e\u003cp\u003e\u003cstrong\u003eExpires \u003c/strong\u003eis one of the widely used tags for deciding the validity of data. Always, your application should use data that has not expired. If the header field has an expiration date which is reached, then you can consider the resource as invalid. \u003c/p\u003e\u003cp\u003eIn pure JavaScript, you have the freedom to make use of service workers to decide if data needs to be loaded or not. For instance, I have two files: styles.css and script.js. I need to load these files, and I can use a \u003cstrong\u003eservice worker\u003c/strong\u003e to decide if the resources have to be freshly loaded, or a cache can be used. \u003cem\u003eIn the next few days, we have a bigger and a more in-depth post about Progressive Web Pages and Service Workers (stay tuned).\u003c/em\u003e\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"language-typescript\"\u003e/*Install gets executed when the user launches the single page application for *the first time\n*/\n\nself.addEventListener('install', function(event) {\n  event.waitUntil(\n    caches.open(cacheName).then(function(cache) {\n      return cache.addAll(\n        [\n          'styles.css',\n          'script.js'\n        ]\n      );\n    })\n  );\n});\n\n//When a user performs an operation\ndocument.querySelector('.lazy').addEventListener('click', function(event) {\n  event.preventDefault();\n  caches.open('lazy_posts’).then(function(cache) {\n    fetch('/get-article’).then(function(response) {\n      return response;\n    }).then(function(urls) {\n      cache.addAll(urls);\n    });\n  });\n});\n\n//When there is a network response\nself.addEventListener('fetch', function(event) {\n  event.respondWith(\n    caches.open('lazy_posts').then(function(cache) {\n      return cache.match(event.request).then(function (response) {\n        return response \n      });\n    })\n  );\n});\n\u003c/code\u003e\u003c/pre\u003e\u003ch2 id=\"let%E2%80%99s-talk-in-terms-of-react\"\u003eLet’s Talk, in terms of React!\u003c/h2\u003e\u003cp\u003ePhew, so much theory! But, glad you reached here. If you have read so far, you would be aware of what critical rendering path is, and why your code plays a major role in the performance of your web application. In the next section, we are going to read about how to handle performance, and make the critical rendering path as short as possible. The framework of choice in our upcoming examples is \u003cstrong\u003eReact\u003c/strong\u003e. The optimization techniques are broken into two stages. One, before the application gets loaded. And, Stage two is for those who want to optimize after the application has loaded.\u003c/p\u003e\u003ch3 id=\"stage-one\"\u003e\u003cstrong\u003eStage One\u003c/strong\u003e\u003c/h3\u003e\u003cp\u003eLet’s build a simple application with a:\u003c/p\u003e\u003col\u003e\u003cli\u003eHeader\u003c/li\u003e\u003cli\u003eSidebar\u003c/li\u003e\u003cli\u003eFooter\u003c/li\u003e\u003c/ol\u003e\u003cp\u003eIn our application, only when the user is logged in, should the sidebar be seen. \u003cstrong\u003eWebpack\u003c/strong\u003e is a great tool that can help with code splitting. If we have enabled \u003cstrong\u003ecode splitting\u003c/strong\u003e, we can make use of \u003cstrong\u003eReact Lazy\u003c/strong\u003e \u003cstrong\u003eloading\u003c/strong\u003e right from App.js or from the Route component. \u003c/p\u003e\u003cp\u003eSo, what is lazy loading? This is a practice where we break our code into logical pieces. The logical pieces are loaded only when the application needs it. As a result, the overall weight of the code remains less. \u003c/p\u003e\u003cp\u003eFor instance, if the Sidebar component has to be loaded only if the user logs in, we have a couple of ways for improving the performance of our application. To begin with, we can inject the concept of lazy loading into our Routes. As seen below, the code is broken into three logical chunks. Each chunk will be loaded only when the user chooses a specific route. This means, our DOM does not have to consider Sidarbar code as a part of its “\u003cstrong\u003eCritical Bytes\u003c/strong\u003e” during the initial paint. Likewise, we can achieve lazy loading from the parent App.js as well. The choice depends on the developer, and their use case. Yet, let’s see how Lazy Loading is achieved from the parent component:\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"language-typescript\"\u003ewebpack-demo\n|- package.json\n|- package-lock.json\n|- webpack.config.js\n|- /dist\n|- /src\n |- index.js\n |- Header.js\n |- Sidebar.js\n |- Footer.js\n |- loader.js\n |- route.js\n|- /node_modules\u003c/code\u003e\u003c/pre\u003e\u003cpre\u003e\u003ccode class=\"language-typescript\"\u003eimport { Switch, browserHistory, BrowserRouter as Router, Route} from 'react-router-dom';\nconst Header = React.lazy( () =\u0026gt; import('Header'));\nconst Footer = React.lazy( () =\u0026gt; import(Footer));\nconst Sidebar = React.lazy( () =\u0026gt; import(Sidebar));\n\nconst Routes = (props) =\u0026gt; {\nreturn isServerAvailable ? (\n\u0026lt;Router history={browserHistory}\u0026gt;\n           \u0026lt;Switch\u0026gt;\n             \u0026lt;Route path=\"/\" exact\u0026gt;\u0026lt;Redirect to='/Header’ /\u0026gt;\u0026lt;/Route\u0026gt;\n             \u0026lt;Route path=\"/sidebar\" exact component={props =\u0026gt; \u0026lt;Sidebar {...props} /\u0026gt;} /\u0026gt;\n             \u0026lt;Route path=\"/footer\" exact component={props =\u0026gt; \u0026lt;Footer {...props} /\u0026gt;} /\u0026gt;\n          \u0026lt;/Switch\u0026gt;\n\u0026lt;/Router\u0026gt;\n}\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eNext, we can render the component conditionally from App.js. In the below piece of code, we would not load Sidebar, if props.user is empty. The rendering of Sidebar is conditional. When the value of user.props changes, React and Webpack will be informed about the change. Hence, the required chunk of script will be loaded. But, during the initial rendering, when props.user is empty, this piece of code does not have to be rendered. If Sidebar is the application’s heavy lifting component, then the initial loading will become much smoother and faster. Why? We wouldn’t load it the first time a user visits the page. Conditional rendering can be used throughout the application.\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"language-typescript\"\u003econst Header = React.lazy( () =\u0026gt; import('Header'));\nconst Footer = React.lazy( () =\u0026gt; import(Footer));\nconst Sidebar = React.lazy( () =\u0026gt; import(Sidebar));\n\nfunction App (props) {\nreturn(\n\u0026lt;React.Fragment\u0026gt;\n   \u0026lt;Header user = {props.user} /\u0026gt;\n   {props.user ? \u0026lt;Sidebar user = {props.user /\u0026gt; : null}\n   \u0026lt;Footer/\u0026gt;\n\u0026lt;/React.Fragment\u0026gt;\n)\n}\u003c/code\u003e\u003c/pre\u003e\u003cp\u003e\u003cbr\u003eTalking about conditional rendering, React allows us to load components even with a click of a button. For instance, if the user clicks on login, in our header component, and if the side bar has to be loaded, our code can be modified as below.\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"language-typescript\"\u003e//Sidebar.js\nexport default () =\u0026gt; {\n  console.log('You can return the Sidebar component here!');\n};\u003c/code\u003e\u003c/pre\u003e\u003cpre\u003e\u003ccode class=\"language-typescript\"\u003eimport _ from 'lodash';\nfunction buildSidebar() {\n   const element = document.createElement('div');\n   const button = document.createElement('button');\n   button.innerHTML = 'Login';\n   element.innerHTML = _.join(['Loading Sidebar', 'webpack'], ' ');\n   element.appendChild(button);\n   button.onclick = e =\u0026gt; import(/* webpackChunkName: \"sidebar\" */ './sidebar).then(module =\u0026gt; {\n     const sidebar = module.default;\n     sidebar()   \n   });\n\n   return element;\n }\n\ndocument.body.appendChild(buildSidebar());\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eAs a practice, it is important to keep all the routes or components loaded lazily, inside another component called \u003cstrong\u003eSuspense\u003c/strong\u003e. The role of \u003cstrong\u003eSuspense\u003c/strong\u003e is to provide the application a fallback content, when a lazy loaded component is getting loaded. The fallback content could be anything like a loader, or a message to tell the user why the page is not yet painted. Let’s modify our Routes component, with Suspense. \u003c/p\u003e\u003cpre\u003e\u003ccode class=\"language-typescript\"\u003eimport React, { Suspense } from 'react';\nimport { Switch, browserHistory, BrowserRouter as Router, Route} from 'react-router-dom';\nImport Loader from ‘./loader.js’\nconst Header = React.lazy( () =\u0026gt; import('Header'));\nconst Footer = React.lazy( () =\u0026gt; import(Footer));\nconst Sidebar = React.lazy( () =\u0026gt; import(Sidebar));\n\nconst Routes = (props) =\u0026gt; {\nreturn isServerAvailable ? (\n\u0026lt;Router history={browserHistory}\u0026gt;\n    \u0026lt;Suspense fallback={\u0026lt;Loader trigger={true} /\u0026gt;}\u0026gt;\n           \u0026lt;Switch\u0026gt;\n             \u0026lt;Route path=\"/\" exact\u0026gt;\u0026lt;Redirect to='/Header’ /\u0026gt;\u0026lt;/Route\u0026gt;\n             \u0026lt;Route path=\"/sidebar\" exact component={props =\u0026gt; \u0026lt;Sidebar {...props} /\u0026gt;} /\u0026gt;\n             \u0026lt;Route path=\"/footer\" exact component={props =\u0026gt; \u0026lt;Footer {...props} /\u0026gt;} /\u0026gt;\n      \u0026lt;/Switch\u0026gt;\n     \u0026lt;/Suspense\u0026gt;\n\u0026lt;/Router\u0026gt;\n}\n\u003c/code\u003e\u003c/pre\u003e\u003ch3 id=\"stage-two\"\u003e\u003cstrong\u003eStage Two\u003c/strong\u003e\u003c/h3\u003e\u003cp\u003eNow that the application is safely loaded, you need to be aware of how React works, to optimize further. React is an interesting framework where you have a Host Tree and Host Instances. The Host Tree is nothing but the DOM. And, the Host Instances represent the nodes. React comes with a React DOM for bridging the gap between the Host environment, and the application. Your smallest item in the React DOM would be a javascript object. These objects are tossed every time a new object is created. Why? The Objects are highly immutable. Whenever a change happens, React updates the Host Tree so that it matches perfectly with the React DOM Tree. This process is widely known as \u003cstrong\u003ereconciliation\u003c/strong\u003e. \u003c/p\u003e\u003cp\u003eUsing the Right State Management Methods\u003c/p\u003e\u003cul\u003e\u003cli\u003eEverytime the React DOM Tree is modified, it forces the browser to reflow. This will have a serious impact on the performance of your application. Reconciliation is used to make sure that the number of re-renders is reduced. Likewise, React uses State management to prevent the re-renders. For example, you have a \u003cstrong\u003euseState\u003c/strong\u003e() hook.\u003c/li\u003e\u003cli\u003eIf you are building a class component, make use of the \u003cstrong\u003eshouldComponentUpdate\u003c/strong\u003e() lifecycle method. Try to create classes that always extend a PureComponent. And, the shouldComponentUpdate() hook has to be implemented in the PureComponent. When you do this, a shallow comparison happens between the states and props. Hence, the chances of re-rendering is reduced drastically.\u003c/li\u003e\u003c/ul\u003e\u003cp\u003eMake use of React.Memo\u003c/p\u003e\u003cul\u003e\u003cli\u003eReact.Memo takes components and memoizes the props. When a component needs to be re-rendered, a shallow comparison is done. This method is widely used for performance reasons.\u003c/li\u003e\u003c/ul\u003e\u003cpre\u003e\u003ccode class=\"language-typescript\"\u003efunction MyComponent(props) {\n}\nfunction areEqual(prevProps, nextProps) {\n  /*\n  return true if passing nextProps to render would return\n  the same result as passing prevProps to render,\n  otherwise return false\n  */\n}\nexport default React.memo(MyComponent, areEqual);\u003c/code\u003e\u003c/pre\u003e\u003cul\u003e\u003cli\u003eIf you are building a functional component, make use of \u003cstrong\u003euseCallback\u003c/strong\u003e() and \u003cstrong\u003euseMemo\u003c/strong\u003e() .\u003c/li\u003e\u003c/ul\u003e\u003ch2 id=\"conclusion\"\u003eConclusion\u003c/h2\u003e\u003cp\u003eNow that you know what the critical rendering path is, try to analyze the code you write. Every line, every resource and every file included in your project adds to the critical rendering path. Also, think about the fold content of your web page. If you have not leveraged the tips and tricks for improving website performance, now might be the best time to start. Performance is crucial in any web application. As it grows in complexity and size, every millisecond makes a difference. Nevertheless, remember that premature optimization can be catastrophic. Always measure and then attempt to work on optimization. \u003c/p\u003e\u003cp\u003eHappy Coding!\u003c/p\u003e\u003cp\u003e\u003c/p\u003e","comment_id":"621ec75c9c34bf7c9fd816e7","feature_image":"https://images.indepth.dev/images/2022/03/101-Javascript-Critical-Rendering-Path.jpg","featured":false,"visibility":"public","created_at":"2022-03-02T03:24:44.000+02:00","updated_at":"2022-03-14T18:54:37.000+02:00","published_at":"2022-03-14T18:54:37.000+02:00","custom_excerpt":"In this article, we will explore the process of the critical rendering path.","codeinjection_head":null,"codeinjection_foot":null,"custom_template":null,"canonical_url":null,"email_recipient_filter":"none","authors":[{"id":"61f271697e6c0dc6ecd8c1cb","name":"Divya D Dev","slug":"divya","profile_image":"https://images.indepth.dev/images/2022/02/Screenshot-2022-01-25-at-12.23.13-PM.png","cover_image":null,"bio":null,"website":null,"location":null,"facebook":null,"twitter":null,"meta_title":null,"meta_description":null,"url":"https://admin.indepth.dev/author/divya/"}],"tags":[{"id":"613cd51f17e466f35de2c859","name":"DOM","slug":"dom","description":null,"feature_image":null,"visibility":"public","meta_title":null,"meta_description":null,"og_image":null,"og_title":null,"og_description":null,"twitter_image":null,"twitter_title":null,"twitter_description":null,"codeinjection_head":null,"codeinjection_foot":null,"canonical_url":null,"accent_color":null,"url":"https://admin.indepth.dev/tag/dom/"},{"id":"622f73459c34bf7c9fd81786","name":"HTML","slug":"html","description":null,"feature_image":null,"visibility":"public","meta_title":null,"meta_description":null,"og_image":null,"og_title":null,"og_description":null,"twitter_image":null,"twitter_title":null,"twitter_description":null,"codeinjection_head":null,"codeinjection_foot":null,"canonical_url":null,"accent_color":null,"url":"https://admin.indepth.dev/tag/html/"},{"id":"5e2f4d3b430b1e0c3681c74f","name":"css","slug":"css","description":null,"feature_image":null,"visibility":"public","meta_title":null,"meta_description":null,"og_image":null,"og_title":null,"og_description":null,"twitter_image":null,"twitter_title":null,"twitter_description":null,"codeinjection_head":null,"codeinjection_foot":null,"canonical_url":null,"accent_color":null,"url":"https://admin.indepth.dev/tag/css/"},{"id":"5d403a5b679ce6202b744977","name":"react","slug":"react","description":"React (also known as React.js or ReactJS) is a JavaScript library for building user interfaces. It uses a declarative paradigm and aims to be both efficient and flexible.","feature_image":null,"visibility":"public","meta_title":null,"meta_description":null,"og_image":null,"og_title":null,"og_description":null,"twitter_image":null,"twitter_title":null,"twitter_description":null,"codeinjection_head":null,"codeinjection_foot":null,"canonical_url":null,"accent_color":null,"url":"https://admin.indepth.dev/tag/react/"}],"primary_author":{"id":"61f271697e6c0dc6ecd8c1cb","name":"Divya D Dev","slug":"divya","profile_image":"https://images.indepth.dev/images/2022/02/Screenshot-2022-01-25-at-12.23.13-PM.png","cover_image":null,"bio":null,"website":null,"location":null,"facebook":null,"twitter":null,"meta_title":null,"meta_description":null,"url":"https://admin.indepth.dev/author/divya/","_id":1146},"primary_tag":{"id":"613cd51f17e466f35de2c859","name":"DOM","slug":"dom","description":null,"feature_image":null,"visibility":"public","meta_title":null,"meta_description":null,"og_image":null,"og_title":null,"og_description":null,"twitter_image":null,"twitter_title":null,"twitter_description":null,"codeinjection_head":null,"codeinjection_foot":null,"canonical_url":null,"accent_color":null,"url":"https://admin.indepth.dev/tag/dom/"},"url":"https://admin.indepth.dev/101-javascript-critical-rendering-path/","excerpt":"In this article, we will explore the process of the critical rendering path.","reading_time":16,"access":true,"send_email_when_published":false,"og_image":null,"og_title":null,"og_description":null,"twitter_image":"https://images.indepth.dev/images/2022/03/101-Javascript-Critical-Rendering-Path2.jpg","twitter_title":null,"twitter_description":null,"meta_title":null,"meta_description":null,"email_subject":null,"frontmatter":null,"_id":1498},{"id":"61c1c32d7e6c0dc6ecd8bcf8","uuid":"c3b1360e-a630-49bb-8f1a-79f723e30ac4","title":"Webpack: An in-depth introduction to SplitChunksPlugin","slug":"webpack-an-in-depth-introduction-to-splitchunksplugin","html":"\u003cp\u003eIf the name of this plugin doesn't sound familiar, it may be due to the fact that it is \u003cem\u003edisguised as\u003c/em\u003e the \u003ccode\u003eoptimization.splitChunks\u003c/code\u003e configuration option. If that doesn't look very familiar either, then you probably haven't worked on build configuration much. Regardless of whether you have encountered the name of the plugin or not, this article will give you a good introduction to one of the most used plugins in webpack's ecosystem.\u003c/p\u003e\u003cp\u003eThis is a rather complex topic, so this article aims to be a foundation for future articles since it goes over the main building blocks of the plugin, with the help of digestible diagrams and StackBlitz demos.\u003c/p\u003e\u003cp\u003eAs we will see, a problem this plugin solves is \u003cstrong\u003ecode duplication\u003c/strong\u003e, which can lead to redundant content loaded over the network. \u003ccode\u003eSplitChunkPlugin\u003c/code\u003e is able to figure out, based on some configuration, the modules which are too \u003cem\u003eexpensive\u003c/em\u003e to be duplicated and then put them in separate chunks so that the considerable efforts of loading large modules are done only once.\u003c/p\u003e\u003cp\u003eA few webpack-related articles that you might find interesting, although they are not required to understand for this write-up:\u003c/p\u003e\u003cul\u003e\u003cli\u003e\u003ca href=\"https://indepth.dev/posts/1482/an-in-depth-perspective-on-webpacks-bundling-process\"\u003eAn in-depth perspective on webpack's bundling process\u003c/a\u003e\u003c/li\u003e\u003cli\u003e\u003ca href=\"https://indepth.dev/posts/1483/demistifying-webpacks-import-function-using-dynamic-arguments\"\u003eDemistifying webpack's 'import' function: using dynamic arguments\u003c/a\u003e\u003c/li\u003e\u003c/ul\u003e\u003cp\u003eIt is highly recommended to follow along by experimenting on the provided StackBlitz demos.\u003c/p\u003e\u003cp\u003eLet's get started!\u003c/p\u003e\u003cp\u003e\u003cem\u003eI've used lots of StackBlitz examples in this article to demonstrate notions. However, I noticed that files in the \u003ccode\u003enode_modules\u003c/code\u003e folder don't persist across page refreshes and since we will need such files in this article, each StackBlitz demo will detail in its \u003ccode\u003ereadme\u003c/code\u003e file the required steps to get the app up and running.\u003c/em\u003e\u003c/p\u003e\u003chr\u003e\u003ch2 id=\"setting-up\"\u003eSetting up\u003c/h2\u003e\u003cp\u003eIn order to get a better understanding of what this plugin is capable of, throughout this article we will be using an example which will undergo, as we go along, different configuration-wise changes  that demonstrate this plugin's features.\u003c/p\u003e\u003cp\u003eBefore we introduce the problem this plugin solves, let's first see the small project along with its configuration which will mark the start of this learning journey:\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"language-jsx\"\u003e├── a.js\n├── b.js\n├── c.js\n├── d.js\n├── e.js\n├── f.js\n├── g.js\n├── index.js\n├── node_modules\n│   ├── x.js\n│   ├── y.js\n│   └── z.js\n└── webpack.config.js\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003e\u003cem\u003eThis project can be found in this \u003ca href=\"https://stackblitz.com/edit/node-qaj9rk?file=readme.md\"\u003eStackBlitz application\u003c/a\u003e. Make sure you follow the instructions listed in \u003ccode\u003ereadme\u003c/code\u003e.\u003c/em\u003e\u003c/p\u003e\u003cp\u003eThe \u003ccode\u003ewebpack.config.js\u003c/code\u003e file looks as follows:\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"language-jsx\"\u003e{\n  mode: 'production',\n  entry: {\n    main: './src',\n  },\n  output: {\n    path: path.join(__dirname, 'dist'),\n    filename: '[name].js',\n    clean: true,\n  },\n  optimization: {\n    // Instruct webpack not to obfuscate the resulting code\n    minimize: false,\n    splitChunks: false,\n  },\n  context: __dirname,\n};\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eAfter the \u003ccode\u003enpm run build\u003c/code\u003e has been run in the StackBlitz app, the \u003ccode\u003edist\u003c/code\u003e directory should have the following structure:\u003c/p\u003e\u003cfigure class=\"kg-card kg-image-card\"\u003e\u003cimg src=\"https://images.indepth.dev/images/2021/12/output-dir-before-first-diagram.png\" class=\"kg-image\" alt=\"output-dir-before-first-diagram.png\" loading=\"lazy\" width=\"871\" height=\"674\"\u003e\u003c/figure\u003e\u003cp\u003eNotice there are 5 chunks, 1 for the single item in the \u003ccode\u003eentry\u003c/code\u003e object(i.e. \u003ccode\u003emain: './src'\u003c/code\u003e) and 4 chunks that resulted from using the \u003ccode\u003eimport()\u003c/code\u003e function.\u003c/p\u003e\u003cp\u003eThis is a diagram that describes not only the relationship between modules(the dependant and the dependencies), but also the parent-child relationships between \u003cstrong\u003echunks:\u003c/strong\u003e\u003c/p\u003e\u003cfigure class=\"kg-card kg-image-card kg-width-wide\"\u003e\u003cimg src=\"https://images.indepth.dev/images/2021/12/file-structure.png\" class=\"kg-image\" alt=\"file-structure.png\" loading=\"lazy\" width=\"5459\" height=\"1945\"\u003e\u003c/figure\u003e\u003cp\u003e\u003cem\u003eThe link for the above diagram can be found \u003ca href=\"https://excalidraw.com/#json=VDeCLP274PUk7GR8KS8N0,epOXJ2Y-EPPOXQzirAnXfQ\"\u003ehere\u003c/a\u003e.\u003c/em\u003e\u003c/p\u003e\u003cp\u003eMy recommendation would be to open that diagram's link and try to understand a bit what the diagram illustrates.\u003cbr\u003eThe black arrows indicate the use of top level ES module \u003cstrong\u003eimport statements\u003c/strong\u003e(i.e. \u003ccode\u003eimport xDefault from 'x'\u003c/code\u003e), the purple arrows, as described on the arrows themselves, show the use of the \u003cstrong\u003eimport function\u003c/strong\u003e(i.e. \u003ccode\u003eimport(/* webpackChunkName: \"async-a\" */ './a')\u003c/code\u003e) and this has a very important consequence: the \u003cstrong\u003ecreation of new chunks\u003c/strong\u003e. Last but not least, the chunks are framed in green blocks. The green nested frames indicate a parent-child relationship between chunks.\u003c/p\u003e\u003cp\u003eAs in, the \u003ccode\u003emain\u003c/code\u003e chunk has 3 child chunks: \u003ccode\u003easync-a\u003c/code\u003e, \u003ccode\u003easync-b\u003c/code\u003e and \u003ccode\u003easync-c\u003c/code\u003e. The \u003ccode\u003easync-a\u003c/code\u003e chunk has a child chunk too, \u003ccode\u003easync-g\u003c/code\u003e. It is also important to mention that modules(framed in blue) belong \u003cstrong\u003eonly\u003c/strong\u003e to the chunk described by the chunk's green frame. So, the \u003ccode\u003eg\u003c/code\u003e and \u003ccode\u003ef\u003c/code\u003e modules belong to the \u003ccode\u003easync-g\u003c/code\u003e chunk.\u003c/p\u003e\u003cp\u003eNow that we have some basic concepts in place, let's start exploring!\u003c/p\u003e\u003chr\u003e\u003ch2 id=\"introducing-the-problem\"\u003eIntroducing the problem\u003c/h2\u003e\u003cp\u003eBefore going any further, I'd recommend you run the project's build script. \u003ca href=\"https://stackblitz.com/edit/node-qaj9rk?file=readme.md\"\u003eHere\u003c/a\u003e is once again a link to the StackBlitz app in question. We will use the results yielded in the \u003ccode\u003edist\u003c/code\u003edirectory in order to make the first steps towards understanding the problem.\u003c/p\u003e\u003cp\u003eLet's spend a little time on examining the contents of \u003ccode\u003edist\u003c/code\u003e. As you can see, there are 5 files, so our project is composed of \u003cstrong\u003e5 chunks\u003c/strong\u003e. The \u003ccode\u003emain\u003c/code\u003e chunk is literally the \u003cem\u003emain chunk\u003c/em\u003e(it can be thought of as the \u003cem\u003eentry point \u003c/em\u003eof our app) and this can be noticed from its source code - it contains a lot of webpack’s \u003cem\u003eruntime code\u003c/em\u003e which holds the logic for loading other chunks(e.g. via HTTP), for storing the modules and much more. If you peek into the \u003ccode\u003easync-*\u003c/code\u003e files, you should see that there just a small amount of runtime code required to \u003cem\u003econnect\u003c/em\u003e these chunks with the \u003cem\u003emain chunk\u003c/em\u003e. Most of the code in an \u003ccode\u003easync-*.js\u003c/code\u003e file is for the imported modules and the exported members.\u003c/p\u003e\u003cp\u003eLet’s think about this interesting question: how many times do you think the \u003ccode\u003ex\u003c/code\u003e module(that corresponds to the \u003ccode\u003ex.js\u003c/code\u003e file and is imported into the \u003ccode\u003ea\u003c/code\u003e, \u003ccode\u003eb\u003c/code\u003e and \u003ccode\u003ec\u003c/code\u003e modules) will be \u003cstrong\u003ecopied\u003c/strong\u003e in all these 5 resulting files? Feel free to refer to the diagram. In order to find the answer to this question, you can copy the exported string from the \u003ccode\u003ex.js\u003c/code\u003e file and perform a \u003cem\u003eglobal search\u003c/em\u003e in the StackBlitz app:\u003c/p\u003e\u003cfigure class=\"kg-card kg-image-card\"\u003e\u003cimg src=\"https://images.indepth.dev/images/2021/12/nr-times-x.png\" class=\"kg-image\" alt=\"nr-times-x.png\" loading=\"lazy\" width=\"902\" height=\"435\"\u003e\u003c/figure\u003e\u003cp\u003eSo, we can conclude that the \u003ccode\u003ex.js\u003c/code\u003e's content is \u003cstrong\u003eduplicated\u003c/strong\u003e 3 times, one time for each importing module that makes a separate async chunk(e.g. the \u003ccode\u003ea\u003c/code\u003e module which corresponds to the \u003ccode\u003easync-a\u003c/code\u003e chunk, \u003ccode\u003eb\u003c/code\u003e to \u003ccode\u003easync-b\u003c/code\u003e and \u003ccode\u003ec\u003c/code\u003e to \u003ccode\u003easync-c\u003c/code\u003e). Imagine now if the \u003ccode\u003ex.js\u003c/code\u003e file had hundreds of lines of code! All these lines would be copied in 3 different places - this seems like a waste of resources. It's true that this fact \u003cstrong\u003ewon't cause the \u003ccode\u003ex\u003c/code\u003e module to be executed multiple times by webpack\u003c/strong\u003e, so in the end we will still end up having \u003cstrong\u003eonly one instance\u003c/strong\u003e of \u003ccode\u003ex.js\u003c/code\u003e in our app.\u003c/p\u003e\u003cp\u003eHowever, recall what fetching a chunk implies - an HTTP request. Since \u003ccode\u003ex.js\u003c/code\u003e's content is present in 3 chunks, if we first load, let's say, the \u003ccode\u003easync-a\u003c/code\u003e chunk, then the entire code that's in the \u003ccode\u003easync-a.js\u003c/code\u003e file will have to be downloaded from the network and then parsed. If the \u003ccode\u003ex.js\u003c/code\u003e file is considerably large, this \u003cem\u003eloading process\u003c/em\u003e may take a significant amount of time to complete. Having to go through this \u003cem\u003elengthy\u003c/em\u003e process another 2 times doesn't look like the best approach we can take, so there must be a better way.\u003c/p\u003e\u003cp\u003eHere's a way to visualise this problem with the help of a diagram:\u003c/p\u003e\u003cfigure class=\"kg-card kg-image-card kg-width-wide\"\u003e\u003cimg src=\"https://images.indepth.dev/images/2021/12/x-copied-red_-1-.png\" class=\"kg-image\" alt=\"x-copied-red (1).png\" loading=\"lazy\"\u003e\u003c/figure\u003e\u003cp\u003e\u003cem\u003eA link for the above diagram can be found \u003ca href=\"https://excalidraw.com/#json=bFTaPCAN9LmDknlCO8GHd,IJSaYsdghgf3SkCNiGhiAQ\"\u003ehere\u003c/a\u003e.\u003c/em\u003e\u003c/p\u003e\u003cp\u003eThis diagram is not very different from the first one, since it only highlights the \u003ccode\u003ex\u003c/code\u003e module in red. This simply indicates that there is something \u003cem\u003ewrong\u003c/em\u003e with this module and it will also help us identify what \u003ccode\u003eSplitChunksPlugin\u003c/code\u003e does in order to solve this problem. This is what the next section is about.\u003c/p\u003e\u003cp\u003e\u003cem\u003eNote: as you might have noticed, it is true that modules such as \u003ccode\u003ef\u003c/code\u003e, \u003ccode\u003ed\u003c/code\u003e, \u003ccode\u003ey\u003c/code\u003e are in the same situation as \u003ccode\u003ex\u003c/code\u003e, but we are only focusing on \u003ccode\u003ex\u003c/code\u003e now, for simplicity's sake.\u003c/em\u003e\u003c/p\u003e\u003chr\u003e\u003ch2 id=\"how-splitchunksplugin-solves-the-problem\"\u003eHow \u003ccode\u003eSplitChunksPlugin\u003c/code\u003e solves the problem\u003c/h2\u003e\u003cp\u003eI assume you must be anxious to dive deep into the webpack configuration so that we can see what \u003ccode\u003eSplitChunksPlugin\u003c/code\u003ecan do, but let's first think of how we could solve this problem conceptually. In other words, after consulting the above diagram, how would you optimise the current situation? Supposing that \u003ccode\u003ex.js\u003c/code\u003e has 1000 lines of code, our app will have to load them 3 times(because \u003ccode\u003ex\u003c/code\u003e is part of 3 \u003cstrong\u003edifferent chunks\u003c/strong\u003e, each of which being requested via \u003ccode\u003eimport()\u003c/code\u003e from the \u003ccode\u003emain\u003c/code\u003e chunk). I should also mention that if \u003cstrong\u003ethe same chunk\u003c/strong\u003e is requested multiple times, \u003cstrong\u003eonly one\u003c/strong\u003e HTTP request will be made and then its modules will be added to a cache object, such that, on subsequent requests for that chunk, everything will be retrieved directly from that cache object.\u003c/p\u003e\u003cp\u003eConsidering the above information, we could load the 1000 lines of code \u003cstrong\u003eonly once\u003c/strong\u003e by placing the \u003ccode\u003ex\u003c/code\u003e module in a new chunk. This way, when module \u003ccode\u003ex\u003c/code\u003e is required by module \u003ccode\u003ea\u003c/code\u003e, an HTTP request will be made in order to load the chunk in which \u003ccode\u003ex\u003c/code\u003e resides in(this is because the chunk is loaded for the first time). Then, when module \u003ccode\u003eb\u003c/code\u003e requires \u003ccode\u003ex\u003c/code\u003e, those 1000 lines of code \u003cstrong\u003ewon't be loaded again\u003c/strong\u003e and \u003ccode\u003ex\u003c/code\u003e will be retrieved directly from memory. The same happens when the \u003ccode\u003ec\u003c/code\u003e module requires \u003ccode\u003ex\u003c/code\u003e.\u003c/p\u003e\u003cp\u003eLet's see how this solution would look fit in a diagram:\u003c/p\u003e\u003cfigure class=\"kg-card kg-image-card kg-width-wide\"\u003e\u003cimg src=\"https://images.indepth.dev/images/2021/12/x-in-separate-chunk_-1-.png\" class=\"kg-image\" alt=\"x-in-separate-chunk (1).png\" loading=\"lazy\"\u003e\u003c/figure\u003e\u003cp\u003e\u003cem\u003eA link for the above diagram can be found \u003ca href=\"https://excalidraw.com/#json=d8yNHnplA4Bo3Q3AziqYQ,V_p8VsRBKjU2Z9jvOya_Cg\"\u003ehere\u003c/a\u003e.\u003c/em\u003e\u003c/p\u003e\u003cp\u003eThe barely visible red rectangles represent the \u003cem\u003ereplacements\u003c/em\u003e that have been made. Now, because the \u003ccode\u003ex\u003c/code\u003e module is in a separate chunk, it will be \u003cstrong\u003eloaded only once\u003c/strong\u003e across the network, no matter how many times the module is requested. This is what we can achieve by using  \u003ccode\u003eSplitChunksPlugin\u003c/code\u003e.\u003c/p\u003e\u003cp\u003eNow, let's come back to our favourite part: webpack configuration. This is what the \u003ccode\u003ewebpack.config.js\u003c/code\u003e file should look like in order to \u003cem\u003eactivate\u003c/em\u003e \u003ccode\u003eSplitChunksPlugin\u003c/code\u003e with the default options:\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"language-jsx\"\u003e{\n  mode: 'production',\n  entry: {\n    main: './src',\n  },\n  output: {\n    path: path.join(__dirname, 'dist'),\n    filename: '[name].js',\n    clean: true,\n  },\n  optimization: {\n    // Instruct webpack not to obfuscate the resulting code\n    minimize: false,\n\n    splitChunks: {\n      minSize: 0,\n    },\n  },\n  context: __dirname,\n}\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003e\u003cem\u003eThis solution can be found in \u003ca href=\"https://stackblitz.com/edit/node-tlym1w?file=readme.md\"\u003ethis StackBlitz app\u003c/a\u003e(make sure to follow the instructions from the \u003ccode\u003ereadme\u003c/code\u003e file).\u003c/em\u003e\u003c/p\u003e\u003cp\u003eThe \u003ccode\u003eminSize\u003c/code\u003e option isn't very relevant now, but we needed it because the chunk which \u003ccode\u003ex\u003c/code\u003e belongs to is quite small and webpack would think it's not worth it creating a new chunk just for a few bytes. So, we're telling \u003ccode\u003eSplitChunksPlugin\u003c/code\u003e to create a new chunk if its total number of bytes is greater than or equal to 0.\u003c/p\u003e\u003cp\u003eAs a side note, the \u003ccode\u003ex\u003c/code\u003e module is not the only module which can belong to this new chunk, there can be others too. The grouping criterion is how the modules are used in other chunks. If, for example, besides \u003ccode\u003ex\u003c/code\u003e, there were a module \u003ccode\u003ew\u003c/code\u003e used the same as \u003ccode\u003ex\u003c/code\u003e, then the separate chunk would contain both \u003ccode\u003ex\u003c/code\u003e and \u003ccode\u003ew\u003c/code\u003e modules.\u003c/p\u003e\u003cp\u003eThe configuration options the \u003ccode\u003eSplitChunksPlugin\u003c/code\u003e takes in determine how and whether or not new chunks are created. In order for a chunk to be created, it must, first of all, abide by a set of rules which defines a so-called \u003cstrong\u003ecache group\u003c/strong\u003e.\u003c/p\u003e\u003cp\u003eFor instance, we could say: \u003cem\u003eI'd want chunks to be created only from modules which come from \u003ccode\u003enode_modules\u003c/code\u003e and the chunks they form must have at least 1000 bytes.\u003c/em\u003e We could also enforce the number of existing chunks a module appears in to be at least \u003ccode\u003eN\u003c/code\u003e. In the example we've been following, we could prevent any chunks from being created if the \u003ccode\u003ex\u003c/code\u003e module does not appear in at least 3 chunks.\u003c/p\u003e\u003cp\u003e\u003cstrong\u003eAll such constraints could define a cache group and only chunks that fulfil all the cache group's conditions will be created.\u003c/strong\u003e\u003c/p\u003e\u003cp\u003eIn the following sections, we will examine the configuration options that are available for \u003ccode\u003eSplitChunksPlugin\u003c/code\u003e, starting off with arguably one of the least intuitive of them.\u003c/p\u003e\u003chr\u003e\u003ch2 id=\"the-cachegroup-option\"\u003eThe \u003ccode\u003ecacheGroup\u003c/code\u003e option\u003c/h2\u003e\u003cp\u003eTo reiterate what has been mentioned at the end of the previous section, a \u003cstrong\u003ecache group\u003c/strong\u003e is described by a set of rules. This set of rules defines the circumstances in which new chunks can be created. Let's see a rather didactic example of a cache group:\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"language-jsx\"\u003ecacheGroupFoo: {\n\t// The number of chunks the module must appear in\n\tminChunks: 3,\n   \t// Number of bytes put in a chunk(i.e. the sum of the number of bytes for each constituent module)\n\t// For example, if a chunk contains 2 modules, `x` and `w`, then `nrBytesChunk = nrBytes(x) + nrBytes(w)`.\n\tminSize: 10,\n\t// Which modules are to be considered\n\tmodulePathPattern: /node_modules/\n}\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eBased on what we've seen above, a new chunk will be created if all these conditions are met simultaneously:\u003c/p\u003e\u003cul\u003e\u003cli\u003ethe module must belong to at least 3 chunks\u003c/li\u003e\u003cli\u003ethe minimum number of bytes of a chunk must be at least 10\u003c/li\u003e\u003cli\u003ethe modules that would lead to new chunks being created must come from the \u003ccode\u003enode_modules\u003c/code\u003e folder\u003c/li\u003e\u003c/ul\u003e\u003cp\u003eSo, this is what a \u003cstrong\u003ecache group\u003c/strong\u003e looks like. From such cache groups there can be many chunks created. If, for example, the \u003ccode\u003ex\u003c/code\u003e module is required in 3 different chunks, it belongs to the \u003ccode\u003enode_modules\u003c/code\u003e folder and it has at least 10 bytes(the chunk that would be created would also have 10 bytes), then, based on the above cache group, \u003ccode\u003ex\u003c/code\u003e will be extracted into its own chunk. If there is another module from \u003ccode\u003enode_modules\u003c/code\u003e, \u003ccode\u003ew\u003c/code\u003e, which is required in 4 different chunks, then there will be \u003cstrong\u003eanother chunk for the \u003ccode\u003ew\u003c/code\u003e module,\u003c/strong\u003e assuming all the other conditions described by the above cache group are fulfilled. If \u003ccode\u003ew\u003c/code\u003e was required in only 3 chunks, then it would be put in the same chunk as \u003ccode\u003ex\u003c/code\u003e. A StackBlitz app that covers this situation can be found \u003ca href=\"https://stackblitz.com/edit/node-gfzz8i?file=src%2Findex.js\"\u003ehere\u003c/a\u003e(make sure to follow the instructions listed in the \u003ccode\u003ereadme\u003c/code\u003e file).\u003c/p\u003e\u003cp\u003eIf \u003ccode\u003eSplitChunksPlugin\u003c/code\u003e  is used with the \u003cstrong\u003edefault options\u003c/strong\u003e,\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"language-jsx\"\u003e/* ... */\noptimization: {\n  // splitChunks: false,\n  splitChunks: {\n    minSize: 0,\n  },\n},\n/* ... */\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eor more specifically, without explicitly mentioning the cache groups, the plugin will use \u003cstrong\u003e\u003ca href=\"https://github.com/webpack/webpack/blob/v5.65.0/lib/config/defaults.js#L1101-L1112\"\u003e2 implicit cache groups\u003c/a\u003e,\u003c/strong\u003e which would be the same as if we explicitly declared them as follows:\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"language-jsx\"\u003e/* ... */\noptimization: {\n  splitChunks: {\n  \tdefault: {\n        idHint: \"\",\n        reuseExistingChunk: true,\n        minChunks: 2,\n        priority: -20\n    },\n    defaultVendors: {\n        idHint: \"vendors\",\n        reuseExistingChunk: true,\n        test: NODE_MODULES_REGEXP,\n        priority: -10\n    }\n  },\n},\n/* ... */\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eDon't worry about the new options, some of them will be covered later in the article. For now, it's enough to understand what's going on at a high level.\u003c/p\u003e\u003cp\u003eThere are 2 cache groups - the \u003ccode\u003edefault\u003c/code\u003e one, which \u003cstrong\u003etargets any module\u003c/strong\u003e from our application(i.e. doesn't matter where it comes from); there is then the \u003ccode\u003edefaultVendors\u003c/code\u003e group which \u003cstrong\u003eonly\u003c/strong\u003e targets the modules which come from \u003ccode\u003enode_modules\u003c/code\u003e(the \u003ccode\u003etest\u003c/code\u003e property implies that). As you probably noticed, the latter cache group has a greater priority and this plays an important role when a module \u003cstrong\u003ebelongs to\u003c/strong\u003e \u003cstrong\u003emultiple cache groups\u003c/strong\u003e. Since we already know that a cache group is what \u003cem\u003eproduces\u003c/em\u003e new chunks, then a module would belong to multiple new chunks, which is \u003cstrong\u003enot desirable\u003c/strong\u003e because we would arrive to the same problem that we are trying to solve: code duplication. So, the \u003ccode\u003epriority\u003c/code\u003e option will help determine which \u003cstrong\u003eunique chunk\u003c/strong\u003e the module will belong to, while the other alternatives which the module could be part of are discarded.\u003c/p\u003e\u003cp\u003eIn order to make these defaults cache groups a bit clearer, let's see the chunks they create in an example we've seen in a previous section, namely the one where \u003ccode\u003eSplitChunksPlugin\u003c/code\u003e was introduced. \u003ca href=\"https://stackblitz.com/edit/node-tlym1w?file=readme.md\"\u003eHere\u003c/a\u003e is the link to its corresponding StackBlitz app.\u003c/p\u003e\u003cp\u003eThe webpack configuration file looks like this:\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"language-jsx\"\u003e{\n  mode: 'production',\n  entry: {\n    main: './src',\n  },\n  output: {\n    path: path.join(__dirname, 'dist'),\n    filename: '[name].js',\n    clean: true,\n  },\n  optimization: {\n    // Instruct webpack not to obfuscate the resulting code\n    minimize: false,\n    splitChunks: {\n      minSize: 0,\n    },\n  },\n  context: __dirname,\n};\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003e\u003cem\u003eAs a side note, a cache group inherits some options if they are not specified in the cache group itself. For example, \u003ccode\u003eminSize: 0\u003c/code\u003e will be inherited by both \u003ccode\u003edefault\u003c/code\u003e and \u003ccode\u003edefaultVendors\u003c/code\u003e cache groups(the default cache groups). You can see the options a cache group can inherit \u003ca href=\"https://github.com/webpack/webpack/blob/main/types.d.ts#L7814\"\u003ehere\u003c/a\u003e, in wepback's types declaration file.\u003c/em\u003e\u003c/p\u003e\u003cp\u003eAfter running \u003ccode\u003enpm run build\u003c/code\u003e, let's explore the output in the \u003ccode\u003edist\u003c/code\u003e directory. In addition to the files we are already familiar with, namely the \u003ccode\u003emain\u003c/code\u003e and the \u003ccode\u003easync-*\u003c/code\u003e files(each file being associated with its chunk), new files appeared:\u003c/p\u003e\u003cfigure class=\"kg-card kg-image-card\"\u003e\u003cimg src=\"https://images.indepth.dev/images/2021/12/file-struct-understanding-defaults.png\" class=\"kg-image\" alt=\"file-struct-understanding-defaults.png\" loading=\"lazy\" width=\"903\" height=\"674\"\u003e\u003c/figure\u003e\u003cp\u003e\u003cem\u003eNote: Although the generated files might have different names, their content won't be different from what we will see next.\u003c/em\u003e\u003c/p\u003e\u003cp\u003eOf course, since a file from \u003ccode\u003edist\u003c/code\u003e defines its own chunk, these new files indicate the presence of new chunks.\u003c/p\u003e\u003cp\u003eIt's no doubt that these new chunks were created by \u003ccode\u003eSplitChunksPlugin\u003c/code\u003e, but the question now is \u003cem\u003ewhat modules are inside these chunks?\u003c/em\u003e Before inspecting what's inside the files, here is the diagram which depicts the file structure and the chunks created by default(without the \u003ccode\u003eSplitChunksPlugin\u003c/code\u003e's involvement):\u003c/p\u003e\u003cfigure class=\"kg-card kg-image-card kg-width-wide\"\u003e\u003cimg src=\"https://images.indepth.dev/images/2021/12/file-structure-1.png\" class=\"kg-image\" alt=\"file-structure.png\" loading=\"lazy\" width=\"5459\" height=\"1945\"\u003e\u003c/figure\u003e\u003cp\u003e\u003cem\u003eA link for the above diagram can be found \u003ca href=\"https://excalidraw.com/#json=VDeCLP274PUk7GR8KS8N0,epOXJ2Y-EPPOXQzirAnXfQ\"\u003ehere\u003c/a\u003e.\u003c/em\u003e\u003c/p\u003e\u003cp\u003eWe will use this diagram to understand why each new chunk has been created, so we will be referring to it often. Let's start now going through each new file, starting from topmost file.\u003c/p\u003e\u003cp\u003eHere, once again, are the default cache groups, we will need them to understand why some modules are part of a certain chunk:\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"language-jsx\"\u003e// The default cache groups that `SplitChunksPlugin` uses.\ndefault: {\n    idHint: \"\",\n    reuseExistingChunk: true,\n    minChunks: 2,\n    priority: -20\n},\ndefaultVendors: {\n    idHint: \"vendors\",\n    reuseExistingChunk: true,\n    test: NODE_MODULES_REGEXP,\n    priority: -10\n}\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eFor \u003ccode\u003e571.js\u003c/code\u003e we have:\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"language-jsx\"\u003e/* ... */\nconst __WEBPACK_DEFAULT_EXPORT__ = ('z');\n/* ... */\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eso here we have the \u003ccode\u003ez\u003c/code\u003e module. Why is that, though? Well, \u003ccode\u003ez\u003c/code\u003e belongs to the \u003ccode\u003enode_modules\u003c/code\u003e folder(as observed from the above screenshot) and thus the targeted \u003cstrong\u003echunk group\u003c/strong\u003e is \u003ccode\u003edefaultVendors\u003c/code\u003e which \u003cstrong\u003edoesn't impose any constraints\u003c/strong\u003e on the number of chunks the module must appear in. In this case, \u003ccode\u003ez\u003c/code\u003e belongs only to the \u003ccode\u003easync-c\u003c/code\u003e chunk and this is acceptable for \u003ccode\u003edefaultVendors\u003c/code\u003e. It is true that \u003ccode\u003ez\u003c/code\u003e could belong to the other cache group, \u003ccode\u003edefault\u003c/code\u003e, but \u003ccode\u003edefaultVendors\u003c/code\u003e has a greater priority, so \u003ccode\u003ez\u003c/code\u003e will belong to the latter.\u003c/p\u003e\u003cp\u003eFor \u003ccode\u003e616.js\u003c/code\u003e:\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"language-jsx\"\u003e/* ... */\nconst __WEBPACK_DEFAULT_EXPORT__ = ('y');\n/* ... */\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003ethis is the \u003ccode\u003ey\u003c/code\u003e module. It gets placed in a different chunk because it is belongs to the \u003ccode\u003enode_modules\u003c/code\u003e folder(so \u003ccode\u003edefaultVendors\u003c/code\u003e is once more accountable for the newly created chunk) and it appears in the \u003ccode\u003easync-b\u003c/code\u003e and \u003ccode\u003easync-a\u003c/code\u003e chunks.\u003c/p\u003e\u003cp\u003eFor \u003ccode\u003e673.js\u003c/code\u003e:\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"language-jsx\"\u003e/* ... */\nconst __WEBPACK_DEFAULT_EXPORT__ = ('d');\n/* ... */\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003ethis is the \u003ccode\u003ed\u003c/code\u003e module. As seen from the screenshot, it does not comes from \u003ccode\u003enode_modules\u003c/code\u003e. It means the \u003ccode\u003edefault\u003c/code\u003e cache group is responsible for creating this chunk. If we take closer look at the diagram, we will see that it is requested from \u003ccode\u003easync-a\u003c/code\u003e, \u003ccode\u003easync-b\u003c/code\u003e, \u003ccode\u003easync-c\u003c/code\u003e chunks. This means 3 chunks, and the \u003ccode\u003edefault\u003c/code\u003e cache groups says that the minimum number of chunks a module must appear in should be at least 2. This condition is met, so that's why this module is put into a separate chunk.\u003c/p\u003e\u003cp\u003eFor \u003ccode\u003e714.js\u003c/code\u003e:\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"language-jsx\"\u003e/* ... */\nconst __WEBPACK_DEFAULT_EXPORT__ = ('f');\n/* ... */\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003ethis is the \u003ccode\u003ef\u003c/code\u003e module. As can be noticed from the diagram, \u003ccode\u003ef\u003c/code\u003e belong to 3 chunks: \u003ccode\u003easync-g\u003c/code\u003e, \u003ccode\u003easync-b\u003c/code\u003e and \u003ccode\u003easync-c\u003c/code\u003e. Judging by the screenshot, the \u003ccode\u003ef\u003c/code\u003e module does not comes from \u003ccode\u003enode_modules\u003c/code\u003e, so it's the same case as above, meaning that this chunk has been created due to the \u003ccode\u003edefault\u003c/code\u003e cache group.\u003c/p\u003e\u003cp\u003eAnd finally, for \u003ccode\u003e934.js\u003c/code\u003e:\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"language-jsx\"\u003e/* ... */\nconst __WEBPACK_DEFAULT_EXPORT__ = ('some content from `x.js`!');\n/* ... */\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eas expected, this is the \u003ccode\u003ex\u003c/code\u003e module. You might have guess it why it gets placed in a new chunk, since we've talked about it a few times throughout the article: it's from \u003ccode\u003enode_modules\u003c/code\u003e(so \u003ccode\u003edefaultVendors\u003c/code\u003e created this new chunk). Additionally, it is requested from 3 chunks, but this would matter only if we explicitly used the \u003ccode\u003eminChunks\u003c/code\u003e option in the \u003ccode\u003edefaultVendors\u003c/code\u003e cache group.\u003c/p\u003e\u003cp\u003eSo, these are effects of using the default options of \u003ccode\u003eSplitChunksPlugin\u003c/code\u003e. By the way, if you are interested to see how \u003cstrong\u003ecache groups\u003c/strong\u003e are compared in order to determine which one should be used to create new chunks, \u003ca href=\"https://github.com/webpack/webpack/blob/v5.65.0/lib/optimize/SplitChunksPlugin.js#L231-L255\"\u003ehere's the source code\u003c/a\u003e that does that.\u003c/p\u003e\u003cp\u003eIt was necessary to spend some time on comprehending how the default cache groups work, otherwise it would be though and challenging to \u003cem\u003econtrol\u003c/em\u003e them in order to help \u003ccode\u003eSplitChunksPlugin\u003c/code\u003e achieve the results we are looking for. This also serves as a base for investigating some of the \u003ccode\u003eSplitChunksPlugin\u003c/code\u003e's options that we have at our disposal.\u003c/p\u003e\u003cp\u003eBut before we do that, let's quickly see how we can disable a cache group, since we will apply this idea in the following sections, in order to make things a bit easier to grasp. To illustrate, we will disable the \u003ccode\u003edefault\u003c/code\u003e cache group.\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"language-jsx\"\u003e/* ... */\noptimization: {\n    splitChunks: {\n        cacheGroups: {\n        \t// We're disabling it by setting it to false.\n        \tdefault: false,\n        },\n        minSize: 0,\n  },\n}\n/* ... */\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003e\u003cem\u003eYou can run this project which includes the above configuration \u003ca href=\"https://stackblitz.com/edit/node-wy87gh?file=readme.md\"\u003ein this StackBlitz app\u003c/a\u003e.\u003c/em\u003e\u003c/p\u003e\u003cp\u003eIf we were now to run \u003ccode\u003enpm run build\u003c/code\u003e, what would you expected the newly generated chunks to be? Well, if the \u003ccode\u003edefault\u003c/code\u003e cache group is disabled, then only modules from \u003ccode\u003enode_modules\u003c/code\u003e are taken into account. And since there are no other constraints, apart from \u003ccode\u003eminSize\u003c/code\u003e(without it we wouldn't be seeing any newly generated chunks since the files are too small compared to the \u003ccode\u003eminSize\u003c/code\u003e's default value), then, based on what we've learned in this section, the \u003ccode\u003edist\u003c/code\u003e directory should contain 3 newly generated chunks, one for each of the \u003ccode\u003ex\u003c/code\u003e, \u003ccode\u003ey\u003c/code\u003e and \u003ccode\u003ez\u003c/code\u003e modules:\u003c/p\u003e\u003cfigure class=\"kg-card kg-image-card kg-width-wide\"\u003e\u003cimg src=\"https://images.indepth.dev/images/2021/12/disabling-default-cache-group.png\" class=\"kg-image\" alt=\"disabling-default-cache-group.png\" loading=\"lazy\" width=\"1269\" height=\"642\"\u003e\u003c/figure\u003e\u003cp\u003eIn the upcoming sections, we will explore some of the \u003ccode\u003eSplitChunksPlugin\u003c/code\u003e's capabilities. For the sake of simplifying things, each example that we'll see will have one of the default cache groups disabled, so that we can focus on what that example is trying to emphasize. Let's get into it!\u003c/p\u003e\u003chr\u003e\u003ch2 id=\"the-minchunks-option\"\u003eThe \u003ccode\u003eminChunks\u003c/code\u003e option\u003c/h2\u003e\u003cp\u003eWe have already encountered this property through the article: it indicates the minimum number of chunks that must require a module. Let's recall that in order for new chunks to be created by \u003ccode\u003eSplitChunksPlugin\u003c/code\u003e, they must fulfil a \u003cem\u003ecollection of requirements.\u003c/em\u003e That is to say, the chunk must belong to a certain \u003cstrong\u003ecache group\u003c/strong\u003e.\u003c/p\u003e\u003cp\u003eTo make things a bit easier to understand, let's take an example where we want these conditions to be met:\u003c/p\u003e\u003cul\u003e\u003cli\u003ethe module that the new chunks will contain must come from \u003ccode\u003enode_modules\u003c/code\u003e\u003c/li\u003e\u003cli\u003ethe module must appear in at least 3 chunks\u003c/li\u003e\u003c/ul\u003e\u003cp\u003eWith these restrictions in mind, this is how the webpack configuration would look like:\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"language-jsx\"\u003eoptimization: {\n    // Instruct webpack not to obfuscate the resulting code\n    minimize: false,\n    splitChunks: {\n      // minSize: 0,\n      // minChunks: 3,\n      cacheGroups: {\n        // Disabling this group so that we can focus on one thing at a time.\n        default: false,\n        defaultVendors: {\n          // We could have also set this property as: `splitChunks.minSize: 0`,\n          // since this property is inherited(by default) by the cache groups.\n          minSize: 0,\n\n          // Enforcing the minimum number of chunks that request a module.\n          minChunks: 3,\n\n          // Q: What kind of modules should new chunks contain?\n          // A: Modules that come from `node_modules`\n          test: /node_modules/,\n        },\n      },\n    },\n  },\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003e\u003cem\u003eA StackBlitz demo that exemplifies this option can be found \u003ca href=\"https://stackblitz.com/edit/node-eviijf?file=readme.md\"\u003ehere\u003c/a\u003e.\u003c/em\u003e\u003c/p\u003e\u003cp\u003eWhat would be the contents of \u003ccode\u003edist\u003c/code\u003e after running \u003ccode\u003enpm run build\u003c/code\u003e ? Apart from the chunks we're already familiar with(\u003ccode\u003emain\u003c/code\u003e and \u003ccode\u003easync-*\u003c/code\u003e), there is only a new chunk and it contains the \u003ccode\u003ex\u003c/code\u003e module. Based on the first diagram that we saw earlier(whose link can be found \u003ca href=\"https://excalidraw.com/#json=VDeCLP274PUk7GR8KS8N0,epOXJ2Y-EPPOXQzirAnXfQ\"\u003ehere\u003c/a\u003e), this is the only module that comes from \u003ccode\u003enode_modules\u003c/code\u003e and is present in at least 3 chunks:\u003c/p\u003e\u003cfigure class=\"kg-card kg-image-card\"\u003e\u003cimg src=\"https://images.indepth.dev/images/2021/12/min-chunks-answer.png\" class=\"kg-image\" alt=\"min-chunks-answer.png\" loading=\"lazy\"\u003e\u003c/figure\u003e\u003cp\u003eWhat would be the output if we set \u003ccode\u003eminChunks: 2\u003c/code\u003e? Since this change basically says that the minimum number of chunks should now be \u003ccode\u003e2\u003c/code\u003e instead of \u003ccode\u003e3\u003c/code\u003e, then we should see 2 chunks: one which contains the \u003ccode\u003ex\u003c/code\u003e module and one which contains the \u003ccode\u003ey\u003c/code\u003e module. Feel free to try that in the StackBlitz app!\u003c/p\u003e\u003chr\u003e\u003ch2 id=\"the-chunks-option\"\u003eThe \u003ccode\u003echunks\u003c/code\u003e option\u003c/h2\u003e\u003cp\u003eWe've heard a few times phrases like \u003cem\u003emodule \u003ccode\u003ex\u003c/code\u003e appears in \u003ccode\u003eN\u003c/code\u003e different chunks.\u003c/em\u003e With the help of the \u003ccode\u003echunks\u003c/code\u003e option we can specify the \u003cem\u003etypes\u003c/em\u003e of those chunks. We didn't talk much about \u003cem\u003echunks\u003c/em\u003e and other adjacent concepts until this point, so we will review some of these ideas now. For this reason, we will have to check the initial diagram again:\u003c/p\u003e\u003cfigure class=\"kg-card kg-image-card kg-width-wide\"\u003e\u003cimg src=\"https://images.indepth.dev/images/2021/12/file-structure-2.png\" class=\"kg-image\" alt=\"file-structure.png\" loading=\"lazy\" width=\"5459\" height=\"1945\"\u003e\u003c/figure\u003e\u003cp\u003e\u003cem\u003eA link for the above diagram can be found \u003ca href=\"https://excalidraw.com/#json=VDeCLP274PUk7GR8KS8N0,epOXJ2Y-EPPOXQzirAnXfQ\"\u003ehere\u003c/a\u003e.\u003c/em\u003e\u003c/p\u003e\u003cp\u003eApart from the fact that a chunk contains more modules, the concept of a \u003cem\u003echunk\u003c/em\u003e could be hard to picture. With these bits of information that we have, we can deduce \u003cstrong\u003e2 types of chunks\u003c/strong\u003e from the diagram(the chunks are framed in green):\u003c/p\u003e\u003cul\u003e\u003cli\u003ethe \u003cstrong\u003easync chunks\u003c/strong\u003e: it's about the \u003ccode\u003easync-*\u003c/code\u003e chunks; \u003cem\u003ewhat do these chunks have in common?\u003c/em\u003e - they are all created as a result of using the \u003ccode\u003eimport()\u003c/code\u003e function\u003c/li\u003e\u003cli\u003ethe \u003cstrong\u003einitial/main chunks\u003c/strong\u003e: only one chunk from the above diagram fits into this category - the \u003ccode\u003emain\u003c/code\u003e chunk; \u003cem\u003ewhat exactly is a main chunk? -\u003c/em\u003e it, like any other types of chunks, contains modules that are to be rendered and used in the application, but this kind of chunk also contains a lot of so-called \u003cstrong\u003eruntime code\u003c/strong\u003e; this is the code that \u003cem\u003eties together\u003c/em\u003e all the generated chunks so that our application can work properly; for example, the runtime code contains the logic for loading the \u003cstrong\u003easync chunks\u003c/strong\u003e and integrate them within the application; usually, this kind of chunks(initial chunks) can be recognised when defining items in the \u003ccode\u003eentry\u003c/code\u003e object(e.g. \u003ccode\u003e{ entry: { main: './index.js' } }\u003c/code\u003e)\u003c/li\u003e\u003c/ul\u003e\u003cp\u003eNow coming back to the \u003ccode\u003echunks\u003c/code\u003e option, it accepts 4 values:\u003c/p\u003e\u003cul\u003e\u003cli\u003e\u003ccode\u003easync\u003c/code\u003e - \u003cstrong\u003eonly\u003c/strong\u003e the \u003cstrong\u003easync chunks\u003c/strong\u003e will be taken into account by the cache group in question(this is the default behaviour); so, not only can we specify the number of chunks a module must be part of, but also the chunk’s type\u003c/li\u003e\u003cli\u003e\u003ccode\u003einitial\u003c/code\u003e - \u003cstrong\u003eonly\u003c/strong\u003e the \u003cstrong\u003einitial/main\u003c/strong\u003e chunks are taken into account\u003c/li\u003e\u003cli\u003e\u003ccode\u003eall\u003c/code\u003e - any chunk\u003c/li\u003e\u003cli\u003ea predicate function that will determine which chunk will be considered; here we can filter out chunks by using many of the chunk's properties: its name, its constituent modules etc.\u003c/li\u003e\u003c/ul\u003e\u003cp\u003eIt is worthwhile to underline the \u003cstrong\u003econnection\u003c/strong\u003e between the \u003ccode\u003echunks\u003c/code\u003e option and \u003ccode\u003eminChunks\u003c/code\u003e. We use the \u003ccode\u003echunks\u003c/code\u003e option in order to filter out certain chunks and then \u003ccode\u003eSplitChunksPlugin\u003c/code\u003e \u003ca href=\"https://github.com/webpack/webpack/blob/v5.65.0/lib/optimize/SplitChunksPlugin.js#L1068-L1069\"\u003echecks the number of remaining chunks against \u003ccode\u003eminChunks\u003c/code\u003e\u003c/a\u003e. To give an example, \u003ca href=\"https://stackblitz.com/edit/node-3kmfgr?file=readme.md\"\u003ehere's a StackBlitz project\u003c/a\u003e which has the following structure:\u003c/p\u003e\u003cfigure class=\"kg-card kg-image-card kg-width-wide\"\u003e\u003cimg src=\"https://images.indepth.dev/images/2021/12/chunks-option-a-initial.png\" class=\"kg-image\" alt loading=\"lazy\"\u003e\u003c/figure\u003e\u003cp\u003e\u003cem\u003eA link for the above diagram can be found \u003ca href=\"https://excalidraw.com/#json=umfHzfM2ndo2LlxI2S41D,FpXjw_T0kELja0TwEKCJmQ\"\u003ehere\u003c/a\u003e.\u003c/em\u003e\u003c/p\u003e\u003cp\u003eAs noticed from the diagram, we have a new \u003cstrong\u003emain chunk:\u003c/strong\u003e \u003ccode\u003ea-initial\u003c/code\u003e. This chunk corresponds to the \u003ccode\u003ea-initial\u003c/code\u003e item in the \u003cstrong\u003eentry object\u003c/strong\u003e from the configuration file. As a result, the \u003ccode\u003ex\u003c/code\u003e module will be request from one more chunk.\u003c/p\u003e\u003cp\u003eLet's try to solve this problem: we want new chunks to be created \u003cstrong\u003eonly if\u003c/strong\u003e their constituent modules are required in at least 4 other chunks, regardless of whether the chunk is async or not(basically we're considering all chunks). Here's a way to configure \u003ccode\u003eSplitChunksPlugin\u003c/code\u003e so that we can achieve the desired result:\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"language-jsx\"\u003eoptimization: {\n  // Instruct webpack not to obfuscate the resulting code\n  minimize: false,\n  splitChunks: {\n    minSize: 0,\n    chunks: 'all',\n    minChunks: 4,\n    cacheGroups: {\n      // Disabling this cache group.\n      default: false,\n    },\n  },\n},\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eNotice that with \u003ccode\u003echunks: 'all'\u003c/code\u003e we are essentially saying this to \u003ccode\u003eSplitChunksPlugin\u003c/code\u003e: \u003cem\u003eplease consider any chunk that requires a module, doesn't matter whether it's async or initial or of any other type.\u003c/em\u003e\u003c/p\u003e\u003cp\u003eOnce \u003ccode\u003enpm run build\u003c/code\u003e is invoked, we should see only one new chunk generated which unsurprisingly contains only the module \u003ccode\u003ex\u003c/code\u003e:\u003c/p\u003e\u003cfigure class=\"kg-card kg-image-card\"\u003e\u003cimg src=\"https://images.indepth.dev/images/2021/12/chunks-option-ss.png\" class=\"kg-image\" alt=\"chunks-option-ss.png\" loading=\"lazy\" width=\"905\" height=\"677\"\u003e\u003c/figure\u003e\u003cp\u003eWe will end this section with a few small tasks that aim to clarify this option even more.\u003cbr\u003e\u003cem\u003eNote: what follows is based on the above diagram that depicts the chunks and their modules. It is recommended to try out the following configurations in the StackBlitz app that has been provided earlier.\u003c/em\u003e\u003c/p\u003e\u003cp\u003eDo you find anything \u003cem\u003ewrong\u003c/em\u003e with the below configuration? (aiming at the \u003ccode\u003echunk\u003c/code\u003e and \u003ccode\u003eminChunks\u003c/code\u003e duo)\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"language-jsx\"\u003eoptimization: {\n  minimize: false,\n  splitChunks: {\n    minSize: 0,\n    chunks: 'async',\n    minChunks: 4,\n    cacheGroups: {\n      // Disabling this cache group.\n      default: false,\n    },\n  },\n},\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eThe problem is that there is no module that appears in 4 \u003cstrong\u003easync chunks\u003c/strong\u003e - so we will end up only with duplicated code, since no separate chunks have been created! The closest it gets to is 3 and we're talking about the \u003ccode\u003ex\u003c/code\u003e module here. In order to properly extract the \u003ccode\u003ex\u003c/code\u003e's code into a new chunk, we will have to change \u003ccode\u003eminChunks: 4\u003c/code\u003e to \u003ccode\u003eminChunks: 3\u003c/code\u003e(feel free to try this out in the StackBlitz project).\u003c/p\u003e\u003cp\u003eWhat about the next configuration? What are we asking webpack to do here?\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"language-jsx\"\u003eoptimization: {\n  minimize: false,\n  splitChunks: {\n    minSize: 0,\n    chunks: 'initial',\n    minChunks: 4,\n    cacheGroups: {\n      // Disabling this cache group.\n      default: false,\n    },\n  },\n},\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eWe're telling webpack to split chunks(i.e. create new chunks) only if they contain modules which come \u003ccode\u003enode_modules\u003c/code\u003e(hence the \u003ccode\u003edefaultVendors\u003c/code\u003e group) and which appear in at least 4 \u003cstrong\u003einitial\u003c/strong\u003e chunks. In our case, there is only one initial chunk that requires such modules: the \u003ccode\u003ea-initial\u003c/code\u003e chunk which requires the modules \u003ccode\u003ex\u003c/code\u003e and \u003ccode\u003ez\u003c/code\u003e(there is also the \u003ccode\u003emain\u003c/code\u003e chunk, but it only requires modules via the \u003ccode\u003eimport()\u003c/code\u003e function). So, the correction here would be to change \u003ccode\u003eminChunks: 4\u003c/code\u003e to \u003ccode\u003eminChunks: 1\u003c/code\u003e.\u003c/p\u003e\u003cp\u003eIn this section there were a bunch of new concepts we've learned about and the beautiful thing about it is that they will be of use in the following articles, where we will explore other configuration options for this plugin.\u003c/p\u003e\u003chr\u003e\u003ch2 id=\"conclusion\"\u003eConclusion\u003c/h2\u003e\u003cp\u003eAlthough this learning journey probably turned out to be not so easy, I hope the effort was worth it.\u003c/p\u003e\u003cp\u003eTo \u003cstrong\u003equickly recap\u003c/strong\u003e one of the problem this plugin solves: \u003cstrong\u003ecode duplication\u003c/strong\u003e - a module is copied in multiple \u003cstrong\u003echunks\u003c/strong\u003e and this sometimes can be expensive, especially when the module is at least a few hundreds lines of code. A solution to this problem is \u003cem\u003ecentralise\u003c/em\u003e these kinds of modules, so that they can be reused by multiple consumers. This can be achieved by placing the module in question in a separate chunk which will be loaded(fetched over the network as an HTTP request) only once.\u003cbr\u003eNow a question arises: \u003cem\u003ewhat are the criteria based on which these separate chunks are created? -\u003c/em\u003e here is where \u003ccode\u003eSplitChunksPlugin\u003c/code\u003e comes into play - it decides on how to properly organise into chunks the modules which are very frequently used in multiple places.\u003c/p\u003e\u003cp\u003e\u003cstrong\u003eThanks for reading!\u003c/strong\u003e\u003c/p\u003e\u003cp\u003e\u003cem\u003eThe diagrams have been made with \u003ca href=\"https://excalidraw.com/\"\u003eExcalidraw\u003c/a\u003e.\u003c/em\u003e\u003c/p\u003e\u003cp\u003e\u003cem\u003eSpecial thanks \u003ca href=\"https://twitter.com/maxkoretskyi\"\u003eMax Koretskyi\u003c/a\u003e for reviewing this article and for providing extremely valuable feedback.\u003c/em\u003e\u003c/p\u003e","comment_id":"61c1c32d7e6c0dc6ecd8bcf8","feature_image":"https://images.indepth.dev/images/2022/02/webpack_-An-in-depth-introduction-to-SplitChunksPlugin-3.jpg","featured":false,"visibility":"public","created_at":"2021-12-21T14:06:05.000+02:00","updated_at":"2022-02-21T12:06:30.000+02:00","published_at":"2022-02-21T11:38:55.000+02:00","custom_excerpt":"This article will give you a good introduction to one of the most used plugins in webpack's ecosystem - SplitChunksPlugin.","codeinjection_head":"{\"community_link\":\"https://github.com/indepth-dev/community/discussions/256\"}","codeinjection_foot":null,"custom_template":null,"canonical_url":null,"email_recipient_filter":"none","authors":[{"id":"5e260ca7b2bc9211f8af8e08","name":"Andrei Gatej","slug":"andreigatej","profile_image":"https://images.indepth.dev/images/2022/12/me3.jpg","cover_image":null,"bio":"A curious software developer with a passion for solving problems and learning new things.","website":"https://andreigatej.dev/","location":"Romania","facebook":null,"twitter":"@anduser96","meta_title":null,"meta_description":null,"url":"https://admin.indepth.dev/author/andreigatej/"}],"tags":[{"id":"5e5cbd7ad724c36e46b21d03","name":"webpack","slug":"webpack","description":null,"feature_image":null,"visibility":"public","meta_title":null,"meta_description":null,"og_image":null,"og_title":null,"og_description":null,"twitter_image":null,"twitter_title":null,"twitter_description":null,"codeinjection_head":null,"codeinjection_foot":null,"canonical_url":null,"accent_color":null,"url":"https://admin.indepth.dev/tag/webpack/"},{"id":"5e58bac6be143e7df0e2c850","name":"configuration","slug":"configuration","description":null,"feature_image":null,"visibility":"public","meta_title":null,"meta_description":null,"og_image":null,"og_title":null,"og_description":null,"twitter_image":null,"twitter_title":null,"twitter_description":null,"codeinjection_head":null,"codeinjection_foot":null,"canonical_url":null,"accent_color":null,"url":"https://admin.indepth.dev/tag/configuration/"}],"primary_author":{"id":"5e260ca7b2bc9211f8af8e08","name":"Andrei Gatej","slug":"andreigatej","profile_image":"https://images.indepth.dev/images/2022/12/me3.jpg","cover_image":null,"bio":"A curious software developer with a passion for solving problems and learning new things.","website":"https://andreigatej.dev/","location":"Romania","facebook":null,"twitter":"@anduser96","meta_title":null,"meta_description":null,"url":"https://admin.indepth.dev/author/andreigatej/","_id":1024},"primary_tag":{"id":"5e5cbd7ad724c36e46b21d03","name":"webpack","slug":"webpack","description":null,"feature_image":null,"visibility":"public","meta_title":null,"meta_description":null,"og_image":null,"og_title":null,"og_description":null,"twitter_image":null,"twitter_title":null,"twitter_description":null,"codeinjection_head":null,"codeinjection_foot":null,"canonical_url":null,"accent_color":null,"url":"https://admin.indepth.dev/tag/webpack/"},"url":"https://admin.indepth.dev/webpack-an-in-depth-introduction-to-splitchunksplugin/","excerpt":"This article will give you a good introduction to one of the most used plugins in webpack's ecosystem - SplitChunksPlugin.","reading_time":20,"access":true,"send_email_when_published":false,"og_image":null,"og_title":null,"og_description":null,"twitter_image":"https://images.indepth.dev/images/2022/02/webpack_-An-in-depth-introduction-to-SplitChunksPlugin2-2.jpg","twitter_title":null,"twitter_description":null,"meta_title":null,"meta_description":null,"email_subject":null,"frontmatter":null,"_id":1490},{"id":"61fba8989c34bf7c9fd815fe","uuid":"81191a0b-ee3f-4eb6-a054-c128e5a0abf4","title":"Boosting Your React App Performance with React Profiler","slug":"react-profiler","html":"\u003cp\u003eWriting a React application is easy.\u003cbr\u003eWriting a good React application is more complicated.\u003cbr\u003eWriting a good React application that also works fast, well, this takes a lot more than just programming skills.\u003c/p\u003e\u003cp\u003eEven if you’re a great programmer, sharp as a tack, smart as a whip, as good with React as Dan Abramov — you miss stuff; it happens. And sometimes it’s not trivial at all to find out what it is that you’ve missed.\u003c/p\u003e\u003cp\u003eToday we’re going to talk about the ultimate tool for tackling React performance issues — React Profiler.\u003c/p\u003e\u003ch2 id=\"background\"\u003eBackground\u003c/h2\u003e\u003cp\u003eFirst \u003ca href=\"https://reactjs.org/blog/2018/09/10/introducing-the-react-profiler.html\" rel=\"noopener ugc nofollow\"\u003eintroduced\u003c/a\u003e in 2018 React Profiler has been a part of \u003ca href=\"https://chrome.google.com/webstore/detail/react-developer-tools/fmkadmapgofadopljbjfkapdkoienihi?hl=en\" rel=\"noopener ugc nofollow\"\u003eReact Dev Tools Chrome extension\u003c/a\u003e for a while. You’d expect such a powerful tool to gain a lot of popularity over the years, but I keep seeing people in the professional community using \u003cstrong\u003e\u003cstrong\u003econsole.log\u003c/strong\u003e\u003c/strong\u003e for counting the number of renders and measuring rendering time.\u003c/p\u003e\u003cp\u003eWhether it is because people are unfamiliar with the Profiler, or because it seems too complicated to them — we’re going to tackle both; you’re going to learn what it is and how to use it and you’ll see it’s not complicated at all.\u003c/p\u003e\u003cp\u003eSo let’s jump right into it.\u003c/p\u003e\u003ch2 id=\"lab-rat\"\u003eLab rat\u003c/h2\u003e\u003cp\u003eTo showcase React Profiler, we’ll have a very simple application with an auto-generated list of numbers that can be filtered by a search term we’ll enter in a text box.\u003c/p\u003e\u003cp\u003eHere we go:\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"language-ts\"\u003econst items = Array.from({ length: 200 }, () =\u0026gt; `${chance.integer()}`);\n\nexport const FilterableList = () =\u0026gt; {\n    const [searchTerm, setSearchTerm] = useState('');\n    return \u0026lt;div className={'filterableList'}\u0026gt;\n        \u0026lt;Filter onValueUpdated={setSearchTerm} /\u0026gt;\n        \u0026lt;List entries={items.filter(item =\u0026gt; item.includes(searchTerm))} /\u0026gt;\n    \u0026lt;/div\u0026gt;\n}\u003c/code\u003e\u003c/pre\u003e\u003cpre\u003e\u003ccode class=\"language-ts\"\u003eexport interface ListProps {\n  entries: string[];\n}\n\nexport const List: FC\u0026lt;ListProps\u0026gt; = ({entries}) =\u0026gt; {\n  return (\n    \u0026lt;div className=\"list\"\u0026gt;\n      {entries.map((value, index) =\u0026gt; \n        \u0026lt;ListItem key={index} value={value}/\u0026gt;\n      )}\n    \u0026lt;/div\u0026gt;\n  );\n}\n\nexport const ListItem: FC\u0026lt;ListItemProps\u0026gt; = ({value}) =\u0026gt; \u0026lt;div className={'item'}\u0026gt;{value}\u0026lt;/div\u0026gt;\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eNothing complicated here they said, self-explanatory code they said.\u003c/p\u003e\u003cp\u003eTo make it easier to follow I made this app available online \u003ca href=\"https://react-profiler-lab-rat.netlify.app/\" rel=\"noopener ugc nofollow\"\u003ehere\u003c/a\u003e. You can enter the site, open the Debug Tools and follow along with this article.\u003c/p\u003e\u003cp\u003eThe full code of the app can be found on \u003ca href=\"https://github.com/just-jeb/react-profiler-lab-rat-app/tree/not-optimized\" rel=\"noopener ugc nofollow\"\u003eGithub\u003c/a\u003e.\u003c/p\u003e\u003ch2 id=\"react-profiler\"\u003eReact Profiler\u003c/h2\u003e\u003cp\u003eNow that we have our app up and running we can meet the React Profiler. I assume by now you already have the React Dev Tools extension installed but if not please head to the \u003ca href=\"https://chrome.google.com/webstore/detail/react-developer-tools/fmkadmapgofadopljbjfkapdkoienihi?hl=en\" rel=\"noopener ugc nofollow\"\u003eChrome Store\u003c/a\u003e and do yourself a favor.\u003c/p\u003e\u003cp\u003eOnce installed, React Dev Tools will be enabled on any website built with React.\u003c/p\u003e\u003cp\u003eGo to our web app and open Chrome Dev Tools. You’ll notice that one of the tabs will be \u003cstrong\u003e\u003cstrong\u003eProfiler\u003c/strong\u003e\u003c/strong\u003e:\u003c/p\u003e\u003cfigure class=\"kg-card kg-image-card\"\u003e\u003cimg src=\"https://images.indepth.dev/images/2022/02/image.png\" class=\"kg-image\" alt loading=\"lazy\" width=\"1213\" height=\"619\"\u003e\u003c/figure\u003e\u003cp\u003eProfiling doesn’t work on the fly — first, you have to record a profiling session and then you can analyze it.\u003c/p\u003e\u003cp\u003eBefore we start recording we need to enable one important setting in React Dev Tools settings:\u003c/p\u003e\u003cfigure class=\"kg-card kg-image-card\"\u003e\u003cimg src=\"https://images.indepth.dev/images/2022/02/image-1.png\" class=\"kg-image\" alt loading=\"lazy\" width=\"1213\" height=\"619\"\u003e\u003c/figure\u003e\u003cp\u003eClick on the gears icon and check the \u003cstrong\u003e\u003cstrong\u003eRecord why each component rendered while profiling\u003c/strong\u003e\u003c/strong\u003e checkbox:\u003c/p\u003e\u003cfigure class=\"kg-card kg-image-card\"\u003e\u003cimg src=\"https://images.indepth.dev/images/2022/02/image-2.png\" class=\"kg-image\" alt loading=\"lazy\" width=\"1209\" height=\"560\"\u003e\u003c/figure\u003e\u003cp\u003eThe second option (\u003cstrong\u003e\u003cstrong\u003eHide commits below\u003c/strong\u003e\u003c/strong\u003e) is also useful, particularly when you have lots of \u003ca href=\"https://javascript.plainenglish.io/boosting-your-react-app-performance-with-react-profiler-be049146bdd3#6bef\" rel=\"noopener ugc nofollow\"\u003ecommits\u003c/a\u003e and want to filter the insignificant ones (those that are below a certain threshold).\u003c/p\u003e\u003ch2 id=\"recording-a-profile\"\u003eRecording a profile\u003c/h2\u003e\u003cp\u003eTo start recording a profile click on the blue \u003cstrong\u003e\u003cstrong\u003eRecord\u003c/strong\u003e\u003c/strong\u003e button:\u003c/p\u003e\u003cfigure class=\"kg-card kg-image-card\"\u003e\u003cimg src=\"https://images.indepth.dev/images/2022/02/image-3.png\" class=\"kg-image\" alt loading=\"lazy\" width=\"1213\" height=\"619\"\u003e\u003c/figure\u003e\u003cp\u003eAlternatively, you can reload the page and start the recording immediately:\u003c/p\u003e\u003cfigure class=\"kg-card kg-image-card\"\u003e\u003cimg src=\"https://images.indepth.dev/images/2022/02/image-4.png\" class=\"kg-image\" alt loading=\"lazy\" width=\"1213\" height=\"619\"\u003e\u003c/figure\u003e\u003cp\u003eAfter the recording started, play with your app a bit or reproduce a particularly problematic scenario and then stop the recording:\u003c/p\u003e\u003cfigure class=\"kg-card kg-image-card\"\u003e\u003cimg src=\"https://images.indepth.dev/images/2022/02/image-5.png\" class=\"kg-image\" alt loading=\"lazy\" width=\"1208\" height=\"735\"\u003e\u003c/figure\u003e\u003cp\u003eFor our test app I’ll just enter \u003cstrong\u003e\u003cstrong\u003e111\u003c/strong\u003e\u003c/strong\u003e in the text field and then delete the digits one by one (\u003cstrong\u003e\u003cstrong\u003e111 -\u0026gt; 11 -\u0026gt; 1 -\u0026gt; ‘’\u003c/strong\u003e\u003c/strong\u003e).\u003c/p\u003e\u003cp\u003eAfter stopping the recording this is what we get:\u003c/p\u003e\u003cfigure class=\"kg-card kg-image-card\"\u003e\u003cimg src=\"https://images.indepth.dev/images/2022/02/image-6.png\" class=\"kg-image\" alt loading=\"lazy\" width=\"982\" height=\"250\"\u003e\u003c/figure\u003e\u003cp\u003eNow let’s see what it means.\u003c/p\u003e\u003ch2 id=\"profiler-ui\"\u003eProfiler UI\u003c/h2\u003e\u003cp\u003eThe Profiler UI can be logically separated into 4 main sections:\u003c/p\u003e\u003cfigure class=\"kg-card kg-image-card\"\u003e\u003cimg src=\"https://images.indepth.dev/images/2022/02/image-7.png\" class=\"kg-image\" alt loading=\"lazy\" width=\"982\" height=\"250\"\u003e\u003c/figure\u003e\u003col\u003e\u003cli\u003e\u003cstrong\u003e\u003cstrong\u003eChart selection\u003c/strong\u003e\u003c/strong\u003e — allows choosing between two different representations of your app profile — \u003cem\u003e\u003cem\u003eFlame Chart\u003c/em\u003e\u003c/em\u003e and \u003cem\u003e\u003cem\u003eRanked Chart\u003c/em\u003e\u003c/em\u003e. We’ll cover both in detail.\u003c/li\u003e\u003cli\u003e\u003cstrong\u003e\u003cstrong\u003eChart area \u003c/strong\u003e\u003c/strong\u003e— a graphical representation of a \u003cem\u003e\u003cem\u003esingle commit\u003c/em\u003e\u003c/em\u003e in your application profile.\u003c/li\u003e\u003cli\u003e\u003cstrong\u003e\u003cstrong\u003eCommits \u003c/strong\u003e\u003c/strong\u003e— each bar represents a single occurrence of the \u003ca href=\"https://wavez.github.io/react-hooks-lifecycle/\" rel=\"noopener ugc nofollow\"\u003ecommit phase\u003c/a\u003e in the lifecycle of your application. Whenever you select a commit by clicking on it, the chart area and the commit information are updated accordingly.\u003c/li\u003e\u003cli\u003e\u003cstrong\u003e\u003cstrong\u003eInformation panel \u003c/strong\u003e\u003c/strong\u003e— the details about a single selected commit phase or a single selected component.\u003c/li\u003e\u003c/ol\u003e\u003cp\u003eNow let’s talk about it in detail.\u003c/p\u003e\u003ch2 id=\"commits\"\u003eCommits\u003c/h2\u003e\u003cp\u003eReact reconciliation algorithm is split into two phases: \u003cstrong\u003e\u003cstrong\u003erender\u003c/strong\u003e\u003c/strong\u003e and \u003cstrong\u003e\u003cstrong\u003ecommit\u003c/strong\u003e\u003c/strong\u003e.\u003c/p\u003e\u003cul\u003e\u003cli\u003eThe \u003cstrong\u003e\u003cstrong\u003erender\u003c/strong\u003e\u003c/strong\u003e phase determines what changes need to be made to e.g. the DOM. During this phase, React calls render and then compares the result to the previous render (\u003ca href=\"https://reactjs.org/docs/reconciliation.html#the-diffing-algorithm\" rel=\"noopener ugc nofollow\"\u003ethe diffing algorithm\u003c/a\u003e).\u003c/li\u003e\u003cli\u003eThe \u003cstrong\u003e\u003cstrong\u003ecommit\u003c/strong\u003e\u003c/strong\u003e phase is when React applies any changes. (In the case of React DOM, this is when React inserts, updates, and removes DOM nodes.)\u003c/li\u003e\u003c/ul\u003e\u003cp\u003e\u003ca href=\"https://pbs.twimg.com/media/DZ-97vzW4AAbcZj?format=jpg\u0026amp;name=large\" rel=\"noopener ugc nofollow\"\u003eHere\u003c/a\u003e is the phases diagram for classic React components (by Dan Abramov) and \u003ca href=\"https://wavez.github.io/react-hooks-lifecycle/\" rel=\"noopener ugc nofollow\"\u003ehere\u003c/a\u003e is a similar diagram for hooks (by Guy Margalit).\u003c/p\u003e\u003cp\u003eAs previously mentioned, each bar in the commits section represents a single commit — the taller the bar the longer the commit took to render. The commits are also distinguishable by a greenish-to-yellowish color gradient — yellows are the less performant ones and greens are more performant.\u003c/p\u003e\u003cp\u003eThus, a \u003cem\u003e\u003cem\u003etaller yellow bar represents a commit that took longer than a shorter green bar\u003c/em\u003e\u003c/em\u003e.\u003c/p\u003e\u003cp\u003eThe currently selected commit is colored blue.\u003c/p\u003e\u003ch2 id=\"charts-flamegraph-chart\"\u003eCharts: Flamegraph Chart\u003c/h2\u003e\u003cp\u003eThe flamegraph chart view represents the rendering tree of your application for a specific commit. Each bar in the chart represents a React component. The components are organized from the rendering root to the leaves (root is the topmost component and leaves are the bottommost).\u003c/p\u003e\u003cfigure class=\"kg-card kg-image-card\"\u003e\u003cimg src=\"https://images.indepth.dev/images/2022/02/image-8.png\" class=\"kg-image\" alt loading=\"lazy\" width=\"717\" height=\"129\"\u003e\u003c/figure\u003e\u003cp\u003eAs you can see, \u003cstrong\u003e\u003cstrong\u003eHeader\u003c/strong\u003e\u003c/strong\u003e and \u003cstrong\u003e\u003cstrong\u003eFilterableList\u003c/strong\u003e\u003c/strong\u003e are \u003cstrong\u003e\u003cstrong\u003eApp\u003c/strong\u003e\u003c/strong\u003e’s children so they appear next to each other and below the \u003cstrong\u003e\u003cstrong\u003eApp\u003c/strong\u003e\u003c/strong\u003e component.\u003c/p\u003e\u003cp\u003eThe width of the bar represents how long the component \u003cem\u003e\u003cem\u003eand its children \u003c/em\u003e\u003c/em\u003etook to render\u003cem\u003e\u003cem\u003e. \u003c/em\u003e\u003c/em\u003eThe color of the bar represents how long the component itself took to render (greenish is fast, yellowish is slow).\u003c/p\u003e\u003cp\u003eThus, in the example above the width of \u003cstrong\u003e\u003cstrong\u003eFilterableList \u003c/strong\u003e\u003c/strong\u003erepresents the time that took \u003cstrong\u003e\u003cstrong\u003eFilterableList\u003c/strong\u003e\u003c/strong\u003e to render \u003cem\u003e\u003cem\u003eincluding\u003c/em\u003e\u003c/em\u003e the time it took \u003cstrong\u003e\u003cstrong\u003eList\u003c/strong\u003e\u003c/strong\u003e to render.\u003c/p\u003e\u003cp\u003eOn the other hand, you can see that \u003cstrong\u003e\u003cstrong\u003eFilterableList \u003c/strong\u003e\u003c/strong\u003eis green and \u003cstrong\u003e\u003cstrong\u003eList\u003c/strong\u003e\u003c/strong\u003e is yellow and it correlates with the numbers — it took \u003cstrong\u003e\u003cstrong\u003eFilterableList \u003c/strong\u003e\u003c/strong\u003eonly \u003cstrong\u003e\u003cstrong\u003e0.5ms\u003c/strong\u003e\u003c/strong\u003e to render and it took \u003cstrong\u003e\u003cstrong\u003eList 1.6ms \u003c/strong\u003e\u003c/strong\u003eto render\u003cstrong\u003e\u003cstrong\u003e.\u003c/strong\u003e\u003c/strong\u003e\u003c/p\u003e\u003cp\u003eBut what happens if a component is not rendered at all during a particular commit?\u003c/p\u003e\u003cp\u003eLet’s take a look at the 4th commit:\u003c/p\u003e\u003cfigure class=\"kg-card kg-image-card\"\u003e\u003cimg src=\"https://images.indepth.dev/images/2022/02/image-9.png\" class=\"kg-image\" alt loading=\"lazy\" width=\"704\" height=\"122\"\u003e\u003c/figure\u003e\u003cp\u003eThe\u003cstrong\u003e\u003cstrong\u003e App\u003c/strong\u003e\u003c/strong\u003e and \u003cstrong\u003e\u003cstrong\u003eHeader \u003c/strong\u003e\u003c/strong\u003ecomponents don’t change upon filtering, so they are rendered only once — during the first commit. On the following commits, both components are greyed out, however, they still look a bit different. So what’s the difference?\u003c/p\u003e\u003cp\u003e\u003cstrong\u003e\u003cstrong\u003eGrey fill\u003c/strong\u003e\u003c/strong\u003e — a component that did not render during this commit but is part of the rendering path (e.g. \u003cstrong\u003e\u003cstrong\u003eApp\u003c/strong\u003e\u003c/strong\u003e didn’t render but it is a parent of \u003cstrong\u003e\u003cstrong\u003eFilterableList \u003c/strong\u003e\u003c/strong\u003ewhich did render).\u003c/p\u003e\u003cp\u003e\u003cstrong\u003e\u003cstrong\u003eGrey gradient stripes\u003c/strong\u003e\u003c/strong\u003e — a component that did not render during this commit and also is not part of the rendering path (e.g. \u003cstrong\u003e\u003cstrong\u003eHeader\u003c/strong\u003e\u003c/strong\u003e didn’t render but it also doesn’t have any children that did render)\u003c/p\u003e\u003cp\u003eAlso, you might have noticed that the \u003cstrong\u003e\u003cstrong\u003eApp\u003c/strong\u003e\u003c/strong\u003e component bar still has a width although it didn’t render.\u003c/p\u003e\u003cp\u003eSo let’s refine the definition a bit.\u003c/p\u003e\u003cp\u003e\u003cstrong\u003e\u003cstrong\u003eThe width of a bar represents how much time was spent \u003cem\u003e\u003cem\u003ewhen the component was last rendered\u003c/em\u003e\u003c/em\u003e and the color represents how much time was spent \u003cem\u003e\u003cem\u003eas part of the current commit\u003c/em\u003e\u003c/em\u003e.\u003c/strong\u003e\u003c/strong\u003e\u003c/p\u003e\u003cp\u003eLast but not least, you can zoom in or out on a chart by clicking on a component.\u003c/p\u003e\u003cp\u003eZoomed out:\u003c/p\u003e\u003cfigure class=\"kg-card kg-image-card\"\u003e\u003cimg src=\"https://images.indepth.dev/images/2022/02/image-10.png\" class=\"kg-image\" alt loading=\"lazy\" width=\"704\" height=\"122\"\u003e\u003c/figure\u003e\u003cp\u003eZoomed in:\u003c/p\u003e\u003cfigure class=\"kg-card kg-image-card\"\u003e\u003cimg src=\"https://images.indepth.dev/images/2022/02/image-11.png\" class=\"kg-image\" alt loading=\"lazy\" width=\"710\" height=\"103\"\u003e\u003c/figure\u003e\u003cp\u003eZoomed out:\u003c/p\u003e\u003cfigure class=\"kg-card kg-image-card\"\u003e\u003cimg src=\"https://images.indepth.dev/images/2022/02/image-12.png\" class=\"kg-image\" alt loading=\"lazy\" width=\"704\" height=\"122\"\u003e\u003c/figure\u003e\u003ch2 id=\"charts-ranked-chart\"\u003eCharts: Ranked Chart\u003c/h2\u003e\u003cp\u003eSimilar to a flamegraph chart, a ranked chart represents a single commit. However, unlike in a flamegraph chart, the components are ordered by rendering time and not by rendering order.\u003c/p\u003e\u003cp\u003eThat means that \u003cem\u003e\u003cem\u003ecomponents that took the longest to render are at the top.\u003c/em\u003e\u003c/em\u003e\u003c/p\u003e\u003cp\u003eAnother difference is that the component’s bar width represents the time that it took the component to render \u003cem\u003e\u003cem\u003enot including its children. \u003c/em\u003e\u003c/em\u003eThis means there is a direct correlation between the color and the width.\u003c/p\u003e\u003cfigure class=\"kg-card kg-image-card\"\u003e\u003cimg src=\"https://images.indepth.dev/images/2022/02/image-14.png\" class=\"kg-image\" alt loading=\"lazy\" width=\"708\" height=\"312\"\u003e\u003c/figure\u003e\u003cp\u003eAs you can see, \u003cstrong\u003e\u003cstrong\u003eList \u003c/strong\u003e\u003c/strong\u003etook the longest to render so it is located at the top, it is the widest among the bars and it is the yellowest among the bars.\u003c/p\u003e\u003cp\u003eComponents that didn’t render during this commit \u003cem\u003e\u003cem\u003ewon’t appear in the ranked chart\u003c/em\u003e\u003c/em\u003e.\u003c/p\u003e\u003cp\u003eSimilar to the flamegraph chart zoom in and out is possible by clicking on a component.\u003c/p\u003e\u003cfigure class=\"kg-card kg-image-card\"\u003e\u003cimg src=\"https://images.indepth.dev/images/2022/02/image-15.png\" class=\"kg-image\" alt loading=\"lazy\" width=\"711\" height=\"342\"\u003e\u003c/figure\u003e\u003ch2 id=\"information-panel\"\u003eInformation panel\u003c/h2\u003e\u003cp\u003eThe information panel has two different applications.\u003c/p\u003e\u003cp\u003e\u003cstrong\u003e\u003cstrong\u003e1. Selected commit\u003c/strong\u003e\u003c/strong\u003e\u003c/p\u003e\u003cfigure class=\"kg-card kg-image-card\"\u003e\u003cimg src=\"https://images.indepth.dev/images/2022/02/image-16.png\" class=\"kg-image\" alt loading=\"lazy\" width=\"255\" height=\"166\"\u003e\u003c/figure\u003e\u003cp\u003eWhen no component is selected (zoomed in) it shows an overview of a commit that is currently selected in the commits section. The data includes the time (since the app start) it was committed at, the time it took to render, and the priority.\u003c/p\u003e\u003cp\u003e\u003cstrong\u003e\u003cstrong\u003e2. Selected component\u003c/strong\u003e\u003c/strong\u003e\u003c/p\u003e\u003cfigure class=\"kg-card kg-image-card\"\u003e\u003cimg src=\"https://images.indepth.dev/images/2022/02/image-17.png\" class=\"kg-image\" alt loading=\"lazy\" width=\"348\" height=\"393\"\u003e\u003c/figure\u003e\u003cp\u003eWhen you click on a component (zoom into it) in one of the chart views, the information panel will show the details about this component. This includes why the component has rendered during this particular commit (if you enabled this option in settings) and the list of commits with timestamps. The list is interactive and allows you easily navigate between different commits in which this particular component has been involved.\u003c/p\u003e\u003ch2 id=\"taking-the-lab-rat-to-the-next-level\"\u003eTaking the lab rat to the next level\u003c/h2\u003e\u003cp\u003eNow that we’re acquainted with React Profiler let’s see how we apply this knowledge to a real-life scenario.\u003c/p\u003e\u003cp\u003eLet’s take another look at our \u003ca href=\"https://github.com/just-jeb/react-profiler-lab-rat-app/tree/not-optimized\" rel=\"noopener ugc nofollow\"\u003eapp\u003c/a\u003e.\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"language-ts\"\u003econst items = Array.from({ length: 200 }, () =\u0026gt; `${chance.integer()}`);\n\nexport const FilterableList = () =\u0026gt; {\n    const [searchTerm, setSearchTerm] = useState('');\n    return \u0026lt;div className={'filterableList'}\u0026gt;\n        \u0026lt;Filter onValueUpdated={setSearchTerm} /\u0026gt;\n        \u0026lt;List entries={items.filter(item =\u0026gt; item.includes(searchTerm))} /\u0026gt;\n    \u0026lt;/div\u0026gt;\n}\u003c/code\u003e\u003c/pre\u003e\u003cpre\u003e\u003ccode class=\"language-ts\"\u003eexport interface ListProps {\n  entries: string[];\n}\n\nexport const List: FC\u0026lt;ListProps\u0026gt; = ({entries}) =\u0026gt; {\n  return (\n    \u0026lt;div className=\"list\"\u0026gt;\n      {entries.map((value, index) =\u0026gt; \n        \u0026lt;ListItem key={index} value={value}/\u0026gt;\n      )}\n    \u0026lt;/div\u0026gt;\n  );\n}\n\nexport const ListItem: FC\u0026lt;ListItemProps\u0026gt; = ({value}) =\u0026gt; \u0026lt;div className={'item'}\u0026gt;{value}\u0026lt;/div\u0026gt;\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eThe logic inside the components is pretty straightforward, so it will be hard to improve.\u003c/p\u003e\u003cp\u003eInstead, we’ll focus on rendering performance to try and reduce the number of renders. Since all we’re doing between the commits is filtering, we’d assume that the items are rendered once and then just removed from the DOM when a filter is applied. This means list items shouldn’t be rendered twice as we filter. However, this is not happening. If you look at the \u003ca href=\"https://react-profiler-lab-rat.netlify.app/\" rel=\"noopener ugc nofollow\"\u003elab rat\u003c/a\u003e profile and switch between the commits in the commits panel, you’ll notice that the list items are rendered upon every commit. Why is this happening?\u003c/p\u003e\u003cp\u003eLet’s zoom into one of the items in the second commit and try to figure it out.\u003c/p\u003e\u003cfigure class=\"kg-card kg-image-card\"\u003e\u003cimg src=\"https://images.indepth.dev/images/2022/02/image-18.png\" class=\"kg-image\" alt loading=\"lazy\" width=\"1086\" height=\"222\"\u003e\u003c/figure\u003e\u003cp\u003eZooming in provides us with helpful information — the item has been re-rendered since its \u003cstrong\u003e\u003cstrong\u003evalue\u003c/strong\u003e\u003c/strong\u003e prop has changed (see the \u003cstrong\u003e\u003cstrong\u003eInformation Panel\u003c/strong\u003e\u003c/strong\u003e).\u003c/p\u003e\u003cp\u003eWhy would the value change? Well, every time we filter the list a new array is created. Since we’re using item index as a \u003cstrong\u003e\u003cstrong\u003ekey\u003c/strong\u003e\u003c/strong\u003e for \u003cstrong\u003e\u003cstrong\u003eListItem \u003c/strong\u003e\u003c/strong\u003ecomponents, the distribution of list values among the components will be different every time we change the filter value.\u003c/p\u003e\u003cp\u003eFor example, at the first render, the first entry in the array was rendered using a component with \u003cstrong\u003e\u003cstrong\u003ekey=1\u003c/strong\u003e\u003c/strong\u003e. However, on the second render when we filtered out a few values from the array, the first entry might be different. React will reuse the component with \u003cstrong\u003e\u003cstrong\u003ekey=1\u003c/strong\u003e\u003c/strong\u003e from the first render, but the value has changed because the first entry has changed, hence re-render.\u003c/p\u003e\u003cp\u003eTo fix this behavior we’ll assign an \u003cstrong\u003e\u003cstrong\u003eID \u003c/strong\u003e\u003c/strong\u003eto every entry in the array when we first create it and use it as a key for the item instead of using item index.\u003c/p\u003e\u003cp\u003eLet’s apply the fix and see what’s changed (the updated app is available \u003ca href=\"https://react-profiler-lab-rat-semi-optimized.netlify.app/\" rel=\"noopener ugc nofollow\"\u003ehere\u003c/a\u003e):\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"language-ts\"\u003econst items = Array.from({ length: 200 }, (_, index) =\u0026gt; ({ value: `${chance.integer()}`, id: index}));\n\nexport const FilterableList = () =\u0026gt; {\n    const [searchTerm, setSearchTerm] = useState('');\n    return \u0026lt;div className={'filterableList'}\u0026gt;\n        \u0026lt;Filter onValueUpdated={setSearchTerm} /\u0026gt;\n        \u0026lt;List entries={items.filter(item =\u0026gt; item.value.includes(searchTerm))} /\u0026gt;\n    \u0026lt;/div\u0026gt;\n}\u003c/code\u003e\u003c/pre\u003e\u003cpre\u003e\u003ccode class=\"language-ts\"\u003eexport interface ListProps {\n  entries: {value: string, id: number}[];\n}\n\nexport const List: FC\u0026lt;ListProps\u0026gt; = ({entries}) =\u0026gt; {\n  return (\n    \u0026lt;div className=\"list\"\u0026gt;\n      {entries.map(({id, value}) =\u0026gt; \n        \u0026lt;ListItem key={id} value={value}/\u0026gt;\n      )}\n    \u0026lt;/div\u0026gt;\n  );\n}\n  \nexport const ListItem: FC\u0026lt;ListItemProps\u0026gt; = ({value}) =\u0026gt; \u0026lt;div className={'item'}\u0026gt;{value}\u0026lt;/div\u0026gt;\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eSurprisingly it changed nothing — the numbers are the same and the item components are still re-rendered upon every commit. Let’s take a closer look:\u003c/p\u003e\u003cfigure class=\"kg-card kg-image-card\"\u003e\u003cimg src=\"https://images.indepth.dev/images/2022/02/image-19.png\" class=\"kg-image\" alt loading=\"lazy\" width=\"1293\" height=\"226\"\u003e\u003c/figure\u003e\u003cp\u003eAs you can see there is one thing that did change — the reason for a re-render. Now the \u003cstrong\u003e\u003cstrong\u003eListItem\u003c/strong\u003e\u003c/strong\u003es are re-rendered because their parent component (\u003cstrong\u003e\u003cstrong\u003eList\u003c/strong\u003e\u003c/strong\u003e) is re-rendered, even though nothing changes for these components — neither the ID nor the value.\u003c/p\u003e\u003cp\u003eLuckily we know how to solve these kinds of issues — \u003ca href=\"https://reactjs.org/docs/react-api.html#reactmemo\" rel=\"noopener ugc nofollow\"\u003e\u003cstrong\u003e\u003cstrong\u003eReact.memo\u003c/strong\u003e\u003c/strong\u003e\u003c/a\u003e!\u003cbr\u003eLet’s put \u003cstrong\u003e\u003cstrong\u003ememo \u003c/strong\u003e\u003c/strong\u003eon the list items and see how much it improves:\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"language-ts\"\u003eexport const ListItem: FC\u0026lt;ListItemProps\u0026gt; = memo(({value}) =\u0026gt; \u0026lt;div className={'item'}\u0026gt;{value}\u0026lt;/div\u0026gt;)\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003e\u003ca href=\"https://react-profiler-lab-rat-optimized.netlify.app/\" rel=\"noopener ugc nofollow\"\u003eHere\u003c/a\u003e we go!\u003c/p\u003e\u003cfigure class=\"kg-card kg-image-card\"\u003e\u003cimg src=\"https://images.indepth.dev/images/2022/02/image-20.png\" class=\"kg-image\" alt loading=\"lazy\" width=\"951\" height=\"182\"\u003e\u003c/figure\u003e\u003cp\u003eNone of the previously rendered items are re-rendered on the following commits. And look at the render duration — we cut it by the factor of 2!\u003c/p\u003e\u003ch2 id=\"finishing-words\"\u003eFinishing words\u003c/h2\u003e\u003cp\u003eThe ultimate solution to this performance problem would be using a list with a virtual scroll which would reuse the same items for different data and thus save on re-mounting the components.\u003cbr\u003eHowever, the goal of this article is to learn how to use the profiler and not to provide the best solution for the Lab Rat app. So I hope this goal is achieved and you understand how it works and what it is capable of.\u003c/p\u003e\u003cp\u003eFeel free to play around with the Lab Rat live application or fork the Github repo and play with it locally:\u003c/p\u003e\u003cul\u003e\u003cli\u003e\u003cstrong\u003e\u003cstrong\u003eNon-optimized\u003c/strong\u003e\u003c/strong\u003e: \u003ca href=\"https://github.com/just-jeb/react-profiler-lab-rat-app/tree/not-optimized\" rel=\"noopener ugc nofollow\"\u003eGithub\u003c/a\u003e, \u003ca href=\"https://react-profiler-lab-rat.netlify.app/\" rel=\"noopener ugc nofollow\"\u003eLive\u003c/a\u003e\u003c/li\u003e\u003cli\u003e\u003cstrong\u003e\u003cstrong\u003eSemi-optimized\u003c/strong\u003e\u003c/strong\u003e: \u003ca href=\"https://github.com/just-jeb/react-profiler-lab-rat-app/tree/semi-optimized\" rel=\"noopener ugc nofollow\"\u003eGithub\u003c/a\u003e, \u003ca href=\"https://react-profiler-lab-rat-semi-optimized.netlify.app/\" rel=\"noopener ugc nofollow\"\u003eLive\u003c/a\u003e\u003c/li\u003e\u003cli\u003e\u003cstrong\u003e\u003cstrong\u003eOptimized\u003c/strong\u003e\u003c/strong\u003e: \u003ca href=\"https://github.com/just-jeb/react-profiler-lab-rat-app\" rel=\"noopener ugc nofollow\"\u003eGithub\u003c/a\u003e, \u003ca href=\"https://react-profiler-lab-rat-optimized.netlify.app/\" rel=\"noopener ugc nofollow\"\u003eLive\u003c/a\u003e\u003c/li\u003e\u003c/ul\u003e\u003cp\u003e\u003cstrong\u003e\u003cstrong\u003eImportant note:\u003c/strong\u003e\u003c/strong\u003e React DOM automatically supports profiling in development mode for v16.5\u0026gt;, but since profiling adds some small additional overhead it is opt-in for production mode. \u003ca href=\"https://gist.github.com/bvaughn/25e6233aeb1b4f0cdb8d8366e54a3977\" rel=\"noopener ugc nofollow\"\u003eThis\u003c/a\u003e gist explains how to opt-in.\u003c/p\u003e\u003cp\u003eThis is it for today, follow me if you liked the article, comment here, or DM me on \u003ca href=\"https://twitter.com/jebbacca\" rel=\"noopener ugc nofollow\"\u003eTwitter\u003c/a\u003e if you have any questions.\u003c/p\u003e\u003cp\u003eCheers!\u003c/p\u003e\u003cp\u003e\u003cem\u003e\u003cem\u003eThis and other articles are available for free on my \u003c/em\u003e\u003c/em\u003e\u003ca href=\"https://www.justjeb.com/blog\" rel=\"noopener ugc nofollow\"\u003e\u003cem\u003e\u003cem\u003epersonal blog\u003c/em\u003e\u003c/em\u003e\u003c/a\u003e\u003cem\u003e\u003cem\u003e. Make sure to sign up to get the latest and greatest!\u003c/em\u003e\u003c/em\u003e\u003c/p\u003e","comment_id":"61fba8989c34bf7c9fd815fe","feature_image":"https://images.indepth.dev/images/2022/02/1_--6s-su5Oxvb9Vs_6g33vw.jpeg","featured":false,"visibility":"public","created_at":"2022-02-03T12:04:08.000+02:00","updated_at":"2022-02-09T11:20:51.000+02:00","published_at":"2022-02-08T20:09:29.000+02:00","custom_excerpt":"A guide to measuring and improving React Apps performance with React Profiler. Accompanied by a web app that makes it easy to follow along.","codeinjection_head":"{\"community_link\": \"https://github.com/indepth-dev/community/discussions/253\" }","codeinjection_foot":null,"custom_template":null,"canonical_url":"https://www.justjeb.com/post/react-profiler","email_recipient_filter":"none","authors":[{"id":"611ce64a79dbc57df92a128b","name":"JeB","slug":"jeb","profile_image":"https://images.indepth.dev/images/2021/08/headshot3.jpg","cover_image":"https://images.indepth.dev/images/2021/08/david-menidrey-16ep3TGZR-0-unsplash.jpeg","bio":"Fullstack engineer and guild master @ Wix.com, author of @angular-builders and jest-marbles, drummer and kitesurfer.  ","website":"https://www.justjeb.com","location":null,"facebook":null,"twitter":"@jebbacca","meta_title":null,"meta_description":null,"url":"https://admin.indepth.dev/author/jeb/"}],"tags":[{"id":"5d403a5b679ce6202b744977","name":"react","slug":"react","description":"React (also known as React.js or ReactJS) is a JavaScript library for building user interfaces. It uses a declarative paradigm and aims to be both efficient and flexible.","feature_image":null,"visibility":"public","meta_title":null,"meta_description":null,"og_image":null,"og_title":null,"og_description":null,"twitter_image":null,"twitter_title":null,"twitter_description":null,"codeinjection_head":null,"codeinjection_foot":null,"canonical_url":null,"accent_color":null,"url":"https://admin.indepth.dev/tag/react/"},{"id":"6202b2469c34bf7c9fd816c6","name":"peformance","slug":"peformance","description":null,"feature_image":null,"visibility":"public","meta_title":null,"meta_description":null,"og_image":null,"og_title":null,"og_description":null,"twitter_image":null,"twitter_title":null,"twitter_description":null,"codeinjection_head":null,"codeinjection_foot":null,"canonical_url":null,"accent_color":null,"url":"https://admin.indepth.dev/tag/peformance/"},{"id":"5de4fd9fb2bc9211f8af752a","name":"web-development","slug":"web-development","description":null,"feature_image":null,"visibility":"public","meta_title":null,"meta_description":null,"og_image":null,"og_title":null,"og_description":null,"twitter_image":null,"twitter_title":null,"twitter_description":null,"codeinjection_head":null,"codeinjection_foot":null,"canonical_url":null,"accent_color":null,"url":"https://admin.indepth.dev/tag/web-development/"},{"id":"6202b2469c34bf7c9fd816c7","name":"profiling","slug":"profiling","description":null,"feature_image":null,"visibility":"public","meta_title":null,"meta_description":null,"og_image":null,"og_title":null,"og_description":null,"twitter_image":null,"twitter_title":null,"twitter_description":null,"codeinjection_head":null,"codeinjection_foot":null,"canonical_url":null,"accent_color":null,"url":"https://admin.indepth.dev/tag/profiling/"}],"primary_author":{"id":"611ce64a79dbc57df92a128b","name":"JeB","slug":"jeb","profile_image":"https://images.indepth.dev/images/2021/08/headshot3.jpg","cover_image":"https://images.indepth.dev/images/2021/08/david-menidrey-16ep3TGZR-0-unsplash.jpeg","bio":"Fullstack engineer and guild master @ Wix.com, author of @angular-builders and jest-marbles, drummer and kitesurfer.  ","website":"https://www.justjeb.com","location":null,"facebook":null,"twitter":"@jebbacca","meta_title":null,"meta_description":null,"url":"https://admin.indepth.dev/author/jeb/","_id":1138},"primary_tag":{"id":"5d403a5b679ce6202b744977","name":"react","slug":"react","description":"React (also known as React.js or ReactJS) is a JavaScript library for building user interfaces. It uses a declarative paradigm and aims to be both efficient and flexible.","feature_image":null,"visibility":"public","meta_title":null,"meta_description":null,"og_image":null,"og_title":null,"og_description":null,"twitter_image":null,"twitter_title":null,"twitter_description":null,"codeinjection_head":null,"codeinjection_foot":null,"canonical_url":null,"accent_color":null,"url":"https://admin.indepth.dev/tag/react/"},"url":"https://admin.indepth.dev/react-profiler/","excerpt":"A guide to measuring and improving React Apps performance with React Profiler. Accompanied by a web app that makes it easy to follow along.","reading_time":11,"access":true,"send_email_when_published":false,"og_image":null,"og_title":null,"og_description":null,"twitter_image":null,"twitter_title":null,"twitter_description":null,"meta_title":"Boosting Your React App Performance with React Profiler","meta_description":"A guide to analyzing and improving your React App performance with React Profiler. Accompanied by a web app that makes it easy to follow.","email_subject":null,"frontmatter":null,"_id":1497},{"id":"61f275d47e6c0dc6ecd8c1ce","uuid":"e2086c96-ecbb-483a-8e4d-d00bb2f3bbe8","title":"Overview of OOP patterns implementation in JavaScript","slug":"js-design-patterns","html":"\u003cp\u003eLet's take a look at the Design Patterns from OOP described in 'Gang Of Four' and let's investigate how they are implemented in JavaScript.\u003c/p\u003e\u003ch2 id=\"what-are-design-patterns\"\u003eWhat are Design Patterns?\u003c/h2\u003e\u003cp\u003eFirst things first, you need to understand the true definition of Design Patterns. As a software developer, you can write code in “any way”. But, it would be the best practices, which make a big difference in how you maintain code. Code that is written with utmost finesse in mind, would last longer than the amateur ones. This means you don’t need to worry about scalability or maintenance when you choose the right coding style.\u003c/p\u003e\u003cul\u003e\u003cli\u003eThe role of design patterns is to help you build solutions that don’t make the overall problem complicated.\u003c/li\u003e\u003cli\u003ePatterns will help you build interactive objects, and designs that are heavily reusable.\u003c/li\u003e\u003cli\u003eDesign Patterns are an integral concept in Object-Oriented Programming.\u003c/li\u003e\u003c/ul\u003e\u003cp\u003e\u003c/p\u003e\u003cblockquote\u003eGang Of Four are your key to design patterns. Currently, there are 23 patterns in Gang Of Four. These patterns are categorised into three unique groups: Creational, Structural and Behavioural.\u003c/blockquote\u003e\u003ch2 id=\"creational-design-patterns-in-javascript\"\u003eCreational Design Patterns in JavaScript\u003c/h2\u003e\u003col\u003e\u003cli\u003eAbstract Factory\u003c/li\u003e\u003cli\u003eBuilder\u003c/li\u003e\u003cli\u003eFactory\u003c/li\u003e\u003cli\u003ePrototype\u003c/li\u003e\u003cli\u003eSingleton\u003c/li\u003e\u003c/ol\u003e\u003ch4 id=\"abstract-factory\"\u003e\u003cstrong\u003eAbstract Factory\u003c/strong\u003e\u003c/h4\u003e\u003cp\u003eWhat is a factory? If you ask a kid, what would they describe a factory as? A Factory is nothing but a place, where we manufacture things. For instance, in a Toy Factory, you would see the production of toys. Just like \u003cem\u003ethis \u003c/em\u003ereal-time definition,\u003cstrong\u003e a Factory in JavaScript is a place where an Object creates other objects\u003c/strong\u003e. Not all Toy Factories produce teddy bears, and transformers, right? There are separate toy factories, for different types of toys. The toy factory always works with a theme. Similarly, an \u003cstrong\u003eAbstract Factory works with a theme\u003c/strong\u003e. Objects that come from an Abstract Factory, will share a common theme.\u003c/p\u003e\u003cblockquote\u003eJavaScript does not support class-based inheritance. So, the implementation of the Abstract Factory pattern is rather interesting.\u003c/blockquote\u003e\u003cp\u003eLet’s understand Abstract Factory, in JavaScript, with an example.\u003c/p\u003e\u003col\u003e\u003cli\u003eI have to build software, for a Toy Factory.\u003c/li\u003e\u003cli\u003eI have a department, which produces toys themed on the Transformers movie. And, another department for Star Wars-themed toys.\u003c/li\u003e\u003cli\u003eBoth the departments have a few common characteristics and a unique theme.\u003c/li\u003e\u003c/ol\u003e\u003cpre\u003e\u003ccode class=\"language-typescript\"\u003efunction StarWarsFactory(){\nthis.create = function(name){\nreturn new StarWarsToy(name)\n}}\n\nfunction TransformersFactory(){\nthis.create = function(name){\nreturn new TransformerToy(name)\n}}\n\nfunction StarWarsToy(name){\nthis.nameOfToy = name;\nthis.displayName = function(){\nconsole.log(\"My Name is \"+this.nameOfToy);\n}}\n\nfunction TransformersToy(name){\nthis.nameOfToy = name;\nthis.displayName = function(){\nconsole.log(\"My Name is \"+this.nameOfToy);\n}}\n\nfunction buildToys(){\nvar toys = [];\n\n\nvar factory_star_wars = new StarWarsFactory();\nvar factory_transformers = new TransformersFactory();\n\n\ntoys.push(factory_star_wars.create(\"Darth Vader\"));\ntoys.push(factory_transformers.create(\"Megatron\"));\n\nfor(let toy of toys)\nconsole.log(toy.displayName());\n}\u003c/code\u003e\u003c/pre\u003e\u003ch4 id=\"builder\"\u003e\u003cstrong\u003eBuilder\u003c/strong\u003e\u003c/h4\u003e\u003cp\u003eThe role of the builder is to build complex objects. The client will receive a final object, without having to worry about the real work done. Most of the time, the builder pattern is an encapsulation of the composite object. Mainly because the entire process is complex and repetitive.\u003c/p\u003e\u003cp\u003eLet’s see how to implement our Toy Factory, with the builder pattern.\u003c/p\u003e\u003col\u003e\u003cli\u003eI have a toy factory\u003c/li\u003e\u003cli\u003eI have a department for building Star Wars Toys.\u003c/li\u003e\u003cli\u003eWithin the Star Wars department, I want to build many Darth Vader toys.\u003c/li\u003e\u003cli\u003eBuilding Darth Vader toys is a two-step process. I need to build the toy, and then mention the color.\u003c/li\u003e\u003c/ol\u003e\u003cpre\u003e\u003ccode class=\"language-typescript\"\u003efunction StarWarsFactory(){\n  this.build = function(builder){\n  builder.step1();\n  builder.step2();\n  return builder.getToy();\n}}\n\nfunction DarthVader_Builder(){\n  this.darth = null;\n  this.step1 = function () {\n    this.darth = new DarthVader(); \n  }\n\n  this.step2 = function () {\n    this.darth.addColor();\n  }\n\n  this.getToy = function () {\n    return this.darth;\n  }\n}\n\nfunction DarthVader () {\n  this.color = '';\n  this.addColor = function(){\n    this.color = 'black';\n  }\n  this.say = function () {\n    console.log(\"I am Darth, and my color is \"+this.color);\n  }\n}\n\nfunction build(){\n  let star_wars = new StarWarsFactory();\n  let darthVader = new DarthVader_Builder();\n  let darthVader_Toy = star_wars.build(darthVader);\n  darthVader_Toy.say();\n}\u003c/code\u003e\u003c/pre\u003e\u003ch4 id=\"factory\"\u003e\u003cstrong\u003eFactory\u003c/strong\u003e\u003c/h4\u003e\u003cp\u003eThe role of a factory is to produce similar objects, which have the same characteristics. This helps with easy management, maintenance, and manipulation of objects. For example, in our Toy Factory, every toy will have certain pieces of information. It will have the date of purchase, the origin, and the category.\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"language-typescript\"\u003evar ToyFactory = function(){\n  this.createToy = function(type) \n  {\n    var toy;\n    if(type == \"starwars\")\n      {\n        toy = new StarWars();\n      }\n    toy.origin = \"Origin\";\n    toy.dop = \"2/22/2022\";\n    toy.category=\"fantasy\";\n  }\n}\u003c/code\u003e\u003c/pre\u003e\u003ch4 id=\"prototype\"\u003e\u003cstrong\u003ePrototype\u003c/strong\u003e\u003c/h4\u003e\u003cp\u003eMany times, we would need to create a new object, which has default values from another parent object. This prevents the creation of objects with non-initialized values. The Prototype pattern can be used to create such objects.\u003c/p\u003e\u003cp\u003ePrototype Patterns are also known as Properties Pattern.\u003c/p\u003e\u003col\u003e\u003cli\u003eIn our toy factory, we have the Star Wars Department, which produces many characters.\u003c/li\u003e\u003cli\u003eEach Character will have a genre, expiry date, and status field. These fields will remain the same for all toys, from the Star Wars department.\u003c/li\u003e\u003c/ol\u003e\u003cpre\u003e\u003ccode class=\"language-typescript\"\u003efunction Star_Wars_Prototype(parent){\n   this.parent = parent;\n   this.duplicate = function () \n   {\n      let starWars = new StarWarsToy();\n      starWars.genre = parent.genre;\n      starWars.expiry = parent.expiry;\n      starWars.status = parent.status;\n      return starWars;\n   };\n}\n\nfunction StarWarsToy(genre, expiry, status){\n   this.genre = genre;\n   this.expiry = expiry;\n   this.status = status;\n}\n\nfunction build () {\n   var star_wars_toy = new StarWarsToy('fantasy', 'NA', 'Jan');\n   var new_star_wars_toy = new Star_Wars_Prototype(star_wars_toy);\n   \n   //When you are ready to create\n   var darth = new_star_wars_toy.duplicate();\n}\u003c/code\u003e\u003c/pre\u003e\u003ch4 id=\"singleton\"\u003e\u003cstrong\u003eSingleton\u003c/strong\u003e\u003c/h4\u003e\u003cp\u003eSingleton Pattern corresponds to a “Single Instance”. A given object can have only a single instance. When systems have data, which needs to be coordinated from a single spot, you can use this pattern.\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"language-typescript\"\u003evar Singleton = (function () {\n   var instance;\n\n   function createInstance() {\n       var object = new Object(\"I am the instance\");\n       return object;\n   }\n\n   return {\n       getInstance: function () {\n           if (!instance) {\n               instance = createInstance();\n           }\n           return instance;\n       }\n   };\n})();\n\nfunction run() {\n\n   var instance1 = Singleton.getInstance();\n   var instance2 = Singleton.getInstance();\n\n   console.log(\"Same instance? \" + (instance1 === instance2));\n}\u003c/code\u003e\u003c/pre\u003e\u003ch2 id=\"structural-design-patterns\"\u003eStructural Design Patterns\u003c/h2\u003e\u003col\u003e\u003cli\u003eAdapter\u003c/li\u003e\u003cli\u003eBridge\u003c/li\u003e\u003cli\u003eComposite\u003c/li\u003e\u003cli\u003eDecorator\u003c/li\u003e\u003cli\u003eFacade\u003c/li\u003e\u003cli\u003eFlyweight\u003c/li\u003e\u003cli\u003eProxy\u003c/li\u003e\u003c/ol\u003e\u003ch4 id=\"adapter\"\u003e\u003cstrong\u003eAdapter\u003c/strong\u003e\u003c/h4\u003e\u003cp\u003eThe Adapter design pattern is used when an object’s properties or methods need to be translated from one to another. The pattern is extremely useful when components with mismatched interfaces have to work with one another. The Adapter Pattern is also known as the Wrapper Pattern.\u003c/p\u003e\u003cp\u003eLet’s understand this with our Toy Factory:\u003c/p\u003e\u003col\u003e\u003cli\u003eThe Toy Factory has a shipping department.\u003c/li\u003e\u003cli\u003eWe are planning to migrate from the old shipping department to a new one.\u003c/li\u003e\u003cli\u003eHowever, we need to keep the old shipping methods intact, for the current stock.\u003c/li\u003e\u003c/ol\u003e\u003cpre\u003e\u003ccode class=\"language-typescript\"\u003e// old interface\n\nfunction Shipping() {\n    this.request = function (zipStart, zipEnd, weight) {\n        // ...\n        return \"$49.75\";\n    }\n}\n\n// new interface\n\nfunction AdvancedShipping() {\n    this.login = function (credentials) { /* ... */ };\n    this.setStart = function (start) { /* ... */ };\n    this.setDestination = function (destination) { /* ... */ };\n    this.calculate = function (weight) { return \"$39.50\"; };\n}\n\n// adapter interface\n\nfunction ShippingAdapter(credentials) {\n    var shipping = new AdvancedShipping();\n\n    shipping.login(credentials);\n\n    return {\n        request: function (zipStart, zipEnd, weight) {\n            shipping.setStart(zipStart);\n            shipping.setDestination(zipEnd);\n            return shipping.calculate(weight);\n        }\n    };\n}\n\nfunction run() {\n\n    var shipping = new Shipping();\n    var credentials = { token: \"StarWars-001\" };\n    var adapter = new ShippingAdapter(credentials);\n\n    // original shipping object and interface\n\n    var cost = shipping.request(\"78701\", \"10010\", \"2 lbs\");\n    console.log(\"Old cost: \" + cost);\n\n    // new shipping object with adapted interface\n\n    cost = adapter.request(\"78701\", \"10010\", \"2 lbs\");\n\n    console.log(\"New cost: \" + cost);\n}\u003c/code\u003e\u003c/pre\u003e\u003ch4 id=\"bridge\"\u003e\u003cstrong\u003eBridge\u003c/strong\u003e\u003c/h4\u003e\u003cp\u003eThe bridge is a famous High-Level Architectural Pattern. It helps by offering different levels of abstraction. As a result, Objects will be loosely coupled. Every Object, which becomes a component, will have its very own interface. \u003cbr\u003e\u003c/p\u003e\u003cp\u003eIn our toy factory, where we produce Star Wars toys, there are two different varieties. One set of toys can be operated using a remote control. Another set of toys is operated using a battery and produces different sounds. The Bridge Pattern helps in building this high-level architecture.\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"language-typescript\"\u003evar Remote_Control = function (output) {\n    this.output = output;\n    this.left = function () { this.output.left(); }\n    this.right = function () { this.output.right(); }\n};\n\nvar Battery_Operation= function (output) {\n    this.output = output;\n    this.move = function () { this.output.move(); }\n    this.wheel = function () { this.output.zoom(); }\n};\n\nvar Remote_Controlled_Toy = function () {\n    this.left = function () { console.log(\"Move Left\"); }\n    this.right = function () { console.log(\"Move Right\"); }\n};\n\nvar Battery_Operated_Toy = function () {\n    this.move = function () { console.log(\"Sound waves\"); }\n    this.wheel = function () { console.log(\"Sound volume up\"); }\n};\n\nfunction run() {\n\n    var remote_control = new Remote_Control();\n    var battery_operation = new Battery_Operation();\n    var star_wars_type_1 = new Remote_Controlled_Toy(remote_control);\n    var star_wars_type_2 = new Battery_Operated_Toy(battery_operation);\n    star_wars_type_1.left();\n    star_wars_type_2.wheel();\n}\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003e\u003cstrong\u003eComposite\u003c/strong\u003e\u003c/p\u003e\u003cp\u003eAs suggested by its name, a composite pattern creates objects that are primitive or a collection of objects. This helps in building deeply nested structures. \u003c/p\u003e\u003cp\u003eIn our toy factory, the composite pattern helps in the following manner:\u003c/p\u003e\u003col\u003e\u003cli\u003eWe have two departments, one a manual section, and two, an automated one.\u003c/li\u003e\u003cli\u003eIn the manual section, we have a bunch of toys (leaves),\u003c/li\u003e\u003cli\u003eIn the automated section, we have another set of toys (leaves).\u003c/li\u003e\u003c/ol\u003e\u003cpre\u003e\u003ccode class=\"language-typescript\"\u003evar Node = function (name) {\n    this.children = [];\n    this.name = name;\n}\n\nNode.prototype = {\n    add: function (child) {\n        this.children.push(child);\n    }\n}\n\nfunction run() {\n    var tree = new Node(\"Star_Wars_Toys\");\n    var manual = new Node(\"Manual\")\n    var automate = new Node(\"Automated\");\n    var darth_vader = new Node(\"Darth Vader\");\n    var luke_skywalker = new Node(\"Luke Skywalker\");\n    var yoda = new Node(\"Yoda\");\n    var chewbacca = new Node(\"Chewbacca\");\n\n    tree.add(manual);\n    tree.add(automate);\n\n    manual.add(darth_vader);\n    manual.add(luke_skywalker);\n\n    automate.add(yoda);\n    automate.add(chewbacca);\n\n}\u003c/code\u003e\u003c/pre\u003e\u003cp\u003e\u003cstrong\u003eDecorator\u003c/strong\u003e\u003c/p\u003e\u003cp\u003eThe Decorator pattern extends an object’s properties and methods, adding new behavior to it during run time. Multiple decorators can be used to add or override the actual functionalities of an object.\u003c/p\u003e\u003cp\u003eIn our toy factory, we have a function to give the toys a name. And, we have an additional decorator to state the genre. \u003c/p\u003e\u003cpre\u003e\u003ccode class=\"language-typescript\"\u003evar Toy = function (name) {\n    this.name = name;\n    this.display = function () {\n        console.log(\"Toy: \" + this.name);\n    };\n}\n\nvar DecoratedToy = function (genre, branding) {\n    this.toy = toy;\n    this.name = user.name;  // ensures interface stays the same\n    this.genre = genre;\n    this.branding = branding;\n    this.display = function () {\n        console.log(\"Decorated User: \" + this.name + \", \" +\n            this.genre + \", \" + this.branding);\n    };\n}\nfunction run() {\n    var toy = new User(\"Toy\");\n    var decorated = new DecoratedToy(toy, \"fantasy\", \"Star Wars\");\n    decorated.display();\n}\n\u003c/code\u003e\u003c/pre\u003e\u003ch4 id=\"facade\"\u003e\u003cstrong\u003eFacade\u003c/strong\u003e\u003c/h4\u003e\u003cp\u003eThe Facade design pattern offers a high-level interface of properties and methods. These properties and methods can be used by the subsystems. \u003c/p\u003e\u003cfigure class=\"kg-card kg-image-card kg-card-hascaption\"\u003e\u003cimg src=\"https://images.indepth.dev/images/2022/01/Screenshot-2022-01-27-at-4.09.44-PM.png\" class=\"kg-image\" alt loading=\"lazy\" width=\"1045\" height=\"433\"\u003e\u003cfigcaption\u003eFacade Design Pattern\u003c/figcaption\u003e\u003c/figure\u003e\u003cp\u003e\u003cstrong\u003eFlyweight\u003c/strong\u003e\u003c/p\u003e\u003cp\u003eThis pattern is used when objects need to be shared between Objects. The Objects will be immutable. Why? Since the objects are shared by others, they must not be changed. The Flyweight pattern is present in the Javascript Engine. For instance, the Javascript Engine maintains a list of strings that are immutable and can be shared across applications. \u003c/p\u003e\u003cp\u003eIn our Toy factory:\u003c/p\u003e\u003col\u003e\u003cli\u003eEvery toy has a genre\u003c/li\u003e\u003cli\u003eEvery toy has a country of manufacture\u003c/li\u003e\u003cli\u003eEvery toy has a year of manufacture. These properties can be kept in the Flyweight model.\u003c/li\u003e\u003c/ol\u003e\u003cpre\u003e\u003ccode class=\"language-typescript\"\u003efunction Flyweight(genre, country, year) {\n    this.genre = genre;\n    this.country = country;\n    this.year = year;\n};\n\nvar FlyWeightFactory = (function () {\n    var flyweights = {};\n    return {\n        get: function (genre, country, year) {\n            if (!flyweights[genre + country]) {\n                flyweights[genre + country] =\n                    new Flyweight(genre, country, year);\n            }\n            return flyweights[genre + country];\n        }\n    }\n})();\n\nfunction ToyCollection() {\n    var toys = {};\n    return {\n        add: function (genre, country, year, brandTag) {\n            toys[brandTag] =\n                new Toy(genre, country, year, brandTag);\n        }\n    };\n}\n\nvar Toy = function (genre, country, year, brandTag) {\n    this.flyweight = FlyWeightFactory.get(genre, country, year, brandTag);\n    this.brandTag = brandTag;\n }\nfunction build() {\n    var toys = new ToyCollection();\n    toys.add(\"Fantasy\", \"USA\", \"2021\", \"StarWars_01\");\n    toys.add(\"Fantasy\", \"USA\", \"2021\", \"Transformers_01\");\n}\u003c/code\u003e\u003c/pre\u003e\u003ch4 id=\"proxy\"\u003e\u003cstrong\u003eProxy\u003c/strong\u003e\u003c/h4\u003e\u003cp\u003eThe Proxy Pattern offers a placeholder object, instead of the actual object. The placeholder object will have control over the access to the actual object value.\u003c/p\u003e\u003cp\u003eFor example, our Toy Factory is situated in many places of the world. Every place produces a number of toys. With the Proxy pattern, it becomes simpler to understand how many toys are produced from each location. \u003c/p\u003e\u003cpre\u003e\u003ccode class=\"language-typescript\"\u003efunction GeoCoder() {\n    this.getLatLng = function (address) {\n        if (address === \"Hong Kong\") {\n            return \"52.3700° N, 4.8900° E\";\n        } else if (address === \"North America\") {\n            return \"51.5171° N, 0.1062° W\";\n        } ….    };\n}\nfunction GeoProxy() {\n    var coder = new GeoCoder();\n    var geoCollector = {};\n    return {\n        getLatLng: function (location) {\n            if (!geoCollector[location]) {\n                geoCollector[location] = coder.getLatLng(location);\n            }\n            return geoCollector[location];\n        }};\n};\nfunction run() {\n    var geo = new GeoProxy();\n    geo.getLatLng(\"Hong Kong\");\n    geo.getLatLng(\"North America\"); \n}\n\u003c/code\u003e\u003c/pre\u003e\u003ch2 id=\"behavioral-design-patterns\"\u003eBehavioral Design Patterns\u003c/h2\u003e\u003col\u003e\u003cli\u003eChain of Responsibility\u003c/li\u003e\u003cli\u003eCommand\u003c/li\u003e\u003cli\u003eInterpreter\u003c/li\u003e\u003cli\u003eIterator\u003c/li\u003e\u003cli\u003eMediator\u003c/li\u003e\u003cli\u003eMemento\u003c/li\u003e\u003cli\u003eObserver\u003c/li\u003e\u003cli\u003eState\u003c/li\u003e\u003cli\u003eStrategy\u003c/li\u003e\u003cli\u003eTemplate\u003c/li\u003e\u003cli\u003eVisitor\u003cbr\u003e\u003c/li\u003e\u003c/ol\u003e\u003ch4 id=\"chain-of-responsibility\"\u003e\u003cstrong\u003eChain of Responsibility\u003c/strong\u003e\u003c/h4\u003e\u003cp\u003eAnyone using Javascript would have come across the concept of event-bubbling, at least once. This is where events propagate across nested controls. One of the controls can choose to handle the bubbling event. The Chain of Responsibility Pattern can be used to handle this behavior. To be precise, this pattern is widely used by JQuery. \u003cbr\u003e\u003c/p\u003e\u003cfigure class=\"kg-card kg-image-card kg-card-hascaption\"\u003e\u003cimg src=\"https://images.indepth.dev/images/2022/01/Screenshot-2022-01-27-at-4.10.00-PM.png\" class=\"kg-image\" alt loading=\"lazy\" width=\"1569\" height=\"381\"\u003e\u003cfigcaption\u003eChain of Responsibility\u003c/figcaption\u003e\u003c/figure\u003e\u003cp\u003e\u003cstrong\u003eCommand\u003c/strong\u003e\u003c/p\u003e\u003cp\u003eMany a time, Objects will have a common set of events to be processed. The Command objects help in building Objects, where actions to handle these events can be encapsulated. Most of the time, the Command Pattern is used to centralize functionalities. For instance, the undo operation in any application is an example of the Command Pattern. Whether you invoke it from the Menu Drop Down, or from the keyboard, the same functionality gets invoked. \u003cbr\u003e\u003c/p\u003e\u003cp\u003e\u003cstrong\u003eInterpreter\u003c/strong\u003e\u003c/p\u003e\u003cp\u003eNot all solutions are the same. In many applications, you may need to add extra lines of code to manipulate the input, or output to be shown to the user. Here, the output depends on the application. \u003cbr\u003e\u003c/p\u003e\u003cp\u003eIn our toy factory example, all Star Wars toys need to be prefixed with the tagline: “May the Force be with You”. And, all Bob the Builder toys need to be prefixed with “Are you Ready!” This extra level of customization can be achieved using the Interpreter Pattern.\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"language-typescript\"\u003evar Prefix = function (brandTag) {\n    this.brandTag = brandTag;\n}\n\nPrefix.prototype = {\n    interpret: function () {\n        if (this.brandTag  == “Star Wars”) {\n            return “May the Force be with You”;\n        }\n        else if (this.brandTag  == “Bob the Builder”) {\n            return “Are you Ready?”;        \n        }\n    }\n}\n\nfunction run() {\n    var toys = [];\n    toys.push(new Prefix(“Star Wars”));\n    toys.push(new Prefix(“Bob the Builder”));\n    for (var i = 0, len = toys.length; i \u0026lt; len; i++) {\n        console.log(toys[i].interpret());\n    }\n}\n\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003e\u003cstrong\u003eIterator\u003c/strong\u003e\u003c/p\u003e\u003cp\u003eAs suggested by its name, you can use the Iterator pattern to define how an object or collection of objects has to be effectively looped. In Javascript, you will come across a few common forms of looping: \u003cstrong\u003ewhile, for, for-of, for-in, and do while\u003c/strong\u003e. With the iterator pattern, you can design your own way of looping through objects that will be flexible for the application, created. \u003cbr\u003e\u003c/p\u003e\u003cp\u003e\u003cstrong\u003eMediator\u003c/strong\u003e\u003c/p\u003e\u003cp\u003eAnother design pattern, which works as suggested by its name would be the Mediator. This pattern provides a central point of control for a group of objects. It is heavily used to perform state management. When one of the objects, changes the state of its properties, it can be broadcasted easily to the other objects.\u003c/p\u003e\u003cp\u003eHere is a simple example, of how the Mediator design pattern helps:\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"language-typescript\"\u003evar Participant = function (name) {\n    this.name = name;\n    this.chatroom = null;\n}\n//define a Itprototype for participants with receive and send implementation\nvar Talkie = function () {\n    var participants = {};\n    return {\n       register: function (participant) {\n            participants[participant.name] = participant;\n            participant.talkie = this;\n        },\n        send: function (message, from, to) {\n            if (to) {                      // single message\n                to.receive(message, from);\n            } else {                       // broadcast message\n                for (key in participants) {\n                    if (participants[key] !== from) {\n                        participants[key].receive(message, from);\n                    }\n                }\n            }\n        }\n    };\n};\n\nfunction letsTalk() {\n    var A = new Participant(\"A\");\n    var B = new Participant(\"B\");\n    var C = new Participant(\"C\");\n    var D = new Participant(\"D\");\n    var talkie = new Talkie();\n    talkie.register(A);\n    talkie.register(B);\n    talkie.register(C);\n    talkie.register(D);\n    A.send(\"I love you B.\");\n    B.send(\"No need to broadcast\", A);\n    C.send(\"Ha, I heard that!\");\n    D.send(\"C, do you have something to say?\", C);\n}\n\u003c/code\u003e\u003c/pre\u003e\u003ch4 id=\"memento\"\u003e\u003cstrong\u003eMemento\u003c/strong\u003e\u003c/h4\u003e\u003cp\u003eThe Memento represents a repository, where the state of an object is stored. There could be scenarios in an application where the state of an object needs to be saved and restored. Most of the time, the serializing and de-serializing property of an object with JSON helps in implementing this design pattern.\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"language-typescript\"\u003evar Toy = function (name, country, year) {\n    this.name = name;\n    this.country = country;\n    this.city = city;\n    this.year = year;\n}\n\nToy.prototype = {\n    encryptLabel: function () {\n        var memento = JSON.stringify(this);\n        return memento;\n    },\n\n    decryptLabel: function (memento) {\n        var m = JSON.parse(memento);\n        this.name = m.name;\n        this.country = m.country;\n        this.city = m.city;\n        this.year = m.year;\n        console.log(m);\n    }\n}\n\nfunction print() {\n    var darth = new Toy(\"Darth Vader\", \"USA\", \"2022\");\n    darth.encryptLabel();\n    darth.decryptLabel();\n}\n\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003e\u003cstrong\u003eObserver\u003c/strong\u003e\u003c/p\u003e\u003cp\u003eThe Observer Pattern is one of the most widely used patterns of all. It has a unique implementation across platforms like Angular, and React. In fact, it is a topic that needs to be discussed on its own. Nevertheless, this pattern brings forth a subscription model. Objects can subscribe to specific events. And, when the event happens, they will be notified. JavaScript is an \u003cstrong\u003eevent-driven programming language\u003c/strong\u003e. Much of its concepts depend on the Observer Pattern. \u003cbr\u003e\u003c/p\u003e\u003cp\u003e\u003cstrong\u003eState\u003c/strong\u003e\u003c/p\u003e\u003cp\u003eNow, let’s begin with an example. The Traffic Light comes in three colors: red, amber, and green. The action to be performed differs from one color to another. This means there is color-specific logic. Any object within the color will have to abide by the rules of the color. Likewise, state patterns come with a specific collection of logic for every state. Objects within the state will need to follow this logic.\u003c/p\u003e\u003ch4 id=\"strategy\"\u003e\u003cstrong\u003eStrategy\u003c/strong\u003e\u003c/h4\u003e\u003cp\u003eThe Strategy Design Pattern is used to encapsulate algorithms, which can be used to complete a specific task. Based on certain pre-conditions, the actual strategy (alias method) to be executed changes. This means the algorithms used within a strategy are highly interchangeable. \u003c/p\u003e\u003cp\u003eIn our toy factory, we ship products using three different companies: FedEx, USPS, and UPS. The final cost of shipping depends on the company. Thus, we can use the Strategy design pattern to decide on the final cost.\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"language-typescript\"\u003eDistributor.prototype = {\n    setDistributor: function (company) {\n        this.company = company;\n    },\n\n    computeFinalCost: function () {\n        return this.company.compute();\n    }\n};\n\nvar UPS = function () {\n    this.compute = function () {\n        return \"$45.95\";\n    }\n};\n\nvar USPS = function () {\n    this.compute = function () {\n        return \"$39.40\";\n    }\n};\n\nvar Fedex = function () {\n    this.compute = function () {\n        return \"$43.20\";\n    }\n};\n\nfunction run() {\n    var ups = new UPS();\n    var usps = new USPS();\n    var fedex = new Fedex();\n    var distributor = new Distributor();\n    distributor.setDistributor(ups);\n    console.log(\"UPS Strategy: \" + distributor.computeFinalCost());\n    distributor.setDistributor(usps);\n    console.log(\"USPS Strategy: \" + distributor.computeFinalCost());\n    distributor.setDistributor(fedex);\n    console.log(\"Fedex Strategy: \" + distributor.computeFinalCost());\n}\u003c/code\u003e\u003c/pre\u003e\u003cp\u003e\u003cstrong\u003eTemplate\u003c/strong\u003e\u003c/p\u003e\u003cp\u003eThe Template Pattern presents an outlook of steps. When an object is created against this pattern, all the steps in the template have to be completed. Of course, the steps can be customized to suit the object created. This design pattern is widely used in common libraries and frameworks. \u003cbr\u003e\u003c/p\u003e\u003cp\u003e\u003cstrong\u003eVisitor\u003c/strong\u003e\u003c/p\u003e\u003cp\u003eFinally, we have the Visitor Design Pattern. It is useful when a new operation has to be defined for a group of objects. But, the original structure of the Objects should remain intact. This pattern is useful when you have to extend a framework or a library. Unlike the other patterns discussed in this post, \u003cstrong\u003ethe Visitor Design Pattern is not widely used in Javascript. \u003c/strong\u003eWhy? JavaScript engine comes with more advanced and flexible ways of adding or removing properties from objects dynamically. \u003c/p\u003e\u003cpre\u003e\u003ccode class=\"language-typescript\"\u003evar Employee = function (name, salary, vacation) {\n    var self = this;\n\n    this.accept = function (visitor) {\n        visitor.visit(self);\n    };\n  this.getSalary = function () {\n        return salary;\n    };\n    this.setSalary = function (salary) {\n        salary = salary;\n    };\n};\n\nvar ExtraSalary = function () {\n    this.visit = function (emp) {\n        emp.setSalary(emp.getSalary() * 2);\n    };\n};\n\nfunction run() {\n    var john = new Employee(\"John\", 10000, 10),\n    var visitorSalary = new ExtraSalary();\n    john.accept(visitorSalary);\n    }\n}\n\u003c/code\u003e\u003c/pre\u003e\u003ch2 id=\"conclusion\"\u003eConclusion\u003c/h2\u003e\u003cp\u003eSome design patterns are often used by the Javascript engine. And, many of us don’t even know if these patterns are being used or not. The use of patterns will improve the performance, and maintainability of your code. This is why more, and more patterns should be used in your code. The journey of introducing patterns in your code does not have to be overnight. Instead, learn the patterns and gradually include them in your application.\u003c/p\u003e\u003chr\u003e","comment_id":"61f275d47e6c0dc6ecd8c1ce","feature_image":"https://images.indepth.dev/images/2022/01/Overview-of-OOP-patterns-implementation-in-JavaScript.jpg","featured":false,"visibility":"public","created_at":"2022-01-27T12:37:08.000+02:00","updated_at":"2022-02-03T10:52:01.000+02:00","published_at":"2022-02-03T10:52:01.000+02:00","custom_excerpt":"Design Patterns need to be used for code that is highly maintainable, reusable and organised. Gang of Four comes with 23 unique design patterns, which can be used across platforms. Let's learn how Gang of Four can be implemented in JavaScript. ","codeinjection_head":"{\"community_link\":\"https://github.com/indepth-dev/community/discussions/251\"}","codeinjection_foot":null,"custom_template":null,"canonical_url":null,"email_recipient_filter":"none","authors":[{"id":"61f271697e6c0dc6ecd8c1cb","name":"Divya D Dev","slug":"divya","profile_image":"https://images.indepth.dev/images/2022/02/Screenshot-2022-01-25-at-12.23.13-PM.png","cover_image":null,"bio":null,"website":null,"location":null,"facebook":null,"twitter":null,"meta_title":null,"meta_description":null,"url":"https://admin.indepth.dev/author/divya/"}],"tags":[{"id":"5d403b854528ce234fe57209","name":"javascript","slug":"javascript","description":"JavaScript (not to be confused with Java) is a high-level, dynamic, multi-paradigm, object-oriented, prototype-based, weakly-typed, and interpreted language used for both client-side and server-side scripting. Its primary use is in rendering and manipulating of web pages. Use this tag for questions regarding ECMAScript and its various dialects/implementations (excluding ActionScript and Google-Apps-Script).","feature_image":null,"visibility":"public","meta_title":null,"meta_description":null,"og_image":null,"og_title":null,"og_description":null,"twitter_image":null,"twitter_title":null,"twitter_description":null,"codeinjection_head":null,"codeinjection_foot":null,"canonical_url":null,"accent_color":null,"url":"https://admin.indepth.dev/tag/javascript/"},{"id":"5dded793b2bc9211f8af6b26","name":"design-patterns","slug":"design-patterns","description":null,"feature_image":null,"visibility":"public","meta_title":null,"meta_description":null,"og_image":null,"og_title":null,"og_description":null,"twitter_image":null,"twitter_title":null,"twitter_description":null,"codeinjection_head":null,"codeinjection_foot":null,"canonical_url":null,"accent_color":null,"url":"https://admin.indepth.dev/tag/design-patterns/"},{"id":"61f280257e6c0dc6ecd8c238","name":"OOP","slug":"oop","description":null,"feature_image":null,"visibility":"public","meta_title":null,"meta_description":null,"og_image":null,"og_title":null,"og_description":null,"twitter_image":null,"twitter_title":null,"twitter_description":null,"codeinjection_head":null,"codeinjection_foot":null,"canonical_url":null,"accent_color":null,"url":"https://admin.indepth.dev/tag/oop/"},{"id":"5e58b2f3be143e7df0e2c738","name":"decorators","slug":"decorators","description":null,"feature_image":null,"visibility":"public","meta_title":null,"meta_description":null,"og_image":null,"og_title":null,"og_description":null,"twitter_image":null,"twitter_title":null,"twitter_description":null,"codeinjection_head":null,"codeinjection_foot":null,"canonical_url":null,"accent_color":null,"url":"https://admin.indepth.dev/tag/decorators/"}],"primary_author":{"id":"61f271697e6c0dc6ecd8c1cb","name":"Divya D Dev","slug":"divya","profile_image":"https://images.indepth.dev/images/2022/02/Screenshot-2022-01-25-at-12.23.13-PM.png","cover_image":null,"bio":null,"website":null,"location":null,"facebook":null,"twitter":null,"meta_title":null,"meta_description":null,"url":"https://admin.indepth.dev/author/divya/","_id":1146},"primary_tag":{"id":"5d403b854528ce234fe57209","name":"javascript","slug":"javascript","description":"JavaScript (not to be confused with Java) is a high-level, dynamic, multi-paradigm, object-oriented, prototype-based, weakly-typed, and interpreted language used for both client-side and server-side scripting. Its primary use is in rendering and manipulating of web pages. Use this tag for questions regarding ECMAScript and its various dialects/implementations (excluding ActionScript and Google-Apps-Script).","feature_image":null,"visibility":"public","meta_title":null,"meta_description":null,"og_image":null,"og_title":null,"og_description":null,"twitter_image":null,"twitter_title":null,"twitter_description":null,"codeinjection_head":null,"codeinjection_foot":null,"canonical_url":null,"accent_color":null,"url":"https://admin.indepth.dev/tag/javascript/"},"url":"https://admin.indepth.dev/js-design-patterns/","excerpt":"Design Patterns need to be used for code that is highly maintainable, reusable and organised. Gang of Four comes with 23 unique design patterns, which can be used across platforms. Let's learn how Gang of Four can be implemented in JavaScript. ","reading_time":12,"access":true,"send_email_when_published":false,"og_image":null,"og_title":null,"og_description":null,"twitter_image":"https://images.indepth.dev/images/2022/02/Overview-of-OOP-patterns-implementation-in-JavaScript2.jpg","twitter_title":null,"twitter_description":null,"meta_title":null,"meta_description":null,"email_subject":null,"frontmatter":null,"_id":1495},{"id":"61ed09487e6c0dc6ecd8bf4c","uuid":"065bf83b-bdb6-4208-b0f5-3c61b6045a83","title":"Complete Guide: Angular lifecycle hooks","slug":"complete-guide-angular-lifecycle-hooks","html":"\u003cp\u003eA component instance in Angular has a lifecycle that starts when Angular instantiates the component class and renders the component view along with its child views. The lifecycle continues with change detection, as Angular checks to see when data-bound properties change, and updates both the view and the component instance as needed. The lifecycle ends when Angular destroys the component instance and removes its rendered template from the DOM.\u003c/p\u003e\u003cp\u003eDirectives have a similar lifecycle, as Angular creates, updates, and destroys instances in the course of execution.\u003c/p\u003e\u003cp\u003eAngular applications can use \u003ca href=\"https://angular.io/guide/glossary#lifecycle-hook\"\u003elifecycle hook methods\u003c/a\u003e to tap into key events in the lifecycle of a component or directive to initialize new instances, initiate change detection when needed, respond to updates during change detection, and clean up before the deletion of instances.\u003c/p\u003e\u003cp\u003eAngular calls these hook methods in the following order:\u003c/p\u003e\u003col\u003e\u003cli\u003e\u003cstrong\u003engOnChanges\u003c/strong\u003e: When an input/output binding value changes.\u003c/li\u003e\u003cli\u003e\u003cstrong\u003engOnInit\u003c/strong\u003e: After the first \u003ccode\u003engOnChanges\u003c/code\u003e.\u003c/li\u003e\u003cli\u003e\u003cstrong\u003engDoCheck\u003c/strong\u003e: Developer's custom change detection.\u003c/li\u003e\u003cli\u003e\u003cstrong\u003engAfterContentInit\u003c/strong\u003e: After component content initialized.\u003c/li\u003e\u003cli\u003e\u003cstrong\u003engAfterContentChecked\u003c/strong\u003e: After every check of component content.\u003c/li\u003e\u003cli\u003e\u003cstrong\u003engAfterViewInit\u003c/strong\u003e: After a component's views are initialized.\u003c/li\u003e\u003cli\u003e\u003cstrong\u003engAfterViewChecked\u003c/strong\u003e: After every check of a component's views.\u003cstrong\u003engOnDestroy\u003c/strong\u003e: Just before the component/directive is destroyed.\u003c/li\u003e\u003c/ol\u003e\u003ch3 id=\"project-setup\"\u003eProject setup\u003c/h3\u003e\u003cp\u003eWe will create a new project for practical understanding using the Angular CLI:\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"language-typescrpt\"\u003eng new life-cycle-hooks\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eThen run the following commands to create the needed components\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"language-typescrpt\"\u003eng g c components/parent\nng g c components/child\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eThen, add the following starter code.\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"language-html\"\u003e\u0026lt;!-- app.component.html --\u0026gt;\n\n\u0026lt;app-parent\u0026gt;\u0026lt;/app-parent\u0026gt;\n\u003c/code\u003e\u003c/pre\u003e\u003cpre\u003e\u003ccode class=\"language-html\"\u003e\u0026lt;!-- components/parent/parent.component.html --\u0026gt;\n\n\u0026lt;button (click)=\"updateUser()\"\u0026gt;Update\u0026lt;/button\u0026gt;\n\n\u0026lt;br/\u0026gt;\n\u0026lt;br/\u0026gt;\n\n\u0026lt;app-child [userName]=\"userName\"\u0026gt;\u0026lt;/app-child\u0026gt;\u003c/code\u003e\u003c/pre\u003e\u003cpre\u003e\u003ccode class=\"language-typescript\"\u003e// components/parent/parent.component.ts\n\nexport class ParentComponent {\n  userName = 'Maria';\n\n  updateUser() {\n     this.userName = 'Chris';\n  }\n}\u003c/code\u003e\u003c/pre\u003e\u003cpre\u003e\u003ccode class=\"language-typescript\"\u003e// components/child/child.component.ts\n\nexport class ChildComponent {\n  @Input() userName = '';\n\n}\u003c/code\u003e\u003c/pre\u003e\u003cpre\u003e\u003ccode class=\"language-html\"\u003e\u0026lt;!-- components/child/child.component.html --\u0026gt;\n\nHere is the user name: {{ userName }}\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eWith the above code, the UI looks like below:\u003c/p\u003e\u003cfigure class=\"kg-card kg-image-card\"\u003e\u003cimg src=\"https://images.indepth.dev/images/2022/01/1.PNG\" class=\"kg-image\" alt loading=\"lazy\" width=\"262\" height=\"102\"\u003e\u003c/figure\u003e\u003ch3 id=\"ngonchanges\"\u003engOnChanges\u003c/h3\u003e\u003cp\u003eThis method is called once on a component's creation and then every time changes are detected in one of the component’s input properties. It receives a \u003ca href=\"https://angular.io/api/core/SimpleChanges\"\u003eSimpleChanges\u003c/a\u003e object as a parameter, which contains information regarding which of the input properties has changed - in case we have more than one - and its current and previous values.\u003c/p\u003e\u003cp\u003eNote that if your component has no inputs or you use it without providing any inputs, the framework will not call \u003ccode\u003engOnChanges()\u003c/code\u003e.\u003c/p\u003e\u003cp\u003eThis is one of the lifecycle hooks which can come in handy in multiple use cases. It is very useful if you need to handle any specific logic in the component based on the received input property.\u003c/p\u003e\u003cp\u003eTo demonstrate, let’s add the following to our code:\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"language-typescript\"\u003e// components/child/child.component.ts\n\nexport class ChildComponent implements OnChanges {\n  @Input() userName = '';\n\n  ngOnChanges(changes:SimpleChanges) {\n    console.log('ngOnChanges triggered', changes);\n }\n}\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eCheck the \u003ccode\u003econsole\u003c/code\u003e, we should see that the \u003cem\u003e\u003ccode\u003econsole.log()\u003c/code\u003e\u003c/em\u003e is called after opening the application for the first time.\u003c/p\u003e\u003cfigure class=\"kg-card kg-image-card\"\u003e\u003cimg src=\"https://lh4.googleusercontent.com/1pF8Yf2pCVm-8AOYtPkf2SH2J4DUgl_HWAEhFlAMraZ8s22yQ1HGh07h8j0G5r2zYFtXOQCxW2PgHVXWSgJmP7yEH8ISQSsaXYBqNRJC8rDkAF8GoHv_Hes8pNN4QZf-pABPGT1-\" class=\"kg-image\" alt loading=\"lazy\"\u003e\u003c/figure\u003e\u003cp\u003eNotice that, the received \u003ccode\u003echanges\u003c/code\u003e object has three keys \u003ccode\u003ecurrentValue\u003c/code\u003e\u003cem\u003e, \u003c/em\u003e\u003ccode\u003epreviousValue\u003c/code\u003e\u003cem\u003e, \u003c/em\u003eand\u003cem\u003e \u003c/em\u003e\u003ccode\u003efirstChange\u003c/code\u003e, they work as they sound.\u003c/p\u003e\u003cp\u003eWe could say that we want to change the \u003ccode\u003euserName\u003c/code\u003e value if it’s not the first change, or if the current value is only \u003ccode\u003eChris\u003c/code\u003e. We could do anything here, let’s implement the second case.\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"language-typescript\"\u003e// components/child/child.component.ts\n\nexport class ChildComponent implements OnChanges{\n\n  @Input() userName = '';\n\n  ngOnChanges(changes:SimpleChanges) {\n     console.log('ngOnChanges triggered', changes);\n\n     if (!changes['userName'].isFirstChange()){\n        if (changes['userName'].currentValue === \"Chris\") {\n           this.userName = 'Hello ' + this.userName\n        } else {\n           this.userName = changes['userName'].previousValue\n        }\n     }\n  }\n}\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eHere we update the \u003ccode\u003euserName\u003c/code\u003e value if it’s not the first value (because it won’t take the first input if we didn’t add this condition) and if the current value is \u003ccode\u003eChris\u003c/code\u003e only.\u003c/p\u003e\u003cp\u003eNow, if we click on the \u003ccode\u003eUpdate\u003c/code\u003e\u003cem\u003e \u003c/em\u003ebutton, we should see that the \u003cem\u003e\u003ccode\u003econsole.log()\u003c/code\u003e \u003c/em\u003efunction is triggered one more time. This happens because the \u003ccode\u003e@Input()\u003c/code\u003e\u003cem\u003e \u003c/em\u003evalue changed (from \u003ccode\u003eMaria\u003c/code\u003e\u003cem\u003e \u003c/em\u003eto \u003ccode\u003eChris\u003c/code\u003e). If we keep clicking on the \u003ccode\u003eUpdate\u003c/code\u003e\u003cem\u003e \u003c/em\u003ebutton we will not see anything new on the console, this happens because the \u003cem\u003e\u003ccode\u003e@Input()\u003c/code\u003e \u003c/em\u003eis not changed.\u003c/p\u003e\u003cfigure class=\"kg-card kg-image-card\"\u003e\u003cimg src=\"https://lh5.googleusercontent.com/9b2yTK_0CYxeUKqBQa4biTb-OkdRjytUdLQjFHQG73obriT1rDlS-lmv_-79O7loys1wV7hZjOU_4AC5oNH1Ap9RHePb2yCbfJeJLo8N6qiBqOwAc8kqyBCIrd0AXxxAHLAE0ejo\" class=\"kg-image\" alt loading=\"lazy\"\u003e\u003c/figure\u003e\u003cp\u003eAlso, if we checked the console’s output we will see that the received object is changed like this:\u003c/p\u003e\u003cfigure class=\"kg-card kg-image-card\"\u003e\u003cimg src=\"https://lh4.googleusercontent.com/LqlNIuPy2O50pYP3AXNNw6noTAjCixU51L7yBj0KbhCiux39W8vRhRgBbCjVdDn39g_w2guD0-dOloorSuz7jrvqisSLvYxDx27JegKGOoPiDC1e_W2UCF0Jh0_mwrcAkyroeOG6\" class=\"kg-image\" alt loading=\"lazy\"\u003e\u003c/figure\u003e\u003ch3 id=\"ngoninit\"\u003engOnInit\u003c/h3\u003e\u003cp\u003eThis method is called only once during the component lifecycle, after the first \u003ccode\u003engOnChanges\u003c/code\u003e\u003cem\u003e \u003c/em\u003ecall. \u003ccode\u003engOnInit()\u003c/code\u003e is still called even when \u003ccode\u003engOnChanges()\u003c/code\u003e\u003cem\u003e \u003c/em\u003eis not, which is the case when there are no template-bound inputs.\u003c/p\u003e\u003cp\u003eThis is one of the most used lifecycle hooks in Angular. Here is where you might set requests to the server to load content, maybe create a \u003ca href=\"https://angular.io/api/forms/FormGroup\"\u003eFormGroup\u003c/a\u003e for a form to be handled by that component, set \u003ca href=\"https://rxjs.dev/guide/subscription\"\u003esubscriptions\u003c/a\u003e, and much more. It is where you can perform any initializations shortly after the component’s construction.\u003c/p\u003e\u003cp\u003eBut what is the advantage of the \u003ccode\u003engOnInit\u003c/code\u003e hook if the same work (initializing a \u003ccode\u003eFormGroup\u003c/code\u003e or getting data from the server) could be done on the component’s \u003ccode\u003econstructor()\u003c/code\u003e? Well, let me explain.\u003c/p\u003e\u003cp\u003eFollowing are some of the main key points:\u003c/p\u003e\u003cp\u003e\u003cstrong\u003eThe \u003ccode\u003econstructor()\u003c/code\u003e\u003c/strong\u003e\u003c/p\u003e\u003cul\u003e\u003cli\u003eThe default method of the class is executed when the class is instantiated and ensures proper initialization of fields in the class and its subclasses.\u003c/li\u003e\u003cli\u003eDependency Injector (DI) in Angular, analyses the constructor parameters and when it creates a new instance by calling \u003ccode\u003enew MyClass()\u003c/code\u003e\u003cem\u003e \u003c/em\u003eit tries to find providers that match the types of the constructor parameters, resolves them, and passes them to the constructor like \u003ccode\u003enew MyClass(someArg)\u003c/code\u003e\u003c/li\u003e\u003cli\u003eShould only be used to initialize class members but shouldn't do actual work. This is because the \u003ccode\u003econstructor\u003c/code\u003e is called before \u003ccode\u003engOnInit\u003c/code\u003e, at this point the component hasn’t been created yet, only the component class has been instantiated thus the dependencies are brought in, but the initialization code will not run.\u003c/li\u003e\u003c/ul\u003e\u003cp\u003e\u003cstrong\u003eThe \u003ccode\u003engOnInit()\u003c/code\u003e\u003c/strong\u003e\u003c/p\u003e\u003cul\u003e\u003cli\u003eIs a life cycle hook called by Angular to indicate that Angular is done creating the component.\u003c/li\u003e\u003cli\u003eShould be used for all the initialization/declaration. Because at this point the component will be initialized.\u003c/li\u003e\u003c/ul\u003e\u003cp\u003eTo demonstrate, let’s add the following to our code\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"language-typescript\"\u003e// components/parent/parent.component.ts\n\nexport class ParentComponent implements OnInit {\n ...\n\n  ngOnInit() {\n     console.log('ngOnInit from the parent component');\n  }\n\n  ...\n}\u003c/code\u003e\u003c/pre\u003e\u003cpre\u003e\u003ccode class=\"language-typescript\"\u003e// components/child/child.component.ts\n\nexport class ChildComponent implements OnInit, OnChanges {\n  ...\n\n  ngOnInit() {\n     console.log('ngOnInit from the child component');\n  }\n\n  ...\n}\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eWe should see the following result on the console\u003c/p\u003e\u003cfigure class=\"kg-card kg-image-card\"\u003e\u003cimg src=\"https://lh5.googleusercontent.com/wCi8qe-BxIa7ecdisGYH7UUbifaFpBLs3GGZLpvFm36ksN9QhLpNLOBt_4syS9iCSvZCntCK45r2g2qdwJM6Ai8FhduNQX44UqCbVXudkUWFMCapT5P1j0jqK2x5vSN03CVd2KyH\" class=\"kg-image\" alt loading=\"lazy\"\u003e\u003c/figure\u003e\u003cp\u003eIt makes sense that the parent component is created first ( \u003ccode\u003engOnInit\u003c/code\u003e \u003cem\u003e \u003c/em\u003efrom the parent component is triggered first), then its child component. If we tried to click on the \u003ccode\u003eUpdate\u003c/code\u003e button, the \u003ccode\u003engOnInit\u003c/code\u003e\u003cem\u003e \u003c/em\u003ewill not trigger. Because, as I mentioned above, it only triggers once.\u003c/p\u003e\u003ch3 id=\"ngdocheck\"\u003engDoCheck\u003c/h3\u003e\u003cp\u003eThis hook can be interpreted as an “extension” of \u003ccode\u003engOnChanges\u003c/code\u003e. You can use this method to detect changes that Angular can’t or won’t detect. It is called in every change detection, immediately after the \u003ccode\u003engOnChanges\u003c/code\u003e\u003cem\u003e \u003c/em\u003eand \u003ccode\u003engOnInit\u003c/code\u003e hooks.\u003c/p\u003e\u003cp\u003eThis hook is costly since it is called with enormous frequency; after every change detection cycle no matter where the change occurred. Therefore, its usage should be careful to not affect the user experience.\u003c/p\u003e\u003cp\u003eTo demonstrate, let’s add the following to our code:\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"language-typescript\"\u003e// components/child/child.component.ts\n\nexport class ChildComponent implements OnInit, OnChanges, DoCheck {\n  @Input() userName = '';\n\n  constructor() {\n  }\n\n  ...\n\n  ngDoCheck() {\n     console.log('ngDoCheck triggered');\n  }\n\n...\n}\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eWe should see the following result after running the application.\u003c/p\u003e\u003cfigure class=\"kg-card kg-image-card\"\u003e\u003cimg src=\"https://lh3.googleusercontent.com/i06SnlfNdtUkM4KW--922ozQqPKwPVcPYuOr4sulRpF8mKn2rQJneBiCw4qadr8KwZ449090GGBnrWoGYN941x1OvtRwbmrx_NbB-KMy2nKWTJHClW7UVT1nzf-Mig-Oww5dnC83\" class=\"kg-image\" alt loading=\"lazy\"\u003e\u003c/figure\u003e\u003cp\u003eIf we click on the \u003ccode\u003eUpdate\u003c/code\u003e\u003cem\u003e \u003c/em\u003ebutton we should see that the \u003ccode\u003engOnChanges\u003c/code\u003e\u003cem\u003e \u003c/em\u003eand the \u003ccode\u003engDoCheck\u003c/code\u003e are triggered\u003c/p\u003e\u003cfigure class=\"kg-card kg-image-card\"\u003e\u003cimg src=\"https://lh5.googleusercontent.com/Q7ynrQBfGDAmxNbjmfsUl5h5cErveTNbLskOfpWfZEUzATlo_ybodRxWAdJdgP7GcmsVI9zvZ3i2OhgVAIcMuaXBv9q64ObmaeHSwRWFx7jQL49m1lE68F8i-6wuhSzyGLajE4Ta\" class=\"kg-image\" alt loading=\"lazy\"\u003e\u003c/figure\u003e\u003cp\u003eAnd if we keep clicking on the \u003ccode\u003eUpdate\u003c/code\u003e\u003cem\u003e \u003c/em\u003ewe should see that only the \u003ccode\u003engDoCheck\u003c/code\u003e is triggered after each click, this happens because \u003ccode\u003engDoCheck\u003c/code\u003e captures a change.\u003c/p\u003e\u003cp\u003e\u003cstrong\u003e\u003cstrong\u003eHow does \u003ccode\u003engDoCheck\u003c/code\u003e capture a change if there is no change in the \u003ccode\u003e@Input()\u003c/code\u003e\u003c/strong\u003e\u003cem\u003e\u003cstrong\u003e \u003c/strong\u003e\u003c/em\u003e\u003cstrong\u003eproperty?\u003c/strong\u003e\u003c/strong\u003e\u003c/p\u003e\u003cp\u003eWell, since Angular tracks object reference and we mutate the object without changing the reference Angular won’t pick up the changes and it will not run change detection for the component. Thus the new name property value will not be re-rendered in DOM. Luckily, we can use the \u003ccode\u003engDoCheck\u003c/code\u003e lifecycle hook to check for object mutation and notify Angular.\u003c/p\u003e\u003ch3 id=\"ngaftercontentinit\"\u003engAfterContentInit\u003c/h3\u003e\u003cp\u003eThis method is called only once during the component’s lifecycle, after the first \u003ccode\u003engDoCheck\u003c/code\u003e. Within this hook, we have access for the first time to the \u003ca href=\"https://angular.io/api/core/ElementRef\"\u003eElementRef\u003c/a\u003e of the \u003ca href=\"https://angular.io/api/core/ContentChildren\"\u003eContentChild\u003c/a\u003e after the component’s creation; after Angular has already projected the external content into the component’s view.\u003c/p\u003e\u003cp\u003eTo demonstrate, let’s add the following to our code:\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"language-html\"\u003e\u0026lt;!-- components/parent/parent.component.html --\u0026gt;\n\n\n\u0026lt;app-child [userName]=\"userName\"\u0026gt;\n  \u0026lt;div #contentWrapper\u0026gt;foo\u0026lt;/div\u0026gt; \u0026lt;!-- \u0026lt;== Add this --\u0026gt;\n\u0026lt;/app-child\u0026gt;\u003c/code\u003e\u003c/pre\u003e\u003cpre\u003e\u003ccode class=\"language-typescript\"\u003e// components/child/child.component.ts\n\nexport class ChildComponent implements OnInit, OnChanges, DoCheck, AfterContentInit {\n  ...\n\n  @ViewChild('wrapper') wrapper!: ElementRef;\n  @ContentChild('contentWrapper') content!: ElementRef;\n\n ...\n\n  ngAfterContentInit() {\n     console.log('ngAfterContentInit - wrapper', this.wrapper);\n     console.log('ngAfterContentInit - 'contentWrapper', this.content);\n  }\n\n...\n}\u003c/code\u003e\u003c/pre\u003e\u003cpre\u003e\u003ccode class=\"language-html\"\u003e\u0026lt;!-- components/child/child.component.html --\u0026gt;\n\n\n\u0026lt;div #wrapper\u0026gt;\n  \u0026lt;ng-content\u0026gt;\u0026lt;/ng-content\u0026gt;\n\u0026lt;/div\u0026gt;\u003c/code\u003e\u003c/pre\u003e\u003cfigure class=\"kg-card kg-image-card\"\u003e\u003cimg src=\"https://lh3.googleusercontent.com/agkydaerloyRZeXfBwLZD8iatnIH1KkwtG00uNkEWcZZ_OXOwaA8cuSnTD5pKXfJ5HEKQHjqUgQ7zfaTxwRYDkrTZxwXir158-Lt6k7o7-8YR1UdlYMjLHxVgmXx4MdfwKb78wRe\" class=\"kg-image\" alt loading=\"lazy\"\u003e\u003c/figure\u003e\u003cp\u003eIn the above code snippet, we projected content from the \u003ccode\u003eParent\u003c/code\u003e component to the \u003ccode\u003eChild\u003c/code\u003e component. To learn more about content projection, check this \u003ca href=\"https://angular.io/guide/content-projection\"\u003edoc\u003c/a\u003e.\u003c/p\u003e\u003cp\u003eAt this point, we only have access to the projected content (contentWrapper  has the value of the projected content). Moreover, the component’s template is not initialized yet (wrapper\u003cem\u003e \u003c/em\u003eis \u003ccode\u003eundefined\u003c/code\u003e). It will be initialized and ready to be accessed on the \u003ccode\u003engAfterViewInit\u003c/code\u003e hook\u003c/p\u003e\u003ch3 id=\"ngaftercontentchecked\"\u003engAfterContentChecked\u003c/h3\u003e\u003cp\u003eThis method is called once during the component’s lifecycle after \u003ccode\u003engAfterContentInit\u003c/code\u003e and then after every subsequent \u003ccode\u003engDoCheck\u003c/code\u003e. It is called after Angular has already checked the content projected into the component in the current digest loop.\u003c/p\u003e\u003cp\u003eTo demonstrate, let’s add the following to our code:\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"language-typescript\"\u003e// components/child/child.component.ts\n\nexport class ChildComponent implements OnInit, OnChanges, DoCheck, AfterContentInit, AfterContentChecked {\n \n\n  ngAfterContentChecked(): void {\n     console.log('ngAfterContentChecked triggered');\n  }\n}\u003c/code\u003e\u003c/pre\u003e\u003cfigure class=\"kg-card kg-image-card\"\u003e\u003cimg src=\"https://lh6.googleusercontent.com/ReFVMGBcwNpKPYTi-iYhPZTsdJ_mD6-RNXzRCcUvPZBU3GupXCYYNW4y4Y-BbQaPb2siEOvmZVuyXneGaHj64PSL6RR0dPgH_jebcfJmfR0pUxK7iDG1U239QSlAD9KvOcLqGtAh\" class=\"kg-image\" alt loading=\"lazy\"\u003e\u003c/figure\u003e\u003cp\u003eIf we click on the \u003ccode\u003eUpdate\u003c/code\u003e button, the \u003ccode\u003engAfterContentChecked\u003c/code\u003e will trigger each time, as well as \u003ccode\u003engDoCheck\u003c/code\u003e.\u003c/p\u003e\u003cfigure class=\"kg-card kg-image-card\"\u003e\u003cimg src=\"https://lh3.googleusercontent.com/E7uYore1SGENQN5UuuZ5nNl9wduFCnblS85yZ_VpdAfmUUocLYSffc0Mlmys_dfDQze1gbwQG6F-iOFc1o9JWXyqF4wS7d-M-zg_vSDF39EU-lds8-1LL5staRquCUT7Bp3ugI9t\" class=\"kg-image\" alt loading=\"lazy\"\u003e\u003c/figure\u003e\u003ch3 id=\"ngafterviewinit\"\u003engAfterViewInit\u003c/h3\u003e\u003cp\u003eThis method is called only once during the component’s lifecycle, after \u003ccode\u003engAfterContentChecked\u003c/code\u003e. Within this hook, we have access for the first time to the \u003ca href=\"https://angular.io/api/core/ElementRef\"\u003eElementRef\u003c/a\u003e of the \u003ca href=\"https://angular.io/api/core/ViewChildren\"\u003eViewChildren\u003c/a\u003e after the component’s creation; after Angular has already composed the component’s views and its child views.\u003c/p\u003e\u003cp\u003eThis hook is useful when you need to load content on your view that depends on its view’s components; for instance when you need to set a video player or create a chart from a canvas element\u003c/p\u003e\u003cp\u003eTo demonstrate, let’s add the following to our code:\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"language-typescript\"\u003e// components/child/child.component.ts\n\nexport class ChildComponent implements OnInit, OnChanges, DoCheck, AfterContentInit, AfterContentChecked, AfterViewInit {\n\n...\n\n  ngAfterViewInit(): void {\n     console.log('ngAfterViewInit - wrapper', this.wrapper);\n  }\n\n... \n}\u003c/code\u003e\u003c/pre\u003e\u003cfigure class=\"kg-card kg-image-card\"\u003e\u003cimg src=\"https://lh4.googleusercontent.com/7PlkYm7l5SJ652udMozqxQ1n3mk3oTfLXMvTwbBQhtx-OEFvjvafFHxMx83Ry_I8G4FD2_TI7duvQrUzFyiJPCtyrG_GcVpsciGy6ihj_E-MnqWOucxgD1Lwkq-DCGhqbmx76AJh\" class=\"kg-image\" alt loading=\"lazy\"\u003e\u003c/figure\u003e\u003cp\u003eAt this point, the component’s template is created and we have access to it.\u003c/p\u003e\u003ch3 id=\"ngafterviewchecked\"\u003engAfterViewChecked\u003c/h3\u003e\u003cp\u003eThis method is called once after\u003cem\u003e \u003c/em\u003e\u003ccode\u003engAfterViewInit\u003c/code\u003e\u003cem\u003e \u003c/em\u003eand then after every subsequent\u003cem\u003e \u003c/em\u003e\u003ccode\u003engAfterContentChecked\u003c/code\u003e. It is called after Angular has already checked the component’s views and its child views in the current digest loop.\u003c/p\u003e\u003cp\u003eTo demonstrate, let’s add the following to our code:\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"language-typescript\"\u003e// components/child/child.component.ts\n\nexport class ChildComponent implements OnInit, OnChanges, DoCheck, AfterContentInit, AfterContentChecked, AfterViewInit,\n     AfterViewChecked {\n\n  @Input() userName = '';\n  @ViewChild('wrapper') wrapper!: ElementRef;\n  @ContentChild('contentWrapper') content!: ElementRef;\n\n  constructor() {\n  }\n\n...\n\n  ngAfterViewChecked(): void {\n     console.log('ngAfterViewChecked triggered');\n  }\n\n...\n}\u003c/code\u003e\u003c/pre\u003e\u003cfigure class=\"kg-card kg-image-card\"\u003e\u003cimg src=\"https://lh4.googleusercontent.com/SatdUznW7biPwCoRwC5iAW2JsO7AWDNwnosFuH3dmRyg2dXaXuPh1Alv2yP7kI6sAwVk8UNzEHocrko6pKFsA5tN3VBxy8e8Qz166eaM09RUMIAhBE9iNaKK24Uuqp45NEZWtg7-\" class=\"kg-image\" alt loading=\"lazy\"\u003e\u003c/figure\u003e\u003cp\u003eIf we continue clicking on the \u003ccode\u003eUpdate\u003c/code\u003e button many times, the \u003ccode\u003engAfterViewChecked\u003c/code\u003e\u003cem\u003e \u003c/em\u003ewill be triggered each time, as well as, \u003ccode\u003engDoCheck\u003c/code\u003e and \u003ccode\u003engAfterContentChecked\u003c/code\u003e.\u003c/p\u003e\u003cfigure class=\"kg-card kg-image-card\"\u003e\u003cimg src=\"https://lh3.googleusercontent.com/3trO9tEs2lO0QKdALzOsXuSLdojgIiMlM-Y0tIVwFrg9KmYhrrr0dLweylnJT7HNGFXqKOoHEhGqqpwaVmtLHTQ7NYdDi9Xxd7716uUEvjyfnkUALMCn1w9QX-WMA_z-n2Bydn_F\" class=\"kg-image\" alt loading=\"lazy\"\u003e\u003c/figure\u003e\u003ch3 id=\"ngondestroy\"\u003engOnDestroy\u003c/h3\u003e\u003cp\u003eLastly, this method is called only once during the component’s lifecycle, right before Angular destroys it. Here is where you should inform the rest of your application that the component is being destroyed, in case there are any actions to be done regarding that information.\u003c/p\u003e\u003cp\u003eAlso, it is where you should put all your cleanup logic for that component. For instance, it is where you can remove any \u003ca href=\"https://developer.mozilla.org/en-US/docs/Web/API/Window/localStorage\"\u003elocal storage\u003c/a\u003e information and most importantly unsubscribe observables/detach event handlers/stop timers, etc. to avoid \u003ca href=\"https://www.geeksforgeeks.org/what-is-memory-leak-how-can-we-avoid/\"\u003ememory leaks\u003c/a\u003e.\u003c/p\u003e\u003cp\u003eNote that the \u003ccode\u003engOnDestroy\u003c/code\u003e is not called when the user refreshes the page or closes the browser. So, in case you need to handle some cleanup logic on those occasions as well, you can use the \u003ca href=\"https://angular.io/api/core/HostListener\"\u003eHostListener\u003c/a\u003e decorator, as shown below:\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"language-typescript\"\u003e@HostListener(‘window:beforeunload’)\nngOnDestroy() {\n  // Insert Logic Here!\n}\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eTo demonstrate, let’s add the following to our code:\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"language-typescript\"\u003e// components/parent/parent.component.ts\n\nexport class ParentComponent implements OnInit {\n  ...\n\n  isChildDestroyed = false;\n\n ...\n\n  destroy() {\n     this.isChildDestroyed = true;\n  }\n\n...\n}\u003c/code\u003e\u003c/pre\u003e\u003cpre\u003e\u003ccode class=\"language-html\"\u003e\u0026lt;!-- components/parent/parent.component.html --\u0026gt;\n\n\n\u0026lt;button (click)=\"destroy()\"\u0026gt;Destroy Child\u0026lt;/button\u0026gt;\n\n\n\u0026lt;app-child *ngIf=\"!isChildDestroyed\"\n          [userName]=\"userName\"\u0026gt;\n  \u0026lt;div #contentWrapper\u0026gt;foo\u0026lt;/div\u0026gt;\n\u0026lt;/app-child\u0026gt;\n\n\u0026lt;div *ngIf=\"isChildDestroyed\"\u0026gt;Child component is destroyed! :(\u0026lt;/div\u0026gt;\n\n...\u003c/code\u003e\u003c/pre\u003e\u003cpre\u003e\u003ccode class=\"language-typescript\"\u003e// components/child/child.component.ts\n\nexport class ChildComponent implements OnInit, OnChanges, DoCheck, AfterContentInit, AfterContentChecked, AfterViewInit,\n     AfterViewChecked, OnDestroy {\n\n ...\n\n  ngOnDestroy(): void {\n     console.log('Child component is destroyed! :(');\n  }\n\n...\n}\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eThis is our updated UI\u003c/p\u003e\u003cfigure class=\"kg-card kg-image-card\"\u003e\u003cimg src=\"https://lh4.googleusercontent.com/5cKlJ8EbqFvtRgPNIiLcCORuFsyIqt37-Y_QltHTelahJscNq9keDyyFK4ynvjtblZxe8OwUB7TxrD5sndykp3O91l8WeqMDzucfEExPA2gd-6n-_uBiX1XdM3Ep8cg2BPksrxAF\" class=\"kg-image\" alt loading=\"lazy\"\u003e\u003c/figure\u003e\u003cp\u003eIf we click on the \u003ccode\u003eDestroy Child\u003c/code\u003e\u003cem\u003e \u003c/em\u003ebutton, notice that the \u003ccode\u003engOnDestroy\u003c/code\u003e\u003cem\u003e \u003c/em\u003efunction will be triggered and the component will be removed from the DOM.\u003c/p\u003e\u003cp\u003eThe below picture represents the DOM before clicking on the \u003ccode\u003eDestroy Child\u003c/code\u003e\u003cem\u003e \u003c/em\u003ebutton.\u003c/p\u003e\u003cfigure class=\"kg-card kg-image-card\"\u003e\u003cimg src=\"https://lh6.googleusercontent.com/FntvEBUxGugLWae1aNELmEBhVLVdoILE82f0TUi7aFqExN8fT9Bej-LT0B-gRKrIPJY0a7HkdPu3Y0ds6QhyaT9F8Ccy3bVQYKP5lQq9A-QYqi7PWimqwWCJKgHU-hFppzQRE6cD\" class=\"kg-image\" alt loading=\"lazy\"\u003e\u003c/figure\u003e\u003cp\u003eAnd the following image represents the DOM after clicking on the \u003ccode\u003eDestroy Child\u003c/code\u003e button.\u003c/p\u003e\u003cfigure class=\"kg-card kg-image-card\"\u003e\u003cimg src=\"https://lh6.googleusercontent.com/guhEzYFI3Krjw-w3HMO_lpUUITi4IdB9MuhlHouXaTqriKm5Cn6JE-qNS7hXAAt1-QT1YDvZa8D7Qta_c1Gb2HuZuJMIEQPcc1B2n90ZcYrCNnygR45lZoQjp4H3C2rvxuLGNlYV\" class=\"kg-image\" alt loading=\"lazy\"\u003e\u003c/figure\u003e\u003ch3 id=\"the-full-scene\"\u003eThe Full Scene\u003c/h3\u003e\u003cp\u003eLong story short, we can understand the lifecycle hooks by splitting the process into two steps,\u003cstrong\u003e” first-time hooks”\u003c/strong\u003e, and \u003cstrong\u003e“in every change detection cycle hooks”.\u003c/strong\u003e\u003c/p\u003e\u003cp\u003eStep 1: “first-time hooks”, the triggered hooks are:\u003c/p\u003e\u003cul\u003e\u003cli\u003eonChanges\u003c/li\u003e\u003cli\u003eonInit\u003c/li\u003e\u003cli\u003edoCheck\u003c/li\u003e\u003cli\u003eafterContentInit\u003c/li\u003e\u003cli\u003eafterContentChecked\u003c/li\u003e\u003cli\u003eafterViewInit\u003c/li\u003e\u003cli\u003eafterViewChecked\u003c/li\u003e\u003c/ul\u003e\u003cp\u003eStep 2: “in every change detection cycle hooks”, the triggered hooks are:\u003c/p\u003e\u003cul\u003e\u003cli\u003eonChanges\u003c/li\u003e\u003cli\u003edoCheck\u003c/li\u003e\u003cli\u003eafterContentChecked\u003c/li\u003e\u003cli\u003eafterViewChecked\u003c/li\u003e\u003c/ul\u003e\u003cp\u003eThe following diagram shows exactly how Angular component/directive lifecycle works\u003c/p\u003e\u003cfigure class=\"kg-card kg-image-card\"\u003e\u003cimg src=\"https://lh4.googleusercontent.com/jqfQIpB5PJcoOn8n9fMW466u69Fs-kS4pKMzr3nKPmLRj_T730J9MB3kBRfaI9A_T3T5PFYOsjL0lSJkl_NifKbzhOJgkZKU5bQmiZhXwz8Tcu_uT6rsSlA8gFF5hl-YBRybh0RA\" class=\"kg-image\" alt loading=\"lazy\"\u003e\u003c/figure\u003e\u003ch3 id=\"further-reading\"\u003eFurther reading\u003c/h3\u003e\u003cul\u003e\u003cli\u003e\u003ca href=\"https://angular.io/guide/lifecycle-hooks\"\u003eLifecycle Hooks from Angular docs\u003c/a\u003e\u003c/li\u003e\u003cli\u003e\u003ca href=\"https://stackoverflow.com/questions/35763730/difference-between-constructor-and-ngoninit\"\u003eDifference between Constructor and ngOnInit\u003c/a\u003e\u003c/li\u003e\u003cli\u003e\u003ca href=\"https://indepth.dev/posts/1131/if-you-think-ngdocheck-means-your-component-is-being-checked-read-this-article\"\u003eArticle: If you think \u003ccode\u003engDoCheck\u003c/code\u003e means your component is being checked\u003c/a\u003e\u003c/li\u003e\u003cli\u003e\u003ca href=\"https://hackernoon.com/everything-you-need-to-know-about-the-expressionchangedafterithasbeencheckederror-error-e3fd9ce7dbb4\"\u003eEverything you need to know about the \u003ccode\u003eExpressionChangedAfterItHasBeenCheckedError\u003c/code\u003e error\u003c/a\u003e\u003c/li\u003e\u003c/ul\u003e\u003ch3 id=\"conclusion\"\u003eConclusion\u003c/h3\u003e\u003cp\u003eWe understood Angular Lifecycle Hooks, their objectives, and when they are called and they can be very useful when creating Angular applications. Therefore it is important to know how they work and what you can achieve with them to be able to apply it whenever you might need it.\u003c/p\u003e","comment_id":"61ed09487e6c0dc6ecd8bf4c","feature_image":"https://images.indepth.dev/images/2022/01/Complete-Guide_-Angular-lifecycle-hooks.jpg","featured":false,"visibility":"public","created_at":"2022-01-23T09:52:40.000+02:00","updated_at":"2022-01-31T11:37:02.000+02:00","published_at":"2022-01-24T10:52:48.000+02:00","custom_excerpt":"In this article, we will take a deeper dive into each lifecycle hook and look at how they're used in Angular.","codeinjection_head":"{\"community_link\":\"https://github.com/indepth-dev/community/discussions/248\"}","codeinjection_foot":null,"custom_template":null,"canonical_url":null,"email_recipient_filter":"none","authors":[{"id":"61ec491f7e6c0dc6ecd8bf49","name":"Maria Zayed","slug":"maria","profile_image":"https://images.indepth.dev/images/2022/01/profile3.png","cover_image":null,"bio":null,"website":null,"location":null,"facebook":null,"twitter":null,"meta_title":null,"meta_description":null,"url":"https://admin.indepth.dev/author/maria/"}],"tags":[{"id":"5d403979679ce6202b744976","name":"angular","slug":"angular","description":"Questions about Angular (not to be confused with AngularJS), the web framework from Google. Use this tag for Angular questions which are not specific to an individual version. For the older AngularJS (1.x) web framework, use the angularjs tag.","feature_image":null,"visibility":"public","meta_title":null,"meta_description":null,"og_image":null,"og_title":null,"og_description":null,"twitter_image":null,"twitter_title":null,"twitter_description":null,"codeinjection_head":null,"codeinjection_foot":null,"canonical_url":null,"accent_color":null,"url":"https://admin.indepth.dev/tag/angular/"},{"id":"5e3c5ce2be143e7df0e2a359","name":"lifecycle-methods","slug":"lifecycle-methods","description":null,"feature_image":null,"visibility":"public","meta_title":null,"meta_description":null,"og_image":null,"og_title":null,"og_description":null,"twitter_image":null,"twitter_title":null,"twitter_description":null,"codeinjection_head":null,"codeinjection_foot":null,"canonical_url":null,"accent_color":null,"url":"https://admin.indepth.dev/tag/lifecycle-methods/"},{"id":"5e9e9fb7d724c36e46b26dfe","name":"hooks","slug":"hooks","description":null,"feature_image":null,"visibility":"public","meta_title":null,"meta_description":null,"og_image":null,"og_title":null,"og_description":null,"twitter_image":null,"twitter_title":null,"twitter_description":null,"codeinjection_head":null,"codeinjection_foot":null,"canonical_url":null,"accent_color":null,"url":"https://admin.indepth.dev/tag/hooks/"}],"primary_author":{"id":"61ec491f7e6c0dc6ecd8bf49","name":"Maria Zayed","slug":"maria","profile_image":"https://images.indepth.dev/images/2022/01/profile3.png","cover_image":null,"bio":null,"website":null,"location":null,"facebook":null,"twitter":null,"meta_title":null,"meta_description":null,"url":"https://admin.indepth.dev/author/maria/","_id":1145},"primary_tag":{"id":"5d403979679ce6202b744976","name":"angular","slug":"angular","description":"Questions about Angular (not to be confused with AngularJS), the web framework from Google. Use this tag for Angular questions which are not specific to an individual version. For the older AngularJS (1.x) web framework, use the angularjs tag.","feature_image":null,"visibility":"public","meta_title":null,"meta_description":null,"og_image":null,"og_title":null,"og_description":null,"twitter_image":null,"twitter_title":null,"twitter_description":null,"codeinjection_head":null,"codeinjection_foot":null,"canonical_url":null,"accent_color":null,"url":"https://admin.indepth.dev/tag/angular/"},"url":"https://admin.indepth.dev/complete-guide-angular-lifecycle-hooks/","excerpt":"In this article, we will take a deeper dive into each lifecycle hook and look at how they're used in Angular.","reading_time":10,"access":true,"send_email_when_published":false,"og_image":null,"og_title":null,"og_description":null,"twitter_image":"https://images.indepth.dev/images/2022/01/Complete-Guide_-Angular-lifecycle-hooks2.jpg","twitter_title":null,"twitter_description":null,"meta_title":null,"meta_description":null,"email_subject":null,"frontmatter":null,"_id":1494},{"id":"61c1d5e27e6c0dc6ecd8bd34","uuid":"8f49d937-b923-4942-b8e1-38f28139a668","title":"Attaching new behaviors through decorators in JavaScript","slug":"attaching-new-behaviors-through-decorators-in-javascript","html":"\u003cp\u003eLots of popular languages such as Java and Python have decorators. It's a common pattern that serves two major purposes:\u003c/p\u003e\u003cul\u003e\u003cli\u003echanging the functionality of an object at run-time without impacting the existing functionality of the objects\u003c/li\u003e\u003cli\u003ewrapping a behavior into simple, reusable chunks while cutting down the amount of boilerplate code\u003c/li\u003e\u003c/ul\u003e\u003cp\u003eIt's possible to code without decorators as they are mostly syntactic sugar that allow us to wrap and annotate classes and functions, but they greatly improve code readability. One of the common use case for using decorators is adding caching logic to API calls. Check out \u003ca href=\"https://indepth.dev/posts/1450/how-to-use-ts-decorators-to-add-caching-logic-to-api-calls\"\u003earticle\u003c/a\u003e for more details.\u003c/p\u003e\u003cp\u003eDecorators are coming to JavaScript as well. It's a new feature that is currently on \u003ca href=\"https://github.com/tc39/proposal-decorators\"\u003eStage 2\u003c/a\u003e. That's how the proposal define decorators:\u003c/p\u003e\u003cblockquote\u003eDecorators are functions called on classes, class elements, or other JavaScript syntax forms during definition. Decorators have three primary capabilities: They can replace the value that is being decorated with a matching value that has the same semantics. They can associate metadata with the value that is being decorated. This metadata can then be read externally and used for metaprogramming and introspection. They can provide access to the value that is being decorated, via metadata.\u003c/blockquote\u003e\u003cp\u003eTechnically, you can think of a decorator in JavaScript as a higher-order function that takes one function as an argument and returns another function as a result. In most implementations the returned function reuses the original function that it takes as a parameter, but that's not necessary.\u003c/p\u003e\u003cp\u003eThe standardization process has been moving slowly, but there's progress so it's quite likely we'll see decorators as part of the language in the near future. Meanwhile, TypeScript and Babel can already transpile and polyfill decorators so we can use them in our everyday development. In fact, decorators are becoming popular in a variety of frontend JavaScript frameworks: Angular, Mobx and Vue.js.\u003c/p\u003e\u003cp\u003eThe JavaScript proposal defines four types of decorators:\u003c/p\u003e\u003cul\u003e\u003cli\u003eclass decorator;\u003c/li\u003e\u003cli\u003eproperty decorators;\u003c/li\u003e\u003cli\u003emethod decorators;\u003c/li\u003e\u003cli\u003eaccessor decorators.\u003c/li\u003e\u003c/ul\u003e\u003cp\u003eIn this article, we are going to review decorators that are applied to \u003cstrong\u003emethods\u003c/strong\u003e in class based implementation and to \u003cstrong\u003efunctions\u003c/strong\u003e if the functional approach is used. We'll take a look at how it can be done with both approaches using the business requirement to delay a notification when certain conditions hold true.\u003c/p\u003e\u003ch3 id=\"implementing-decorators\"\u003eImplementing decorators\u003c/h3\u003e\u003cp\u003eLet's create a class \u003ccode\u003eNotification\u003c/code\u003e that consists of property \u003ccode\u003etype\u003c/code\u003e and one simple method \u003ccode\u003enotifyUser\u003c/code\u003e which displays a type of notification in console  \u003ccode\u003eSuccess notification\u003c/code\u003e.\u003c/p\u003e\u003cp\u003eAfter that, we will create an instance of the class \u003ccode\u003eNotification\u003c/code\u003e and call \u003ccode\u003enotifyUser\u003c/code\u003e method:\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"language-typescript\"\u003eclass Notification {\n\ttype: string;\n\n\tconstructor() {\n\t\tthis.type = 'Success';\n\t}\n\n\tnotifyUser = function() {\n\t\tconsole.log(`${this.type} notification`);\n\t}\n}\n\nconst notification = new Notification ('Success')\n\nnotification.notifyUser(); \n\n// You will see in console - 'Success notification'\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eNow we need to display this notification message in the console after some delay, for example, 3 seconds.\u003c/p\u003e\u003cp\u003eTo implement this new requirement we could introduce a new class \u003ccode\u003eDelayedNotification\u003c/code\u003e, but it would be almost exactly the same as \u003ccode\u003eNotification\u003c/code\u003e. It feels like we just need to modify the behavior of the existing \u003ccode\u003eNotification\u003c/code\u003e class a bit. This is a case when the implementation of the decorator fits perfectly.\u003c/p\u003e\u003ch3 id=\"decorator-pattern-as-a-higher-order-function\"\u003eDecorator pattern as a higher-order function\u003c/h3\u003e\u003cp\u003eFirst of all, we need to decorate the existing method \u003ccode\u003enotifyUser\u003c/code\u003e with the \u003ccode\u003esetTimeout\u003c/code\u003e API. As you remember that \u003ca href=\"https://developer.mozilla.org/en-US/docs/Web/API/setTimeout\"\u003e\u003ccode\u003esetTimeout\u003c/code\u003e\u003c/a\u003e function takes a number of milliseconds for waiting before executing the code. For that, we need to pass somehow a number of milliseconds to our decorator.\u003c/p\u003e\u003cp\u003eLet's implement a generic higher-order function \u003ccode\u003edelayMiliseconds\u003c/code\u003e that would take any other function and decorate it by adding a delay in calling it.\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"language-typescript\"\u003e\nconst delayMiliseconds = (fn: Function, delay:number = 0) =\u0026gt; () =\u0026gt; {\n     setTimeout(() =\u0026gt; fn(), delay);\n     return 'notifyUser is called';\n};\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eLet's see how we can invoke a decorator:\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"language-typescript\"\u003e\ndelayMiliseconds(notification.notifyUser, 3000);\n\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eAnd now to apply this generic function to a class we can do the following changes in our method \u003ccode\u003enotifyUser\u003c/code\u003e:\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"language-typescript\"\u003e\nclass DelayedNotification {\n\ttype: string;\n\n\tconstructor(type) {\n\t\tthis.type = type;\n\t}\n\n\tpublic notifyUser = delayMiliseconds(() =\u0026gt; {\n\t\tconsole.log(`${this.type} notification` 'checkTime:' new Date().getSeconds());\n\t}, 3000);\n}\n\nconst notification = new DelayedNotification ('Success')\n\nconsole.log(notification.notifyUser() 'checkTime:' new Date().getSeconds())\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eAs a result, we will see the 'Success notification' message in the console after 3 seconds:\u003c/p\u003e\u003cfigure class=\"kg-card kg-image-card\"\u003e\u003cimg src=\"https://images.indepth.dev/images/2021/12/Screenshot-2021-12-18-at-19.11.55.png\" class=\"kg-image\" alt loading=\"lazy\" width=\"838\" height=\"110\"\u003e\u003c/figure\u003e\u003cp\u003eFrom this example, we can see that \u003ccode\u003edelayMiliseconds\u003c/code\u003e is a high-order function -  a function that takes a function as an argument and return another function.\u003c/p\u003e\u003cp\u003eIf you look closer at the JavaScript function on arrays, strings, DOM methods, promise method — you could see that many of them are higher-order functions as soon as they accept a function as an argument.\u003c/p\u003e\u003cp\u003eOne interesting trait of the decorator pattern applied to classes using higher-order functions is that the behavior is no longer part of the object's prototype. Since we use property definition syntax when declaring a class, class \u003ccode\u003eA { prop = value}\u003c/code\u003e, instead of method definition syntax, class \u003ccode\u003eA { prop() {}\u003c/code\u003e, Javascript doesn't add the functionality to the prototype shared by class instances.\u003c/p\u003e\u003cp\u003eFor deep investigation let's display an instance of \u003ccode\u003eDelayedNotification\u003c/code\u003e in the console:\u003c/p\u003e\u003cp\u003e\u003ccode\u003econsole.log(notification)\u003c/code\u003e\u003c/p\u003e\u003cfigure class=\"kg-card kg-image-card\"\u003e\u003cimg src=\"https://images.indepth.dev/images/2021/12/Screenshot-2021-12-18-at-18.16.42.png\" class=\"kg-image\" alt loading=\"lazy\" width=\"1142\" height=\"298\"\u003e\u003c/figure\u003e\u003cp\u003eIn order to get a better understanding, I suggest you look in the console - check the method existence of the method \u003ccode\u003enotifyUser\u003c/code\u003e in \u003ccode\u003enotification\u003c/code\u003e.\u003c/p\u003e\u003cp\u003eAccording to documentation, JavaScript first looks for the property at the object itself. If it isn't there, it keeps walking up the prototype chain. \u003ccode\u003ehasOwnProperty\u003c/code\u003e exists to check the property only at object itself, and not use the prototype chain. If you want to check if a property exists at all, iterating over the prototype chain, use the \u003ccode\u003ein\u003c/code\u003e operator. Here's what we'll see:\u003c/p\u003e\u003cp\u003e\u003ccode\u003econsole.log('notifyUser' in notification)\u003c/code\u003e;  // true\u003c/p\u003e\u003cp\u003e\u003ccode\u003econsole.log(Object.getPrototypeOf(notification).hasOwnProperty('notifyUser'))\u003c/code\u003e;  // false\u003c/p\u003e\u003cp\u003eAs a result,  at first case ,you see \u003ccode\u003etrue\u003c/code\u003e in the console because  \u003ccode\u003eDelayedNotification\u003c/code\u003e \u003ccode\u003einstance\u003c/code\u003e has the method \u003ccode\u003enotifyUser\u003c/code\u003e.\u003c/p\u003e\u003cp\u003eAnd in the second case, you see \u003ccode\u003efalse\u003c/code\u003e because the prototype of the notification does not have the method \u003ccode\u003enotifyUser\u003c/code\u003e.\u003c/p\u003e\u003cp\u003eIt is customary with functional approach to not use classes and avoid \u003ccode\u003ethis\u003c/code\u003e , so a factory pattern is a common recipe for creating objects in JS. The higher order function we created above can be aptly used here as well like this:\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"language-typescript\"\u003efunction functionBasedNotificationFactory() {\n\tconst type = 'Success';\n\n\t notifyUser() {\n\t\tconsole.log(`${type} notification`);\n\t}\n\n\treturn {\n\t\tname: 'Success',\n\t\tnotifyUser: delayMiliseconds(notifyUser, 300);\n\t}\n}\u003c/code\u003e\u003c/pre\u003e\u003cpre\u003e\u003ccode class=\"language-typescript\"\u003e\nconst notification = functionBasedNotificationFactory();\n\nnotification.notifyUser();\n\n// 'Success notification' in console after 3 seconds\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eAs you can see from the screenshot above, the factory function \u003ccode\u003efunctionBasedNotificationFactory\u003c/code\u003e return object with decorated method \u003ccode\u003enotifyUser\u003c/code\u003e.\u003c/p\u003e\u003ch3 id=\"class-based-approach\"\u003eClass-based approach\u003c/h3\u003e\u003cp\u003eLet's take a look at the implementation of the decorator pattern as a language feature.  Class based implementation looks like this:\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"language-typescript\"\u003e\nfunction delayMiliseconds( milliseconds: number = 0 ) {\n  return function (\n    target: Object, \n    propertyKey: string | symbol,\n    descriptor: PropertyDescriptor\n  ) {\n\n   const originalMethod = descriptor.value;\n\n   descriptor.value = function (...args) {\n\t\t  setTimeout(() =\u0026gt; {\n\t\t    originalMethod.call(this, ...args);\n\t\t   }, milliseconds); \n\t\t};\n\n    return descriptor;\n  };\n}\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eDecorator \u003ccode\u003edelayMiliseconds\u003c/code\u003e take one parameter \u003ccode\u003emilliseconds\u003c/code\u003e (a default value of the milliseconds would be \u003ccode\u003e0\u003c/code\u003e). This parameter would be used in \u003ccode\u003esetTimeout\u003c/code\u003e function as an amount of the delay.\u003c/p\u003e\u003cp\u003eAs you can see above, \u003ccode\u003edelayMiliseconds\u003c/code\u003e takes three parameters:\u003c/p\u003e\u003cul\u003e\u003cli\u003e\u003ccode\u003etarget\u003c/code\u003e -  either the constructor function of the class for a static member or the prototype of the class for an instance member. In our example, \u003ccode\u003eNotification.prototype\u003c/code\u003e would be a target.\u003c/li\u003e\u003cli\u003e\u003ccode\u003epropertyKey\u003c/code\u003e - the method name that is being decorated.\u003c/li\u003e\u003cli\u003e\u003ccode\u003ePropertyDescriptor\u003c/code\u003e - describes a property on an \u003ccode\u003e[\u003ca href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/defineProperty\"\u003eObject\u003c/a\u003e]\u003c/code\u003e:\u003c/li\u003e\u003c/ul\u003e\u003cpre\u003e\u003ccode class=\"language-typescript\"\u003e\ninterface PropertyDescriptor {\n    configurable?: boolean;\n    enumerable?: boolean;\n    value?: any;\n    writable?: boolean;\n    get? (): any;\n    set? (v: any): void;\n}\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eIn case if we want to change the behavior of the method, we should redefine value in the property descriptor with a new functionality:\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"language-typescript\"\u003econst originalMethod = descriptor.value; // a reference to the original\n\ndescriptor.value = function (...args) {\n\t\t  \t\t\t\tsetTimeout(() =\u0026gt; {\n\t\t   \t\t\t\t\toriginalMethod.call(this, ...args); // bind a context of Notification\n\t\t  \t}, milliseconds); \n};\n\nreturn descriptor;   // return descriptor with a new behaviour\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eTo apply the decorator to our method notifyUser  we should use special syntax - prefixed symbol @.\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"language-typescript\"\u003e\nclass DelayedNotification {\n\ttype: string; \n\n\tconstructor(type) {\n\t\tthis.type = type\n\t}\n\n \t@delayMiliseconds(300)\n \tnotifyUser() {\n\t\tconsole.log(`${this.type} notification`);\n\t}\n}\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eLet's display the instance of \u003ccode\u003eDelayedNotification\u003c/code\u003e as we did earlier in the console:\u003c/p\u003e\u003cp\u003e\u003ccode\u003econsole.log(new DelayedNotification('Success'))\u003c/code\u003e\u003c/p\u003e\u003cfigure class=\"kg-card kg-image-card\"\u003e\u003cimg src=\"https://images.indepth.dev/images/2021/12/Screenshot-2021-12-18-at-18.18.39.png\" class=\"kg-image\" alt loading=\"lazy\" width=\"1142\" height=\"304\"\u003e\u003c/figure\u003e\u003cp\u003eFrom this screenshot, we can observe that \u003ccode\u003eDelayedNotification\u003c/code\u003e instance does not have a method \u003ccode\u003enotifyUser\u003c/code\u003e.  \u003ccode\u003eNotifyUser\u003c/code\u003e method exists only in \u003ccode\u003eDelayedNotification\u003c/code\u003e prototype. It happens because \u003ccode\u003edelayMiliseconds\u003c/code\u003e is supposed to work with prototype methods because it relies on \u003ccode\u003edescriptor\u003c/code\u003e.\u003c/p\u003e\u003cp\u003eThere is additional proof for that - let`s run  the same  verification in console, as we provide earlier in the functional approach:\u003c/p\u003e\u003cp\u003e\u003ccode\u003econsole.log('notifyUser' in notification)\u003c/code\u003e;   // true\u003c/p\u003e\u003cp\u003e\u003ccode\u003econsole.log(Object.getPrototypeOf(notification).hasOwnProperty('notifyUser'))\u003c/code\u003e ;  // true\u003c/p\u003e\u003cp\u003eAs a result, you see \u003cstrong\u003etrue\u003c/strong\u003e in console as in the functional approach because \u003ccode\u003enotification\u003c/code\u003e \u003cstrong\u003eprototype\u003c/strong\u003e has a method \u003ccode\u003enotifyUser\u003c/code\u003e.\u003c/p\u003e\u003cp\u003eAs you can see, that's one of the substantial differences between functional and class-based approaches is that we have decorated the method on a prototype in a class-based approach and have not in a functional approach.\u003c/p\u003e\u003cp\u003eFactory pattern with classes aren't as popular as with the functional approach because you can directly instantiate an object through its class. But if we wanted to do that, there's nothing special we should do. The decorator will applied automatically when JS will be creating a class instance. Let`s create a class-based factory:\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"language-typescript\"\u003e// classBased factory\n\nfunction classBasedObjectAFactory() {\n  return new Notification('Success');\n}\n\nconst notification = classBasedObjectAFactory();\n\nnotification.notifyUser();\n\n// 'Success notification' in console after 3 seconds\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eAs you can see from the screenshot above, a factory function provides the ability to produce an object by creating a class instance with a \u003ccode\u003enew\u003c/code\u003e keyword.\u003c/p\u003e\u003chr\u003e\u003cp\u003e\u003cstrong\u003e5. Where you can find usage of Decorators?\u003c/strong\u003e\u003c/p\u003e\u003cp\u003eYou can find of usage of Decorators in the next frameworks:\u003c/p\u003e\u003cul\u003e\u003cli\u003eAngular - \u003ccode\u003e@Component\u003c/code\u003e, \u003ccode\u003e@Directive\u003c/code\u003e, \u003ccode\u003e@Injectable\u003c/code\u003e, \u003ccode\u003e@Pipe\u003c/code\u003e\u003c/li\u003e\u003c/ul\u003e\u003cp\u003eTo learn more about the component decorator mechanism in Angular you can read this \u003ca href=\"https://indepth.dev/posts/1163/implementing-custom-component-decorator-in-angular\"\u003earticle\u003c/a\u003e.\u003c/p\u003e\u003cul\u003e\u003cli\u003eMobx -  \u003ccode\u003e@observable\u003c/code\u003e, \u003ccode\u003e@computed\u003c/code\u003e и \u003ccode\u003e@action\u003c/code\u003e\u003c/li\u003e\u003cli\u003eReact - \u003ccode\u003eHoC\u003c/code\u003e (for create higher-order components)\u003c/li\u003e\u003cli\u003e\u003ca href=\"https://www.npmjs.com/package/core-decorators/v/0.20.0\"\u003eCore-decorators\u003c/a\u003e library \u003cstrong\u003e- \u003ccode\u003e@**readonly\u003c/code\u003e \u003cstrong\u003e,\u003ccode\u003e@**extendDescriptor\u003c/code\u003e\u003c/strong\u003e, \u003ccode\u003e@**override\u003c/code\u003e\u003c/strong\u003e,** \u003ccode\u003e@autobind\u003c/code\u003e\u003c/li\u003e\u003c/ul\u003e\u003cp\u003eExplanation of how Angular @Injectable decorator works under the hood in Angular Ivy you can read \u003ca href=\"https://indepth.dev/posts/1151/a-deep-dive-into-injectable-and-providedin-in-ivy\"\u003ehere\u003c/a\u003e\u003c/p\u003e\u003cp\u003e\u003cstrong\u003eConclusion\u003c/strong\u003e\u003c/p\u003e\u003cp\u003eDecorator is a \u003cem\u003efunction that gives\u003c/em\u003e the ability to dynamically modify the existing functionality:\u003c/p\u003e\u003cul\u003e\u003cli\u003eby higher-order functions in the functional implementation;\u003c/li\u003e\u003cli\u003eby modifying functionality using method/property decorators in the class-based implementation.\u003c/li\u003e\u003c/ul\u003e\u003cp\u003eThe main purpose of using decorators - dynamically add logic to the objects, compose behavior without modifying the original function.\u003c/p\u003e\u003cp\u003eYou can use decorators in the next cases:\u003c/p\u003e\u003cul\u003e\u003cli\u003eyou want to add new functionality to the object (this functionality could be easily deleted from this object later)\u003c/li\u003e\u003cli\u003ereplace an inheritance of classes by creating a decorators\u003c/li\u003e\u003c/ul\u003e\u003cp\u003eThere are some advantages and disadvantages of using decorators in Javascript:\u003c/p\u003e\u003cp\u003eAdvantages:\u003c/p\u003e\u003cul\u003e\u003cli\u003ereusability - the main advantage of the decorator is that you can apply the same logic to a different method without rewriting them.\u003c/li\u003e\u003cli\u003eimprove readability and extensibility;\u003c/li\u003e\u003cli\u003edecrease amount of code;\u003c/li\u003e\u003cli\u003eimplementation of the Decorator pattern.\u003c/li\u003e\u003c/ul\u003e\u003cp\u003eDisadvantages:\u003c/p\u003e\u003cul\u003e\u003cli\u003eThe decorator design pattern creates lots of similar decorators which are sometimes hard to maintain.\u003c/li\u003e\u003cli\u003eWith multiple decorators concreate subclasses and code and architecture can be complex.\u003c/li\u003e\u003cli\u003eIt’s hard to remove a specific wrapper from the wrapper's stack.\u003c/li\u003e\u003c/ul\u003e","comment_id":"61c1d5e27e6c0dc6ecd8bd34","feature_image":"https://images.indepth.dev/images/2021/12/Attaching-new-behaviors-through-decorators-in-JavaScript-1.jpg","featured":false,"visibility":"public","created_at":"2021-12-21T15:25:54.000+02:00","updated_at":"2021-12-27T13:56:31.000+02:00","published_at":"2021-12-22T15:50:20.000+02:00","custom_excerpt":"In this article, we will learn about decorators and two different techniques for their implementation - functioning and class-based.","codeinjection_head":"{\"community_link\":\"https://github.com/indepth-dev/community/discussions/230\"}","codeinjection_foot":null,"custom_template":null,"canonical_url":null,"email_recipient_filter":"none","authors":[{"id":"60f17cf679dbc57df92a0f56","name":"Varvara Sandakova","slug":"varvara","profile_image":"https://images.indepth.dev/images/2021/12/photo5339540593094802173.jpg","cover_image":null,"bio":null,"website":null,"location":null,"facebook":null,"twitter":null,"meta_title":null,"meta_description":null,"url":"https://admin.indepth.dev/author/varvara/"}],"tags":[{"id":"5e58b2f3be143e7df0e2c738","name":"decorators","slug":"decorators","description":null,"feature_image":null,"visibility":"public","meta_title":null,"meta_description":null,"og_image":null,"og_title":null,"og_description":null,"twitter_image":null,"twitter_title":null,"twitter_description":null,"codeinjection_head":null,"codeinjection_foot":null,"canonical_url":null,"accent_color":null,"url":"https://admin.indepth.dev/tag/decorators/"},{"id":"5d403b854528ce234fe57209","name":"javascript","slug":"javascript","description":"JavaScript (not to be confused with Java) is a high-level, dynamic, multi-paradigm, object-oriented, prototype-based, weakly-typed, and interpreted language used for both client-side and server-side scripting. Its primary use is in rendering and manipulating of web pages. Use this tag for questions regarding ECMAScript and its various dialects/implementations (excluding ActionScript and Google-Apps-Script).","feature_image":null,"visibility":"public","meta_title":null,"meta_description":null,"og_image":null,"og_title":null,"og_description":null,"twitter_image":null,"twitter_title":null,"twitter_description":null,"codeinjection_head":null,"codeinjection_foot":null,"canonical_url":null,"accent_color":null,"url":"https://admin.indepth.dev/tag/javascript/"},{"id":"5d415803f7263c2c4011b45b","name":"typescript","slug":"typescript","description":"TypeScript is a typed superset of JavaScript that compiles to plain JavaScript.","feature_image":null,"visibility":"public","meta_title":null,"meta_description":null,"og_image":null,"og_title":null,"og_description":null,"twitter_image":null,"twitter_title":null,"twitter_description":null,"codeinjection_head":null,"codeinjection_foot":null,"canonical_url":null,"accent_color":null,"url":"https://admin.indepth.dev/tag/typescript/"}],"primary_author":{"id":"60f17cf679dbc57df92a0f56","name":"Varvara Sandakova","slug":"varvara","profile_image":"https://images.indepth.dev/images/2021/12/photo5339540593094802173.jpg","cover_image":null,"bio":null,"website":null,"location":null,"facebook":null,"twitter":null,"meta_title":null,"meta_description":null,"url":"https://admin.indepth.dev/author/varvara/","_id":1137},"primary_tag":{"id":"5e58b2f3be143e7df0e2c738","name":"decorators","slug":"decorators","description":null,"feature_image":null,"visibility":"public","meta_title":null,"meta_description":null,"og_image":null,"og_title":null,"og_description":null,"twitter_image":null,"twitter_title":null,"twitter_description":null,"codeinjection_head":null,"codeinjection_foot":null,"canonical_url":null,"accent_color":null,"url":"https://admin.indepth.dev/tag/decorators/"},"url":"https://admin.indepth.dev/attaching-new-behaviors-through-decorators-in-javascript/","excerpt":"In this article, we will learn about decorators and two different techniques for their implementation - functioning and class-based.","reading_time":7,"access":true,"send_email_when_published":false,"og_image":null,"og_title":null,"og_description":null,"twitter_image":"https://images.indepth.dev/images/2021/12/Attaching-new-behaviors-through-decorators-in-JavaScript2-1.jpg","twitter_title":null,"twitter_description":null,"meta_title":null,"meta_description":null,"email_subject":null,"frontmatter":null,"_id":1491},{"id":"619127967e6c0dc6ecd8bb62","uuid":"49219b76-e1cc-41e9-b267-522fd2166e0f","title":"​State Machines in JavaScript with XState","slug":"state-machines-in-javascript-with-xstate","html":"\u003cp\u003eState machines are models that govern a finite number of states and the events that transition from one state to the other. They are abstractions that allows us to explicitly define our application's path instead of guarding against a million possible paths.\u003c/p\u003e\u003cp\u003eA state machine for traffic lights, for instance, would hold three states: red, yellow, and green. Green transitions to yellow, yellow to red, and red back to green. Having a state machine define our logic makes it impossible to have an illegal transition from red to yellow or yellow to green.\u003c/p\u003e\u003cp\u003eTo see how state machines can vastly reduce the complexity of our UI, business logic, and code, we’ll take the following example:\u003c/p\u003e\u003cp\u003eWe have a light bulb that can be either \u003ccode\u003elit\u003c/code\u003e, \u003ccode\u003eunlit\u003c/code\u003e, or \u003ccode\u003ebroken\u003c/code\u003e and three buttons that can turn the bulb on or off, or break it, as represented by the following HTML code:\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"language-html\"\u003e\u0026lt;p\u0026gt;The light bulb is \u0026lt;span id=\"lightbulb\"\u0026gt;lit\u0026lt;/span\u0026gt;\u0026lt;/p\u0026gt;\n\n\u0026lt;button id='turn-on'\u0026gt;turn on\u0026lt;/button\u0026gt;\n\u0026lt;button id='turn-off'\u0026gt;turn off\u0026lt;/button\u0026gt;\n\u0026lt;button id='break'\u0026gt;break\u0026lt;/button\u0026gt;\u003c/code\u003e\u003c/pre\u003e\u003cp\u003e​We will reference our button elements and add click event listeners to implement our business logic.\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"language-javascript\"\u003econst lightbulb = document.getElementById(\"lightbulb\")\n\nconst turnBulbOn = document.getElementById(\"turn-on\")\nconst turnBulbOff = document.getElementById(\"turn-off\")\nconst breakBulb = document.getElementById(\"break\")\n\nturnBulbOn.addEventListener(\"click\", () =\u0026gt; {\n  lightbulb.innerText = \"lit\"\n})\n\nturnBulbOff.addEventListener(\"click\", () =\u0026gt; {\n  lightbulb.innerText = \"unlit\"\n})\n\nbreakBulb.addEventListener(\"click\", () =\u0026gt; {\n  lightbulb.innerText = \"broken\"\n})\n\u003c/code\u003e\u003c/pre\u003e\u003cfigure class=\"kg-card kg-embed-card\"\u003e\u003ciframe id=\"cp_embed_YzxEBVX\" src=\"https://codepen.io/smhmd/embed/preview/YzxEBVX?default-tabs=js%2Cresult\u0026amp;height=300\u0026amp;host=https%3A%2F%2Fcodepen.io\u0026amp;slug-hash=YzxEBVX\" title=\"Lightbulb without state machine\" scrolling=\"no\" frameborder=\"0\" height=\"300\" allowtransparency=\"true\" class=\"cp_embed_iframe\" style=\"width: 100%; overflow: hidden;\"\u003e\u003c/iframe\u003e\u003c/figure\u003e\u003cp\u003e​If the light bulb is broken, turning it on again should be an impossible state transition. But the implementation above allows us to do that by simply clicking the button. So we need to guard against the transition from the broken state to the lit state. To do that, we often resort to boolean flags or verbose checks before each action, as such:\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"language-javascript\"\u003elet isBroken = false\n\nturnBulbOn.addEventListener(\"click\", () =\u0026gt; {\n  if (!isBroken) {\n    lightbulb.innerText = \"lit\"\n  }\n})\n\nturnBulbOff.addEventListener(\"click\", () =\u0026gt; {\n  if (!isBroken) {\n    lightbulb.innerText = \"unlit\"\n  }\n})\n\nbreakBulb.addEventListener(\"click\", () =\u0026gt; {\n  lightbulb.innerText = \"broken\"\n  isBroken = true\n})\n\u003c/code\u003e\u003c/pre\u003e\u003cfigure class=\"kg-card kg-embed-card\"\u003e\u003ciframe id=\"cp_embed_yLoPZxR\" src=\"https://codepen.io/smhmd/embed/preview/yLoPZxR?default-tabs=js%2Cresult\u0026amp;height=300\u0026amp;host=https%3A%2F%2Fcodepen.io\u0026amp;slug-hash=yLoPZxR\" title=\"Lightbulb with boolean\" scrolling=\"no\" frameborder=\"0\" height=\"300\" allowtransparency=\"true\" class=\"cp_embed_iframe\" style=\"width: 100%; overflow: hidden;\"\u003e\u003c/iframe\u003e\u003c/figure\u003e\u003cp\u003e​But these checks are often the cause of undefined behavior in our apps: forms that submit unsuccessfully yet show a success message, or a query that fires when it shouldn’t. Writing boolean flags is extremely error-prone and not easy to read and reason about. Not to mention that our logic is now spread across multiple scopes and functions. Refactoring this behavior, would mean refactoring multiple functions or files, making it more error-prone.\u003c/p\u003e\u003cp\u003e​This is where state machines fit perfectly. By defining your app’s behavior upfront, your UI becomes a mere reflection of your app’s logic. So let’s refactor our initial implementation to use state machines.\u003c/p\u003e\u003ch3 id=\"%E2%80%8Bstates-and-events\"\u003e​States and events\u003c/h3\u003e\u003cp\u003e​We will define our machine as a simple object, that describes possible states and their transitions. Many state machine libraries resort to more complex objects to support more features.\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"language-javascript\"\u003econst machine = {\n  initial: \"lit\",\n  states: {\n    lit: {\n      on: {\n        OFF: \"unlit\",\n        BREAK: \"broken\",\n      },\n    },\n    unlit: {\n      on: {\n        ON: \"lit\",\n        BREAK: \"broken\",\n      },\n    },\n    broken: {},\n  },\n}\u003c/code\u003e\u003c/pre\u003e\u003cp\u003e​Here’s a visualization of our state machine:\u003c/p\u003e\u003c!--kg-card-begin: html--\u003e\u003ciframe src=\"https://stately.ai/viz/embed/777c8f0f-0b69-46f8-9e51-a9caa6351dc9?mode=viz\u0026controls=1\"\nallow=\"accelerometer; ambient-light-sensor; camera; encrypted-media; geolocation; gyroscope; hid; microphone; midi; payment; usb; vr; xr-spatial-tracking\"\nsandbox=\"allow-forms allow-modals allow-popups allow-presentation allow-same-origin allow-scripts\" height=\"400\" style=\"width: 100%; overflow: hidden;\"\n\u003e\u003c/iframe\u003e\u003c!--kg-card-end: html--\u003e\u003cp\u003eOur machine object comprises of an \u003ccode\u003einitial\u003c/code\u003e property to set the initial state when we first open our app, and a \u003ccode\u003estates\u003c/code\u003e objects holding every possible state our app can be in. These \u003ccode\u003estates\u003c/code\u003e in turn have an optional \u003ccode\u003eon\u003c/code\u003e object spelling out the \u003ccode\u003eevents\u003c/code\u003e  that they react to. The \u003ccode\u003elit\u003c/code\u003e state reacts to an \u003ccode\u003eOFF\u003c/code\u003e and \u003ccode\u003eBREAK\u003c/code\u003e events. Meaning that when the light bulb is lit, we can either turn it off or break it. We cannot turn it on while it is on (although we can model our logic that way if we choose to.)\u003c/p\u003e\u003ch3 id=\"%E2%80%8Bfinal-states\"\u003e​Final States\u003c/h3\u003e\u003cp\u003eThe \u003ccode\u003ebroken\u003c/code\u003e state does not react to any event which makes it a final state — a state that does not transition to other states, ending the flow of the whole state machine.\u003c/p\u003e\u003ch3 id=\"transitions\"\u003eTransitions\u003c/h3\u003e\u003cp\u003e​A transition is a pure function that returns a new state based on the current state and an event.\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"language-javascript\"\u003econst transition = (state, event) =\u0026gt; {\n  const nextState = machine.states[state]?.on?.[event]\n  return nextState || state\n}\n\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003e​The transition function traverses our machine’s states and their events:\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"language-javascript\"\u003etransition('lit', 'OFF')      // returns 'unlit'\ntransition('lit', 'BREAK')    // returns 'broken'\ntransition('unlit', 'OFF')    // returns 'unlit' (unchanged)\ntransition('broken', 'BREAK') // return  'broken' (unchanged)\ntransition('broken', 'OFF')   // returns 'broken' (unchanged)\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003e​If we are not handling a specific event in a given state, our state is going to remain unchanged, returning the old state. This is a key idea behind state machines.\u003c/p\u003e\u003ch3 id=\"%E2%80%8Btracking-and-sending-events\"\u003e​Tracking and sending events\u003c/h3\u003e\u003cp\u003eTo track and send events, we will define a \u003ccode\u003estate\u003c/code\u003e variable that defaults to our machine’s initial state and a send function that takes an event and updates our state according to our machine’s implementation.\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"language-javascript\"\u003elet state = machine.initial\n\nconst send = (event) =\u0026gt; {\n  state = transition(state, event)\n}\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eSo, now instead of keeping up with our state through booleans and if statements, we simply dispatch our events and call for our UI to update:\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"language-javascript\"\u003eturnBulbOn.addEventListener(\"click\", () =\u0026gt; {\n  send(\"ON\")\n  lightbulb.innerText = state\n})\n\nturnBulbOff.addEventListener(\"click\", () =\u0026gt; {\n  send(\"OFF\")\n  lightbulb.innerText = state\n})\n\nbreakBulb.addEventListener(\"click\", () =\u0026gt; {\n  send(\"BREAK\")\n  lightbulb.innerText = state\n})\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eOur three buttons will work as intended, and whenever we break our light bulb, the user will not be able to turn it on or off.\u003c/p\u003e\u003cfigure class=\"kg-card kg-embed-card\"\u003e\u003ciframe id=\"cp_embed_NWvwoEY\" src=\"https://codepen.io/smhmd/embed/preview/NWvwoEY?default-tabs=js%2Cresult\u0026amp;height=300\u0026amp;host=https%3A%2F%2Fcodepen.io\u0026amp;slug-hash=NWvwoEY\" title=\"Lightbulb with state machine\" scrolling=\"no\" frameborder=\"0\" height=\"300\" allowtransparency=\"true\" class=\"cp_embed_iframe\" style=\"width: 100%; overflow: hidden;\"\u003e\u003c/iframe\u003e\u003c/figure\u003e\u003ch2 id=\"state-machines-using-xstate\"\u003eState machines using XState\u003c/h2\u003e\u003cp\u003e\u003ca href=\"https://xstate.js.org\"\u003eXState\u003c/a\u003e is a state management library that popularized the use of state machines on the web in recent years. It comes with tools to create, interpret, and subscribe to state machines, guard and delay events, handle extended state, and many other features.\u003c/p\u003e\u003cp\u003eTo install XState, run \u003ccode\u003enpm install xstate\u003c/code\u003e.\u003c/p\u003e\u003cp\u003eXState provides us with two functions to create and manage (track, send events, etc.) our machines: \u003ccode\u003ecreateMachine\u003c/code\u003e and \u003ccode\u003einterpret\u003c/code\u003e.\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"language-javascript\"\u003eimport { createMachine, interpret } from \"xstate\"\n\nconst machine = createMachine({\n  initial: \"lit\",\n  states: {\n    lit: {\n      on: {\n        OFF: \"unlit\",\n        BREAK: \"broken\",\n      },\n    },\n    unlit: {\n      on: {\n        ON: \"lit\",\n        BREAK: \"broken\",\n      },\n    },\n    broken: {},\n  },\n})\n\nconst service = interpret(machine)\nservice.start()\n\nturnBulbOn.addEventListener(\"click\", () =\u0026gt; {\n  service.send(\"ON\")\n  lightbulb.innerText = service.state.value\n})\n\nturnBulbOff.addEventListener(\"click\", () =\u0026gt; {\n  service.send(\"OFF\")\n  lightbulb.innerText = service.state.value\n})\n\nbreakBulb.addEventListener(\"click\", () =\u0026gt; {\n  service.send(\"BREAK\")\n  lightbulb.innerText = service.state.value\n})\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eWe can minimize our code further by subscribing to our state and updating the UI as a subscription:\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"language-javascript\"\u003eturnBulbOn.addEventListener(\"click\", () =\u0026gt; {\n  service.send(\"ON\")\n})\n\nturnBulbOff.addEventListener(\"click\", () =\u0026gt; {\n  service.send(\"OFF\")\n})\n\nbreakBulb.addEventListener(\"click\", () =\u0026gt; {\n  service.send(\"BREAK\")\n})\n\nservice.subscribe((state) =\u0026gt; {\n  lightbulb.innerText = state.value\n})\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eYou notice that we’re now using \u003ccode\u003estate.value\u003c/code\u003e instead of \u003ccode\u003estate\u003c/code\u003e, because XState exposes a number of useful methods and properties on the \u003ccode\u003estate\u003c/code\u003e object, one of which is \u003ccode\u003estate.matches\u003c/code\u003e:\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"language-javascript\"\u003estate.matches('lit') // true or false based on the current state\nstate.matches('non-existent-state') // false\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eOne other useful state method is the \u003ccode\u003estate.can\u003c/code\u003e method, which returns \u003ccode\u003etrue\u003c/code\u003e or \u003ccode\u003efalse\u003c/code\u003e based on whether the current state handles a given event or not.\u003c/p\u003e\u003cp\u003eThus, we can initially hide our \u003ccode\u003eTurn on\u003c/code\u003e button and show/hide our buttons based on whether we can dispatch their related events:\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"language-html\"\u003e\u0026lt;p\u0026gt;The lightbulb is \u0026lt;span id=\"lightbulb\"\u0026gt;lit\u0026lt;/span\u0026gt;\u0026lt;/p\u0026gt;\n\n\u0026lt;!-- hidden on page load --\u0026gt;\n\u0026lt;button hidden id=\"turn-on\"\u0026gt;Turn on\u0026lt;/button\u0026gt;\n\n\u0026lt;button id=\"turn-off\"\u0026gt;Turn off\u0026lt;/button\u0026gt;\n\u0026lt;button id=\"break\"\u0026gt;Break\u0026lt;/button\u0026gt;\n\n\u0026lt;!-- reloads the page --\u0026gt;\n\u0026lt;button hidden id=\"reset\" onclick=\"history.go(0)\"\u0026gt;Reset\u0026lt;/button\u0026gt;\n\u003c/code\u003e\u003c/pre\u003e\u003cpre\u003e\u003ccode class=\"language-javascript\"\u003econst lightbulb = document.getElementById(\"lightbulb\")\nconst turnBulbOn = document.getElementById(\"turn-on\")\nconst turnBulbOff = document.getElementById(\"turn-off\")\nconst breakBulb = document.getElementById(\"break\")\nconst reset = document.getElementById(\"reset\")\n\nservice.subscribe((state) =\u0026gt; {\n  lightbulb.innerText = state.value\n\n  turnBulbOn.hidden = !state.can(\"ON\")\n  turnBulbOff.hidden = !state.can(\"OFF\")\n  breakBulb.hidden = !state.can(\"BREAK\")\n\n  reset.hidden = !state.matches(\"broken\")\n})\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eSo now, whenever our state changes, we can show and hide the appropriate buttons.\u003c/p\u003e\u003cfigure class=\"kg-card kg-embed-card\"\u003e\u003ciframe id=\"cp_embed_vYJWMNV\" src=\"https://codepen.io/smhmd/embed/preview/vYJWMNV?default-tabs=js%2Cresult\u0026amp;height=300\u0026amp;host=https%3A%2F%2Fcodepen.io\u0026amp;slug-hash=vYJWMNV\" title=\"Lightbulb with XState\" scrolling=\"no\" frameborder=\"0\" height=\"300\" allowtransparency=\"true\" class=\"cp_embed_iframe\" style=\"width: 100%; overflow: hidden;\"\u003e\u003c/iframe\u003e\u003c/figure\u003e\u003ch3 id=\"actions-and-side-effects\"\u003eActions and side effects\u003c/h3\u003e\u003cp\u003eTo run side effects inside our machine, XState has three types of actions: transition actions that run on an event, \u003ccode\u003eentry\u003c/code\u003e actions that run when we enter a state, and \u003ccode\u003eexit\u003c/code\u003e actions that run when we exist a state. \u003ccode\u003eentry\u003c/code\u003e, \u003ccode\u003eexit\u003c/code\u003e, and \u003ccode\u003eactions\u003c/code\u003e can all be an array of functions (or even string references as we will see.)\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"language-javascript\"\u003econst machine = createMachine({\n  initial: \"open\",\n  states: {\n    open: {\n      entry: () =\u0026gt; console.log(\"entering open...\"),\n      exit: () =\u0026gt; console.log(\"exiting open...\"),\n      on: {\n        TOGGLE: {\n          target: \"close\",\n          actions: () =\u0026gt; console.log(\"toggling...\"),\n        },\n      },\n    },\n    close: {},\n  },\n})\n\u003c/code\u003e\u003c/pre\u003e\u003ch3 id=\"context-and-extended-state\"\u003eContext and extended state\u003c/h3\u003e\u003cp\u003eWhen talking about state machines, we can distinguish between two types of states: finite state and extended state.\u003c/p\u003e\u003cp\u003eA person, for instance, can be either standing or sitting. They cannot be standing and sitting at the same time. They also can be either awake or asleep, and an array of other finite states. By contrast, a person can also have state that’s potentially infinite. E.g., their age, nicknames, or hobbies. This is called infinite or extended state. It helps to think about finite state as qualitative state while extended state is quantitative.\u003c/p\u003e\u003cp\u003eIn our example, we will track how many times we switch our light bulb (as extended state) and display it in our message.\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"language-javascript\"\u003eimport { assign, createMachine, interpret } from \"xstate\"\n\nconst machine = createMachine({\n  initial: \"lit\",\n  context: { switchCount: 0 },\n  states: {\n    lit: {\n      entry: \"switched\",\n      on: {\n        OFF: \"unlit\",\n        BREAK: \"broken\",\n      },\n    },\n    unlit: {\n      entry: \"switched\",\n      on: {\n        ON: \"lit\",\n        BREAK: \"broken\",\n      },\n    },\n    broken: {},\n  },\n}).withConfig({\n  actions: {\n    switched: assign({ switchCount: (context) =\u0026gt; context.switchCount + 1 }),\n  },\n})\n\nconst service = interpret(machine)\nservice.start()\n\nservice.subscribe((state) =\u0026gt; {\n  lightbulb.innerText = `${state.value} (${state.context.switchCount})`\n\n  turnBulbOn.hidden = !state.can(\"ON\")\n  turnBulbOff.hidden = !state.can(\"OFF\")\n  breakBulb.hidden = !state.can(\"BREAK\")\n\n  reset.hidden = !state.matches(\"broken\")\n})\n\u003c/code\u003e\u003c/pre\u003e\u003cfigure class=\"kg-card kg-embed-card\"\u003e\u003ciframe id=\"cp_embed_VwzyZaZ\" src=\"https://codepen.io/smhmd/embed/preview/VwzyZaZ?default-tabs=js%2Cresult\u0026amp;height=300\u0026amp;host=https%3A%2F%2Fcodepen.io\u0026amp;slug-hash=VwzyZaZ\" title=\"Lightbulb with XState and Context\" scrolling=\"no\" frameborder=\"0\" height=\"300\" allowtransparency=\"true\" class=\"cp_embed_iframe\" style=\"width: 100%; overflow: hidden;\"\u003e\u003c/iframe\u003e\u003c/figure\u003e\u003cp\u003eWe now have a \u003ccode\u003econtext\u003c/code\u003e property that holds a \u003ccode\u003eswitchCount\u003c/code\u003e initiated with \u003ccode\u003e0\u003c/code\u003e. And as mentioned before, we added \u003ccode\u003eentry\u003c/code\u003e actions to our \u003ccode\u003elit\u003c/code\u003e and \u003ccode\u003eunlit\u003c/code\u003e states using string references and defined our functions using the \u003ccode\u003ewithConfig\u003c/code\u003e method on our machine to eliminate any code repetition.\u003c/p\u003e\u003cp\u003eTo update our context inside the machine, XState provides an \u003ccode\u003eassign\u003c/code\u003e function, which gets called to form an action and cannot be used within a function (e.g., \u003ccode\u003eactions: () =\u0026gt; { assign(...) }\u003c/code\u003e).\u003c/p\u003e\u003cp\u003eAlso, notice that despite our default value of \u003ccode\u003e0\u003c/code\u003e for our \u003ccode\u003eswitchCount\u003c/code\u003e, XState will run our \u003ccode\u003eentry\u003c/code\u003e action when our service starts, displaying a count of \u003ccode\u003e1\u003c/code\u003e in our UI.\u003c/p\u003e\u003ch3 id=\"guards\"\u003eGuards\u003c/h3\u003e\u003cp\u003eGuards allow us to block a transition from happening given a condition (such as the outcome of an input validation.) Unlike actions, guards only apply to events, but they enjoy the same flexibility in their definition.\u003c/p\u003e\u003cp\u003eIn our example, we will block any attempt to break a light bulb if the switch count exceeds \u003ccode\u003e3\u003c/code\u003e. \u003c/p\u003e\u003cpre\u003e\u003ccode class=\"language-javascript\"\u003econst machine = createMachine({\n  initial: \"lit\",\n  context: { switchCount: 0 },\n  states: {\n    lit: {\n      entry: \"switched\",\n      on: {\n        OFF: \"unlit\",\n        BREAK: { target: \"broken\", cond: \"goodLightBulb\" },\n      },\n    },\n    unlit: {\n      entry: \"switched\",\n      on: {\n        ON: \"lit\",\n        BREAK: { target: \"broken\", cond: \"goodLightBulb\" },\n      },\n    },\n    broken: {},\n  },\n}).withConfig({\n  actions: {\n    switched: assign({ switchCount: (context) =\u0026gt; context.switchCount + 1 }),\n  },\n  guards: {\n    goodLightBulb: (context) =\u0026gt; context.switchCount \u0026lt;= 3,\n  },\n})\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eWe add guards in our events using the weirdly named \u003ccode\u003econd\u003c/code\u003e property (stands for condition), and we use the \u003ccode\u003ewithConfig\u003c/code\u003e \u003ccode\u003eguards\u003c/code\u003e property to write our definition for the \u003ccode\u003egoodLightBulb\u003c/code\u003e guard.\u003c/p\u003e\u003cp\u003eThe \u003ccode\u003eservice.can\u003c/code\u003e we used earlier runs our guards to determine whether an event is possible to dispatch or not, which means that our UI will correctly remove the \u003ccode\u003ebreak\u003c/code\u003e button once our condition is met. If our guard function fails to run, \u003ccode\u003eservice.can\u003c/code\u003e​ will return \u003ccode\u003efalse\u003c/code\u003e​.\u003c/p\u003e\u003cfigure class=\"kg-card kg-embed-card\"\u003e\u003ciframe id=\"cp_embed_OJjzLpb\" src=\"https://codepen.io/smhmd/embed/preview/OJjzLpb?default-tabs=js%2Cresult\u0026amp;height=300\u0026amp;host=https%3A%2F%2Fcodepen.io\u0026amp;slug-hash=OJjzLpb\" title=\"Lightbulb with XState and Context\" scrolling=\"no\" frameborder=\"0\" height=\"300\" allowtransparency=\"true\" class=\"cp_embed_iframe\" style=\"width: 100%; overflow: hidden;\"\u003e\u003c/iframe\u003e\u003c/figure\u003e\u003ch3 id=\"eventless-transitions\"\u003eEventless transitions\u003c/h3\u003e\u003cp\u003eLet’s say that no matter how good our light bulb is, if the switch count reaches \u003ccode\u003e10\u003c/code\u003e, it should break.\u003c/p\u003e\u003cp\u003eTo achieve that, we can use an eventless transtion using the \u003ccode\u003ealways\u003c/code\u003e property with a condition:\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"language-javascript\"\u003econst machine = createMachine({\n  initial: \"lit\",\n  context: { switchCount: 0 },\n  states: {\n    lit: { /*...*/ },\n    unlit: {\n      entry: \"switched\",\n      on: { /*...*/ },\n      always: {\n        cond: (context) =\u0026gt; context.switchCount \u0026gt;= 10,\n        target: \"broken\",\n      },\n    },\n    broken: {},\n  },\n})\u003c/code\u003e\u003c/pre\u003e\u003cfigure class=\"kg-card kg-embed-card\"\u003e\u003ciframe id=\"cp_embed_NWvXKaa\" src=\"https://codepen.io/smhmd/embed/preview/NWvXKaa?default-tabs=js%2Cresult\u0026amp;height=300\u0026amp;host=https%3A%2F%2Fcodepen.io\u0026amp;slug-hash=NWvXKaa\" title=\"Lightbulb with XState and Context\" scrolling=\"no\" frameborder=\"0\" height=\"300\" allowtransparency=\"true\" class=\"cp_embed_iframe\" style=\"width: 100%; overflow: hidden;\"\u003e\u003c/iframe\u003e\u003c/figure\u003e\u003ch2 id=\"what%E2%80%99s-next\"\u003eWhat’s next?\u003c/h2\u003e\u003cp\u003eDespite covering the use of state machines to model our UI, state machines can be and are used everywhere. From handling data-fetching, loading, and error states to building complex interactive animations.\u003c/p\u003e\u003cp\u003eIn this article, we covered key concepts behind state machines, events, and transitions, and we implemented a state machine in XState, making use of extended state, actions, guarded and eventless transitions. And while we updated our UI manually by subscribing to our machine’s service, \u003ca href=\"https://xstate.js.org/docs/packages/xstate-react\"\u003eXState supports almost all major frontend frameworks\u003c/a\u003e.\u003c/p\u003e","comment_id":"619127967e6c0dc6ecd8bb62","feature_image":"https://images.indepth.dev/images/2021/11/State-Machines-in-JavaScript-with-XState.jpg","featured":false,"visibility":"public","created_at":"2021-11-14T17:13:26.000+02:00","updated_at":"2021-11-16T15:52:36.000+02:00","published_at":"2021-11-16T12:25:51.000+02:00","custom_excerpt":"In this article, we will learn about State Machines in Javascript with XState.","codeinjection_head":"{\"community_link\":\"https://github.com/indepth-dev/community/discussions/213\"}","codeinjection_foot":null,"custom_template":null,"canonical_url":null,"email_recipient_filter":"none","authors":[{"id":"618ceca07e6c0dc6ecd8bb5c","name":"Simohamed","slug":"simohamed","profile_image":"//www.gravatar.com/avatar/5642be035eed8b59c86056b77c3c8530?s=250\u0026d=mm\u0026r=x","cover_image":null,"bio":null,"website":null,"location":null,"facebook":null,"twitter":null,"meta_title":null,"meta_description":null,"url":"https://admin.indepth.dev/author/simohamed/"}],"tags":[{"id":"5d403b854528ce234fe57209","name":"javascript","slug":"javascript","description":"JavaScript (not to be confused with Java) is a high-level, dynamic, multi-paradigm, object-oriented, prototype-based, weakly-typed, and interpreted language used for both client-side and server-side scripting. Its primary use is in rendering and manipulating of web pages. Use this tag for questions regarding ECMAScript and its various dialects/implementations (excluding ActionScript and Google-Apps-Script).","feature_image":null,"visibility":"public","meta_title":null,"meta_description":null,"og_image":null,"og_title":null,"og_description":null,"twitter_image":null,"twitter_title":null,"twitter_description":null,"codeinjection_head":null,"codeinjection_foot":null,"canonical_url":null,"accent_color":null,"url":"https://admin.indepth.dev/tag/javascript/"},{"id":"619142187e6c0dc6ecd8bb67","name":"state","slug":"state","description":null,"feature_image":null,"visibility":"public","meta_title":null,"meta_description":null,"og_image":null,"og_title":null,"og_description":null,"twitter_image":null,"twitter_title":null,"twitter_description":null,"codeinjection_head":null,"codeinjection_foot":null,"canonical_url":null,"accent_color":null,"url":"https://admin.indepth.dev/tag/state/"},{"id":"619142187e6c0dc6ecd8bb68","name":"state-machines","slug":"state-machines","description":null,"feature_image":null,"visibility":"public","meta_title":null,"meta_description":null,"og_image":null,"og_title":null,"og_description":null,"twitter_image":null,"twitter_title":null,"twitter_description":null,"codeinjection_head":null,"codeinjection_foot":null,"canonical_url":null,"accent_color":null,"url":"https://admin.indepth.dev/tag/state-machines/"}],"primary_author":{"id":"618ceca07e6c0dc6ecd8bb5c","name":"Simohamed","slug":"simohamed","profile_image":"//www.gravatar.com/avatar/5642be035eed8b59c86056b77c3c8530?s=250\u0026d=mm\u0026r=x","cover_image":null,"bio":null,"website":null,"location":null,"facebook":null,"twitter":null,"meta_title":null,"meta_description":null,"url":"https://admin.indepth.dev/author/simohamed/","_id":1144},"primary_tag":{"id":"5d403b854528ce234fe57209","name":"javascript","slug":"javascript","description":"JavaScript (not to be confused with Java) is a high-level, dynamic, multi-paradigm, object-oriented, prototype-based, weakly-typed, and interpreted language used for both client-side and server-side scripting. Its primary use is in rendering and manipulating of web pages. Use this tag for questions regarding ECMAScript and its various dialects/implementations (excluding ActionScript and Google-Apps-Script).","feature_image":null,"visibility":"public","meta_title":null,"meta_description":null,"og_image":null,"og_title":null,"og_description":null,"twitter_image":null,"twitter_title":null,"twitter_description":null,"codeinjection_head":null,"codeinjection_foot":null,"canonical_url":null,"accent_color":null,"url":"https://admin.indepth.dev/tag/javascript/"},"url":"https://admin.indepth.dev/state-machines-in-javascript-with-xstate/","excerpt":"In this article, we will learn about State Machines in Javascript with XState.","reading_time":8,"access":true,"send_email_when_published":false,"og_image":null,"og_title":null,"og_description":null,"twitter_image":"https://images.indepth.dev/images/2021/11/State-Machines-in-JavaScript-with-XState2.jpg","twitter_title":null,"twitter_description":null,"meta_title":null,"meta_description":null,"email_subject":null,"frontmatter":null,"_id":1488},{"id":"61813d9217e466f35de2d2e6","uuid":"841888a5-0dce-48b7-a458-945f4af3bc0c","title":"An overview of State Management solutions for React and NextJS","slug":"deep-dive-into-state-management-with-react-and-nextjs","html":"\u003cp\u003eReact.js has undergone massive developments in recent times, resulting in various state management libraries. With React projects making use of an enormous code base, there is a need to centralize and maintain code and handle data flow across the application. State Management manages code and data maintenance, improving code quality and data sharing between application components. We will discuss the best choices for state management in this article\u003cstrong\u003e.\u003c/strong\u003e\u003c/p\u003e\u003ch2 id=\"goals\"\u003e\u003cstrong\u003eGoals\u003c/strong\u003e\u003c/h2\u003e\u003cp\u003eIn this article, we will discuss the terms state and state management. We will also talk about different state management methods; using Redux, Recoil, and Context API.\u003c/p\u003e\u003ch2 id=\"what-is-state-and-state-management\"\u003e\u003cstrong\u003eWhat is State and State Management\u003c/strong\u003e\u003c/h2\u003e\u003cp\u003eState in JavaScript applications simply refers to all data generated through user actions. It is a plain JavaScript object that holds information used by React to render components in which its content is dynamic depending on the resultant action of users. React applications, whether functional or class components can have stated. In react applications, data can be passed between components through a method called \"Prop-drilling\". This is when data is passed continuously from parents to descendants. But as the application gets larger, the need for a global state to hold and share states arises.\u003cbr\u003eIn large applications such as e-commerce sites, when users interact with a certain component changes are effected into components in the application. For instance:\u003c/p\u003e\u003cul\u003e\u003cli\u003eAdding a shopping item to a cart requires the resulting data to be passed from the shopping component to the cart component.\u003c/li\u003e\u003cli\u003eAdd purchased product to user purchase history\u003c/li\u003e\u003cli\u003eCheckout of items in the cart\u003c/li\u003e\u003cli\u003eIn complex apps, these changes can be difficult to track, therefore the need for a structure to handle data flow and manage communication between our app’s components. State management is a definite structure for managing communication and sharing of states in our application.\u003c/li\u003e\u003cli\u003eState management libraries provide us with tools to create and manage updates of these structures. Over the years, different state management libraries have been developed. Knowing what state management libraries to use is crucial to the development of an application. In this tutorial, we will be looking at some state management libraries and how they can be used.\u003cbr\u003e\u003c/li\u003e\u003c/ul\u003e\u003ch2 id=\"hooks\"\u003e\u003cstrong\u003eHooks\u003c/strong\u003e\u003c/h2\u003e\u003cp\u003eThere are many methods of managing state in React applications. You can opt for class-based state management, React Hooks or third-party libraries like \u003ca href=\"https://redux.js.org/introduction/getting-started\"\u003eRedux\u003c/a\u003e or Recoil. In this section, we'll talk about how we can manage state using Hooks which is \u003ca href=\"https://reactjs.org/docs/hooks-faq.html#should-i-use-hooks-classes-or-a-mix-of-both\"\u003eencouraged\u003c/a\u003e by the React Docs.\u003c/p\u003e\u003cp\u003eAccording to the \u003ca href=\"https://reactjs.org/docs/hooks-overview.html#but-what-is-a-hook\"\u003eReact Docs\u003c/a\u003e, Hooks are basically functions that let you access state and other React features without using a class component. So no single object holds all the state of the component. This allows you to split state into chunks that can be independently updated.\u003c/p\u003e\u003cp\u003eIn this section, we'll be looking at a few of the most important Hooks used to manage state. We'll talk about setting state using the useState and useReducer Hooks.\u003c/p\u003e\u003cp\u003e\u003cstrong\u003eThe useState Hook\u003c/strong\u003e\u003cbr\u003eThe useState Hook is useful for setting and updating state, similar to this.state in a a class component. With useState you can set the value without referencing the current state.\u003c/p\u003e\u003cp\u003e\u003ccode\u003e\u003cstrong\u003econst\u003c/strong\u003e [state, setState] = useState(initialState);\u003c/code\u003e\u003c/p\u003e\u003cp\u003e\u003ccode\u003euseState\u003c/code\u003e is a function that takes in the initial state (initialState in the code above) as an argument. It returns an array of two items which we obtain and assign their values to any variable name we choose using destructuring. \u003cbr\u003eThe first item ( state ) from the returned array is a variable containing the state which you can use in your component. \u003cbr\u003eThe second item from the array is a function ( \u003ccode\u003esetState\u003c/code\u003e ) that will update the state.\u003c/p\u003e\u003cp\u003eLet's have a look at this Hook in action with this example Movies component.\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"language-js\"\u003eimport React, { useState } from \"react\";\n\n// array of movie objects\nconst movies = [\n  {\n    title: \"Black Widow\",\n    price: \"12.00\",\n    rating: \"4.0\"\n  },\n  {\n    title: \"Justice Leage - Snyder Cut\",\n    price: \"10.00\",\n    rating: \"4.9\"\n  }\n];\n\nexport default function Movies() {\n  // create state variables with initial values\n  const [bookedMovies, setBookedMovies] = useState([]);\n  const [totalPrice, setTotalPrice] = useState(0);\n\n  // functions to set the state\n  const add = () =\u0026gt; {\n    // set state for bookedMovies\n    setBookedMovies([movies[0]]);\n    // set state for totalPrice\n    setTotalPrice(movies[0].price);\n  };\n\n  // reset state values\n  const remove = () =\u0026gt; {\n    // reset values\n    setBookedMovies([]);\n    setTotalPrice(0);\n  };\n\n  return (\n    \u0026lt;div\u0026gt;\n      \u0026lt;header\u0026gt;\n        \u0026lt;p\u0026gt; No. of movies: {bookedMovies.length} \u0026lt;/p\u0026gt;\n        \u0026lt;p\u0026gt; Total price: ${totalPrice} \u0026lt;/p\u0026gt;\n      \u0026lt;/header\u0026gt;\n\n      \u0026lt;ul className=\"movies\"\u0026gt;\n        {movies.map((movie) =\u0026gt; {\n          return (\n            \u0026lt;li className=\"movie\" key={movie.name}\u0026gt;\n              \u0026lt;header\u0026gt;\n                \u0026lt;h3\u0026gt; {movie.title} \u0026lt;/h3\u0026gt;\n                \u0026lt;p\u0026gt; ${movie.price} \u0026lt;/p\u0026gt;\n              \u0026lt;/header\u0026gt;\n\n              \u0026lt;button onClick={add}\u0026gt; Add \u0026lt;/button\u0026gt;\n              \u0026lt;button onClick={remove}\u0026gt; Remove \u0026lt;/button\u0026gt;\n            \u0026lt;/li\u0026gt;\n          );\n        })}\n      \u0026lt;/ul\u0026gt;\n    \u0026lt;/div\u0026gt;\n  );\n}\n\u003c/code\u003e\u003c/pre\u003e\u003cpre\u003e\u003ccode\u003e// BeforeUnloadEvent(()=\u0026gt;{\n//   alert('before now')\n// })\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eHere, we imported the \u003ccode\u003euseState\u003c/code\u003e Hook from React. Then we initialized two independent states of data: \u003ccode\u003ebookedMovies\u003c/code\u003e and \u003ccode\u003etotalPrice\u003c/code\u003e.\u003c/p\u003e\u003cp\u003eThis is a huge advantage of \u003ccode\u003euseState\u003c/code\u003e hooks over class-based state management, which provides only a single state object. With Hooks, we can have multiple and independent state objects by just calling the \u003ccode\u003euseState\u003c/code\u003e function, provide an initial state or value and assign the items of the array to new variables.\u003c/p\u003e\u003cp\u003eLet's see how we can set the value of our state. Here, we'll create a function that will allow users to update our state with some predefined data. First we'll create a function that will add a new movie to our \u003ccode\u003ebookedMovies\u003c/code\u003e array and set the price.\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"language-js\"\u003e...\n\nexport default function Movies() {\n  // create state variables with initial values\n  const [bookedMovies, setBookedMovies] = useState([]);\n  const [totalPrice, setTotalPrice] = useState(0);\n\n  // functions to set the state\n  const add = () =\u0026gt; {\n    // set state for bookedMovies\n    setBookedMovies([movies[0]]);\n    // set state for totalPrice\n    setTotalPrice(movies[0].price);\n  };\n\n  // reset state values\n  const remove = () =\u0026gt; {\n    // reset values\n    setBookedMovies([]);\n    setTotalPrice(0);\n  };\n\n  return (\n    \u0026lt;div\u0026gt;\n      \u0026lt;header\u0026gt;\n        \u0026lt;p\u0026gt; No. of movies: {bookedMovies.length} \u0026lt;/p\u0026gt;\n        \u0026lt;p\u0026gt; Total price: ${totalPrice} \u0026lt;/p\u0026gt;\n      \u0026lt;/header\u0026gt;\n\n      \u0026lt;ul className=\"movies\"\u0026gt;\n        {movies.map((movie) =\u0026gt; {\n          return (\n            \u0026lt;li className=\"movie\" key={movie.name}\u0026gt;\n              \u0026lt;header\u0026gt;\n                \u0026lt;h3\u0026gt; {movie.title} \u0026lt;/h3\u0026gt;\n                \u0026lt;p\u0026gt; ${movie.price} \u0026lt;/p\u0026gt;\n              \u0026lt;/header\u0026gt;\n\n              \u0026lt;button onClick={add}\u0026gt; Add \u0026lt;/button\u0026gt;\n              \u0026lt;button onClick={remove}\u0026gt; Remove \u0026lt;/button\u0026gt;\n            \u0026lt;/li\u0026gt;\n          );\n        })}\n      \u0026lt;/ul\u0026gt;\n    \u0026lt;/div\u0026gt;\n  );\n}\u003c/code\u003e\u003c/pre\u003e\u003cp\u003e\u003ca href=\"https://codesandbox.io/s/vibrant-waterfall-7xyys?file=/src/App.js\"\u003eEdit on CodeSandbox\u003c/a\u003e\u003c/p\u003e\u003cp\u003eIn the code above, we created two functions, \u003ccode\u003eadd()\u003c/code\u003e and remove. The \u003ccode\u003eadd()\u003c/code\u003e function uses the function \u003ccode\u003esetBookedMovies\u003c/code\u003e to set the value of \u003ccode\u003ebookedMovies\u003c/code\u003e and `setTotalPrice` to set the value of \u003ccode\u003etotalPrice.\u003c/code\u003e\u003c/p\u003e\u003cp\u003eWe're calling this \u003ccode\u003eadd()\u003c/code\u003e function using the \u003ccode\u003eonClick\u003c/code\u003e event listener on the Add button.\u003cbr\u003eOnce the button is clicked, \u003ccode\u003ebookedMovies\u003c/code\u003e is assigned the value of the first movie in the movies list ( \"Black Widow\" ) and \u003ccode\u003etotalPrice\u003c/code\u003e now contains the price of the first movie ( 12.00 ).\u003cbr\u003eOn the other hand, the \u003ccode\u003eremove()\u003c/code\u003e function sets \u003ccode\u003ebookedMovies\u003c/code\u003e and \u003ccode\u003etotalPrice\u003c/code\u003e to an empty array and 0 respectively.\u003c/p\u003e\u003cp\u003eGreat! We've seen how we can set and update state data with \u003ccode\u003euseState.\u003c/code\u003e But we're using static, hard-coded values. In real-world applications, you may need to use the previous state to set the new state instead of overwriting it. Let's see how we can update the state using the current state with the \u003ccode\u003euseReducer\u003c/code\u003e hook.\u003c/p\u003e\u003cp\u003e\u003cstrong\u003eThe useReducer Hook\u003c/strong\u003e\u003cbr\u003eSo far we've been updating our state and overwriting the previous state with static values. However, in a real application, you'll want to be able to update the booked movies with the previous items in place.\u003c/p\u003e\u003cp\u003eWith \u003ccode\u003euseReducer\u003c/code\u003e we'll be able to update the state based on the previous state. This Hook is designed to update the state based on the current state like the Array Reduce method.\u003c/p\u003e\u003cp\u003eFirst, we'll create a \u003ccode\u003ebookedMoviesReducer\u003c/code\u003e function which takes in two arguments, state, and \u003ccode\u003eaction.state\u003c/code\u003e is the current state and action is an object containing two properties, the movie object and the type of action to be performed on the state - \"add\" or \"remove\".\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"language-js\"\u003e...\n\nfunction bookedMoviesReducer(state, action) {\n\n    // get the movie object and the type of action by destructuring\n    const { movie, type } = action\n\n    // if \"add\"\n    // return an array of the previous state and the movie object\n    if (type === \"add\") return [...state, movie]\n\n    // if \"remove\"\n    // remove the movie object in the previous state\n    // that matches the title of the current movie object\n    if (type === \"remove\") {\n        const movieIndex = state.findIndex( x =\u0026gt; x.title === movie.title)\n\n        // if no match, return the previous state\n        if(movieIndex \u0026lt; 0 ) return state \n\n        // avoid mutating the original state, create a copy\n        const stateUpdate = [...state]\n\n        // then splice it out from the array\n        stateUpdate.splice(movieIndex, 1)\n        return stateUpdate\n    }\n    return state\n}\n\n...\n\nexport default function Movie(){\n    ...\n}\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eThen, we have a \u003ccode\u003etotalPriceReducer\u003c/code\u003e function which takes the same arguments as the \u003ccode\u003ebookedMoviesReducer\u003c/code\u003e but just adds and subtracts the value of the previous state to and from the new one respectively.\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"language-js\"\u003e... \n\nfunction totalPriceReducer(state, action) {\n    const{ price, type } = action\n    if (type === \"add\") return state + price\n\n    // return the value when the type of action was not \"add\"\n    // subract the new movie price from the previous state\n    return (state - price) \u0026lt; 0 ? 0 : ( state - price )\n}\n\n...\n\nexport default function Movie(){\n    ...\n}\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eNote the ternary operator in the return statement above. This resets the calculation to 0 if state - price is ever lesser than 0 (negative).\u003c/p\u003e\u003cp\u003eNow that we have our refactored functions, let's use them in \u003ccode\u003euseReducer\u003c/code\u003e\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"language-js\"\u003eimport React, { useReducer } from 'react';\n\n...\n\nexport default function Movies() {\n  // replace useState with useReducer and pass two arguments\n  // the first argument is the reducer function\n  // the second function is the initialState\n  const [bookedMovies, setBookedMovies] = useReducer(bookedMoviesReducer, []);\n  const [totalPrice, setTotalPrice] = useReducer(totalPriceReducer, 0);\n\n  // function to add items and price\n  const add = (movie) =\u0026gt; {\n    // pass an object containing the movie and type of action, \"add\"\n    setBookedMovies({ movie, type: \"add\" });\n    setTotalPrice({ price: movie.price, type: \"add\" });\n  };\n\n  // function to remove items and price\n  const remove = (movie) =\u0026gt; {\n    setBookedMovies({ movie, type: \"remove\" });\n    setTotalPrice({ price: movie.price, type: \"remove\" });\n  };\n\n  return (\n    ...\n  )\n}\n...\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eNow that we've edited our \u003ccode\u003eadd()\u003c/code\u003e and \u003ccode\u003eremove()\u003c/code\u003e function to take a movie argument, we can pass in the movie as the argument in our \u003ccode\u003eonClick\u003c/code\u003e listener in our template.\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"language-js\"\u003e...\n\n{movies.map((movie) =\u0026gt; {\n  return (\n    \u0026lt;li className=\"movie\" key={movie.name}\u0026gt;\n      \u0026lt;header\u0026gt;\n        \u0026lt;h3\u0026gt; {movie.title} \u0026lt;/h3\u0026gt;\n        \u0026lt;p\u0026gt; ${movie.price} \u0026lt;/p\u0026gt;\n      \u0026lt;/header\u0026gt;\n\n      \u0026lt;button onClick={() =\u0026gt; add(movie)}\u0026gt; Add \u0026lt;/button\u0026gt;\n      \u0026lt;button onClick={() =\u0026gt; remove(movie)}\u0026gt; Remove \u0026lt;/button\u0026gt;\n    \u0026lt;/li\u0026gt;\n  );\n})}\n...\u003c/code\u003e\u003c/pre\u003e\u003cp\u003e\u003ca href=\"https://codesandbox.io/s/angry-beaver-tjgqy?file=/src/App.js\"\u003eEdit on CodeSandbox\u003c/a\u003e\u003c/p\u003e\u003cp\u003eNow if we click on the Add button, it runs the \u003ccode\u003eadd()\u003c/code\u003e function which takes movie as an argument which is in turn passed into the setBookedMovies and \u003ccode\u003esetTotalPrice\u003c/code\u003e functions. Each of these functions are returned from their respective \u003ccode\u003euseReducer\u003c/code\u003e functions.\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"language-js\"\u003econst [ bookedMovies, setBookedMovies ] = useReducer(bookedMoviesReducer, []);\nconst [ totalPrice, setTotalPrice ] = useReducer(totalPriceReducer, 0);\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eEach function takes an object as an argument. \u003cbr\u003eFor \u003ccode\u003esetBookedMovies\u003c/code\u003e, it takes this object - \u003ccode\u003e{movie, type: \"add\"}\u003c/code\u003e as an argument, while, \u003ccode\u003esetTotalPrice\u003c/code\u003e takes this object - \u003ccode\u003e{price: movie.price, type: \"add\"}\u003c/code\u003e as an argument.\u003c/p\u003e\u003cp\u003eThese objects are then passed into their respective reducer functions to update the state. \u003ccode\u003esetBookedMovies\u003c/code\u003e for example passes its object into \u003ccode\u003ebookedMoviesReducer\u003c/code\u003e.\u003c/p\u003e\u003cp\u003eThis reducer function adds this new data to the previous state without overwriting it.\u003cbr\u003eYou can check out the CodeSandbox above to see this in action. \u003cbr\u003eNext, we'll see how we can manage state across multiple components using Hooks, Props, and the Context API.\u003c/p\u003e\u003ch2 id=\"context-api\"\u003e\u003cstrong\u003eContext API\u003c/strong\u003e\u003c/h2\u003e\u003cp\u003eReact \u003ca href=\"https://reactjs.org/docs/context.html\"\u003eContext API\u003c/a\u003e was an experimental feature of React that became available to use for production in version \u003ca href=\"https://reactjs.org/blog/2018/03/29/react-v-16-3.html\"\u003e16.3.0\u003c/a\u003e of React.\u003c/p\u003e\u003cp\u003eAccording to the docs, Context provides a way to pass data through and between components in your app's component tree without having to manually pass props down through multiple component levels.\u003c/p\u003e\u003cp\u003eThis manual passing of props is often referred to as \u003cstrong\u003eprop drilling\u003c/strong\u003e.\u003cbr\u003eWith Context, you can set up a \"global\" state for a tree of React components. This state can now be accessible from any component without having to pass it through intermediate components.\u003c/p\u003e\u003cp\u003eTo illustrate how we can share state between components using Context API, we'll break the app in the example above into two sub-components:\u003c/p\u003e\u003cul\u003e\u003cli\u003e\u003ccode\u003eBookedMovies\u003c/code\u003e - This would contain the total number of booked movies and the total price\u003c/li\u003e\u003cli\u003e\u003ccode\u003eMovies\u003c/code\u003e - This renders a list of all available movies, their details, and then \u003cstrong\u003eadd\u003c/strong\u003e and \u003cstrong\u003eremove\u003c/strong\u003e buttons for adding and removing the movie from the booked list.\u003c/li\u003e\u003c/ul\u003e\u003cp\u003eCurrently, all our pieces of state, the movies including bookedMovies and totalPrice which we set using Hooks are all in one component - App.js. \u003cbr\u003eFor our state to be accessible to our child components, we can pass it down the data using props. \u003cbr\u003eThis implies that we have to \u003cstrong\u003elift the state up\u003c/strong\u003e to the topmost component of our component tree and pass it down to the component that needs to access the state. Now, this can be two or more levels down the component tree which takes us back to prop drilling.\u003c/p\u003e\u003cp\u003eInstead of doing all that, we can initialize Context and set up a \"global\" state that can be accessed from any component on the tree.\u003c/p\u003e\u003cp\u003e\u003cstrong\u003eInitialize Context\u003c/strong\u003e\u003cbr\u003eTo initialize \u003ca href=\"https://reactjs.org/docs/context.html#reactcreatecontext\"\u003econtext\u003c/a\u003e, we can create a new file MoviesContext.js specifically for our Context, import createContext, and create our Context.\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"language-js\"\u003eimport React, {useReducer, createContext} from 'react';export const MovieContext =  createContext();\u003c/code\u003e\u003c/pre\u003e\u003cp\u003e\u003cstrong\u003eCreate Context Provider\u003c/strong\u003e\u003cbr\u003eNow that we've initialized Context, we can create a Context Provider. According to the docs, every Context object comes with a Provider component that allows components wrapped within it to subscribe to context changes.\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"language-js\"\u003eimport React, { useState, useReducer, createContext } from \"react\";\n\nconst moviesList = [\n ...\n];\n\nfunction bookedMoviesReducer(state, action) {\n  ...\n};\n\nexport const MovieContext = createContext();\n\nexport const MovieProvider = (props) =\u0026gt; {\n  const [movies, setMovies] = useState(moviesList);\n  const [bookedMovies, setBookedMovies] = useReducer(bookedMoviesReducer, []);\n\n  return \u0026lt;MovieContext.Provider\u0026gt;{props.children}\u0026lt;/MovieContext.Provider\u0026gt;;\n};\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eHere, we've moved all our state and reducer functions into our Context file MoviesContext.js. Then in our MovieProvider function, we initialize the state using useState and useReducer Hooks.\u003c/p\u003e\u003cp\u003eFinally, we're returning the Provider component \u003ccode\u003e\u0026lt;MovieContext.Provider\u0026gt;.\u003c/code\u003e props.children will allow us to render the components that will be nested within the provider. \u003cbr\u003eHere's our refactored App.js file with imported components and Context.\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"language-js\"\u003e// ./App.js\n\nimport React from \"react\";\nimport Movies from \"./components/Movies\";\nimport BookedMovies from \"./components/BookedMovies\";\nimport { MovieProvider } from \"./moviesContext\";\n\nexport default function App() {\n  return (\n    \u0026lt;MovieProvider\u0026gt;\n      \u0026lt;main\u0026gt;\n        \u0026lt;Movies /\u0026gt;\n        \u0026lt;BookedMovies /\u0026gt;\n      \u0026lt;/main\u0026gt;\n    \u0026lt;/MovieProvider\u0026gt;\n  );\n}\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eGreat. We've managed to create a provider and wrap our components with the provider in our app. We currently don't have access to any of our state from the Context. Let's see how we can consume or use the state.\u003c/p\u003e\u003cp\u003e\u003cstrong\u003eConsuming our state\u003c/strong\u003e\u003cbr\u003eThe Provider component accepts a value \u003ca href=\"https://reactjs.org/docs/context.html#contextprovider\"\u003eprop\u003c/a\u003e that can be accessed by components that are descendants of the Provider. We have to pass all our state into our app in our Context file MoviesContext.js\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"language-js\"\u003e// ./MoviesContext.js\n...\n  return (\n    \u0026lt;MovieContext.Provider\n      value={{\n        movies,\n        setMovies,\n        bookedMovies,\n        setBookedMovies,\n      }}\n    \u0026gt;\n      {props.children}\n    \u0026lt;/MovieContext.Provider\u0026gt;\n  );\n...\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eTo subscribe to these pieces of state in our components, we have to import MovieContext and consume it with the useContext Hook. Here's how we can do that in our Movies component.\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"language-js\"\u003e// ./components/Movies.js\n\n// import the useContext Hook\nimport React, { useContext } from \"react\";\n// import the Context\nimport { MovieContext } from \"../moviesContext\";\n\nexport default function Movies() {\n  const { movies, setBookedMovies } = useContext(MovieContext);\n  // function to add items and price\n  const add = (movie) =\u0026gt; {\n    // pass an object containing the movie and type of action, \"add\"\n    setBookedMovies({ movie, type: \"add\" });\n  };\n\n  // function to remove items and price\n  const remove = (movie) =\u0026gt; {\n    setBookedMovies({ movie, type: \"remove\" });\n  };\n\n  return (\n    \u0026lt;ul className=\"movies\"\u0026gt;\n      {movies.map((movie) =\u0026gt; {\n        return (\n          \u0026lt;li className=\"movie\" key={movie.name}\u0026gt;\n            \u0026lt;header\u0026gt;\n              \u0026lt;h3\u0026gt; {movie.title} \u0026lt;/h3\u0026gt;\n              \u0026lt;p\u0026gt; ${movie.price} \u0026lt;/p\u0026gt;\n            \u0026lt;/header\u0026gt;\n\n            \u0026lt;button onClick={() =\u0026gt; add(movie)}\u0026gt; Add \u0026lt;/button\u0026gt;\n            \u0026lt;button onClick={() =\u0026gt; remove(movie)}\u0026gt; Remove \u0026lt;/button\u0026gt;\n          \u0026lt;/li\u0026gt;\n        );\n      })}\n    \u0026lt;/ul\u0026gt;\n  );\n}\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eNow we can access all our state from this component. We can also do the same thing for our BookedMovies component.\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"language-js\"\u003e// ./components/BookedMovies.js\n\nimport React, { useContext } from \"react\";\nimport { MovieContext } from \"../moviesContext\";\n\nfunction BookedMovies() {\n  const {bookedMovies} = useContext(MovieContext);\n\n  const getTotalPrice = (bookedMovies) =\u0026gt; {\n    const totalPrice = bookedMovies.reduce((totalCost, item) =\u0026gt; totalCost + item.price, 0);\n    return totalPrice\n  }\n\n  return (\n    \u0026lt;header\u0026gt;\n      \u0026lt;p\u0026gt; No. of movies: {bookedMovies.length} \u0026lt;/p\u0026gt;\n      \u0026lt;p\u0026gt; Total price: ${getTotalPrice(bookedMovies)} \u0026lt;/p\u0026gt;\n    \u0026lt;/header\u0026gt;\n  );\n}\n\nexport default BookedMovies;\u003c/code\u003e\u003c/pre\u003e\u003cp\u003e\u003ca href=\"https://codesandbox.io/s/determined-star-mhess\"\u003eEdit on CodeSandbox\u003c/a\u003e\u003c/p\u003e\u003cp\u003eThere we go. We've managed to subscribe to \u003ccode\u003ebookedMovies\u003c/code\u003e state from our Context in this component. Also, we've refactored the total price functionality and created a new function \u003ccode\u003egetTotalPrice\u003c/code\u003e that will get the price from each movie on the \u003ccode\u003ebookedMovie\u003c/code\u003e array and total it.\u003c/p\u003e\u003cp\u003eThat's how we can manage state using the Context API and Hooks. \u003cbr\u003eIn the next sections, we'll see how we can manage state using other popular libraries like Redux and Recoil.\u003c/p\u003e\u003ch2 id=\"redux\"\u003e\u003cstrong\u003eRedux\u003c/strong\u003e\u003c/h2\u003e\u003cp\u003e\u003cstrong\u003eWhat is Redux?\u003c/strong\u003e\u003cbr\u003e\u003ca href=\"https://redux.js.org/introduction/getting-started\"\u003eRedux\u003c/a\u003e as the doc implies is a container for Javascript apps. It allows us to manage our app state, track and manage changes as the app progresses. Redux allows React components to read data from a Redux store and dispatch actions to the store to update this data. Here is a diagrammatic representation of how Redux works:\u003cbr\u003e\u003c/p\u003e\u003cfigure class=\"kg-card kg-image-card\"\u003e\u003cimg src=\"https://lh3.googleusercontent.com/Vjlw1JurwenOzgPybaiXmxPbEVvd12_v2a23axxoqbFiQaT5p1fpjssJf0oZORXzxwOOSloV8QT_ZivBb5F4XK7-Jv6UCX3AsGQn9O5LlmUaMCRRStNJZYh45tQrjgVQ8lUNLwAS\" class=\"kg-image\" alt loading=\"lazy\"\u003e\u003c/figure\u003e\u003cp\u003e\u003cbr\u003e\u003c/p\u003e\u003cp\u003eThe UI is updated based on the changes made to the state stored in the store thereby making it easier to continuously update as changes are made.\u003cbr\u003eRedux provides a central store where our state resides. Each component in the application can then access the stored data without having to send it from one component to another.\u003c/p\u003e\u003ch2 id=\"when-should-we-use-redux\"\u003e\u003cstrong\u003eWhen should we use Redux?\u003c/strong\u003e\u003c/h2\u003e\u003cp\u003eYou can use Redux in your application when:\u003c/p\u003e\u003cul\u003e\u003cli\u003eThere are large amounts of states in the app that undergo frequent updates. It solves the problem of prop drilling between components and makes it easier to handle continuous mutations of states.\u003c/li\u003e\u003cli\u003eWhen a complex algorithm is required to handle updating of the app’s states.\u003c/li\u003e\u003cli\u003eWhen a reasonable amount of data changes overtime. If the application has data that is constantly being updated, Redux can be used to manage this data and create a structure for it.\u003c/li\u003e\u003cli\u003eWhen state management is shared. Redux is suitable for cases where the application is shared over a codebase with different developers working on the same application.\u003c/li\u003e\u003c/ul\u003e\u003ch2 id=\"how-does-redux-work\"\u003e\u003cstrong\u003eHow Does Redux Work?\u003c/strong\u003e\u003c/h2\u003e\u003cp\u003eRedux is made up of three primary components: Redux Store, Action, and Reducer.\u003c/p\u003e\u003cp\u003e\u003cstrong\u003eRedux Store: This\u003c/strong\u003e is the brain of our state management structure. It manages the state and dispatches Action on managing the state of our application.\u003c/p\u003e\u003cp\u003e\u003cstrong\u003eAction\u003c/strong\u003e: refer to instructions sent that can be interpreted by Reducers. It stores information regarding the users’ actions. The action contains a type and a payload. The type is simply a string with the action name while the payload contains the actual data passed by the action.\u003c/p\u003e\u003cp\u003e\u003cstrong\u003eReducers:\u003c/strong\u003e These are functions that read the instructions sent by the Action and update the store via the state according to the received instructions. They specify how the application's state will change in response to the actions sent to the store.\u003cbr\u003eRedux promotes good architectural structure in React apps along with UI management and optimizes performance for easy re-rendering of components when needed.\u003cbr\u003eRedux core benefits include:\u003c/p\u003e\u003cul\u003e\u003cli\u003eFlexibility: Redux is simple to learn and implement. It does not require deep knowledge to make use of.\u003c/li\u003e\u003cli\u003eMaintainable: Redux is straightforward and easy to maintain and control operations on the stored state.\u003c/li\u003e\u003cli\u003eScalability: Since Redux deals with a central store that contains the state that is shared by components, it makes it suitable for handling states when building complex applications.\u003c/li\u003e\u003cli\u003eRedux supports server-side rendering: The current state of an app can be sent to the server with the response to mutate the state.\u003c/li\u003e\u003cli\u003eEasy to debug: Since Redux is made up of three core parts: the Store, Actions, and Reducers. By logging the values of these parts it is easy to trace and fix errors if any occur.\u003c/li\u003e\u003c/ul\u003e\u003cp\u003eWe will now look at how to set up and use Redux in an app using a counter application as a case study.\u003c/p\u003e\u003ch2 id=\"redux-setup\"\u003e\u003cstrong\u003eRedux Setup\u003c/strong\u003e\u003c/h2\u003e\u003cp\u003eTo set up Redux for use in our application, we will first need to install the package via CLI\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"language-bash\"\u003enpm i redux react-redux\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eOnce this is installed, we can create our action and reducer file; action.js, and reduce.js.\u003cbr\u003eIn the reduce.js file, we have:\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"language-js\"\u003econst reduce = (state = 0, action) =\u0026gt; {\n  switch (action.type) {\n    case \"reset value\":\n      return (state = 0);\n    case \"increase value\":\n      return state + 1;\n    case \"decrese value\":\n      return state - 1;\n    default:\n      return state;\n  }\n};\nexport default reduce;\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eAbove, we created our reducer file which takes state as value \"0\" then based on the value of action.type which is the name of the action makes changes to the value of the state. We have set up a conditional block to make different changes based on the type of action dispatched to the reducer. As defined, if the action type is \"reset value\", state will be set to 0, if the action type is \"increase value\", the value of state will be increased by one and vice-versa.\u003c/p\u003e\u003ch2 id=\"creating-a-central-store\"\u003e\u003cstrong\u003eCreating a Central Store\u003c/strong\u003e\u003c/h2\u003e\u003cp\u003eTo create the store, we will need to create a new file and import createstore from redux:\u003c/p\u003e\u003cp\u003e\u003ccode\u003eimport { createStore } from \"redux\";\u003c/code\u003e\u003c/p\u003e\u003cp\u003eWe also need to import our reducer into the file. After which we will import Provider from Redux. The Provider is responsible for connecting the central state to our application. We will need to wrap the components that will use the Redux state within the provider, preferably in the root.\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"language-js\"\u003eimport reduce from \"./reduce\"\nimport { Provider } from \"react-redux\";\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eThen to create the store:\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"language-js\"\u003econst store = createStore(\n  reduce,\n);\nReactDOM.render(\n  \u0026lt;React.StrictMode\u0026gt;\n    \u0026lt;Provider store={store}\u0026gt;\n      \u0026lt;App /\u0026gt;\n    \u0026lt;/Provider\u0026gt;\n  \u0026lt;/React.StrictMode\u0026gt;,\n  document.getElementById(\"root\")\n);\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eWe will have to define our actions and export them in our \u003ccode\u003eaction.js\u003c/code\u003e file:\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"language-js\"\u003eexport const increment = () =\u0026gt; {\n  return {\n    type: \"increment value\",\n  };\n};\n\nexport const decrement = () =\u0026gt; {\n  return {\n    type: \"decrement value\",\n  };\n};\n\nexport const reset = () =\u0026gt; {\n  return {\n    type: \"reset value\",\n  };\n};\u003c/code\u003e\u003c/pre\u003e\u003ch2 id=\"dispatch-actions\"\u003e\u003cstrong\u003eDispatch Actions\u003c/strong\u003e\u003c/h2\u003e\u003cp\u003eTo dispatch the actions increment value, reset value and decrement value we need to import the actions and use the useDispatch hook provided by react-redux to dispatch our actions.\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"language-js\"\u003eimport { useDispatch } from \"react-redux\";\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eThen, back in our App.js file, we can create buttons with functionalities to perform the actions we defined:\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"language-js\"\u003eimport { useSelector, useDispatch } from \"react-redux\";\nimport {\n  decrement,\n  increment,\n  reset,\n} from \"./action\";\n\nfunction App() {\n  const counter = useSelector((state) =\u0026gt; state.counter);\n  const dispatch = useDispatch();\n\n  return (\n    \u0026lt;div className=\"App\"\u0026gt;\n      \u0026lt;p\u0026gt;Counter to demonstrate redux\u0026lt;/p\u0026gt;\n      \u0026lt;h3\u0026gt;{counter}\u0026lt;/h3\u0026gt;\n      \u0026lt;button onClick={() =\u0026gt; dispatch(increment())}\u0026gt;Increment\u0026lt;/button\u0026gt;\n      \u0026lt;button onClick={() =\u0026gt; dispatch(reset())}\u0026gt;Reset\u0026lt;/button\u0026gt;\n      \u0026lt;button onClick={() =\u0026gt; dispatch(decrement())}\u0026gt;Decrement\u0026lt;/button\u0026gt;\n    \u0026lt;/div\u0026gt;\n  );\n}\nexport default App;\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eHere, we have used the useDispatch hook to assign the actions to three different buttons. The value of the counter is based on the current value of the state.\u003c/p\u003e\u003ch2 id=\"recoil\"\u003e\u003cstrong\u003eRecoil\u003c/strong\u003e\u003c/h2\u003e\u003cp\u003e\u003cstrong\u003eWhat is Recoil?\u003c/strong\u003e\u003cbr\u003e\u003ca href=\"https://recoiljs.org/\"\u003eRecoil\u003c/a\u003e is a new state management library that is open-sourced by Facebook. Recoil also provides a solution to the problem of Global state in applications. Recoil is made up of two major parts: Atom and Selector. Atom is simply a function that lets us store states. It is a shared-state architecture where different components can connect to it to get values from the stored state. On the other hand, a Selector is similar to Atom except that it allows us to have a derived state. The value of a Selector can be derived from the Atom or another Selector.\u003c/p\u003e\u003ch2 id=\"recoil-setup\"\u003e\u003cstrong\u003eRecoil Setup\u003c/strong\u003e\u003c/h2\u003e\u003cp\u003eTo demonstrate how to use Recoil in an application we will use an example similar to the counter we created in Redux above. To install Recoil, run the following command in your CLI:\u003c/p\u003e\u003cp\u003e\u003ccode\u003enpm install recoil\u003c/code\u003e\u003c/p\u003e\u003cp\u003eThen we can import it into our app and define our state:\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"language-js\"\u003e//atom.js\nimport { atom } from \"recoil\";\nconst counter = atom({\n  key: \"counter\",\n  default: 0\n});\n\nexport default counterAtom;\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eAbove, the counter is our state. It has a key of \"counter\" and a default value of 0. In Recoil, components that use recoil state need to be wrapped in RecoilRoot. We will add this to our root component:\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"language-js\"\u003e//index.js\nimport React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport { RecoilRoot } from \"recoil\";\nimport App from \"./App\";\n\nReactDOM.render(\n  \u0026lt;RecoilRoot\u0026gt;\n    \u0026lt;App /\u0026gt;\n  \u0026lt;/RecoilRoot\u0026gt;,\n  document.getElementById(\"root\")\n);\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eIn Recoil, we can use the \u003ccode\u003euseRecoilState()\u003c/code\u003e hook to read the value of a recoil state. Now we will create buttons with the functionality to mutate the state stored in \u003ccode\u003eatom.js\u003c/code\u003e:\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"language-js\"\u003e// App.js\nimport React from \"react\";\nimport { useRecoilState } from \"recoil\";\nimport counter from \"./atom\";\n\nconst App = () =\u0026gt; {\n  const [count, setCount] = useRecoilState(counter);\n\n  return (\n    \u0026lt;div\u0026gt;\n      \u0026lt;div\u0026gt;\n        \u0026lt;button onClick={() =\u0026gt; setCount(count + 1)}\u0026gt;Increment\u0026lt;/button\u0026gt;\n        \u0026lt;span\u0026gt;{count}\u0026lt;/span\u0026gt;\n        \u0026lt;button onClick={() =\u0026gt; setCount(count - 1)}\u0026gt;Decrement\u0026lt;/button\u0026gt;\n        \u0026lt;button onClick={() =\u0026gt; setCount(0)}\u0026gt;Reset\u0026lt;/button\u0026gt;\n      \u0026lt;/div\u0026gt;\n    \u0026lt;/div\u0026gt;\n  );\n};\n\nexport default App;\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eHere, we read in the value of our state from atom.js using useRecoilState. We set up three buttons to increase the value of our count, decrement it and reset it.\u003c/p\u003e\u003ch2 id=\"benefits-of-using-recoil\"\u003e\u003cstrong\u003eBenefits of Using Recoil\u003c/strong\u003e\u003c/h2\u003e\u003cul\u003e\u003cli\u003eRecoil is a simple way to implement state management. It can be incorporated in applications with simple architectures. Apart from Atom and Selector, there isn't much to it, making it easier to understand.\u003c/li\u003e\u003cli\u003eIt has a React-like approach as its application is similar to the useState React-hook thereby making it simpler to work within React applications.\u003c/li\u003e\u003c/ul\u003e\u003ch2 id=\"conclusion\"\u003e\u003cstrong\u003eConclusion\u003c/strong\u003e\u003c/h2\u003e\u003cp\u003eSo far we've seen how we can manage state in our React applications using various methods and libraries. \u003cbr\u003eRanging from Hooks and Context API for small to medium projects and Redux and Recoil for medium to large projects. \u003cbr\u003eStill, there are a ton of state libraries to choose from in the React ecosystem and beyond. Most of them are designed and developed around a certain concept and towards a particular use case.\u003c/p\u003e\u003cp\u003eLet's highlight some of these state management libraries:\u003c/p\u003e\u003cul\u003e\u003cli\u003e\u003ca href=\"https://xstate.js.org/docs/\"\u003eXState\u003c/a\u003e - Which is a library built on a concept called \u003ca href=\"https://xstate.js.org/docs/about/concepts.html#finite-state-machines\"\u003estate machines\u003c/a\u003e. State machines allow you to set a run or perform a specific action for a specific or defined state. A very simple example of a state machine can be seen in a switch case statement \u003c/li\u003e\u003c/ul\u003e\u003cpre\u003e\u003ccode class=\"language-js\"\u003eswitch (state) {\n  case state === 'light':\n  // enable light  theme\n  break;\n  case state === 'dark':\n  // enable light theme\n  break;\n  default:\n  // handle error\n}\u003c/code\u003e\u003c/pre\u003e\u003cul\u003e\u003cli\u003eYou can learn more about XState and state machines from this \u003ca href=\"https://dev.to/skona27/future-of-state-management-in-react-with-xstate-kg4\"\u003earticle\u003c/a\u003e, \u003ca href=\"https://xstate.js.org/docs/\"\u003ethe docs\u003c/a\u003e, or \u003ca href=\"https://egghead.io/courses/introduction-to-state-machines-using-xstate\"\u003ewatching this course\u003c/a\u003e.\u003c/li\u003e\u003cli\u003e\u003ca href=\"https://mobx.js.org/README.html\"\u003eMobx -\u003c/a\u003e It is a stage-management library that is unopinionated, not platform-specific, which means it can be used outside react. It follows the transparent application of functional reactive programming (TFRP). Unlike some libraries like Redux, MobX allows multiple Stores. You can get started with \u003ca href=\"https://mobx.js.org/installation.html\"\u003eMobX\u003c/a\u003e quite easily as it doesn't have a steep learning curve.\u003c/li\u003e\u003cli\u003e\u003ca href=\"https://github.com/pmndrs/valtio#readme\"\u003eValtio\u003c/a\u003e - A simple lightweight proxy-based state management library that provides a mutation-style API\u003c/li\u003e\u003cli\u003e\u003ca href=\"https://github.com/pmndrs/jotai#readme\"\u003eJotai\u003c/a\u003e - A Primitive and flexible state management for React which provides a minimalistic API. It supports TypeScript and is optimized for computed values and asynchronous actions to state.\u003c/li\u003e\u003cli\u003e\u003ca href=\"https://github.com/pmndrs/zustand\"\u003eZustand\u003c/a\u003e - A small, fast, and scalable state-management solution. It's specifically focused on module state. This library is based on Hooks and is un-opinionated.\u003c/li\u003e\u003c/ul\u003e\u003ch3 id=\"the-future-of-state-management-in-react\"\u003e\u003cstrong\u003eThe Future of State Management in React\u003c/strong\u003e\u003c/h3\u003e\u003cp\u003eCurrently, some of the approaches to state management that we've discussed so far come with some caveats. \u003cbr\u003eFor example, in large applications, we might have issues with excessive re-rendering with the Hooks + Context API method.\u003cbr\u003eThis is because when Context value changes, every component subscribes to that Context with useContext will re-render even if it doesn't depend on the particular piece of state that was changed.\u003c/p\u003e\u003cp\u003eReact has \u003ca href=\"https://reactjs.org/docs/hooks-reference.html#usememo\"\u003euseMemo\u003c/a\u003e which is an available workaround for this re-rendering issue. It's a built-in hook that allows you to \u003ca href=\"https://en.wikipedia.org/wiki/Memoization\"\u003ememoize\u003c/a\u003e expensive functions.\u003c/p\u003e\u003cp\u003eIn the near future, to fix this issue, the React team has been working on useSelectedContext feature that allows you to subscribe to only a selected part of the Context. You can check out the progress of this feature \u003ca href=\"https://github.com/facebook/react/pull/20646\"\u003ehere\u003c/a\u003e.\u003c/p\u003e\u003cp\u003eAlthough the new useSelectedContext is an in-house solution to this re-rendering problem, other third-party libraries can be used. \u003ca href=\"https://github.com/dai-shi/use-context-selector\"\u003euseContextSelector\u003c/a\u003e which is being used under the hood by \u003ca href=\"https://github.com/pmndrs/jotai\"\u003eJotai\u003c/a\u003e and \u003ca href=\"https://formik.org/blog/formik-3-alpha\"\u003eFormik 3\u003c/a\u003e, works similarly.\u003c/p\u003e\u003cp\u003eMoving forward, React will automatically figure out which components to re-render using \u003ca href=\"https://github.com/reactjs/rfcs/pull/119#issuecomment-586390430\"\u003eauto-memorization\u003c/a\u003e.\u003c/p\u003e\u003cp\u003eAll this in addition to the current and purpose-specific options for state management makes React a solid choice for many organizations in developing their products.\u003cbr\u003e\u003c/p\u003e","comment_id":"61813d9217e466f35de2d2e6","feature_image":"https://images.indepth.dev/images/2021/11/An-overview-of-State-Management-solutions-for-React-and-NextJS.jpg","featured":false,"visibility":"public","created_at":"2021-11-02T15:30:58.000+02:00","updated_at":"2021-11-16T15:54:21.000+02:00","published_at":"2021-11-10T15:43:55.000+02:00","custom_excerpt":"In this article, we will provide an overview of State Management solutions for React and NextJS.","codeinjection_head":"{\"community_link\":\"https://github.com/indepth-dev/community/discussions/206\"}","codeinjection_foot":null,"custom_template":null,"canonical_url":null,"email_recipient_filter":"none","authors":[{"id":"61813d3f17e466f35de2d2e3","name":"Fortune Ikechi","slug":"fortune","profile_image":"//www.gravatar.com/avatar/c11f07754ab1fc9160dc7cc2c330e17a?s=250\u0026d=mm\u0026r=x","cover_image":null,"bio":null,"website":null,"location":null,"facebook":null,"twitter":null,"meta_title":null,"meta_description":null,"url":"https://admin.indepth.dev/author/fortune/"}],"tags":[{"id":"5d403a5b679ce6202b744977","name":"react","slug":"react","description":"React (also known as React.js or ReactJS) is a JavaScript library for building user interfaces. It uses a declarative paradigm and aims to be both efficient and flexible.","feature_image":null,"visibility":"public","meta_title":null,"meta_description":null,"og_image":null,"og_title":null,"og_description":null,"twitter_image":null,"twitter_title":null,"twitter_description":null,"codeinjection_head":null,"codeinjection_foot":null,"canonical_url":null,"accent_color":null,"url":"https://admin.indepth.dev/tag/react/"},{"id":"5d415803f7263c2c4011b45b","name":"typescript","slug":"typescript","description":"TypeScript is a typed superset of JavaScript that compiles to plain JavaScript.","feature_image":null,"visibility":"public","meta_title":null,"meta_description":null,"og_image":null,"og_title":null,"og_description":null,"twitter_image":null,"twitter_title":null,"twitter_description":null,"codeinjection_head":null,"codeinjection_foot":null,"canonical_url":null,"accent_color":null,"url":"https://admin.indepth.dev/tag/typescript/"},{"id":"5d4afbfff500122f6e3e93db","name":"redux","slug":"redux","description":null,"feature_image":null,"visibility":"public","meta_title":null,"meta_description":null,"og_image":null,"og_title":null,"og_description":null,"twitter_image":null,"twitter_title":null,"twitter_description":null,"codeinjection_head":null,"codeinjection_foot":null,"canonical_url":null,"accent_color":null,"url":"https://admin.indepth.dev/tag/redux/"}],"primary_author":{"id":"61813d3f17e466f35de2d2e3","name":"Fortune Ikechi","slug":"fortune","profile_image":"//www.gravatar.com/avatar/c11f07754ab1fc9160dc7cc2c330e17a?s=250\u0026d=mm\u0026r=x","cover_image":null,"bio":null,"website":null,"location":null,"facebook":null,"twitter":null,"meta_title":null,"meta_description":null,"url":"https://admin.indepth.dev/author/fortune/","_id":1143},"primary_tag":{"id":"5d403a5b679ce6202b744977","name":"react","slug":"react","description":"React (also known as React.js or ReactJS) is a JavaScript library for building user interfaces. It uses a declarative paradigm and aims to be both efficient and flexible.","feature_image":null,"visibility":"public","meta_title":null,"meta_description":null,"og_image":null,"og_title":null,"og_description":null,"twitter_image":null,"twitter_title":null,"twitter_description":null,"codeinjection_head":null,"codeinjection_foot":null,"canonical_url":null,"accent_color":null,"url":"https://admin.indepth.dev/tag/react/"},"url":"https://admin.indepth.dev/deep-dive-into-state-management-with-react-and-nextjs/","excerpt":"In this article, we will provide an overview of State Management solutions for React and NextJS.","reading_time":18,"access":true,"send_email_when_published":false,"og_image":null,"og_title":null,"og_description":null,"twitter_image":"https://images.indepth.dev/images/2021/11/An-overview-of-State-Management-solutions-for-React-and-NextJS2.jpg","twitter_title":null,"twitter_description":null,"meta_title":null,"meta_description":null,"email_subject":null,"frontmatter":null,"_id":1487},{"id":"617ad04317e466f35de2d26c","uuid":"41e4c6dd-4288-4255-809d-4a4a0a7a5198","title":"The controllers of component concept in Angular: part II","slug":"the-controllers-of-component-concept-in-angular-part-ii","html":"\u003cp\u003eSome time ago I published an article \u003ca href=\"https://indepth.dev/posts/1443/how-we-make-our-base-components-more-flexible-controllers-concept-in-angular\"\u003e“How we make our base components more flexible: controllers concept in Angular”\u003c/a\u003e. The article explored our process of how we make our components more flexible and reduce code repetition with some Dependency Injection interesting techniques. \u003c/p\u003e\u003cp\u003eThis article is a direct sequel to that one. This time we’ll take a look at even more interesting techniques that we use directives-controllers for to make our libraries and apps more flexible, light-weight and powerful.\u003c/p\u003e\u003cp\u003eIn this article we’ll try to design a metacontroller that consists of other controllers. Get ready to explore infinite possibilities of Dependency Injection in Angular.\u003c/p\u003e\u003cblockquote\u003e\u003cem\u003eBe very attentive: in this article “input” means a textfield component to input data and “@Input” means Angular decorator to pass properties into the component.\u003c/em\u003e\u003c/blockquote\u003e\u003cp\u003e\u003cstrong\u003eLet’s refresh the context of the task\u003c/strong\u003e\u003c/p\u003e\u003cp\u003eIt all started with the case when we had a lot of specific input components that were based on one basic component — PrimitiveTextfield.\u003c/p\u003e\u003cfigure class=\"kg-card kg-image-card\"\u003e\u003cimg src=\"https://lh5.googleusercontent.com/d4NiHxw8IRUPyNVoMI9TesmwaBO4qwKOlA0igilFUwvzaa8I-q3KciA_P5KH6IgxCrDtzkx-cpvXX96AqlTUy3wacCiRWjKBIZhBPPdYjWaoOW8ESc2hkwvDocUUhJp5ctRKWZvh\" class=\"kg-image\" alt loading=\"lazy\"\u003e\u003c/figure\u003e\u003cp\u003eAll these high-level components have @Inputs just to provide them directly into @Inputs of the textfield. Nevertheless, some of the @Inputs needed to be reassigned. So, we just made many of the same @Inputs in each of them although it might be needed in one project out of ten. And each new input component made the support of that scheme more complicated.\u003c/p\u003e\u003cp\u003eI decided to group all @Inputs of the base component:\u003c/p\u003e\u003cfigure class=\"kg-card kg-image-card\"\u003e\u003cimg src=\"https://lh4.googleusercontent.com/dBLRQvhxnF3LI2NN47x7NsApbcCFfKH7MmJxwTRZjXzCM82VmFGnh4FaHtHa3py3A1-CobuHJSVF57auPcLuIUKjsOEn533j4xBJQJ5AkSeCpRMZLsCCbcAQcdFaEe3mdfJ7hx0V\" class=\"kg-image\" alt loading=\"lazy\"\u003e\u003c/figure\u003e\u003cp\u003eThe first group is dynamic @Inputs that are often reassigned in runtime: at some moment the field is disabled, after a minute it is not.\u003c/p\u003e\u003cp\u003eThe last group with tooltip settings was explored in the first article. We solved it with directives-controllers and not only for the textfield component but also for all the components with a tooltip.\u003c/p\u003e\u003cp\u003eIn this article I will discuss the second group. It consists of @Inputs that are set once at the start and are not going to change later. Still, we want to allow component users to set them at any time and on any level of application.\u003c/p\u003e\u003ch2 id=\"what-do-we-want\"\u003e\u003cstrong\u003eWhat do we want\u003c/strong\u003e\u003c/h2\u003e\u003cp\u003eLet’s take a look at \u003ca href=\"https://taiga-ui.dev/tui-input-time\"\u003eInputTime\u003c/a\u003e component:\u003c/p\u003e\u003cfigure class=\"kg-card kg-image-card\"\u003e\u003cimg src=\"https://lh3.googleusercontent.com/6eKwN2EyV7KQxkU5ClCdM3TmUfyho5rP7W_4Hx6hAYz72rrjXwol12yJCnDuud9BtSrPYXM-WZHT_JpUHbtGOPLgL0X_NfXHrnfwbaKg8r6T9FL6H2nYzdY7n3hBvqRyLfiwlkA4\" class=\"kg-image\" alt loading=\"lazy\"\u003e\u003c/figure\u003e\u003cp\u003eIt sets to PrimitiveTextfield two inputs: [customContent] with a clock icon and  [filler] for understanding time format. They are set in InputTime. But other settings of PrimitiveTextfield remain intect, the user of the component can still set a cleaner, size, etc.\u003c/p\u003e\u003cp\u003eWe want to have the ability to combine different settings from different levels of components hierarchy. For example, we set the clock icon inside InputTime, one developer uses it and adds a cleaner, the other one sets “L” size for all inputs of the form. It would be cool to combine all these settings and get them as one entity from DI in the PrimitiveTextfield.\u003c/p\u003e\u003ch2 id=\"let%E2%80%99s-create-directive-controller\"\u003e\u003cstrong\u003eLet’s create directive-controller\u003c/strong\u003e\u003c/h2\u003e\u003cp\u003eEach directive will be responsible for adding one setting to the textfield. This is a sample of directive that controls adding cross of cleaner:\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"language-TypeScript\"\u003e@Directive({\n   selector: '[tuiTextfieldCleaner]',\n   providers: [\n       {\n           provide: TUI_TEXTFIELD_CLEANER,\n           useExisting: forwardRef(() =\u0026gt; TuiTextfieldCleanerDirective),\n       },\n   ],\n})\nexport class TuiTextfieldCleanerDirective extends Controller {\n   @Input('tuiTextfieldCleaner')\n   cleaner = false;\n}\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eThe directive extends Controller class that we created in \u003ca href=\"https://indepth.dev/posts/1443/how-we-make-our-base-components-more-flexible-controllers-concept-in-angular\"\u003ethe previous article\u003c/a\u003e:\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"language-TypeScript\"\u003eexport abstract class Controller implements OnChanges {\n   readonly change$ = new Subject\u0026lt;void\u0026gt;();\n \n   ngOnChanges() {\n       this.change$.next();\n   }\n}\u003c/code\u003e\u003c/pre\u003e\u003cp\u003ePay attention, directive provides itself into DI with a personal token. The token is declared in the same file:\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"language-TypeScript\"\u003eexport const TUI_TEXTFIELD_CLEANER = new InjectionToken\u0026lt;TuiTextfieldCleanerDirective\u0026gt;(\n   'tuiTextfieldCleaner',\n   {factory: cleanerDirectiveFactory},\n);\n \nexport function cleanerDirectiveFactory(): TuiTextfieldCleanerDirective {\n   return new TuiTextfieldCleanerDirective();\n}\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eWe’ll use such tokens later to combine them all into one big controller. Why do we need a token instead of injecting a directive directly? The main reason is that token has a factory. If there is no directive in the whole DI tree, we get a directive instance with default values.\u003c/p\u003e\u003ch2 id=\"organizing-controllers\"\u003e\u003cstrong\u003eOrganizing controllers\u003c/strong\u003e\u003c/h2\u003e\u003cp\u003eI like to separate each controller into its own file. It allows me to find any entity very fast.\u003c/p\u003e\u003cfigure class=\"kg-card kg-image-card\"\u003e\u003cimg src=\"https://lh5.googleusercontent.com/l0kHdjs2XBSbUu3rdFIrYcVFjeD6zEN4tr4-JhUV50ntSTcrD3UTF5w2yTyiSZN6oUTYxQciLapmJ_S3W1HunzM7RlMa4NwaVlWIDuTLUMMD9ydLUvDs0NR1I8QQm3Wuaz8Bb7qM\" class=\"kg-image\" alt loading=\"lazy\"\u003e\u003c/figure\u003e\u003cp\u003eThey all are exported from one \u003ca href=\"https://github.com/ng-packagr/ng-packagr/blob/master/docs/secondary-entrypoints.md\"\u003eSecondary Entry Point\u003c/a\u003e and are declared in TextfieldControllerModule to simplify its usage by developers.\u003c/p\u003e\u003cp\u003eIf we want to add one new setting to all the inputs, we just need to create a new file and declare a couple of entities inside.\u003c/p\u003e\u003cp\u003e\u003cstrong\u003eCreating a metacontroller\u003c/strong\u003e\u003c/p\u003e\u003cp\u003eIt is not practical to inject each particular controller into Textfield and manage its change detection. That is why let’s combine them all into one big metacontroller for Textfield that will have actual values of each setting and take care of its refreshing inside \u003ca href=\"https://indepth.dev/posts/1306/private-providers\"\u003ea private provider\u003c/a\u003e.\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"language-TypeScript\"\u003eexport class TuiTextfieldController {\n   constructor(\n       readonly change$: Observable\u0026lt;void\u0026gt;,\n       private readonly autocompleteDirective: TuiTextfieldAutocompleteDirective,\n       private readonly cleanerDirective: TuiTextfieldCleanerDirective,\n       // other directives...\n   ) {}\n \n   get autocomplete(): TuiAutofillFieldName | null {\n       return this.autocompleteDirective.autocomplete;\n   }\n \n   get cleaner(): boolean {\n       return this.cleanerDirective.cleaner;\n   }\n \n   // other directives...\n}\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eMetacontroller is just a class that injects all directives and a stream of their change detections. If someone passes new value into an @Input in one of directives, we recalculate getters and actualize settings.\u003c/p\u003e\u003cp\u003eWe create an instance of the class in DI provider with a factory:\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"language-TypeScript\"\u003eexport const TUI_TEXTFIELD_WATCHED_CONTROLLER = new InjectionToken\u0026lt;TuiTextfieldController\u0026gt;(\n   'watched textfield controller',\n);\n \nexport const TEXTFIELD_CONTROLLER_PROVIDER: Provider = [\n   TuiDestroyService,\n   {\n       provide: TUI_TEXTFIELD_WATCHED_CONTROLLER,\n       deps: [\n           ChangeDetectorRef,\n           TuiDestroyService,\n           TUI_TEXTFIELD_AUTOCOMPLETE,\n           TUI_TEXTFIELD_CLEANER,\n           TUI_TEXTFIELD_CUSTOM_CONTENT,\n           TUI_TEXTFIELD_EXAMPLE_TEXT,\n           TUI_TEXTFIELD_INPUT_MODE,\n           TUI_TEXTFIELD_LABEL_OUTSIDE,\n           TUI_TEXTFIELD_MAX_LENGTH,\n           TUI_TEXTFIELD_SIZE,\n           TUI_TEXTFIELD_TYPE,\n       ],\n       useFactory: textfieldWatchedControllerFactory,\n   },\n];\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eWe collect the values of tokens and send them into the factory. It does nothing unusual either:\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"language-TypeScript\"\u003eexport function textfieldWatchedControllerFactory(\n   changeDetectorRef: ChangeDetectorRef,\n   destroy$: Observable\u0026lt;void\u0026gt;,\n   ...controllers: [\n       TuiTextfieldAutocompleteDirective,\n       TuiTextfieldCleanerDirective,\n       TuiTextfieldCustomContentDirective,\n       TuiTextfieldExampleTextDirective,\n       TuiTextfieldInputModeDirective,\n       TuiTextfieldLabelOutsideDirective,\n       TuiTextfieldMaxLengthDirective,\n       TuiTextfieldSizeDirective,\n       TuiTextfieldTypeDirective,\n   ]\n): TuiTextfieldController {\n   const change$ = merge(...controllers.map(({change$}) =\u0026gt; change$)).pipe(\n       takeUntil(destroy$),\n\ttap(() =\u0026gt; changeDetectorRef.markForCheck()),\n   );\n \n   change$.subscribe();\n \n   return new TuiTextfieldController(change$, ...controllers);\n}\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eWe then merge change streams of all controllers and subscribe to them. It is cool that we can also add a safe unsubscription after destroy thanks to \u003ca href=\"https://github.com/TinkoffCreditSystems/taiga-ui/blob/main/projects/cdk/services/destroy.service.ts\"\u003eTuiDestroyService\u003c/a\u003e from taiga-ui/cdk.\u003c/p\u003e\u003ch2 id=\"using-in-textfield\"\u003e\u003cstrong\u003eUsing in Textfield\u003c/strong\u003e\u003c/h2\u003e\u003cp\u003eNow we need to connect the metacontroller to PrimitiveTextfield component:\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"language-TypeScript\"\u003e@Component({\n   // …,\n   providers: [TEXTFIELD_CONTROLLER_PROVIDER],\n})\nexport class TuiPrimitiveTextfieldComponent {\n    constructor(\n        @Inject(TUI_TEXTFIELD_WATCHED_CONTROLLER)\n        readonly controller: TuiTextfieldController,\n    ) {}\n \n    get hasCleaner(): boolean {\n       return (\n           this.controller.cleaner \u0026amp;\u0026amp; this.hasValue \u0026amp;\u0026amp; !this.disabled \u0026amp;\u0026amp; !this.readOnly\n       );\n   }\n \n   // ...\n}\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eWe’ve already solved all change detection issues. So, now we can use the controller as usual service from DI. Textfield does not need to know about how it works inside and we always have the ability to replace it in DI if we need it.\u003c/p\u003e\u003cp\u003eTextfield component gets an entity that is collected from nearest directive-controllers found in the DI tree. It means that we can set some setting on the whole form level and then reassign it for the particular input. DI resolves it from bottom to top and finds a particular input setting first.\u003c/p\u003e\u003ch2 id=\"benefits-of-this-approach\"\u003e\u003cstrong\u003eBenefits of this approach\u003c/strong\u003e\u003c/h2\u003e\u003cp\u003eWe created many new entities and, at first glance, overcomplicated the architecture of the library a bit, but let’s take a look at new possibilities that it adds to library users.\u003c/p\u003e\u003ch3 id=\"flexibility\"\u003e\u003cbr\u003eFlexibility\u003c/h3\u003e\u003cp\u003eNow we have very flexible customization. For example, we want to make a form with five inputs of “L” size and without labels ([labelOutside]=“true”).\u003c/p\u003e\u003cp\u003e\u003cstrong\u003eBefore:\u003c/strong\u003e we add controls into form and pass two @Inputs “size” and “labelOutside” for each of them with the same value. Controls do not need them and that is why they just pass them further into Textfield. It does not add any new logic, just makes the bundle size bigger.\u003c/p\u003e\u003cp\u003e\u003cstrong\u003eAfter:\u003c/strong\u003e we can set directives for “size” and “labelOutside” on the whole form and they will be applied for all the controls in the form thanks to DI hierarchical structure. Or we can set the directive straight to the tui-root component and all the controls of the application will have “L” size by default.\u003c/p\u003e\u003cp\u003eControls know nothing about their size or label. Data from DI is used only by basic components in the place where we need it.\u003c/p\u003e\u003ch3 id=\"di-tricks\"\u003eDI tricks\u003c/h3\u003e\u003cp\u003eAngular DI is very powerful. We can set entities, replace, remove or shuffle them. We can make reusable providers that will modify default controller behavior.\u003c/p\u003e\u003cp\u003eFor example, we have a controller with dropdown settings. Dropdown has a width of its content by default. But there are also some components where we want a dropdown to take the size of its host. We can just create a provider for such components that reassigns default value:\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"language-TypeScript\"\u003eexport function fixedDropdownControllerFactory(\n   directive: TuiDropdownControllerDirective | null,\n): TuiDropdownControllerDirective {\n   directive = directive || new TuiDropdownControllerDirective();\n   directive.limitWidth = 'fixed';\n \n   return directive;\n}\n \nexport const FIXED_DROPDOWN_CONTROLLER_PROVIDER: Provider = [\n   {\n       provide: TUI_DROPDOWN_CONTROLLER,\n       deps: [[new Optional(), TuiDropdownControllerDirective]],\n       useFactory: fixedDropdownControllerFactory,\n   },\n];\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eIf we add such a provider into the component's providers, its factory will be called when the component asks for a dropdown controller. It modifies the default value of the setting or creates a directive instance (if there is still no such directive in DI tree). The idea is that we reassign only the default value. If the user binds the directive somewhere and passes this property, Angular will resolve @Input after all DI is structured, so, the user will see their value.\u003c/p\u003e\u003ch3 id=\"lightweight\"\u003eLightweight\u003c/h3\u003e\u003cp\u003eDozens of our components had the same typical @Inputs that they didn’t even need. Now all these @Inputs are hidden in DI. Components are easy to read because they have only their own properties. Moreover, removing these @Inputs reduces the bundle size of the library itself and of all applications that use it. It even makes the amount of used RAM in runtime just a little bit smaller.\u003c/p\u003e\u003ch2 id=\"show-me-the-code\"\u003eShow me the code\u003c/h2\u003e\u003cp\u003eIf you want to explore all the shown code in detail, you can do it on real cases of Taiga UI:\u003c/p\u003e\u003cul\u003e\u003cli\u003e\u003ca href=\"https://github.com/TinkoffCreditSystems/taiga-ui/tree/main/projects/core/directives/textfield-controller\"\u003eController of textfield\u003c/a\u003e, an \u003ca href=\"https://github.com/TinkoffCreditSystems/taiga-ui/blob/main/projects/core/components/primitive-textfield/primitive-textfield.component.ts\"\u003etextfield\u003c/a\u003e itself\u003c/li\u003e\u003cli\u003e\u003ca href=\"https://github.com/TinkoffCreditSystems/taiga-ui/tree/main/projects/core/directives/hint-controller\"\u003eTooltip controllers\u003c/a\u003e, its usage you can also see in textfield\u003c/li\u003e\u003cli\u003e\u003ca href=\"https://github.com/TinkoffCreditSystems/taiga-ui/tree/main/projects/core/directives/dropdown-controller\"\u003eDropdown controllers\u003c/a\u003e and their usage in \u003ca href=\"https://github.com/TinkoffCreditSystems/taiga-ui/blob/main/projects/core/components/hosted-dropdown/hosted-dropdown.component.ts\"\u003ehosted-dropdown\u003c/a\u003e\u003c/li\u003e\u003c/ul\u003e\u003ch2 id=\"finally\"\u003e\u003cstrong\u003eFinally\u003c/strong\u003e\u003c/h2\u003e\u003cp\u003eSuch a tricky combination of entities may look difficult but you easily get used to it after a couple of real use cases of controllers. Ultimately we do not even use any unusual tools, just Angular directive, DI-tokens and factories.\u003c/p\u003e\u003cp\u003eSuch a pattern will be excessive for small applications or libraries but it can give you tangible benefits and help to save high speed of growth without accumulating technical debt on some level of scale.\u003c/p\u003e\u003cblockquote\u003eFollow me on Twitter to see more content, tips \u0026amp; tricks about Angular: @\u003ca href=\"https://twitter.com/marsibarsi\"\u003emarsibarsi\u003c/a\u003e\u003c/blockquote\u003e","comment_id":"617ad04317e466f35de2d26c","feature_image":"https://images.indepth.dev/images/2021/10/The-controllers-of-component-concept-in-Angular_-part-II.png","featured":false,"visibility":"public","created_at":"2021-10-28T19:30:59.000+03:00","updated_at":"2021-10-29T11:19:39.000+03:00","published_at":"2021-10-29T11:19:39.000+03:00","custom_excerpt":"The second part of how we organized the system of settings for all textfields in Taiga UI with the power of Dependency Injection in Angular.","codeinjection_head":"{\"community_link\":\"https://github.com/indepth-dev/community/discussions/195\"}","codeinjection_foot":null,"custom_template":null,"canonical_url":null,"email_recipient_filter":"none","authors":[{"id":"5e62dc3ad724c36e46b222ae","name":"Roman Sedov","slug":"sedov","profile_image":"https://images.indepth.dev/images/2021/06/gde-avatar.png","cover_image":null,"bio":"Frontend Developer at Tinkoff.ru","website":"http://marsibarsi.me/en","location":null,"facebook":null,"twitter":"@marsibarsi","meta_title":null,"meta_description":null,"url":"https://admin.indepth.dev/author/sedov/"}],"tags":[{"id":"5d403979679ce6202b744976","name":"angular","slug":"angular","description":"Questions about Angular (not to be confused with AngularJS), the web framework from Google. Use this tag for Angular questions which are not specific to an individual version. For the older AngularJS (1.x) web framework, use the angularjs tag.","feature_image":null,"visibility":"public","meta_title":null,"meta_description":null,"og_image":null,"og_title":null,"og_description":null,"twitter_image":null,"twitter_title":null,"twitter_description":null,"codeinjection_head":null,"codeinjection_foot":null,"canonical_url":null,"accent_color":null,"url":"https://admin.indepth.dev/tag/angular/"},{"id":"5ddee77ab2bc9211f8af6d76","name":"dependency-injection","slug":"dependency-injection","description":null,"feature_image":null,"visibility":"public","meta_title":null,"meta_description":null,"og_image":null,"og_title":null,"og_description":null,"twitter_image":null,"twitter_title":null,"twitter_description":null,"codeinjection_head":null,"codeinjection_foot":null,"canonical_url":null,"accent_color":null,"url":"https://admin.indepth.dev/tag/dependency-injection/"},{"id":"5ddecfafb2bc9211f8af6a61","name":"components","slug":"components","description":null,"feature_image":null,"visibility":"public","meta_title":null,"meta_description":null,"og_image":null,"og_title":null,"og_description":null,"twitter_image":null,"twitter_title":null,"twitter_description":null,"codeinjection_head":null,"codeinjection_foot":null,"canonical_url":null,"accent_color":null,"url":"https://admin.indepth.dev/tag/components/"}],"primary_author":{"id":"5e62dc3ad724c36e46b222ae","name":"Roman Sedov","slug":"sedov","profile_image":"https://images.indepth.dev/images/2021/06/gde-avatar.png","cover_image":null,"bio":"Frontend Developer at Tinkoff.ru","website":"http://marsibarsi.me/en","location":null,"facebook":null,"twitter":"@marsibarsi","meta_title":null,"meta_description":null,"url":"https://admin.indepth.dev/author/sedov/","_id":1032},"primary_tag":{"id":"5d403979679ce6202b744976","name":"angular","slug":"angular","description":"Questions about Angular (not to be confused with AngularJS), the web framework from Google. Use this tag for Angular questions which are not specific to an individual version. For the older AngularJS (1.x) web framework, use the angularjs tag.","feature_image":null,"visibility":"public","meta_title":null,"meta_description":null,"og_image":null,"og_title":null,"og_description":null,"twitter_image":null,"twitter_title":null,"twitter_description":null,"codeinjection_head":null,"codeinjection_foot":null,"canonical_url":null,"accent_color":null,"url":"https://admin.indepth.dev/tag/angular/"},"url":"https://admin.indepth.dev/the-controllers-of-component-concept-in-angular-part-ii/","excerpt":"The second part of how we organized the system of settings for all textfields in Taiga UI with the power of Dependency Injection in Angular.","reading_time":7,"access":true,"send_email_when_published":false,"og_image":null,"og_title":null,"og_description":null,"twitter_image":"https://images.indepth.dev/images/2021/10/The-controllers-of-component-concept-in-Angular_-part-II2.png","twitter_title":null,"twitter_description":null,"meta_title":null,"meta_description":null,"email_subject":null,"frontmatter":null,"_id":1486}],"author":{"id":"1","name":"Max Koretskyi","slug":"maxkoretskyi","profile_image":"https://images.indepth.dev/images/2022/07/ava.jpg","cover_image":"https://images.indepth.dev/images/2019/07/015100-634_Manta-Ray-2.jpg","bio":"Max is a self-taught software engineer that believes in fundamental knowledge and hardcore learning. He’s the founder of inDepth.dev community and one of the top users on StackOverflow (70k rep).","website":null,"location":"Ukraine","facebook":null,"twitter":"@maxkoretskyi","meta_title":null,"meta_description":null,"count":{"posts":56},"url":"https://admin.indepth.dev/author/maxkoretskyi/","_id":1001},"reviewers":[],"discussion":{"author":{"login":"maxkoretskyi","avatarUrl":"https://avatars.githubusercontent.com/u/6124091?u=786a99a4083f534061505244c44bcdb6708cfe96\u0026v=4"},"body":"The article explores common elements used for DOM manipulation in Angular with a particular focus on ViewContainerRef. Learn why they are needed, how they work and when you need to use which.\r\n\r\nRead the article [here](https://indepth.dev/posts/1052/exploring-angular-dom-manipulation-techniques-using-viewcontainerref).","url":"https://github.com/indepth-dev/community/discussions/71","createdAt":"2021-05-16T18:53:46Z","reactions":{"nodes":[{"content":"THUMBS_UP"},{"content":"THUMBS_UP"}]},"comments":{"totalCount":5,"nodes":[{"author":{"login":"pardeepr08","avatarUrl":"https://avatars.githubusercontent.com/u/6290194?v=4"},"body":"Awesome Maxim. I am really inspired after reading this article and a sense of inquisitiveness to know the angular internals has arisen.","url":"https://github.com/indepth-dev/community/discussions/71#discussioncomment-860773","createdAt":"2021-06-12T05:34:47Z","reactions":{"nodes":[]},"isAnswer":false,"replies":{"totalCount":0,"nodes":[]}},{"author":{"login":"ABSTRACT123","avatarUrl":"https://avatars.githubusercontent.com/u/24543466?v=4"},"body":"hello,\r\n\r\nThanks for the article. I was looking for a way to dynamically insert html elements into an element.\r\n\r\nfor example I have \r\n\r\n`\u003cul #somelist\u003e\u003c/ul\u003e`\r\n\r\nI would like to programmatically insert li elements into the #somelist elementRef.\r\n\r\nThere are indeed easy ways to do that, like with ngFor. But it is just for the sake of learning/understanding Angular. I also could use JS to directly manipulate the document with createElement and appendChild... I also know how to dynamically insert components but was wondering if there was a way to just insert a template?\r\n\r\nThank you.","url":"https://github.com/indepth-dev/community/discussions/71#discussioncomment-927770","createdAt":"2021-06-27T12:46:14Z","reactions":{"nodes":[]},"isAnswer":false,"replies":{"totalCount":3,"nodes":[{"author":{"login":"maxkoretskyi","avatarUrl":"https://avatars.githubusercontent.com/u/6124091?u=786a99a4083f534061505244c44bcdb6708cfe96\u0026v=4"},"body":"It should be possible by querying the `#somelist` element as `@ViewChild('somelist', {read: ViewContainerRef) container` and your template as `@ViewChild('mytpl')`, then you can call `createEmbeddedView` on the container and pass the reference to the mytpl.","url":"https://github.com/indepth-dev/community/discussions/71#discussioncomment-936283","createdAt":"2021-06-29T05:20:11Z","reactions":{"nodes":[]}},{"author":{"login":"ABSTRACT123","avatarUrl":"https://avatars.githubusercontent.com/u/24543466?v=4"},"body":"yes but the question is what is the best way to generate mytpl on the fly?\r\n\r\nIn this very interesting article you explain how to create components on the fly. This might be what I am looking for.\r\nhttps://hackernoon.com/here-is-what-you-need-to-know-about-dynamic-components-in-angular-ac1e96167f9e\r\n\r\nThank you\r\n\r\nedit: with on the fly component creation, I was able to generate my list but basically I had to generate the template as a string of concatenated `\u003cli\u003eoption n\u003c/li\u003e`\r\n\r\nI couldn't use any structural directive nor any variable like {{title}}. Since it is a component and it is compiled at least *ngFor or \u003ctemplate [ngFor]... should work\r\n\r\nedit2: all is fine now I forgot to add an import of CommonModule\r\n\r\nconst tmpModule = NgModule({declarations: [tmpCmp], imports:[CommonModule]})(class {});...","url":"https://github.com/indepth-dev/community/discussions/71#discussioncomment-938064","createdAt":"2021-06-29T12:07:25Z","reactions":{"nodes":[{"content":"THUMBS_UP"}]}}]}},{"author":{"login":"PChristoph","avatarUrl":"https://avatars.githubusercontent.com/u/18269443?v=4"},"body":"Very nice article, thank you!\r\n\r\nOne thing I stumbled accross: I didn't quite understand the section about **ngTemplateOutlet**. Maybe some elaboration or the actual generated output could improve the article.\r\n\r\nCould you please explain how it would be possible to create something recursively: attach a Component to a Component as a child, like in a TreeView? When using the componentfactory, we are getting back a ComponentRef - how can we go on with it?","url":"https://github.com/indepth-dev/community/discussions/71#discussioncomment-2533958","createdAt":"2022-04-08T23:07:09Z","reactions":{"nodes":[]},"isAnswer":false,"replies":{"totalCount":1,"nodes":[{"author":{"login":"maxkoretskyi","avatarUrl":"https://avatars.githubusercontent.com/u/6124091?u=786a99a4083f534061505244c44bcdb6708cfe96\u0026v=4"},"body":"Not sure I understand your question. A component can add other components only as attached to view container ref. Each component can have view container ref in its own template. So you can keep inserting components into components recursively :)","url":"https://github.com/indepth-dev/community/discussions/71#discussioncomment-2536453","createdAt":"2022-04-09T15:18:36Z","reactions":{"nodes":[]}}]}}]}},"featureImageAttr":"","jobs":[{"published_at_timestamp":1671227023,"id":131929,"image":"https://fra1.digitaloceanspaces.com/images.indepth.dev/jobs/131929/1671227023349","name":"Sr. Angular Developer","technology":["HTML5","CSS","Javascript"],"link":"https://www.indeed.com/viewjob?cmp=Snowrelic-Inc\u0026t=Senior+Angular+Developer\u0026jk=a0e61409f29d553c\u0026q=Frontend\u0026vjs=3","company":"Snowrelic INC","salary_from":70000,"salary_to":152000,"location":"Worldwide","description":"\u003cp\u003e\u003cstrong\u003eFull Job Description\u003c/strong\u003e\u003c/p\u003e\u003cul\u003e\u003cli\u003eCommunicating with external web services as and when required;\u003c/li\u003e\u003cli\u003eBachelors/Masters degree in Computer Science or equivalent education from Tier 1 or Tier 2 colleges;\u003c/li\u003e\u003cli\u003eWork closely with a cross-functional teams that includes product owners, backend developers and designers;\u003c/li\u003e\u003cli\u003eComfortable using Unix / Linux machines from command prompt;\u003c/li\u003e\u003cli\u003eLiaising with the back-end developer to help in the process of building the RESTful API;\u003c/li\u003e\u003cli\u003eStrong coding and designing skills in JavaScript, jQuery, Bootstrap, HTML5 and CSS3;\u003c/li\u003e\u003cli\u003eWriting tested, idiomatic, and documented JavaScript/typescript, Angular material, HTML and CSS;\u003c/li\u003e\u003cli\u003eDeveloping fast and highly scalable (responsive) web and mobile sites, using HTML5, CSS3 and latest Javascript standards and best practices;\u003c/li\u003e\u003cli\u003eIn addition to AngularJS it will be good to have experience in other such front-end JavaScript frameworks like BackBoneJS, EmberJs, KnockOutJS etc;\u003c/li\u003e\u003cli\u003eEnsure the technical feasibility of UI/UX designs;\u003c/li\u003e\u003cli\u003eEnsuring high performance and standardized coding;\u003c/li\u003e\u003cli\u003eStrong understanding of HTML5, CSS3 \u0026amp; Javascript and relevant frameworks such as Bootstrap, Angular JS and others;\u003c/li\u003e\u003cli\u003eStrong communication and analytical skills are must;\u003c/li\u003e\u003cli\u003eCoordinating the workflow between the graphic designer, the HTML coder, and self.\u003c/li\u003e\u003c/ul\u003e\u003cp\u003e\u003cstrong\u003eRequirements:\u003c/strong\u003e\u003c/p\u003e\u003cul\u003e\u003cli\u003eDocumenting the code inline using JSDoc or other conventions;\u003c/li\u003e\u003cli\u003eOwn the product development from scratch – Architect scalable, distributed and large scale web and mobile solutions from scratch;\u003c/li\u003e\u003cli\u003eReport development progress to management team;\u003c/li\u003e\u003cli\u003eExperience with building the infrastructure for serving the front-end app and assets;\u003c/li\u003e\u003cli\u003eEnsuring a clear dependency chain, in regard to the app logic as well as the file system;\u003c/li\u003e\u003cli\u003eCode for fresh development and to troubleshoot and resolve issues;\u003c/li\u003e\u003cli\u003eEnsure test driven development (TDD) methodologies are deployed to execute project;\u003c/li\u003e\u003cli\u003eProfessional, precise communication skills;\u003c/li\u003e\u003cli\u003eThorough understanding of project life cycle, Angular Platform, API consumption;\u003c/li\u003e\u003cli\u003eStrong knowledge of Angular best practices, coding standards and commonly used modules;\u003c/li\u003e\u003cli\u003eKeep the team charged up with challenging work;\u003c/li\u003e\u003cli\u003eCreating configuration, build, and test scripts for Continuous Integration environments;\u003c/li\u003e\u003cli\u003eWriting non-blocking, loosely coupled code and resorting to advanced techniques when needed;\u003c/li\u003e\u003cli\u003eExperience in enterprise global networks, cybersecurity, and cloud communications will be an added advantage;\u003c/li\u003e\u003cli\u003eCreating e2e test suites for all components, and running them with Protractor (or a well reasoned alternative).\u003c/li\u003e\u003c/ul\u003e\u003cp\u003eJob Types: Full-time, Contract\u003c/p\u003e\u003cp\u003eSalary: $70,247.71 - $152,664.62 per year\u003c/p\u003e\u003cp\u003eSchedule:\u003c/p\u003e\u003cul\u003e\u003cli\u003e8 hour shift\u003c/li\u003e\u003c/ul\u003e\u003cp\u003eWork Location: Remote\u003c/p\u003e","status":1,"is_remote":1,"is_closed":0,"created_at":"2022-12-16T21:43:43.000Z","updated_at":"2022-12-16T21:43:53.000Z","objectID":"131929","_highlightResult":{"name":{"value":"Sr. \u003cem\u003eAngular\u003c/em\u003e Developer","matchLevel":"full","fullyHighlighted":false,"matchedWords":["angular"]},"company":{"value":"Snowrelic INC","matchLevel":"none","matchedWords":[]},"location":{"value":"Worldwide","matchLevel":"none","matchedWords":[]}}},{"published_at_timestamp":1671226800,"id":131927,"image":"https://fra1.digitaloceanspaces.com/images.indepth.dev/jobs/131927/1671226800346","name":"Full Stack Developer (Angular and .NET)","technology":["C#","Angular","HTML","CSS"],"link":"https://www.indeed.com/viewjob?cmp=Port-Technology-Services\u0026t=Full+Stack+Developer\u0026jk=0bb3966072b2b96a\u0026q=Frontend\u0026vjs=3","company":"Port Technology Services","salary_from":93000,"salary_to":118000,"location":"Worldwide","description":"\u003cp\u003e\u003cstrong\u003eFull Job Description\u003c/strong\u003e\u003c/p\u003e\u003cp\u003eWe are a growing software company looking for a Full Stack Developer to join our team. Port Technology Services builds high-quality code for the container shipping industry, developing solutions for a range of customers including container ports, trucking companies, and other industry stakeholders.\u003c/p\u003e\u003cp\u003eWe’re looking for individuals who care deeply about best practices, leveraging patterns, and writing quality software. If you are the kind of person who shares these values and understands why they're important - you are a good fit for our team.\u003c/p\u003e\u003cp\u003eWhat you’ll do:\u003c/p\u003e\u003cul\u003e\u003cli\u003eWork closely with a small team shipping lots of code\u003c/li\u003e\u003cli\u003eArchitect, design, and build enterprise applications\u003c/li\u003e\u003cli\u003eContribute to both new and existing applications\u003c/li\u003e\u003cli\u003eConduct code reviews and provide feedback\u003c/li\u003e\u003cli\u003eBuild front-end web applications\u003c/li\u003e\u003cli\u003eBuild back-end web and server applications\u003c/li\u003e\u003cli\u003eDesign domain models and work with SQL databases\u003c/li\u003e\u003cli\u003eParticipate in code reviews\u003c/li\u003e\u003cli\u003eMonitor production applications and troubleshoot bugs\u003c/li\u003e\u003cli\u003eDevelop and put in place best practices for the team\u003c/li\u003e\u003c/ul\u003e\u003cp\u003eSkills and experience:\u003c/p\u003e\u003cul\u003e\u003cli\u003e5+ years of experience building enterprise web applications\u003c/li\u003e\u003cli\u003e.NET Core C# development experience\u003c/li\u003e\u003cli\u003eUI/UX design experience\u003c/li\u003e\u003cli\u003eSolid understanding of Angular 2+, HTML, and CSS\u003c/li\u003e\u003cli\u003eSolid understanding of architecture and design patterns.\u003c/li\u003e\u003cli\u003eUnderstanding of agile software development practices\u003c/li\u003e\u003cli\u003eProficiency in written and oral communication\u003c/li\u003e\u003cli\u003eAbility to collaborate well on a team\u003c/li\u003e\u003cli\u003eCan deliver solutions independently\u003c/li\u003e\u003cli\u003eCommitment to learning and understanding trends and practices in modern software development.\u003c/li\u003e\u003c/ul\u003e\u003cp\u003eBenefits - Health, dental, vision, short-term disability, long-term disability, and life insurance offered. Plus holiday, vacation, and sick leave.\u003c/p\u003e\u003cp\u003ePort Technology Services is an equal opportunity employer.\u003c/p\u003e\u003cp\u003ePort Technology Services, https://www.porttechnologyservices.com\u003c/p\u003e\u003cp\u003eJob Type: Full-time\u003c/p\u003e\u003cp\u003eBenefits:\u003c/p\u003e\u003cul\u003e\u003cli\u003eDental insurance\u003c/li\u003e\u003cli\u003eHealth insurance\u003c/li\u003e\u003cli\u003eLife insurance\u003c/li\u003e\u003cli\u003ePaid time off\u003c/li\u003e\u003cli\u003eVision insurance\u003c/li\u003e\u003c/ul\u003e\u003cp\u003eSchedule:\u003c/p\u003e\u003cul\u003e\u003cli\u003eMonday to Friday\u003c/li\u003e\u003c/ul\u003e\u003cp\u003eEducation:\u003c/p\u003e\u003cul\u003e\u003cli\u003eBachelor's (Preferred)\u003c/li\u003e\u003c/ul\u003e\u003cp\u003eExperience:\u003c/p\u003e\u003cul\u003e\u003cli\u003eAngular: 5 years (Preferred)\u003c/li\u003e\u003cli\u003e.NET: 5 years (Preferred)\u003c/li\u003e\u003cli\u003eUX/UI design: 1 year (Preferred)\u003c/li\u003e\u003c/ul\u003e\u003cp\u003eWork Location: Remote\u003c/p\u003e","status":1,"is_remote":1,"is_closed":0,"created_at":"2022-12-16T21:40:00.000Z","updated_at":"2022-12-16T21:43:56.000Z","objectID":"131927","_highlightResult":{"name":{"value":"Full Stack Developer (\u003cem\u003eAngular\u003c/em\u003e and .NET)","matchLevel":"full","fullyHighlighted":false,"matchedWords":["angular"]},"company":{"value":"Port Technology Services","matchLevel":"none","matchedWords":[]},"location":{"value":"Worldwide","matchLevel":"none","matchedWords":[]}}},{"published_at_timestamp":1671226687,"id":131926,"image":"https://fra1.digitaloceanspaces.com/images.indepth.dev/jobs/131926/1671226687545","name":"Remote Senior Full Stack Developer (Node.js and Angular)","technology":["Angular","Node.js"],"link":"https://www.indeed.com/viewjob?cmp=Turing\u0026t=Senior+Full+Stack+Developer\u0026jk=899a2507a637e88a\u0026q=Frontend\u0026vjs=3","company":"Turing","salary_from":94000,"salary_to":119000,"location":"Worldwide","description":"\u003cp\u003e\u003cstrong\u003eFull Job Description\u003c/strong\u003e\u003c/p\u003e\u003cp\u003e\u003cstrong\u003eAbout Turing.com:\u003c/strong\u003e\u003c/p\u003e\u003cp\u003eBased in Palo Alto, California, Turing aims to unleash the world’s untapped human potential. We use AI to source, evaluate, hire, onboard, and manage engineers 100% remotely via a bigger platform that we call the “Talent Cloud”.\u003c/p\u003e\u003cp\u003eWe recently achieved unicorn status with a valuation of $1.1B, after raising over $140M in financing over four rounds of funding. 100+ companies including companies like Johnson \u0026amp; Johnson, Pepsi, Dell, and Disney+ have hired Turing developers.\u003c/p\u003e\u003cp\u003e\u003cstrong\u003eApply to this job here: \u003c/strong\u003ehttp://turing.com/s/AQxyvH\u003c/p\u003e\u003cp\u003e\u003cstrong\u003eWork for US companies from the comfort of your home and earn in USD\u003c/strong\u003e\u003c/p\u003e\u003cp\u003e\u003cstrong\u003eOnly candidates with 5+ years of software development experience are eligible for this role\u003c/strong\u003e.\u003c/p\u003e\u003cp\u003eTuring.com is looking to hire a Senior Full Stack Developer on behalf of a US based design tech brand. As a developer, selected professionals will need to actively contribute in different processes to build out intuitive solutions capable of engaging users. Developers will need to take ownership of aligned workflows including tasks like development, maintenance, support and more.\u003c/p\u003e\u003cp\u003e\u003cstrong\u003eHere’s everything you need to know to become a Remote Senior Full Stack Developer at Turing: \u003c/strong\u003ehttp://turing.com/s/1F3Z8T\u003c/p\u003e\u003cp\u003e\u003cstrong\u003eAll geared up to become a Turing remote developer at a leading company? Take our exciting coding challenge: \u003c/strong\u003ehttp://turing.com/s/AQxyvH\u003c/p\u003e\u003cp\u003e\u003cstrong\u003eJob Responsibilities:\u003c/strong\u003e\u003c/p\u003e\u003cul\u003e\u003cli\u003eContribute to designing and developing interactive interfaces of web pages\u003c/li\u003e\u003cli\u003eAssist in different development processes related to front-end and back-end web components\u003c/li\u003e\u003cli\u003eHelp developers to build high-performance web applications from scratch\u003c/li\u003e\u003cli\u003eWrite clean, efficient, readable codes and review existing codes for optimization\u003c/li\u003e\u003cli\u003eWork closely different stakeholders, including developers to produce high-quality solutions\u003c/li\u003e\u003cli\u003eWork closely with cross-functional teams to analyze entire web development cycle with documentation\u003c/li\u003e\u003cli\u003eLead processes like designing, maintenance and implementation of web service APIs\u003c/li\u003e\u003cli\u003eTake ownership of complete application development, maintenance, and support\u003c/li\u003e\u003c/ul\u003e\u003cp\u003e\u003cstrong\u003eJob Requirements:\u003c/strong\u003e\u003c/p\u003e\u003cul\u003e\u003cli\u003eBachelor’s/Master’s degree in Engineering, Computer Science (or equivalent experience)\u003c/li\u003e\u003cli\u003eAt least 5 of experience in working as a Full Stack Developer\u003c/li\u003e\u003cli\u003eKnowledge of technologies like Node.js and Angular will be vital\u003c/li\u003e\u003cli\u003eMust have proven experience of working with languages such as Python\u003c/li\u003e\u003cli\u003eMust possess fluency in English with excellent communication skills\u003c/li\u003e\u003c/ul\u003e\u003cp\u003e\u003cstrong\u003ePerks \u0026amp; Benefits:\u003c/strong\u003e\u003c/p\u003e\u003cul\u003e\u003cli\u003eElite U.S. jobs that provide higher salaries than local standards\u003c/li\u003e\u003cli\u003eExperience rapid career growth\u003c/li\u003e\u003cli\u003eNo visa requirements to work with the top US companies\u003c/li\u003e\u003cli\u003eBetter work-life balance\u003c/li\u003e\u003cli\u003eExclusive Developer Community\u003c/li\u003e\u003cli\u003eWork alongside a community of Google, Facebook, and Microsoft engineers\u003c/li\u003e\u003cli\u003eUpskilling workshops and career development sessions\u003c/li\u003e\u003cli\u003eNetworking meetups\u003c/li\u003e\u003cli\u003eReferral programs\u003c/li\u003e\u003cli\u003eFlexibility to work from anywhere in the world\u003c/li\u003e\u003c/ul\u003e\u003cp\u003e\u003cstrong\u003eHow to Become a Turing Developer:\u003c/strong\u003e\u003c/p\u003e\u003cul\u003e\u003cli\u003eCreate your account on http://turing.com/s/AQxyvH\u003c/li\u003e\u003cli\u003eFill in your basic information (name, number, location, previous salary, experience, etc.)\u003c/li\u003e\u003cli\u003eSolve multiple-choice questions\u003c/li\u003e\u003cli\u003eSchedule a technical interview\u003c/li\u003e\u003cli\u003eFinal Onboarding\u003c/li\u003e\u003c/ul\u003e\u003cp\u003e\u003cstrong\u003eApply today before the vacancies are filled. Looking for more exciting job opportunities? Find more Turing US software jobs now: \u003c/strong\u003ehttp://turing.com/s/K8WU2H\u003c/p\u003e\u003cp\u003e\u003cstrong\u003eHear from developers themselves. Read Turing.com reviews here: \u003c/strong\u003ehttp://turing.com/s/eBVz9S\u003c/p\u003e\u003cp\u003eJob Type: Full-time\u003c/p\u003e\u003cp\u003eBenefits:\u003c/p\u003e\u003cul\u003e\u003cli\u003eFlexible schedule\u003c/li\u003e\u003c/ul\u003e\u003cp\u003eSchedule:\u003c/p\u003e\u003cul\u003e\u003cli\u003eMonday to Friday\u003c/li\u003e\u003c/ul\u003e\u003cp\u003eEducation:\u003c/p\u003e\u003cul\u003e\u003cli\u003eBachelor's (Preferred)\u003c/li\u003e\u003c/ul\u003e\u003cp\u003eExperience:\u003c/p\u003e\u003cul\u003e\u003cli\u003eSoftware development: 3 years (Preferred)\u003c/li\u003e\u003c/ul\u003e\u003cp\u003eLanguage:\u003c/p\u003e\u003cul\u003e\u003cli\u003eEnglish (Preferred)\u003c/li\u003e\u003c/ul\u003e\u003cp\u003eWork Location: Remote\u003c/p\u003e","status":1,"is_remote":1,"is_closed":0,"created_at":"2022-12-16T21:38:07.000Z","updated_at":"2022-12-16T21:43:57.000Z","objectID":"131926","_highlightResult":{"name":{"value":"Remote Senior Full Stack Developer (Node.js and \u003cem\u003eAngular\u003c/em\u003e)","matchLevel":"full","fullyHighlighted":false,"matchedWords":["angular"]},"company":{"value":"Turing","matchLevel":"none","matchedWords":[]},"location":{"value":"Worldwide","matchLevel":"none","matchedWords":[]}}},{"published_at_timestamp":1671143038,"id":131924,"image":"https://fra1.digitaloceanspaces.com/images.indepth.dev/jobs/131924/1671143038252","name":"Senior Angular Developer","technology":["Angular","HTML5","CSS"],"link":"https://www.indeed.com/viewjob?cmp=Launching-Point\u0026t=Senior+Angular+Developer\u0026jk=87bb13fc1e95d38b\u0026q=Frontend\u0026vjs=3","company":"Launching Point","salary_from":130000,"salary_to":155000,"location":"United States","description":"\u003cp\u003e\u003cstrong\u003eFull Job Description\u003c/strong\u003e\u003c/p\u003e\u003cp\u003eOur company is seeking an Senior Angular Developer who has the technical ability to implement user interfaces using JavaScript and the Angular framework. You will need to know the best practices and modern ways of creating interfaces and ensure the interface is able to interact with backend APIs. You will also need to have great communication and collaboration skills as you will need to interact with fellow frontend and backend developers regularly to ensure components can be integrated together.\u003c/p\u003e\u003cp\u003eResponsibilities\u003c/p\u003e\u003cul\u003e\u003cli\u003eBuild, Optimize and Maintain Front-End Web Applications\u003c/li\u003e\u003cli\u003eMaintain high performance and compatibility across platforms and devices\u003c/li\u003e\u003cli\u003eWriting proven, idiomatic, and documented JavaScript, HTML, and CSS\u003c/li\u003e\u003cli\u003eUnderstanding what is needed for a smooth workflow between you, front-end developers, and designers\u003c/li\u003e\u003cli\u003eCommunicate carefully with the back-end department to help create a cutting-edge RESTful API.\u003c/li\u003e\u003cli\u003eIntegrate external web services\u003c/li\u003e\u003c/ul\u003e\u003cp\u003eRequired skills and qualifications\u003c/p\u003e\u003cul\u003e\u003cli\u003eExcellence in modern Javascript and HTML5\u003c/li\u003e\u003cli\u003eAbility to communicate thoroughly with all involved departments\u003c/li\u003e\u003cli\u003eExtensive previous experience with AngularJS, its best practices, and popular modules\u003c/li\u003e\u003cli\u003eAbility to create standalone, reusable, and testable modules and components based on AngularJS core elements and modules.\u003c/li\u003e\u003cli\u003eAbility to maintain clean and consistent project dependencies\u003c/li\u003e\u003cli\u003eKnowledge of SEO best practices for single page applications.\u003c/li\u003e\u003cli\u003eExtensive knowledge of CSS and JS animations.\u003c/li\u003e\u003c/ul\u003e\u003cp\u003eWhat we offer\u003c/p\u003e\u003cul\u003e\u003cli\u003e100% Remote\u003c/li\u003e\u003cli\u003eOne of the top workplaces\u003c/li\u003e\u003cli\u003eFull Benefits\u003c/li\u003e\u003cli\u003eClose to 5.0 star Glassdoor reviews!\u003c/li\u003e\u003c/ul\u003e\u003cp\u003eJob Type: Full-time\u003c/p\u003e\u003cp\u003ePay: $130,000.00 - $155,000.00 per year\u003c/p\u003e\u003cp\u003eBenefits:\u003c/p\u003e\u003cul\u003e\u003cli\u003e401(k)\u003c/li\u003e\u003cli\u003e401(k) matching\u003c/li\u003e\u003cli\u003eDental insurance\u003c/li\u003e\u003cli\u003eFlexible schedule\u003c/li\u003e\u003cli\u003eHealth insurance\u003c/li\u003e\u003cli\u003ePaid time off\u003c/li\u003e\u003cli\u003eVision insurance\u003c/li\u003e\u003c/ul\u003e\u003cp\u003eCompensation package:\u003c/p\u003e\u003cul\u003e\u003cli\u003eYearly pay\u003c/li\u003e\u003c/ul\u003e\u003cp\u003eExperience level:\u003c/p\u003e\u003cul\u003e\u003cli\u003e7 years\u003c/li\u003e\u003c/ul\u003e\u003cp\u003eSchedule:\u003c/p\u003e\u003cul\u003e\u003cli\u003eMonday to Friday\u003c/li\u003e\u003c/ul\u003e\u003cp\u003eExperience:\u003c/p\u003e\u003cul\u003e\u003cli\u003eFront-end development: 6 years (Required)\u003c/li\u003e\u003cli\u003eAngular: 6 years (Required)\u003c/li\u003e\u003c/ul\u003e\u003cp\u003eWork Location: Remote\u003c/p\u003e","status":1,"is_remote":1,"is_closed":0,"created_at":"2022-12-15T22:23:58.000Z","updated_at":"2022-12-15T22:24:13.000Z","objectID":"131924","_highlightResult":{"name":{"value":"Senior \u003cem\u003eAngular\u003c/em\u003e Developer","matchLevel":"full","fullyHighlighted":false,"matchedWords":["angular"]},"company":{"value":"Launching Point","matchLevel":"none","matchedWords":[]},"location":{"value":"United States","matchLevel":"none","matchedWords":[]}}}]},"__N_SSP":true},"page":"/posts/[id]/[slug]","query":{"id":"1052","slug":"exploring-angular-dom-manipulation-techniques-using-viewcontainerref"},"buildId":"Wdpo_PLozk3nb1Yvp1Dg8","isFallback":false,"gssp":true}</script><script nomodule="" src="/_next/static/chunks/polyfills-b6547c25d319e91725b4.js"></script><script src="/_next/static/chunks/webpack-856b8207c163cd7c3d15.js" async=""></script><script src="/_next/static/chunks/framework.00682290c82ab9e4c725.js" async=""></script><script src="/_next/static/chunks/ef4fb35a947a2b84c70247a977ca030d982645e5.1375806317f992dcaef2.js" async=""></script><script src="/_next/static/chunks/125d3b0e21a6b73f1af8f05d67b65091080109e7.4b7c534621a41e0014c2.js" async=""></script><script src="/_next/static/chunks/main-7a564c67f808345d71b7.js" async=""></script><script src="/_next/static/chunks/3f4d35958c889996dc6a89adc8c568f525dcca2f.115d0c9540e8ad25778c.js" async=""></script><script src="/_next/static/chunks/33333ed7c72b7c5f0328d362594a8fde0748e556.89370d1dd1d64a48361e.js" async=""></script><script src="/_next/static/chunks/4a73902f4e5293a2a456800e2c90b2df21e61e8c.ac0ac1bdd37639b787e6.js" async=""></script><script src="/_next/static/chunks/0f33f4af056ca188bb25f0a8e46a6ba44ea51fea.ed4b442ed583ce4a22f6.js" async=""></script><script src="/_next/static/chunks/pages/_app-4865e99f5ffe990eafd1.js" async=""></script><script src="/_next/static/chunks/6016378542ccab9ace7b0f516bab1ccd305127a2.520c7969e4d84d13c175.js" async=""></script><script src="/_next/static/chunks/a97a4e334284941b676644ab50b32734694a25b1.db3bbb890d21262281bf.js" async=""></script><script src="/_next/static/chunks/7304e85ffd654966cc22fcd79fbd623a90f148ba.0ddc8b6da9ee9927d483.js" async=""></script><script src="/_next/static/chunks/d3ecd2998afccbe384f6be1144729524e058db15.9b443bac523215019128.js" async=""></script><script src="/_next/static/chunks/4f8a4dba8efb158c2c8775fe8e83bcf611fac19f.f8e0cca8325f75245df6.js" async=""></script><script src="/_next/static/chunks/b572927ff359f612463b475ced2612aa31c8a8e5.4bde6eb91ee3720724cc.js" async=""></script><script src="/_next/static/chunks/b572927ff359f612463b475ced2612aa31c8a8e5_CSS.6164c81b6ed04bb13dbd.js" async=""></script><script src="/_next/static/chunks/d1416cc233fae1398c68355baa71163a6c28c85d.178dcf1202156b893f85.js" async=""></script><script src="/_next/static/chunks/3ee32958cf711083ff89cd5c1c32184781f5f363.a6bfd25ef4e7a0da7256.js" async=""></script><script src="/_next/static/chunks/13fbcad85699d91d35c158198523365d1a43e10e.4d6822e657e8ab54c624.js" async=""></script><script src="/_next/static/chunks/8cd0266693d4ff21030fff806b8813080260b103.80667331b8607ac89cbf.js" async=""></script><script src="/_next/static/chunks/8cd0266693d4ff21030fff806b8813080260b103_CSS.8507eabb49fbf1273205.js" async=""></script><script src="/_next/static/chunks/pages/posts/%5Bid%5D/%5Bslug%5D-a0d573f8beed5f83aea7.js" async=""></script><script src="/_next/static/Wdpo_PLozk3nb1Yvp1Dg8/_buildManifest.js" async=""></script><script src="/_next/static/Wdpo_PLozk3nb1Yvp1Dg8/_ssgManifest.js" async=""></script></body></html>